var Xc=Object.defineProperty;var Jc=(n,t,e)=>t in n?Xc(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ge=(n,t,e)=>Jc(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();const ws=globalThis||void 0||self;var Po={},ei={};ei.byteLength=eu;ei.toByteArray=nu;ei.fromByteArray=su;var Je=[],qe=[],Qc=typeof Uint8Array<"u"?Uint8Array:Array,Di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dr=0,tu=Di.length;Dr<tu;++Dr)Je[Dr]=Di[Dr],qe[Di.charCodeAt(Dr)]=Dr;qe[45]=62;qe[95]=63;function Ba(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function eu(n){var t=Ba(n),e=t[0],r=t[1];return(e+r)*3/4-r}function ru(n,t,e){return(t+e)*3/4-e}function nu(n){var t,e=Ba(n),r=e[0],o=e[1],i=new Qc(ru(n,r,o)),a=0,f=o>0?r-4:r,d;for(d=0;d<f;d+=4)t=qe[n.charCodeAt(d)]<<18|qe[n.charCodeAt(d+1)]<<12|qe[n.charCodeAt(d+2)]<<6|qe[n.charCodeAt(d+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=t&255;return o===2&&(t=qe[n.charCodeAt(d)]<<2|qe[n.charCodeAt(d+1)]>>4,i[a++]=t&255),o===1&&(t=qe[n.charCodeAt(d)]<<10|qe[n.charCodeAt(d+1)]<<4|qe[n.charCodeAt(d+2)]>>2,i[a++]=t>>8&255,i[a++]=t&255),i}function iu(n){return Je[n>>18&63]+Je[n>>12&63]+Je[n>>6&63]+Je[n&63]}function ou(n,t,e){for(var r,o=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),o.push(iu(r));return o.join("")}function su(n){for(var t,e=n.length,r=e%3,o=[],i=16383,a=0,f=e-r;a<f;a+=i)o.push(ou(n,a,a+i>f?f:a+i));return r===1?(t=n[e-1],o.push(Je[t>>2]+Je[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],o.push(Je[t>>10]+Je[t>>4&63]+Je[t<<2&63]+"=")),o.join("")}var Uo={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Uo.read=function(n,t,e,r,o){var i,a,f=o*8-r-1,d=(1<<f)-1,I=d>>1,b=-7,N=e?o-1:0,L=e?-1:1,P=n[t+N];for(N+=L,i=P&(1<<-b)-1,P>>=-b,b+=f;b>0;i=i*256+n[t+N],N+=L,b-=8);for(a=i&(1<<-b)-1,i>>=-b,b+=r;b>0;a=a*256+n[t+N],N+=L,b-=8);if(i===0)i=1-I;else{if(i===d)return a?NaN:(P?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-I}return(P?-1:1)*a*Math.pow(2,i-r)};Uo.write=function(n,t,e,r,o,i){var a,f,d,I=i*8-o-1,b=(1<<I)-1,N=b>>1,L=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=r?0:i-1,H=r?1:-1,F=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(f=isNaN(t)?1:0,a=b):(a=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+N>=1?t+=L/d:t+=L*Math.pow(2,1-N),t*d>=2&&(a++,d/=2),a+N>=b?(f=0,a=b):a+N>=1?(f=(t*d-1)*Math.pow(2,o),a=a+N):(f=t*Math.pow(2,N-1)*Math.pow(2,o),a=0));o>=8;n[e+P]=f&255,P+=H,f/=256,o-=8);for(a=a<<o|f,I+=o;I>0;n[e+P]=a&255,P+=H,a/=256,I-=8);n[e+P-H]|=F*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=ei,e=Uo,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=b,n.SlowBuffer=at,n.INSPECT_MAX_BYTES=50;const o=2147483647;n.kMaxLength=o;const{Uint8Array:i,ArrayBuffer:a,SharedArrayBuffer:f}=globalThis;b.TYPED_ARRAY_SUPPORT=d(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const k=new i(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,i.prototype),Object.setPrototypeOf(k,p),k.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function I(k){if(k>o)throw new RangeError('The value "'+k+'" is invalid for option "size"');const p=new i(k);return Object.setPrototypeOf(p,b.prototype),p}function b(k,p,m){if(typeof k=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return H(k)}return N(k,p,m)}b.poolSize=8192;function N(k,p,m){if(typeof k=="string")return F(k,p);if(a.isView(k))return W(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(Se(k,a)||k&&Se(k.buffer,a)||typeof f<"u"&&(Se(k,f)||k&&Se(k.buffer,f)))return K(k,p,m);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const C=k.valueOf&&k.valueOf();if(C!=null&&C!==k)return b.from(C,p,m);const q=U(k);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return b.from(k[Symbol.toPrimitive]("string"),p,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}b.from=function(k,p,m){return N(k,p,m)},Object.setPrototypeOf(b.prototype,i.prototype),Object.setPrototypeOf(b,i);function L(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function P(k,p,m){return L(k),k<=0?I(k):p!==void 0?typeof m=="string"?I(k).fill(p,m):I(k).fill(p):I(k)}b.alloc=function(k,p,m){return P(k,p,m)};function H(k){return L(k),I(k<0?0:tt(k)|0)}b.allocUnsafe=function(k){return H(k)},b.allocUnsafeSlow=function(k){return H(k)};function F(k,p){if((typeof p!="string"||p==="")&&(p="utf8"),!b.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const m=st(k,p)|0;let C=I(m);const q=C.write(k,p);return q!==m&&(C=C.slice(0,q)),C}function B(k){const p=k.length<0?0:tt(k.length)|0,m=I(p);for(let C=0;C<p;C+=1)m[C]=k[C]&255;return m}function W(k){if(Se(k,i)){const p=new i(k);return K(p.buffer,p.byteOffset,p.byteLength)}return B(k)}function K(k,p,m){if(p<0||k.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<p+(m||0))throw new RangeError('"length" is outside of buffer bounds');let C;return p===void 0&&m===void 0?C=new i(k):m===void 0?C=new i(k,p):C=new i(k,p,m),Object.setPrototypeOf(C,b.prototype),C}function U(k){if(b.isBuffer(k)){const p=tt(k.length)|0,m=I(p);return m.length===0||k.copy(m,0,0,p),m}if(k.length!==void 0)return typeof k.length!="number"||Gt(k.length)?I(0):B(k);if(k.type==="Buffer"&&Array.isArray(k.data))return B(k.data)}function tt(k){if(k>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return k|0}function at(k){return+k!=k&&(k=0),b.alloc(+k)}b.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==b.prototype},b.compare=function(p,m){if(Se(p,i)&&(p=b.from(p,p.offset,p.byteLength)),Se(m,i)&&(m=b.from(m,m.offset,m.byteLength)),!b.isBuffer(p)||!b.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===m)return 0;let C=p.length,q=m.length;for(let Y=0,rt=Math.min(C,q);Y<rt;++Y)if(p[Y]!==m[Y]){C=p[Y],q=m[Y];break}return C<q?-1:q<C?1:0},b.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(p,m){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return b.alloc(0);let C;if(m===void 0)for(m=0,C=0;C<p.length;++C)m+=p[C].length;const q=b.allocUnsafe(m);let Y=0;for(C=0;C<p.length;++C){let rt=p[C];if(Se(rt,i))Y+rt.length>q.length?(b.isBuffer(rt)||(rt=b.from(rt)),rt.copy(q,Y)):i.prototype.set.call(q,rt,Y);else if(b.isBuffer(rt))rt.copy(q,Y);else throw new TypeError('"list" argument must be an Array of Buffers');Y+=rt.length}return q};function st(k,p){if(b.isBuffer(k))return k.length;if(a.isView(k)||Se(k,a))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const m=k.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&m===0)return 0;let q=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Wt(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return Nt(k).length;default:if(q)return C?-1:Wt(k).length;p=(""+p).toLowerCase(),q=!0}}b.byteLength=st;function nt(k,p,m){let C=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,p>>>=0,m<=p))return"";for(k||(k="utf8");;)switch(k){case"hex":return c(this,p,m);case"utf8":case"utf-8":return S(this,p,m);case"ascii":return g(this,p,m);case"latin1":case"binary":return h(this,p,m);case"base64":return E(this,p,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,p,m);default:if(C)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),C=!0}}b.prototype._isBuffer=!0;function it(k,p,m){const C=k[p];k[p]=k[m],k[m]=C}b.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<p;m+=2)it(this,m,m+1);return this},b.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<p;m+=4)it(this,m,m+3),it(this,m+1,m+2);return this},b.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<p;m+=8)it(this,m,m+7),it(this,m+1,m+6),it(this,m+2,m+5),it(this,m+3,m+4);return this},b.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?S(this,0,p):nt.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(p){if(!b.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:b.compare(this,p)===0},b.prototype.inspect=function(){let p="";const m=n.INSPECT_MAX_BYTES;return p=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(p+=" ... "),"<Buffer "+p+">"},r&&(b.prototype[r]=b.prototype.inspect),b.prototype.compare=function(p,m,C,q,Y){if(Se(p,i)&&(p=b.from(p,p.offset,p.byteLength)),!b.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(m===void 0&&(m=0),C===void 0&&(C=p?p.length:0),q===void 0&&(q=0),Y===void 0&&(Y=this.length),m<0||C>p.length||q<0||Y>this.length)throw new RangeError("out of range index");if(q>=Y&&m>=C)return 0;if(q>=Y)return-1;if(m>=C)return 1;if(m>>>=0,C>>>=0,q>>>=0,Y>>>=0,this===p)return 0;let rt=Y-q,vt=C-m;const It=Math.min(rt,vt),At=this.slice(q,Y),jt=p.slice(m,C);for(let _t=0;_t<It;++_t)if(At[_t]!==jt[_t]){rt=At[_t],vt=jt[_t];break}return rt<vt?-1:vt<rt?1:0};function j(k,p,m,C,q){if(k.length===0)return-1;if(typeof m=="string"?(C=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,Gt(m)&&(m=q?0:k.length-1),m<0&&(m=k.length+m),m>=k.length){if(q)return-1;m=k.length-1}else if(m<0)if(q)m=0;else return-1;if(typeof p=="string"&&(p=b.from(p,C)),b.isBuffer(p))return p.length===0?-1:$(k,p,m,C,q);if(typeof p=="number")return p=p&255,typeof i.prototype.indexOf=="function"?q?i.prototype.indexOf.call(k,p,m):i.prototype.lastIndexOf.call(k,p,m):$(k,[p],m,C,q);throw new TypeError("val must be string, number or Buffer")}function $(k,p,m,C,q){let Y=1,rt=k.length,vt=p.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(k.length<2||p.length<2)return-1;Y=2,rt/=2,vt/=2,m/=2}function It(jt,_t){return Y===1?jt[_t]:jt.readUInt16BE(_t*Y)}let At;if(q){let jt=-1;for(At=m;At<rt;At++)if(It(k,At)===It(p,jt===-1?0:At-jt)){if(jt===-1&&(jt=At),At-jt+1===vt)return jt*Y}else jt!==-1&&(At-=At-jt),jt=-1}else for(m+vt>rt&&(m=rt-vt),At=m;At>=0;At--){let jt=!0;for(let _t=0;_t<vt;_t++)if(It(k,At+_t)!==It(p,_t)){jt=!1;break}if(jt)return At}return-1}b.prototype.includes=function(p,m,C){return this.indexOf(p,m,C)!==-1},b.prototype.indexOf=function(p,m,C){return j(this,p,m,C,!0)},b.prototype.lastIndexOf=function(p,m,C){return j(this,p,m,C,!1)};function G(k,p,m,C){m=Number(m)||0;const q=k.length-m;C?(C=Number(C),C>q&&(C=q)):C=q;const Y=p.length;C>Y/2&&(C=Y/2);let rt;for(rt=0;rt<C;++rt){const vt=parseInt(p.substr(rt*2,2),16);if(Gt(vt))return rt;k[m+rt]=vt}return rt}function T(k,p,m,C){return $t(Wt(p,k.length-m),k,m,C)}function A(k,p,m,C){return $t(re(p),k,m,C)}function s(k,p,m,C){return $t(Nt(p),k,m,C)}function l(k,p,m,C){return $t(oe(p,k.length-m),k,m,C)}b.prototype.write=function(p,m,C,q){if(m===void 0)q="utf8",C=this.length,m=0;else if(C===void 0&&typeof m=="string")q=m,C=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(C)?(C=C>>>0,q===void 0&&(q="utf8")):(q=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Y=this.length-m;if((C===void 0||C>Y)&&(C=Y),p.length>0&&(C<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let rt=!1;for(;;)switch(q){case"hex":return G(this,p,m,C);case"utf8":case"utf-8":return T(this,p,m,C);case"ascii":case"latin1":case"binary":return A(this,p,m,C);case"base64":return s(this,p,m,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l(this,p,m,C);default:if(rt)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),rt=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(k,p,m){return p===0&&m===k.length?t.fromByteArray(k):t.fromByteArray(k.slice(p,m))}function S(k,p,m){m=Math.min(k.length,m);const C=[];let q=p;for(;q<m;){const Y=k[q];let rt=null,vt=Y>239?4:Y>223?3:Y>191?2:1;if(q+vt<=m){let It,At,jt,_t;switch(vt){case 1:Y<128&&(rt=Y);break;case 2:It=k[q+1],(It&192)===128&&(_t=(Y&31)<<6|It&63,_t>127&&(rt=_t));break;case 3:It=k[q+1],At=k[q+2],(It&192)===128&&(At&192)===128&&(_t=(Y&15)<<12|(It&63)<<6|At&63,_t>2047&&(_t<55296||_t>57343)&&(rt=_t));break;case 4:It=k[q+1],At=k[q+2],jt=k[q+3],(It&192)===128&&(At&192)===128&&(jt&192)===128&&(_t=(Y&15)<<18|(It&63)<<12|(At&63)<<6|jt&63,_t>65535&&_t<1114112&&(rt=_t))}}rt===null?(rt=65533,vt=1):rt>65535&&(rt-=65536,C.push(rt>>>10&1023|55296),rt=56320|rt&1023),C.push(rt),q+=vt}return R(C)}const x=4096;function R(k){const p=k.length;if(p<=x)return String.fromCharCode.apply(String,k);let m="",C=0;for(;C<p;)m+=String.fromCharCode.apply(String,k.slice(C,C+=x));return m}function g(k,p,m){let C="";m=Math.min(k.length,m);for(let q=p;q<m;++q)C+=String.fromCharCode(k[q]&127);return C}function h(k,p,m){let C="";m=Math.min(k.length,m);for(let q=p;q<m;++q)C+=String.fromCharCode(k[q]);return C}function c(k,p,m){const C=k.length;(!p||p<0)&&(p=0),(!m||m<0||m>C)&&(m=C);let q="";for(let Y=p;Y<m;++Y)q+=Qt[k[Y]];return q}function u(k,p,m){const C=k.slice(p,m);let q="";for(let Y=0;Y<C.length-1;Y+=2)q+=String.fromCharCode(C[Y]+C[Y+1]*256);return q}b.prototype.slice=function(p,m){const C=this.length;p=~~p,m=m===void 0?C:~~m,p<0?(p+=C,p<0&&(p=0)):p>C&&(p=C),m<0?(m+=C,m<0&&(m=0)):m>C&&(m=C),m<p&&(m=p);const q=this.subarray(p,m);return Object.setPrototypeOf(q,b.prototype),q};function _(k,p,m){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+p>m)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(p,m,C){p=p>>>0,m=m>>>0,C||_(p,m,this.length);let q=this[p],Y=1,rt=0;for(;++rt<m&&(Y*=256);)q+=this[p+rt]*Y;return q},b.prototype.readUintBE=b.prototype.readUIntBE=function(p,m,C){p=p>>>0,m=m>>>0,C||_(p,m,this.length);let q=this[p+--m],Y=1;for(;m>0&&(Y*=256);)q+=this[p+--m]*Y;return q},b.prototype.readUint8=b.prototype.readUInt8=function(p,m){return p=p>>>0,m||_(p,1,this.length),this[p]},b.prototype.readUint16LE=b.prototype.readUInt16LE=function(p,m){return p=p>>>0,m||_(p,2,this.length),this[p]|this[p+1]<<8},b.prototype.readUint16BE=b.prototype.readUInt16BE=function(p,m){return p=p>>>0,m||_(p,2,this.length),this[p]<<8|this[p+1]},b.prototype.readUint32LE=b.prototype.readUInt32LE=function(p,m){return p=p>>>0,m||_(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},b.prototype.readUint32BE=b.prototype.readUInt32BE=function(p,m){return p=p>>>0,m||_(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},b.prototype.readBigUInt64LE=Le(function(p){p=p>>>0,Oe(p,"offset");const m=this[p],C=this[p+7];(m===void 0||C===void 0)&&Ht(p,this.length-8);const q=m+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,Y=this[++p]+this[++p]*2**8+this[++p]*2**16+C*2**24;return BigInt(q)+(BigInt(Y)<<BigInt(32))}),b.prototype.readBigUInt64BE=Le(function(p){p=p>>>0,Oe(p,"offset");const m=this[p],C=this[p+7];(m===void 0||C===void 0)&&Ht(p,this.length-8);const q=m*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],Y=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+C;return(BigInt(q)<<BigInt(32))+BigInt(Y)}),b.prototype.readIntLE=function(p,m,C){p=p>>>0,m=m>>>0,C||_(p,m,this.length);let q=this[p],Y=1,rt=0;for(;++rt<m&&(Y*=256);)q+=this[p+rt]*Y;return Y*=128,q>=Y&&(q-=Math.pow(2,8*m)),q},b.prototype.readIntBE=function(p,m,C){p=p>>>0,m=m>>>0,C||_(p,m,this.length);let q=m,Y=1,rt=this[p+--q];for(;q>0&&(Y*=256);)rt+=this[p+--q]*Y;return Y*=128,rt>=Y&&(rt-=Math.pow(2,8*m)),rt},b.prototype.readInt8=function(p,m){return p=p>>>0,m||_(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},b.prototype.readInt16LE=function(p,m){p=p>>>0,m||_(p,2,this.length);const C=this[p]|this[p+1]<<8;return C&32768?C|4294901760:C},b.prototype.readInt16BE=function(p,m){p=p>>>0,m||_(p,2,this.length);const C=this[p+1]|this[p]<<8;return C&32768?C|4294901760:C},b.prototype.readInt32LE=function(p,m){return p=p>>>0,m||_(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},b.prototype.readInt32BE=function(p,m){return p=p>>>0,m||_(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},b.prototype.readBigInt64LE=Le(function(p){p=p>>>0,Oe(p,"offset");const m=this[p],C=this[p+7];(m===void 0||C===void 0)&&Ht(p,this.length-8);const q=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(C<<24);return(BigInt(q)<<BigInt(32))+BigInt(m+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),b.prototype.readBigInt64BE=Le(function(p){p=p>>>0,Oe(p,"offset");const m=this[p],C=this[p+7];(m===void 0||C===void 0)&&Ht(p,this.length-8);const q=(m<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(q)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+C)}),b.prototype.readFloatLE=function(p,m){return p=p>>>0,m||_(p,4,this.length),e.read(this,p,!0,23,4)},b.prototype.readFloatBE=function(p,m){return p=p>>>0,m||_(p,4,this.length),e.read(this,p,!1,23,4)},b.prototype.readDoubleLE=function(p,m){return p=p>>>0,m||_(p,8,this.length),e.read(this,p,!0,52,8)},b.prototype.readDoubleBE=function(p,m){return p=p>>>0,m||_(p,8,this.length),e.read(this,p,!1,52,8)};function O(k,p,m,C,q,Y){if(!b.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>q||p<Y)throw new RangeError('"value" argument is out of bounds');if(m+C>k.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(p,m,C,q){if(p=+p,m=m>>>0,C=C>>>0,!q){const vt=Math.pow(2,8*C)-1;O(this,p,m,C,vt,0)}let Y=1,rt=0;for(this[m]=p&255;++rt<C&&(Y*=256);)this[m+rt]=p/Y&255;return m+C},b.prototype.writeUintBE=b.prototype.writeUIntBE=function(p,m,C,q){if(p=+p,m=m>>>0,C=C>>>0,!q){const vt=Math.pow(2,8*C)-1;O(this,p,m,C,vt,0)}let Y=C-1,rt=1;for(this[m+Y]=p&255;--Y>=0&&(rt*=256);)this[m+Y]=p/rt&255;return m+C},b.prototype.writeUint8=b.prototype.writeUInt8=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,1,255,0),this[m]=p&255,m+1},b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,2,65535,0),this[m]=p&255,this[m+1]=p>>>8,m+2},b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,2,65535,0),this[m]=p>>>8,this[m+1]=p&255,m+2},b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,4,4294967295,0),this[m+3]=p>>>24,this[m+2]=p>>>16,this[m+1]=p>>>8,this[m]=p&255,m+4},b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,4,4294967295,0),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4};function z(k,p,m,C,q){Mt(p,C,q,k,m,7);let Y=Number(p&BigInt(4294967295));k[m++]=Y,Y=Y>>8,k[m++]=Y,Y=Y>>8,k[m++]=Y,Y=Y>>8,k[m++]=Y;let rt=Number(p>>BigInt(32)&BigInt(4294967295));return k[m++]=rt,rt=rt>>8,k[m++]=rt,rt=rt>>8,k[m++]=rt,rt=rt>>8,k[m++]=rt,m}function et(k,p,m,C,q){Mt(p,C,q,k,m,7);let Y=Number(p&BigInt(4294967295));k[m+7]=Y,Y=Y>>8,k[m+6]=Y,Y=Y>>8,k[m+5]=Y,Y=Y>>8,k[m+4]=Y;let rt=Number(p>>BigInt(32)&BigInt(4294967295));return k[m+3]=rt,rt=rt>>8,k[m+2]=rt,rt=rt>>8,k[m+1]=rt,rt=rt>>8,k[m]=rt,m+8}b.prototype.writeBigUInt64LE=Le(function(p,m=0){return z(this,p,m,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeBigUInt64BE=Le(function(p,m=0){return et(this,p,m,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeIntLE=function(p,m,C,q){if(p=+p,m=m>>>0,!q){const It=Math.pow(2,8*C-1);O(this,p,m,C,It-1,-It)}let Y=0,rt=1,vt=0;for(this[m]=p&255;++Y<C&&(rt*=256);)p<0&&vt===0&&this[m+Y-1]!==0&&(vt=1),this[m+Y]=(p/rt>>0)-vt&255;return m+C},b.prototype.writeIntBE=function(p,m,C,q){if(p=+p,m=m>>>0,!q){const It=Math.pow(2,8*C-1);O(this,p,m,C,It-1,-It)}let Y=C-1,rt=1,vt=0;for(this[m+Y]=p&255;--Y>=0&&(rt*=256);)p<0&&vt===0&&this[m+Y+1]!==0&&(vt=1),this[m+Y]=(p/rt>>0)-vt&255;return m+C},b.prototype.writeInt8=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,1,127,-128),p<0&&(p=255+p+1),this[m]=p&255,m+1},b.prototype.writeInt16LE=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,2,32767,-32768),this[m]=p&255,this[m+1]=p>>>8,m+2},b.prototype.writeInt16BE=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,2,32767,-32768),this[m]=p>>>8,this[m+1]=p&255,m+2},b.prototype.writeInt32LE=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,4,2147483647,-2147483648),this[m]=p&255,this[m+1]=p>>>8,this[m+2]=p>>>16,this[m+3]=p>>>24,m+4},b.prototype.writeInt32BE=function(p,m,C){return p=+p,m=m>>>0,C||O(this,p,m,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4},b.prototype.writeBigInt64LE=Le(function(p,m=0){return z(this,p,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),b.prototype.writeBigInt64BE=Le(function(p,m=0){return et(this,p,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ht(k,p,m,C,q,Y){if(m+C>k.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function gt(k,p,m,C,q){return p=+p,m=m>>>0,q||ht(k,p,m,4),e.write(k,p,m,C,23,4),m+4}b.prototype.writeFloatLE=function(p,m,C){return gt(this,p,m,!0,C)},b.prototype.writeFloatBE=function(p,m,C){return gt(this,p,m,!1,C)};function Ft(k,p,m,C,q){return p=+p,m=m>>>0,q||ht(k,p,m,8),e.write(k,p,m,C,52,8),m+8}b.prototype.writeDoubleLE=function(p,m,C){return Ft(this,p,m,!0,C)},b.prototype.writeDoubleBE=function(p,m,C){return Ft(this,p,m,!1,C)},b.prototype.copy=function(p,m,C,q){if(!b.isBuffer(p))throw new TypeError("argument should be a Buffer");if(C||(C=0),!q&&q!==0&&(q=this.length),m>=p.length&&(m=p.length),m||(m=0),q>0&&q<C&&(q=C),q===C||p.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),p.length-m<q-C&&(q=p.length-m+C);const Y=q-C;return this===p&&typeof i.prototype.copyWithin=="function"?this.copyWithin(m,C,q):i.prototype.set.call(p,this.subarray(C,q),m),Y},b.prototype.fill=function(p,m,C,q){if(typeof p=="string"){if(typeof m=="string"?(q=m,m=0,C=this.length):typeof C=="string"&&(q=C,C=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!b.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(p.length===1){const rt=p.charCodeAt(0);(q==="utf8"&&rt<128||q==="latin1")&&(p=rt)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(m<0||this.length<m||this.length<C)throw new RangeError("Out of range index");if(C<=m)return this;m=m>>>0,C=C===void 0?this.length:C>>>0,p||(p=0);let Y;if(typeof p=="number")for(Y=m;Y<C;++Y)this[Y]=p;else{const rt=b.isBuffer(p)?p:b.from(p,q),vt=rt.length;if(vt===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(Y=0;Y<C-m;++Y)this[Y+m]=rt[Y%vt]}return this};const Et={};function xt(k,p,m){Et[k]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}xt("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xt("ERR_INVALID_ARG_TYPE",function(k,p){return`The "${k}" argument must be of type number. Received type ${typeof p}`},TypeError),xt("ERR_OUT_OF_RANGE",function(k,p,m){let C=`The value of "${k}" is out of range.`,q=m;return Number.isInteger(m)&&Math.abs(m)>2**32?q=le(String(m)):typeof m=="bigint"&&(q=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(q=le(q)),q+="n"),C+=` It must be ${p}. Received ${q}`,C},RangeError);function le(k){let p="",m=k.length;const C=k[0]==="-"?1:0;for(;m>=C+4;m-=3)p=`_${k.slice(m-3,m)}${p}`;return`${k.slice(0,m)}${p}`}function Lt(k,p,m){Oe(p,"offset"),(k[p]===void 0||k[p+m]===void 0)&&Ht(p,k.length-(m+1))}function Mt(k,p,m,C,q,Y){if(k>m||k<p){const rt=typeof p=="bigint"?"n":"";let vt;throw p===0||p===BigInt(0)?vt=`>= 0${rt} and < 2${rt} ** ${(Y+1)*8}${rt}`:vt=`>= -(2${rt} ** ${(Y+1)*8-1}${rt}) and < 2 ** ${(Y+1)*8-1}${rt}`,new Et.ERR_OUT_OF_RANGE("value",vt,k)}Lt(C,q,Y)}function Oe(k,p){if(typeof k!="number")throw new Et.ERR_INVALID_ARG_TYPE(p,"number",k)}function Ht(k,p,m){throw Math.floor(k)!==k?(Oe(k,m),new Et.ERR_OUT_OF_RANGE("offset","an integer",k)):p<0?new Et.ERR_BUFFER_OUT_OF_BOUNDS:new Et.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,k)}const Zt=/[^+/0-9A-Za-z-_]/g;function yr(k){if(k=k.split("=")[0],k=k.trim().replace(Zt,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function Wt(k,p){p=p||1/0;let m;const C=k.length;let q=null;const Y=[];for(let rt=0;rt<C;++rt){if(m=k.charCodeAt(rt),m>55295&&m<57344){if(!q){if(m>56319){(p-=3)>-1&&Y.push(239,191,189);continue}else if(rt+1===C){(p-=3)>-1&&Y.push(239,191,189);continue}q=m;continue}if(m<56320){(p-=3)>-1&&Y.push(239,191,189),q=m;continue}m=(q-55296<<10|m-56320)+65536}else q&&(p-=3)>-1&&Y.push(239,191,189);if(q=null,m<128){if((p-=1)<0)break;Y.push(m)}else if(m<2048){if((p-=2)<0)break;Y.push(m>>6|192,m&63|128)}else if(m<65536){if((p-=3)<0)break;Y.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((p-=4)<0)break;Y.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return Y}function re(k){const p=[];for(let m=0;m<k.length;++m)p.push(k.charCodeAt(m)&255);return p}function oe(k,p){let m,C,q;const Y=[];for(let rt=0;rt<k.length&&!((p-=2)<0);++rt)m=k.charCodeAt(rt),C=m>>8,q=m%256,Y.push(q),Y.push(C);return Y}function Nt(k){return t.toByteArray(yr(k))}function $t(k,p,m,C){let q;for(q=0;q<C&&!(q+m>=p.length||q>=k.length);++q)p[q+m]=k[q];return q}function Se(k,p){return k instanceof p||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===p.name}function Gt(k){return k!==k}const Qt=function(){const k="0123456789abcdef",p=new Array(256);for(let m=0;m<16;++m){const C=m*16;for(let q=0;q<16;++q)p[C+q]=k[m]+k[q]}return p}();function Le(k){return typeof BigInt>"u"?Kt:k}function Kt(){throw new Error("BigInt not supported")}})(Po);const Vt=Po.Buffer,wt=Po.Buffer;function ri(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Fo(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),e}var Dn={exports:{}},Hi={},bs;function Do(){return bs||(bs=1,function(n){Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},e={};e.byteLength=b,e.toByteArray=L,e.fromByteArray=F;for(var r=[],o=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=a.length;f<d;++f)r[f]=a[f],o[a.charCodeAt(f)]=f;o[45]=62,o[95]=63;function I(K){var U=K.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var tt=K.indexOf("=");tt===-1&&(tt=U);var at=tt===U?0:4-tt%4;return[tt,at]}function b(K){var U=I(K),tt=U[0],at=U[1];return(tt+at)*3/4-at}function N(K,U,tt){return(U+tt)*3/4-tt}function L(K){var U,tt=I(K),at=tt[0],st=tt[1],nt=new i(N(K,at,st)),it=0,j=st>0?at-4:at,$;for($=0;$<j;$+=4)U=o[K.charCodeAt($)]<<18|o[K.charCodeAt($+1)]<<12|o[K.charCodeAt($+2)]<<6|o[K.charCodeAt($+3)],nt[it++]=U>>16&255,nt[it++]=U>>8&255,nt[it++]=U&255;return st===2&&(U=o[K.charCodeAt($)]<<2|o[K.charCodeAt($+1)]>>4,nt[it++]=U&255),st===1&&(U=o[K.charCodeAt($)]<<10|o[K.charCodeAt($+1)]<<4|o[K.charCodeAt($+2)]>>2,nt[it++]=U>>8&255,nt[it++]=U&255),nt}function P(K){return r[K>>18&63]+r[K>>12&63]+r[K>>6&63]+r[K&63]}function H(K,U,tt){for(var at,st=[],nt=U;nt<tt;nt+=3)at=(K[nt]<<16&16711680)+(K[nt+1]<<8&65280)+(K[nt+2]&255),st.push(P(at));return st.join("")}function F(K){for(var U,tt=K.length,at=tt%3,st=[],nt=16383,it=0,j=tt-at;it<j;it+=nt)st.push(H(K,it,it+nt>j?j:it+nt));return at===1?(U=K[tt-1],st.push(r[U>>2]+r[U<<4&63]+"==")):at===2&&(U=(K[tt-2]<<8)+K[tt-1],st.push(r[U>>10]+r[U>>4&63]+r[U<<2&63]+"=")),st.join("")}var B={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */B.read=function(K,U,tt,at,st){var nt,it,j=st*8-at-1,$=(1<<j)-1,G=$>>1,T=-7,A=tt?st-1:0,s=tt?-1:1,l=K[U+A];for(A+=s,nt=l&(1<<-T)-1,l>>=-T,T+=j;T>0;nt=nt*256+K[U+A],A+=s,T-=8);for(it=nt&(1<<-T)-1,nt>>=-T,T+=at;T>0;it=it*256+K[U+A],A+=s,T-=8);if(nt===0)nt=1-G;else{if(nt===$)return it?NaN:(l?-1:1)*(1/0);it=it+Math.pow(2,at),nt=nt-G}return(l?-1:1)*it*Math.pow(2,nt-at)},B.write=function(K,U,tt,at,st,nt){var it,j,$,G=nt*8-st-1,T=(1<<G)-1,A=T>>1,s=st===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=at?0:nt-1,E=at?1:-1,S=U<0||U===0&&1/U<0?1:0;for(U=Math.abs(U),isNaN(U)||U===1/0?(j=isNaN(U)?1:0,it=T):(it=Math.floor(Math.log(U)/Math.LN2),U*($=Math.pow(2,-it))<1&&(it--,$*=2),it+A>=1?U+=s/$:U+=s*Math.pow(2,1-A),U*$>=2&&(it++,$/=2),it+A>=T?(j=0,it=T):it+A>=1?(j=(U*$-1)*Math.pow(2,st),it=it+A):(j=U*Math.pow(2,A-1)*Math.pow(2,st),it=0));st>=8;K[tt+l]=j&255,l+=E,j/=256,st-=8);for(it=it<<st|j,G+=st;G>0;K[tt+l]=it&255,l+=E,it/=256,G-=8);K[tt+l-E]|=S*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(K){const U=e,tt=B,at=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;K.Buffer=T,K.SlowBuffer=u,K.INSPECT_MAX_BYTES=50;const st=2147483647;K.kMaxLength=st;const{Uint8Array:nt,ArrayBuffer:it,SharedArrayBuffer:j}=globalThis;T.TYPED_ARRAY_SUPPORT=$(),!T.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function $(){try{const v=new nt(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,nt.prototype),Object.setPrototypeOf(v,y),v.foo()===42}catch{return!1}}Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.byteOffset}});function G(v){if(v>st)throw new RangeError('The value "'+v+'" is invalid for option "size"');const y=new nt(v);return Object.setPrototypeOf(y,T.prototype),y}function T(v,y,w){if(typeof v=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(v)}return A(v,y,w)}T.poolSize=8192;function A(v,y,w){if(typeof v=="string")return S(v,y);if(it.isView(v))return R(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(He(v,it)||v&&He(v.buffer,it)||typeof j<"u"&&(He(v,j)||v&&He(v.buffer,j)))return g(v,y,w);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const M=v.valueOf&&v.valueOf();if(M!=null&&M!==v)return T.from(M,y,w);const V=h(v);if(V)return V;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return T.from(v[Symbol.toPrimitive]("string"),y,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}T.from=function(v,y,w){return A(v,y,w)},Object.setPrototypeOf(T.prototype,nt.prototype),Object.setPrototypeOf(T,nt);function s(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function l(v,y,w){return s(v),v<=0?G(v):y!==void 0?typeof w=="string"?G(v).fill(y,w):G(v).fill(y):G(v)}T.alloc=function(v,y,w){return l(v,y,w)};function E(v){return s(v),G(v<0?0:c(v)|0)}T.allocUnsafe=function(v){return E(v)},T.allocUnsafeSlow=function(v){return E(v)};function S(v,y){if((typeof y!="string"||y==="")&&(y="utf8"),!T.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const w=_(v,y)|0;let M=G(w);const V=M.write(v,y);return V!==w&&(M=M.slice(0,V)),M}function x(v){const y=v.length<0?0:c(v.length)|0,w=G(y);for(let M=0;M<y;M+=1)w[M]=v[M]&255;return w}function R(v){if(He(v,nt)){const y=new nt(v);return g(y.buffer,y.byteOffset,y.byteLength)}return x(v)}function g(v,y,w){if(y<0||v.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<y+(w||0))throw new RangeError('"length" is outside of buffer bounds');let M;return y===void 0&&w===void 0?M=new nt(v):w===void 0?M=new nt(v,y):M=new nt(v,y,w),Object.setPrototypeOf(M,T.prototype),M}function h(v){if(T.isBuffer(v)){const y=c(v.length)|0,w=G(y);return w.length===0||v.copy(w,0,0,y),w}if(v.length!==void 0)return typeof v.length!="number"||ne(v.length)?G(0):x(v);if(v.type==="Buffer"&&Array.isArray(v.data))return x(v.data)}function c(v){if(v>=st)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+st.toString(16)+" bytes");return v|0}function u(v){return+v!=v&&(v=0),T.alloc(+v)}T.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==T.prototype},T.compare=function(y,w){if(He(y,nt)&&(y=T.from(y,y.offset,y.byteLength)),He(w,nt)&&(w=T.from(w,w.offset,w.byteLength)),!T.isBuffer(y)||!T.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===w)return 0;let M=y.length,V=w.length;for(let Z=0,ot=Math.min(M,V);Z<ot;++Z)if(y[Z]!==w[Z]){M=y[Z],V=w[Z];break}return M<V?-1:V<M?1:0},T.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(y,w){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return T.alloc(0);let M;if(w===void 0)for(w=0,M=0;M<y.length;++M)w+=y[M].length;const V=T.allocUnsafe(w);let Z=0;for(M=0;M<y.length;++M){let ot=y[M];if(He(ot,nt))Z+ot.length>V.length?(T.isBuffer(ot)||(ot=T.from(ot)),ot.copy(V,Z)):nt.prototype.set.call(V,ot,Z);else if(T.isBuffer(ot))ot.copy(V,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=ot.length}return V};function _(v,y){if(T.isBuffer(v))return v.length;if(it.isView(v)||He(v,it))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const w=v.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&w===0)return 0;let V=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return It(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return _t(v).length;default:if(V)return M?-1:It(v).length;y=(""+y).toLowerCase(),V=!0}}T.byteLength=_;function O(v,y,w){let M=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,y>>>=0,w<=y))return"";for(v||(v="utf8");;)switch(v){case"hex":return Wt(this,y,w);case"utf8":case"utf-8":return Mt(this,y,w);case"ascii":return Zt(this,y,w);case"latin1":case"binary":return yr(this,y,w);case"base64":return Lt(this,y,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,y,w);default:if(M)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),M=!0}}T.prototype._isBuffer=!0;function z(v,y,w){const M=v[y];v[y]=v[w],v[w]=M}T.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<y;w+=2)z(this,w,w+1);return this},T.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<y;w+=4)z(this,w,w+3),z(this,w+1,w+2);return this},T.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<y;w+=8)z(this,w,w+7),z(this,w+1,w+6),z(this,w+2,w+5),z(this,w+3,w+4);return this},T.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?Mt(this,0,y):O.apply(this,arguments)},T.prototype.toLocaleString=T.prototype.toString,T.prototype.equals=function(y){if(!T.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:T.compare(this,y)===0},T.prototype.inspect=function(){let y="";const w=K.INSPECT_MAX_BYTES;return y=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(y+=" ... "),"<Buffer "+y+">"},at&&(T.prototype[at]=T.prototype.inspect),T.prototype.compare=function(y,w,M,V,Z){if(He(y,nt)&&(y=T.from(y,y.offset,y.byteLength)),!T.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(w===void 0&&(w=0),M===void 0&&(M=y?y.length:0),V===void 0&&(V=0),Z===void 0&&(Z=this.length),w<0||M>y.length||V<0||Z>this.length)throw new RangeError("out of range index");if(V>=Z&&w>=M)return 0;if(V>=Z)return-1;if(w>=M)return 1;if(w>>>=0,M>>>=0,V>>>=0,Z>>>=0,this===y)return 0;let ot=Z-V,Tt=M-w;const kt=Math.min(ot,Tt),St=this.slice(V,Z),ee=y.slice(w,M);for(let Rt=0;Rt<kt;++Rt)if(St[Rt]!==ee[Rt]){ot=St[Rt],Tt=ee[Rt];break}return ot<Tt?-1:Tt<ot?1:0};function et(v,y,w,M,V){if(v.length===0)return-1;if(typeof w=="string"?(M=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,ne(w)&&(w=V?0:v.length-1),w<0&&(w=v.length+w),w>=v.length){if(V)return-1;w=v.length-1}else if(w<0)if(V)w=0;else return-1;if(typeof y=="string"&&(y=T.from(y,M)),T.isBuffer(y))return y.length===0?-1:ht(v,y,w,M,V);if(typeof y=="number")return y=y&255,typeof nt.prototype.indexOf=="function"?V?nt.prototype.indexOf.call(v,y,w):nt.prototype.lastIndexOf.call(v,y,w):ht(v,[y],w,M,V);throw new TypeError("val must be string, number or Buffer")}function ht(v,y,w,M,V){let Z=1,ot=v.length,Tt=y.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(v.length<2||y.length<2)return-1;Z=2,ot/=2,Tt/=2,w/=2}function kt(ee,Rt){return Z===1?ee[Rt]:ee.readUInt16BE(Rt*Z)}let St;if(V){let ee=-1;for(St=w;St<ot;St++)if(kt(v,St)===kt(y,ee===-1?0:St-ee)){if(ee===-1&&(ee=St),St-ee+1===Tt)return ee*Z}else ee!==-1&&(St-=St-ee),ee=-1}else for(w+Tt>ot&&(w=ot-Tt),St=w;St>=0;St--){let ee=!0;for(let Rt=0;Rt<Tt;Rt++)if(kt(v,St+Rt)!==kt(y,Rt)){ee=!1;break}if(ee)return St}return-1}T.prototype.includes=function(y,w,M){return this.indexOf(y,w,M)!==-1},T.prototype.indexOf=function(y,w,M){return et(this,y,w,M,!0)},T.prototype.lastIndexOf=function(y,w,M){return et(this,y,w,M,!1)};function gt(v,y,w,M){w=Number(w)||0;const V=v.length-w;M?(M=Number(M),M>V&&(M=V)):M=V;const Z=y.length;M>Z/2&&(M=Z/2);let ot;for(ot=0;ot<M;++ot){const Tt=parseInt(y.substr(ot*2,2),16);if(ne(Tt))return ot;v[w+ot]=Tt}return ot}function Ft(v,y,w,M){return te(It(y,v.length-w),v,w,M)}function Et(v,y,w,M){return te(At(y),v,w,M)}function xt(v,y,w,M){return te(_t(y),v,w,M)}function le(v,y,w,M){return te(jt(y,v.length-w),v,w,M)}T.prototype.write=function(y,w,M,V){if(w===void 0)V="utf8",M=this.length,w=0;else if(M===void 0&&typeof w=="string")V=w,M=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(M)?(M=M>>>0,V===void 0&&(V="utf8")):(V=M,M=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-w;if((M===void 0||M>Z)&&(M=Z),y.length>0&&(M<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");let ot=!1;for(;;)switch(V){case"hex":return gt(this,y,w,M);case"utf8":case"utf-8":return Ft(this,y,w,M);case"ascii":case"latin1":case"binary":return Et(this,y,w,M);case"base64":return xt(this,y,w,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,y,w,M);default:if(ot)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),ot=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Lt(v,y,w){return y===0&&w===v.length?U.fromByteArray(v):U.fromByteArray(v.slice(y,w))}function Mt(v,y,w){w=Math.min(v.length,w);const M=[];let V=y;for(;V<w;){const Z=v[V];let ot=null,Tt=Z>239?4:Z>223?3:Z>191?2:1;if(V+Tt<=w){let kt,St,ee,Rt;switch(Tt){case 1:Z<128&&(ot=Z);break;case 2:kt=v[V+1],(kt&192)===128&&(Rt=(Z&31)<<6|kt&63,Rt>127&&(ot=Rt));break;case 3:kt=v[V+1],St=v[V+2],(kt&192)===128&&(St&192)===128&&(Rt=(Z&15)<<12|(kt&63)<<6|St&63,Rt>2047&&(Rt<55296||Rt>57343)&&(ot=Rt));break;case 4:kt=v[V+1],St=v[V+2],ee=v[V+3],(kt&192)===128&&(St&192)===128&&(ee&192)===128&&(Rt=(Z&15)<<18|(kt&63)<<12|(St&63)<<6|ee&63,Rt>65535&&Rt<1114112&&(ot=Rt))}}ot===null?(ot=65533,Tt=1):ot>65535&&(ot-=65536,M.push(ot>>>10&1023|55296),ot=56320|ot&1023),M.push(ot),V+=Tt}return Ht(M)}const Oe=4096;function Ht(v){const y=v.length;if(y<=Oe)return String.fromCharCode.apply(String,v);let w="",M=0;for(;M<y;)w+=String.fromCharCode.apply(String,v.slice(M,M+=Oe));return w}function Zt(v,y,w){let M="";w=Math.min(v.length,w);for(let V=y;V<w;++V)M+=String.fromCharCode(v[V]&127);return M}function yr(v,y,w){let M="";w=Math.min(v.length,w);for(let V=y;V<w;++V)M+=String.fromCharCode(v[V]);return M}function Wt(v,y,w){const M=v.length;(!y||y<0)&&(y=0),(!w||w<0||w>M)&&(w=M);let V="";for(let Z=y;Z<w;++Z)V+=ce[v[Z]];return V}function re(v,y,w){const M=v.slice(y,w);let V="";for(let Z=0;Z<M.length-1;Z+=2)V+=String.fromCharCode(M[Z]+M[Z+1]*256);return V}T.prototype.slice=function(y,w){const M=this.length;y=~~y,w=w===void 0?M:~~w,y<0?(y+=M,y<0&&(y=0)):y>M&&(y=M),w<0?(w+=M,w<0&&(w=0)):w>M&&(w=M),w<y&&(w=y);const V=this.subarray(y,w);return Object.setPrototypeOf(V,T.prototype),V};function oe(v,y,w){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+y>w)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUintLE=T.prototype.readUIntLE=function(y,w,M){y=y>>>0,w=w>>>0,M||oe(y,w,this.length);let V=this[y],Z=1,ot=0;for(;++ot<w&&(Z*=256);)V+=this[y+ot]*Z;return V},T.prototype.readUintBE=T.prototype.readUIntBE=function(y,w,M){y=y>>>0,w=w>>>0,M||oe(y,w,this.length);let V=this[y+--w],Z=1;for(;w>0&&(Z*=256);)V+=this[y+--w]*Z;return V},T.prototype.readUint8=T.prototype.readUInt8=function(y,w){return y=y>>>0,w||oe(y,1,this.length),this[y]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(y,w){return y=y>>>0,w||oe(y,2,this.length),this[y]|this[y+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(y,w){return y=y>>>0,w||oe(y,2,this.length),this[y]<<8|this[y+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},T.prototype.readBigUInt64LE=$e(function(y){y=y>>>0,q(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&Y(y,this.length-8);const V=w+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,Z=this[++y]+this[++y]*2**8+this[++y]*2**16+M*2**24;return BigInt(V)+(BigInt(Z)<<BigInt(32))}),T.prototype.readBigUInt64BE=$e(function(y){y=y>>>0,q(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&Y(y,this.length-8);const V=w*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],Z=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+M;return(BigInt(V)<<BigInt(32))+BigInt(Z)}),T.prototype.readIntLE=function(y,w,M){y=y>>>0,w=w>>>0,M||oe(y,w,this.length);let V=this[y],Z=1,ot=0;for(;++ot<w&&(Z*=256);)V+=this[y+ot]*Z;return Z*=128,V>=Z&&(V-=Math.pow(2,8*w)),V},T.prototype.readIntBE=function(y,w,M){y=y>>>0,w=w>>>0,M||oe(y,w,this.length);let V=w,Z=1,ot=this[y+--V];for(;V>0&&(Z*=256);)ot+=this[y+--V]*Z;return Z*=128,ot>=Z&&(ot-=Math.pow(2,8*w)),ot},T.prototype.readInt8=function(y,w){return y=y>>>0,w||oe(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},T.prototype.readInt16LE=function(y,w){y=y>>>0,w||oe(y,2,this.length);const M=this[y]|this[y+1]<<8;return M&32768?M|4294901760:M},T.prototype.readInt16BE=function(y,w){y=y>>>0,w||oe(y,2,this.length);const M=this[y+1]|this[y]<<8;return M&32768?M|4294901760:M},T.prototype.readInt32LE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},T.prototype.readInt32BE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},T.prototype.readBigInt64LE=$e(function(y){y=y>>>0,q(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&Y(y,this.length-8);const V=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(M<<24);return(BigInt(V)<<BigInt(32))+BigInt(w+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),T.prototype.readBigInt64BE=$e(function(y){y=y>>>0,q(y,"offset");const w=this[y],M=this[y+7];(w===void 0||M===void 0)&&Y(y,this.length-8);const V=(w<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(V)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+M)}),T.prototype.readFloatLE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),tt.read(this,y,!0,23,4)},T.prototype.readFloatBE=function(y,w){return y=y>>>0,w||oe(y,4,this.length),tt.read(this,y,!1,23,4)},T.prototype.readDoubleLE=function(y,w){return y=y>>>0,w||oe(y,8,this.length),tt.read(this,y,!0,52,8)},T.prototype.readDoubleBE=function(y,w){return y=y>>>0,w||oe(y,8,this.length),tt.read(this,y,!1,52,8)};function Nt(v,y,w,M,V,Z){if(!T.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>V||y<Z)throw new RangeError('"value" argument is out of bounds');if(w+M>v.length)throw new RangeError("Index out of range")}T.prototype.writeUintLE=T.prototype.writeUIntLE=function(y,w,M,V){if(y=+y,w=w>>>0,M=M>>>0,!V){const Tt=Math.pow(2,8*M)-1;Nt(this,y,w,M,Tt,0)}let Z=1,ot=0;for(this[w]=y&255;++ot<M&&(Z*=256);)this[w+ot]=y/Z&255;return w+M},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(y,w,M,V){if(y=+y,w=w>>>0,M=M>>>0,!V){const Tt=Math.pow(2,8*M)-1;Nt(this,y,w,M,Tt,0)}let Z=M-1,ot=1;for(this[w+Z]=y&255;--Z>=0&&(ot*=256);)this[w+Z]=y/ot&255;return w+M},T.prototype.writeUint8=T.prototype.writeUInt8=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,1,255,0),this[w]=y&255,w+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,2,65535,0),this[w]=y&255,this[w+1]=y>>>8,w+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,2,65535,0),this[w]=y>>>8,this[w+1]=y&255,w+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,4,4294967295,0),this[w+3]=y>>>24,this[w+2]=y>>>16,this[w+1]=y>>>8,this[w]=y&255,w+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,4,4294967295,0),this[w]=y>>>24,this[w+1]=y>>>16,this[w+2]=y>>>8,this[w+3]=y&255,w+4};function $t(v,y,w,M,V){C(y,M,V,v,w,7);let Z=Number(y&BigInt(4294967295));v[w++]=Z,Z=Z>>8,v[w++]=Z,Z=Z>>8,v[w++]=Z,Z=Z>>8,v[w++]=Z;let ot=Number(y>>BigInt(32)&BigInt(4294967295));return v[w++]=ot,ot=ot>>8,v[w++]=ot,ot=ot>>8,v[w++]=ot,ot=ot>>8,v[w++]=ot,w}function Se(v,y,w,M,V){C(y,M,V,v,w,7);let Z=Number(y&BigInt(4294967295));v[w+7]=Z,Z=Z>>8,v[w+6]=Z,Z=Z>>8,v[w+5]=Z,Z=Z>>8,v[w+4]=Z;let ot=Number(y>>BigInt(32)&BigInt(4294967295));return v[w+3]=ot,ot=ot>>8,v[w+2]=ot,ot=ot>>8,v[w+1]=ot,ot=ot>>8,v[w]=ot,w+8}T.prototype.writeBigUInt64LE=$e(function(y,w=0){return $t(this,y,w,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeBigUInt64BE=$e(function(y,w=0){return Se(this,y,w,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeIntLE=function(y,w,M,V){if(y=+y,w=w>>>0,!V){const kt=Math.pow(2,8*M-1);Nt(this,y,w,M,kt-1,-kt)}let Z=0,ot=1,Tt=0;for(this[w]=y&255;++Z<M&&(ot*=256);)y<0&&Tt===0&&this[w+Z-1]!==0&&(Tt=1),this[w+Z]=(y/ot>>0)-Tt&255;return w+M},T.prototype.writeIntBE=function(y,w,M,V){if(y=+y,w=w>>>0,!V){const kt=Math.pow(2,8*M-1);Nt(this,y,w,M,kt-1,-kt)}let Z=M-1,ot=1,Tt=0;for(this[w+Z]=y&255;--Z>=0&&(ot*=256);)y<0&&Tt===0&&this[w+Z+1]!==0&&(Tt=1),this[w+Z]=(y/ot>>0)-Tt&255;return w+M},T.prototype.writeInt8=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,1,127,-128),y<0&&(y=255+y+1),this[w]=y&255,w+1},T.prototype.writeInt16LE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,2,32767,-32768),this[w]=y&255,this[w+1]=y>>>8,w+2},T.prototype.writeInt16BE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,2,32767,-32768),this[w]=y>>>8,this[w+1]=y&255,w+2},T.prototype.writeInt32LE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,4,2147483647,-2147483648),this[w]=y&255,this[w+1]=y>>>8,this[w+2]=y>>>16,this[w+3]=y>>>24,w+4},T.prototype.writeInt32BE=function(y,w,M){return y=+y,w=w>>>0,M||Nt(this,y,w,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[w]=y>>>24,this[w+1]=y>>>16,this[w+2]=y>>>8,this[w+3]=y&255,w+4},T.prototype.writeBigInt64LE=$e(function(y,w=0){return $t(this,y,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),T.prototype.writeBigInt64BE=$e(function(y,w=0){return Se(this,y,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Gt(v,y,w,M,V,Z){if(w+M>v.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function Qt(v,y,w,M,V){return y=+y,w=w>>>0,V||Gt(v,y,w,4),tt.write(v,y,w,M,23,4),w+4}T.prototype.writeFloatLE=function(y,w,M){return Qt(this,y,w,!0,M)},T.prototype.writeFloatBE=function(y,w,M){return Qt(this,y,w,!1,M)};function Le(v,y,w,M,V){return y=+y,w=w>>>0,V||Gt(v,y,w,8),tt.write(v,y,w,M,52,8),w+8}T.prototype.writeDoubleLE=function(y,w,M){return Le(this,y,w,!0,M)},T.prototype.writeDoubleBE=function(y,w,M){return Le(this,y,w,!1,M)},T.prototype.copy=function(y,w,M,V){if(!T.isBuffer(y))throw new TypeError("argument should be a Buffer");if(M||(M=0),!V&&V!==0&&(V=this.length),w>=y.length&&(w=y.length),w||(w=0),V>0&&V<M&&(V=M),V===M||y.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(M<0||M>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),y.length-w<V-M&&(V=y.length-w+M);const Z=V-M;return this===y&&typeof nt.prototype.copyWithin=="function"?this.copyWithin(w,M,V):nt.prototype.set.call(y,this.subarray(M,V),w),Z},T.prototype.fill=function(y,w,M,V){if(typeof y=="string"){if(typeof w=="string"?(V=w,w=0,M=this.length):typeof M=="string"&&(V=M,M=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!T.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(y.length===1){const ot=y.charCodeAt(0);(V==="utf8"&&ot<128||V==="latin1")&&(y=ot)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(w<0||this.length<w||this.length<M)throw new RangeError("Out of range index");if(M<=w)return this;w=w>>>0,M=M===void 0?this.length:M>>>0,y||(y=0);let Z;if(typeof y=="number")for(Z=w;Z<M;++Z)this[Z]=y;else{const ot=T.isBuffer(y)?y:T.from(y,V),Tt=ot.length;if(Tt===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(Z=0;Z<M-w;++Z)this[Z+w]=ot[Z%Tt]}return this};const Kt={};function k(v,y,w){Kt[v]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(V){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:V,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}k("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(v,y){return`The "${v}" argument must be of type number. Received type ${typeof y}`},TypeError),k("ERR_OUT_OF_RANGE",function(v,y,w){let M=`The value of "${v}" is out of range.`,V=w;return Number.isInteger(w)&&Math.abs(w)>2**32?V=p(String(w)):typeof w=="bigint"&&(V=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(V=p(V)),V+="n"),M+=` It must be ${y}. Received ${V}`,M},RangeError);function p(v){let y="",w=v.length;const M=v[0]==="-"?1:0;for(;w>=M+4;w-=3)y=`_${v.slice(w-3,w)}${y}`;return`${v.slice(0,w)}${y}`}function m(v,y,w){q(y,"offset"),(v[y]===void 0||v[y+w]===void 0)&&Y(y,v.length-(w+1))}function C(v,y,w,M,V,Z){if(v>w||v<y){const ot=typeof y=="bigint"?"n":"";let Tt;throw y===0||y===BigInt(0)?Tt=`>= 0${ot} and < 2${ot} ** ${(Z+1)*8}${ot}`:Tt=`>= -(2${ot} ** ${(Z+1)*8-1}${ot}) and < 2 ** ${(Z+1)*8-1}${ot}`,new Kt.ERR_OUT_OF_RANGE("value",Tt,v)}m(M,V,Z)}function q(v,y){if(typeof v!="number")throw new Kt.ERR_INVALID_ARG_TYPE(y,"number",v)}function Y(v,y,w){throw Math.floor(v)!==v?(q(v,w),new Kt.ERR_OUT_OF_RANGE("offset","an integer",v)):y<0?new Kt.ERR_BUFFER_OUT_OF_BOUNDS:new Kt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,v)}const rt=/[^+/0-9A-Za-z-_]/g;function vt(v){if(v=v.split("=")[0],v=v.trim().replace(rt,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function It(v,y){y=y||1/0;let w;const M=v.length;let V=null;const Z=[];for(let ot=0;ot<M;++ot){if(w=v.charCodeAt(ot),w>55295&&w<57344){if(!V){if(w>56319){(y-=3)>-1&&Z.push(239,191,189);continue}else if(ot+1===M){(y-=3)>-1&&Z.push(239,191,189);continue}V=w;continue}if(w<56320){(y-=3)>-1&&Z.push(239,191,189),V=w;continue}w=(V-55296<<10|w-56320)+65536}else V&&(y-=3)>-1&&Z.push(239,191,189);if(V=null,w<128){if((y-=1)<0)break;Z.push(w)}else if(w<2048){if((y-=2)<0)break;Z.push(w>>6|192,w&63|128)}else if(w<65536){if((y-=3)<0)break;Z.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((y-=4)<0)break;Z.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return Z}function At(v){const y=[];for(let w=0;w<v.length;++w)y.push(v.charCodeAt(w)&255);return y}function jt(v,y){let w,M,V;const Z=[];for(let ot=0;ot<v.length&&!((y-=2)<0);++ot)w=v.charCodeAt(ot),M=w>>8,V=w%256,Z.push(V),Z.push(M);return Z}function _t(v){return U.toByteArray(vt(v))}function te(v,y,w,M){let V;for(V=0;V<M&&!(V+w>=y.length||V>=v.length);++V)y[V+w]=v[V];return V}function He(v,y){return v instanceof y||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===y.name}function ne(v){return v!==v}const ce=function(){const v="0123456789abcdef",y=new Array(256);for(let w=0;w<16;++w){const M=w*16;for(let V=0;V<16;++V)y[M+V]=v[w]+v[V]}return y}();function $e(v){return typeof BigInt>"u"?ue:v}function ue(){throw new Error("BigInt not supported")}})(t);const W=t.Buffer;n.Blob=t.Blob,n.BlobOptions=t.BlobOptions,n.Buffer=t.Buffer,n.File=t.File,n.FileOptions=t.FileOptions,n.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,n.SlowBuffer=t.SlowBuffer,n.TranscodeEncoding=t.TranscodeEncoding,n.atob=t.atob,n.btoa=t.btoa,n.constants=t.constants,n.default=W,n.isAscii=t.isAscii,n.isUtf8=t.isUtf8,n.kMaxLength=t.kMaxLength,n.kStringMaxLength=t.kStringMaxLength,n.resolveObjectURL=t.resolveObjectURL,n.transcode=t.transcode}(Hi)),Hi}var au=Dn.exports,Es;function Ho(){return Es||(Es=1,function(n){(function(t,e){function r(A,s){if(!A)throw new Error(s||"Assertion failed")}function o(A,s){A.super_=s;var l=function(){};l.prototype=s.prototype,A.prototype=new l,A.prototype.constructor=A}function i(A,s,l){if(i.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((s==="le"||s==="be")&&(l=s,s=10),this._init(A||0,s||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Do().Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,l){return s.cmp(l)>0?s:l},i.min=function(s,l){return s.cmp(l)<0?s:l},i.prototype._init=function(s,l,E){if(typeof s=="number")return this._initNumber(s,l,E);if(typeof s=="object")return this._initArray(s,l,E);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),s=s.toString().replace(/\s+/g,"");var S=0;s[0]==="-"&&(S++,this.negative=1),S<s.length&&(l===16?this._parseHex(s,S,E):(this._parseBase(s,l,S),E==="le"&&this._initArray(this.toArray(),l,E)))},i.prototype._initNumber=function(s,l,E){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),l,E)},i.prototype._initArray=function(s,l,E){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var x,R,g=0;if(E==="be")for(S=s.length-1,x=0;S>=0;S-=3)R=s[S]|s[S-1]<<8|s[S-2]<<16,this.words[x]|=R<<g&67108863,this.words[x+1]=R>>>26-g&67108863,g+=24,g>=26&&(g-=26,x++);else if(E==="le")for(S=0,x=0;S<s.length;S+=3)R=s[S]|s[S+1]<<8|s[S+2]<<16,this.words[x]|=R<<g&67108863,this.words[x+1]=R>>>26-g&67108863,g+=24,g>=26&&(g-=26,x++);return this._strip()};function f(A,s){var l=A.charCodeAt(s);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+A)}function d(A,s,l){var E=f(A,l);return l-1>=s&&(E|=f(A,l-1)<<4),E}i.prototype._parseHex=function(s,l,E){this.length=Math.ceil((s.length-l)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var x=0,R=0,g;if(E==="be")for(S=s.length-1;S>=l;S-=2)g=d(s,l,S)<<x,this.words[R]|=g&67108863,x>=18?(x-=18,R+=1,this.words[R]|=g>>>26):x+=8;else{var h=s.length-l;for(S=h%2===0?l+1:l;S<s.length;S+=2)g=d(s,l,S)<<x,this.words[R]|=g&67108863,x>=18?(x-=18,R+=1,this.words[R]|=g>>>26):x+=8}this._strip()};function I(A,s,l,E){for(var S=0,x=0,R=Math.min(A.length,l),g=s;g<R;g++){var h=A.charCodeAt(g)-48;S*=E,h>=49?x=h-49+10:h>=17?x=h-17+10:x=h,r(h>=0&&x<E,"Invalid character"),S+=x}return S}i.prototype._parseBase=function(s,l,E){this.words=[0],this.length=1;for(var S=0,x=1;x<=67108863;x*=l)S++;S--,x=x/l|0;for(var R=s.length-E,g=R%S,h=Math.min(R,R-g)+E,c=0,u=E;u<h;u+=S)c=I(s,u,u+S,l),this.imuln(x),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(g!==0){var _=1;for(c=I(s,u,s.length,l),u=0;u<g;u++)_*=l;this.imuln(_),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(s){s.words=new Array(this.length);for(var l=0;l<this.length;l++)s.words[l]=this.words[l];s.length=this.length,s.negative=this.negative,s.red=this.red};function b(A,s){A.words=s.words,A.length=s.length,A.negative=s.negative,A.red=s.red}if(i.prototype._move=function(s){b(s,this)},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=N}catch{i.prototype.inspect=N}else i.prototype.inspect=N;function N(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],P=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],H=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,l){s=s||10,l=l|0||1;var E;if(s===16||s==="hex"){E="";for(var S=0,x=0,R=0;R<this.length;R++){var g=this.words[R],h=((g<<S|x)&16777215).toString(16);x=g>>>24-S&16777215,S+=2,S>=26&&(S-=26,R--),x!==0||R!==this.length-1?E=L[6-h.length]+h+E:E=h+E}for(x!==0&&(E=x.toString(16)+E);E.length%l!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(s===(s|0)&&s>=2&&s<=36){var c=P[s],u=H[s];E="";var _=this.clone();for(_.negative=0;!_.isZero();){var O=_.modrn(u).toString(s);_=_.idivn(u),_.isZero()?E=O+E:E=L[c-O.length]+O+E}for(this.isZero()&&(E="0"+E);E.length%l!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(s,l){return this.toArrayLike(a,s,l)}),i.prototype.toArray=function(s,l){return this.toArrayLike(Array,s,l)};var F=function(s,l){return s.allocUnsafe?s.allocUnsafe(l):new s(l)};i.prototype.toArrayLike=function(s,l,E){this._strip();var S=this.byteLength(),x=E||Math.max(1,S);r(S<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var R=F(s,x),g=l==="le"?"LE":"BE";return this["_toArrayLike"+g](R,S),R},i.prototype._toArrayLikeLE=function(s,l){for(var E=0,S=0,x=0,R=0;x<this.length;x++){var g=this.words[x]<<R|S;s[E++]=g&255,E<s.length&&(s[E++]=g>>8&255),E<s.length&&(s[E++]=g>>16&255),R===6?(E<s.length&&(s[E++]=g>>24&255),S=0,R=0):(S=g>>>24,R+=2)}if(E<s.length)for(s[E++]=S;E<s.length;)s[E++]=0},i.prototype._toArrayLikeBE=function(s,l){for(var E=s.length-1,S=0,x=0,R=0;x<this.length;x++){var g=this.words[x]<<R|S;s[E--]=g&255,E>=0&&(s[E--]=g>>8&255),E>=0&&(s[E--]=g>>16&255),R===6?(E>=0&&(s[E--]=g>>24&255),S=0,R=0):(S=g>>>24,R+=2)}if(E>=0)for(s[E--]=S;E>=0;)s[E--]=0},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var l=s,E=0;return l>=4096&&(E+=13,l>>>=13),l>=64&&(E+=7,l>>>=7),l>=8&&(E+=4,l>>>=4),l>=2&&(E+=2,l>>>=2),E+l},i.prototype._zeroBits=function(s){if(s===0)return 26;var l=s,E=0;return(l&8191)===0&&(E+=13,l>>>=13),(l&127)===0&&(E+=7,l>>>=7),(l&15)===0&&(E+=4,l>>>=4),(l&3)===0&&(E+=2,l>>>=2),(l&1)===0&&E++,E},i.prototype.bitLength=function(){var s=this.words[this.length-1],l=this._countBits(s);return(this.length-1)*26+l};function B(A){for(var s=new Array(A.bitLength()),l=0;l<s.length;l++){var E=l/26|0,S=l%26;s[l]=A.words[E]>>>S&1}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,l=0;l<this.length;l++){var E=this._zeroBits(this.words[l]);if(s+=E,E!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]|s.words[l];return this._strip()},i.prototype.ior=function(s){return r((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var l;this.length>s.length?l=s:l=this;for(var E=0;E<l.length;E++)this.words[E]=this.words[E]&s.words[E];return this.length=l.length,this._strip()},i.prototype.iand=function(s){return r((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var l,E;this.length>s.length?(l=this,E=s):(l=s,E=this);for(var S=0;S<E.length;S++)this.words[S]=l.words[S]^E.words[S];if(this!==l)for(;S<l.length;S++)this.words[S]=l.words[S];return this.length=l.length,this._strip()},i.prototype.ixor=function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){r(typeof s=="number"&&s>=0);var l=Math.ceil(s/26)|0,E=s%26;this._expand(l),E>0&&l--;for(var S=0;S<l;S++)this.words[S]=~this.words[S]&67108863;return E>0&&(this.words[S]=~this.words[S]&67108863>>26-E),this._strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,l){r(typeof s=="number"&&s>=0);var E=s/26|0,S=s%26;return this._expand(E+1),l?this.words[E]=this.words[E]|1<<S:this.words[E]=this.words[E]&~(1<<S),this._strip()},i.prototype.iadd=function(s){var l;if(this.negative!==0&&s.negative===0)return this.negative=0,l=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,l=this.isub(s),s.negative=1,l._normSign();var E,S;this.length>s.length?(E=this,S=s):(E=s,S=this);for(var x=0,R=0;R<S.length;R++)l=(E.words[R]|0)+(S.words[R]|0)+x,this.words[R]=l&67108863,x=l>>>26;for(;x!==0&&R<E.length;R++)l=(E.words[R]|0)+x,this.words[R]=l&67108863,x=l>>>26;if(this.length=E.length,x!==0)this.words[this.length]=x,this.length++;else if(E!==this)for(;R<E.length;R++)this.words[R]=E.words[R];return this},i.prototype.add=function(s){var l;return s.negative!==0&&this.negative===0?(s.negative=0,l=this.sub(s),s.negative^=1,l):s.negative===0&&this.negative!==0?(this.negative=0,l=s.sub(this),this.negative=1,l):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var l=this.iadd(s);return s.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var E=this.cmp(s);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,x;E>0?(S=this,x=s):(S=s,x=this);for(var R=0,g=0;g<x.length;g++)l=(S.words[g]|0)-(x.words[g]|0)+R,R=l>>26,this.words[g]=l&67108863;for(;R!==0&&g<S.length;g++)l=(S.words[g]|0)+R,R=l>>26,this.words[g]=l&67108863;if(R===0&&g<S.length&&S!==this)for(;g<S.length;g++)this.words[g]=S.words[g];return this.length=Math.max(this.length,g),S!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function W(A,s,l){l.negative=s.negative^A.negative;var E=A.length+s.length|0;l.length=E,E=E-1|0;var S=A.words[0]|0,x=s.words[0]|0,R=S*x,g=R&67108863,h=R/67108864|0;l.words[0]=g;for(var c=1;c<E;c++){for(var u=h>>>26,_=h&67108863,O=Math.min(c,s.length-1),z=Math.max(0,c-A.length+1);z<=O;z++){var et=c-z|0;S=A.words[et]|0,x=s.words[z]|0,R=S*x+_,u+=R/67108864|0,_=R&67108863}l.words[c]=_|0,h=u|0}return h!==0?l.words[c]=h|0:l.length--,l._strip()}var K=function(s,l,E){var S=s.words,x=l.words,R=E.words,g=0,h,c,u,_=S[0]|0,O=_&8191,z=_>>>13,et=S[1]|0,ht=et&8191,gt=et>>>13,Ft=S[2]|0,Et=Ft&8191,xt=Ft>>>13,le=S[3]|0,Lt=le&8191,Mt=le>>>13,Oe=S[4]|0,Ht=Oe&8191,Zt=Oe>>>13,yr=S[5]|0,Wt=yr&8191,re=yr>>>13,oe=S[6]|0,Nt=oe&8191,$t=oe>>>13,Se=S[7]|0,Gt=Se&8191,Qt=Se>>>13,Le=S[8]|0,Kt=Le&8191,k=Le>>>13,p=S[9]|0,m=p&8191,C=p>>>13,q=x[0]|0,Y=q&8191,rt=q>>>13,vt=x[1]|0,It=vt&8191,At=vt>>>13,jt=x[2]|0,_t=jt&8191,te=jt>>>13,He=x[3]|0,ne=He&8191,ce=He>>>13,$e=x[4]|0,ue=$e&8191,v=$e>>>13,y=x[5]|0,w=y&8191,M=y>>>13,V=x[6]|0,Z=V&8191,ot=V>>>13,Tt=x[7]|0,kt=Tt&8191,St=Tt>>>13,ee=x[8]|0,Rt=ee&8191,de=ee>>>13,ms=x[9]|0,pe=ms&8191,ye=ms>>>13;E.negative=s.negative^l.negative,E.length=19,h=Math.imul(O,Y),c=Math.imul(O,rt),c=c+Math.imul(z,Y)|0,u=Math.imul(z,rt);var Ei=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,h=Math.imul(ht,Y),c=Math.imul(ht,rt),c=c+Math.imul(gt,Y)|0,u=Math.imul(gt,rt),h=h+Math.imul(O,It)|0,c=c+Math.imul(O,At)|0,c=c+Math.imul(z,It)|0,u=u+Math.imul(z,At)|0;var _i=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(_i>>>26)|0,_i&=67108863,h=Math.imul(Et,Y),c=Math.imul(Et,rt),c=c+Math.imul(xt,Y)|0,u=Math.imul(xt,rt),h=h+Math.imul(ht,It)|0,c=c+Math.imul(ht,At)|0,c=c+Math.imul(gt,It)|0,u=u+Math.imul(gt,At)|0,h=h+Math.imul(O,_t)|0,c=c+Math.imul(O,te)|0,c=c+Math.imul(z,_t)|0,u=u+Math.imul(z,te)|0;var Ri=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,h=Math.imul(Lt,Y),c=Math.imul(Lt,rt),c=c+Math.imul(Mt,Y)|0,u=Math.imul(Mt,rt),h=h+Math.imul(Et,It)|0,c=c+Math.imul(Et,At)|0,c=c+Math.imul(xt,It)|0,u=u+Math.imul(xt,At)|0,h=h+Math.imul(ht,_t)|0,c=c+Math.imul(ht,te)|0,c=c+Math.imul(gt,_t)|0,u=u+Math.imul(gt,te)|0,h=h+Math.imul(O,ne)|0,c=c+Math.imul(O,ce)|0,c=c+Math.imul(z,ne)|0,u=u+Math.imul(z,ce)|0;var Ii=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,h=Math.imul(Ht,Y),c=Math.imul(Ht,rt),c=c+Math.imul(Zt,Y)|0,u=Math.imul(Zt,rt),h=h+Math.imul(Lt,It)|0,c=c+Math.imul(Lt,At)|0,c=c+Math.imul(Mt,It)|0,u=u+Math.imul(Mt,At)|0,h=h+Math.imul(Et,_t)|0,c=c+Math.imul(Et,te)|0,c=c+Math.imul(xt,_t)|0,u=u+Math.imul(xt,te)|0,h=h+Math.imul(ht,ne)|0,c=c+Math.imul(ht,ce)|0,c=c+Math.imul(gt,ne)|0,u=u+Math.imul(gt,ce)|0,h=h+Math.imul(O,ue)|0,c=c+Math.imul(O,v)|0,c=c+Math.imul(z,ue)|0,u=u+Math.imul(z,v)|0;var Ai=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,h=Math.imul(Wt,Y),c=Math.imul(Wt,rt),c=c+Math.imul(re,Y)|0,u=Math.imul(re,rt),h=h+Math.imul(Ht,It)|0,c=c+Math.imul(Ht,At)|0,c=c+Math.imul(Zt,It)|0,u=u+Math.imul(Zt,At)|0,h=h+Math.imul(Lt,_t)|0,c=c+Math.imul(Lt,te)|0,c=c+Math.imul(Mt,_t)|0,u=u+Math.imul(Mt,te)|0,h=h+Math.imul(Et,ne)|0,c=c+Math.imul(Et,ce)|0,c=c+Math.imul(xt,ne)|0,u=u+Math.imul(xt,ce)|0,h=h+Math.imul(ht,ue)|0,c=c+Math.imul(ht,v)|0,c=c+Math.imul(gt,ue)|0,u=u+Math.imul(gt,v)|0,h=h+Math.imul(O,w)|0,c=c+Math.imul(O,M)|0,c=c+Math.imul(z,w)|0,u=u+Math.imul(z,M)|0;var Si=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Si>>>26)|0,Si&=67108863,h=Math.imul(Nt,Y),c=Math.imul(Nt,rt),c=c+Math.imul($t,Y)|0,u=Math.imul($t,rt),h=h+Math.imul(Wt,It)|0,c=c+Math.imul(Wt,At)|0,c=c+Math.imul(re,It)|0,u=u+Math.imul(re,At)|0,h=h+Math.imul(Ht,_t)|0,c=c+Math.imul(Ht,te)|0,c=c+Math.imul(Zt,_t)|0,u=u+Math.imul(Zt,te)|0,h=h+Math.imul(Lt,ne)|0,c=c+Math.imul(Lt,ce)|0,c=c+Math.imul(Mt,ne)|0,u=u+Math.imul(Mt,ce)|0,h=h+Math.imul(Et,ue)|0,c=c+Math.imul(Et,v)|0,c=c+Math.imul(xt,ue)|0,u=u+Math.imul(xt,v)|0,h=h+Math.imul(ht,w)|0,c=c+Math.imul(ht,M)|0,c=c+Math.imul(gt,w)|0,u=u+Math.imul(gt,M)|0,h=h+Math.imul(O,Z)|0,c=c+Math.imul(O,ot)|0,c=c+Math.imul(z,Z)|0,u=u+Math.imul(z,ot)|0;var xi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(xi>>>26)|0,xi&=67108863,h=Math.imul(Gt,Y),c=Math.imul(Gt,rt),c=c+Math.imul(Qt,Y)|0,u=Math.imul(Qt,rt),h=h+Math.imul(Nt,It)|0,c=c+Math.imul(Nt,At)|0,c=c+Math.imul($t,It)|0,u=u+Math.imul($t,At)|0,h=h+Math.imul(Wt,_t)|0,c=c+Math.imul(Wt,te)|0,c=c+Math.imul(re,_t)|0,u=u+Math.imul(re,te)|0,h=h+Math.imul(Ht,ne)|0,c=c+Math.imul(Ht,ce)|0,c=c+Math.imul(Zt,ne)|0,u=u+Math.imul(Zt,ce)|0,h=h+Math.imul(Lt,ue)|0,c=c+Math.imul(Lt,v)|0,c=c+Math.imul(Mt,ue)|0,u=u+Math.imul(Mt,v)|0,h=h+Math.imul(Et,w)|0,c=c+Math.imul(Et,M)|0,c=c+Math.imul(xt,w)|0,u=u+Math.imul(xt,M)|0,h=h+Math.imul(ht,Z)|0,c=c+Math.imul(ht,ot)|0,c=c+Math.imul(gt,Z)|0,u=u+Math.imul(gt,ot)|0,h=h+Math.imul(O,kt)|0,c=c+Math.imul(O,St)|0,c=c+Math.imul(z,kt)|0,u=u+Math.imul(z,St)|0;var ki=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(ki>>>26)|0,ki&=67108863,h=Math.imul(Kt,Y),c=Math.imul(Kt,rt),c=c+Math.imul(k,Y)|0,u=Math.imul(k,rt),h=h+Math.imul(Gt,It)|0,c=c+Math.imul(Gt,At)|0,c=c+Math.imul(Qt,It)|0,u=u+Math.imul(Qt,At)|0,h=h+Math.imul(Nt,_t)|0,c=c+Math.imul(Nt,te)|0,c=c+Math.imul($t,_t)|0,u=u+Math.imul($t,te)|0,h=h+Math.imul(Wt,ne)|0,c=c+Math.imul(Wt,ce)|0,c=c+Math.imul(re,ne)|0,u=u+Math.imul(re,ce)|0,h=h+Math.imul(Ht,ue)|0,c=c+Math.imul(Ht,v)|0,c=c+Math.imul(Zt,ue)|0,u=u+Math.imul(Zt,v)|0,h=h+Math.imul(Lt,w)|0,c=c+Math.imul(Lt,M)|0,c=c+Math.imul(Mt,w)|0,u=u+Math.imul(Mt,M)|0,h=h+Math.imul(Et,Z)|0,c=c+Math.imul(Et,ot)|0,c=c+Math.imul(xt,Z)|0,u=u+Math.imul(xt,ot)|0,h=h+Math.imul(ht,kt)|0,c=c+Math.imul(ht,St)|0,c=c+Math.imul(gt,kt)|0,u=u+Math.imul(gt,St)|0,h=h+Math.imul(O,Rt)|0,c=c+Math.imul(O,de)|0,c=c+Math.imul(z,Rt)|0,u=u+Math.imul(z,de)|0;var vi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(vi>>>26)|0,vi&=67108863,h=Math.imul(m,Y),c=Math.imul(m,rt),c=c+Math.imul(C,Y)|0,u=Math.imul(C,rt),h=h+Math.imul(Kt,It)|0,c=c+Math.imul(Kt,At)|0,c=c+Math.imul(k,It)|0,u=u+Math.imul(k,At)|0,h=h+Math.imul(Gt,_t)|0,c=c+Math.imul(Gt,te)|0,c=c+Math.imul(Qt,_t)|0,u=u+Math.imul(Qt,te)|0,h=h+Math.imul(Nt,ne)|0,c=c+Math.imul(Nt,ce)|0,c=c+Math.imul($t,ne)|0,u=u+Math.imul($t,ce)|0,h=h+Math.imul(Wt,ue)|0,c=c+Math.imul(Wt,v)|0,c=c+Math.imul(re,ue)|0,u=u+Math.imul(re,v)|0,h=h+Math.imul(Ht,w)|0,c=c+Math.imul(Ht,M)|0,c=c+Math.imul(Zt,w)|0,u=u+Math.imul(Zt,M)|0,h=h+Math.imul(Lt,Z)|0,c=c+Math.imul(Lt,ot)|0,c=c+Math.imul(Mt,Z)|0,u=u+Math.imul(Mt,ot)|0,h=h+Math.imul(Et,kt)|0,c=c+Math.imul(Et,St)|0,c=c+Math.imul(xt,kt)|0,u=u+Math.imul(xt,St)|0,h=h+Math.imul(ht,Rt)|0,c=c+Math.imul(ht,de)|0,c=c+Math.imul(gt,Rt)|0,u=u+Math.imul(gt,de)|0,h=h+Math.imul(O,pe)|0,c=c+Math.imul(O,ye)|0,c=c+Math.imul(z,pe)|0,u=u+Math.imul(z,ye)|0;var Ti=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,h=Math.imul(m,It),c=Math.imul(m,At),c=c+Math.imul(C,It)|0,u=Math.imul(C,At),h=h+Math.imul(Kt,_t)|0,c=c+Math.imul(Kt,te)|0,c=c+Math.imul(k,_t)|0,u=u+Math.imul(k,te)|0,h=h+Math.imul(Gt,ne)|0,c=c+Math.imul(Gt,ce)|0,c=c+Math.imul(Qt,ne)|0,u=u+Math.imul(Qt,ce)|0,h=h+Math.imul(Nt,ue)|0,c=c+Math.imul(Nt,v)|0,c=c+Math.imul($t,ue)|0,u=u+Math.imul($t,v)|0,h=h+Math.imul(Wt,w)|0,c=c+Math.imul(Wt,M)|0,c=c+Math.imul(re,w)|0,u=u+Math.imul(re,M)|0,h=h+Math.imul(Ht,Z)|0,c=c+Math.imul(Ht,ot)|0,c=c+Math.imul(Zt,Z)|0,u=u+Math.imul(Zt,ot)|0,h=h+Math.imul(Lt,kt)|0,c=c+Math.imul(Lt,St)|0,c=c+Math.imul(Mt,kt)|0,u=u+Math.imul(Mt,St)|0,h=h+Math.imul(Et,Rt)|0,c=c+Math.imul(Et,de)|0,c=c+Math.imul(xt,Rt)|0,u=u+Math.imul(xt,de)|0,h=h+Math.imul(ht,pe)|0,c=c+Math.imul(ht,ye)|0,c=c+Math.imul(gt,pe)|0,u=u+Math.imul(gt,ye)|0;var Bi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,h=Math.imul(m,_t),c=Math.imul(m,te),c=c+Math.imul(C,_t)|0,u=Math.imul(C,te),h=h+Math.imul(Kt,ne)|0,c=c+Math.imul(Kt,ce)|0,c=c+Math.imul(k,ne)|0,u=u+Math.imul(k,ce)|0,h=h+Math.imul(Gt,ue)|0,c=c+Math.imul(Gt,v)|0,c=c+Math.imul(Qt,ue)|0,u=u+Math.imul(Qt,v)|0,h=h+Math.imul(Nt,w)|0,c=c+Math.imul(Nt,M)|0,c=c+Math.imul($t,w)|0,u=u+Math.imul($t,M)|0,h=h+Math.imul(Wt,Z)|0,c=c+Math.imul(Wt,ot)|0,c=c+Math.imul(re,Z)|0,u=u+Math.imul(re,ot)|0,h=h+Math.imul(Ht,kt)|0,c=c+Math.imul(Ht,St)|0,c=c+Math.imul(Zt,kt)|0,u=u+Math.imul(Zt,St)|0,h=h+Math.imul(Lt,Rt)|0,c=c+Math.imul(Lt,de)|0,c=c+Math.imul(Mt,Rt)|0,u=u+Math.imul(Mt,de)|0,h=h+Math.imul(Et,pe)|0,c=c+Math.imul(Et,ye)|0,c=c+Math.imul(xt,pe)|0,u=u+Math.imul(xt,ye)|0;var Oi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,h=Math.imul(m,ne),c=Math.imul(m,ce),c=c+Math.imul(C,ne)|0,u=Math.imul(C,ce),h=h+Math.imul(Kt,ue)|0,c=c+Math.imul(Kt,v)|0,c=c+Math.imul(k,ue)|0,u=u+Math.imul(k,v)|0,h=h+Math.imul(Gt,w)|0,c=c+Math.imul(Gt,M)|0,c=c+Math.imul(Qt,w)|0,u=u+Math.imul(Qt,M)|0,h=h+Math.imul(Nt,Z)|0,c=c+Math.imul(Nt,ot)|0,c=c+Math.imul($t,Z)|0,u=u+Math.imul($t,ot)|0,h=h+Math.imul(Wt,kt)|0,c=c+Math.imul(Wt,St)|0,c=c+Math.imul(re,kt)|0,u=u+Math.imul(re,St)|0,h=h+Math.imul(Ht,Rt)|0,c=c+Math.imul(Ht,de)|0,c=c+Math.imul(Zt,Rt)|0,u=u+Math.imul(Zt,de)|0,h=h+Math.imul(Lt,pe)|0,c=c+Math.imul(Lt,ye)|0,c=c+Math.imul(Mt,pe)|0,u=u+Math.imul(Mt,ye)|0;var Ni=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,h=Math.imul(m,ue),c=Math.imul(m,v),c=c+Math.imul(C,ue)|0,u=Math.imul(C,v),h=h+Math.imul(Kt,w)|0,c=c+Math.imul(Kt,M)|0,c=c+Math.imul(k,w)|0,u=u+Math.imul(k,M)|0,h=h+Math.imul(Gt,Z)|0,c=c+Math.imul(Gt,ot)|0,c=c+Math.imul(Qt,Z)|0,u=u+Math.imul(Qt,ot)|0,h=h+Math.imul(Nt,kt)|0,c=c+Math.imul(Nt,St)|0,c=c+Math.imul($t,kt)|0,u=u+Math.imul($t,St)|0,h=h+Math.imul(Wt,Rt)|0,c=c+Math.imul(Wt,de)|0,c=c+Math.imul(re,Rt)|0,u=u+Math.imul(re,de)|0,h=h+Math.imul(Ht,pe)|0,c=c+Math.imul(Ht,ye)|0,c=c+Math.imul(Zt,pe)|0,u=u+Math.imul(Zt,ye)|0;var Ci=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,h=Math.imul(m,w),c=Math.imul(m,M),c=c+Math.imul(C,w)|0,u=Math.imul(C,M),h=h+Math.imul(Kt,Z)|0,c=c+Math.imul(Kt,ot)|0,c=c+Math.imul(k,Z)|0,u=u+Math.imul(k,ot)|0,h=h+Math.imul(Gt,kt)|0,c=c+Math.imul(Gt,St)|0,c=c+Math.imul(Qt,kt)|0,u=u+Math.imul(Qt,St)|0,h=h+Math.imul(Nt,Rt)|0,c=c+Math.imul(Nt,de)|0,c=c+Math.imul($t,Rt)|0,u=u+Math.imul($t,de)|0,h=h+Math.imul(Wt,pe)|0,c=c+Math.imul(Wt,ye)|0,c=c+Math.imul(re,pe)|0,u=u+Math.imul(re,ye)|0;var Mi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,h=Math.imul(m,Z),c=Math.imul(m,ot),c=c+Math.imul(C,Z)|0,u=Math.imul(C,ot),h=h+Math.imul(Kt,kt)|0,c=c+Math.imul(Kt,St)|0,c=c+Math.imul(k,kt)|0,u=u+Math.imul(k,St)|0,h=h+Math.imul(Gt,Rt)|0,c=c+Math.imul(Gt,de)|0,c=c+Math.imul(Qt,Rt)|0,u=u+Math.imul(Qt,de)|0,h=h+Math.imul(Nt,pe)|0,c=c+Math.imul(Nt,ye)|0,c=c+Math.imul($t,pe)|0,u=u+Math.imul($t,ye)|0;var Li=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Li>>>26)|0,Li&=67108863,h=Math.imul(m,kt),c=Math.imul(m,St),c=c+Math.imul(C,kt)|0,u=Math.imul(C,St),h=h+Math.imul(Kt,Rt)|0,c=c+Math.imul(Kt,de)|0,c=c+Math.imul(k,Rt)|0,u=u+Math.imul(k,de)|0,h=h+Math.imul(Gt,pe)|0,c=c+Math.imul(Gt,ye)|0,c=c+Math.imul(Qt,pe)|0,u=u+Math.imul(Qt,ye)|0;var Pi=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,h=Math.imul(m,Rt),c=Math.imul(m,de),c=c+Math.imul(C,Rt)|0,u=Math.imul(C,de),h=h+Math.imul(Kt,pe)|0,c=c+Math.imul(Kt,ye)|0,c=c+Math.imul(k,pe)|0,u=u+Math.imul(k,ye)|0;var Ui=(g+h|0)+((c&8191)<<13)|0;g=(u+(c>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,h=Math.imul(m,pe),c=Math.imul(m,ye),c=c+Math.imul(C,pe)|0,u=Math.imul(C,ye);var Fi=(g+h|0)+((c&8191)<<13)|0;return g=(u+(c>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,R[0]=Ei,R[1]=_i,R[2]=Ri,R[3]=Ii,R[4]=Ai,R[5]=Si,R[6]=xi,R[7]=ki,R[8]=vi,R[9]=Ti,R[10]=Bi,R[11]=Oi,R[12]=Ni,R[13]=Ci,R[14]=Mi,R[15]=Li,R[16]=Pi,R[17]=Ui,R[18]=Fi,g!==0&&(R[19]=g,E.length++),E};Math.imul||(K=W);function U(A,s,l){l.negative=s.negative^A.negative,l.length=A.length+s.length;for(var E=0,S=0,x=0;x<l.length-1;x++){var R=S;S=0;for(var g=E&67108863,h=Math.min(x,s.length-1),c=Math.max(0,x-A.length+1);c<=h;c++){var u=x-c,_=A.words[u]|0,O=s.words[c]|0,z=_*O,et=z&67108863;R=R+(z/67108864|0)|0,et=et+g|0,g=et&67108863,R=R+(et>>>26)|0,S+=R>>>26,R&=67108863}l.words[x]=g,E=R,R=S}return E!==0?l.words[x]=E:l.length--,l._strip()}function tt(A,s,l){return U(A,s,l)}i.prototype.mulTo=function(s,l){var E,S=this.length+s.length;return this.length===10&&s.length===10?E=K(this,s,l):S<63?E=W(this,s,l):S<1024?E=U(this,s,l):E=tt(this,s,l),E},i.prototype.mul=function(s){var l=new i(null);return l.words=new Array(this.length+s.length),this.mulTo(s,l)},i.prototype.mulf=function(s){var l=new i(null);return l.words=new Array(this.length+s.length),tt(this,s,l)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){var l=s<0;l&&(s=-s),r(typeof s=="number"),r(s<67108864);for(var E=0,S=0;S<this.length;S++){var x=(this.words[S]|0)*s,R=(x&67108863)+(E&67108863);E>>=26,E+=x/67108864|0,E+=R>>>26,this.words[S]=R&67108863}return E!==0&&(this.words[S]=E,this.length++),this.length=s===0?1:this.length,l?this.ineg():this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var l=B(s);if(l.length===0)return new i(1);for(var E=this,S=0;S<l.length&&l[S]===0;S++,E=E.sqr());if(++S<l.length)for(var x=E.sqr();S<l.length;S++,x=x.sqr())l[S]!==0&&(E=E.mul(x));return E},i.prototype.iushln=function(s){r(typeof s=="number"&&s>=0);var l=s%26,E=(s-l)/26,S=67108863>>>26-l<<26-l,x;if(l!==0){var R=0;for(x=0;x<this.length;x++){var g=this.words[x]&S,h=(this.words[x]|0)-g<<l;this.words[x]=h|R,R=g>>>26-l}R&&(this.words[x]=R,this.length++)}if(E!==0){for(x=this.length-1;x>=0;x--)this.words[x+E]=this.words[x];for(x=0;x<E;x++)this.words[x]=0;this.length+=E}return this._strip()},i.prototype.ishln=function(s){return r(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,l,E){r(typeof s=="number"&&s>=0);var S;l?S=(l-l%26)/26:S=0;var x=s%26,R=Math.min((s-x)/26,this.length),g=67108863^67108863>>>x<<x,h=E;if(S-=R,S=Math.max(0,S),h){for(var c=0;c<R;c++)h.words[c]=this.words[c];h.length=R}if(R!==0)if(this.length>R)for(this.length-=R,c=0;c<this.length;c++)this.words[c]=this.words[c+R];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(u!==0||c>=S);c--){var _=this.words[c]|0;this.words[c]=u<<26-x|_>>>x,u=_&g}return h&&u!==0&&(h.words[h.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(s,l,E){return r(this.negative===0),this.iushrn(s,l,E)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){r(typeof s=="number"&&s>=0);var l=s%26,E=(s-l)/26,S=1<<l;if(this.length<=E)return!1;var x=this.words[E];return!!(x&S)},i.prototype.imaskn=function(s){r(typeof s=="number"&&s>=0);var l=s%26,E=(s-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(l!==0&&E++,this.length=Math.min(E,this.length),l!==0){var S=67108863^67108863>>>l<<l;this.words[this.length-1]&=S}return this._strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<=s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,l,E){var S=s.length+E,x;this._expand(S);var R,g=0;for(x=0;x<s.length;x++){R=(this.words[x+E]|0)+g;var h=(s.words[x]|0)*l;R-=h&67108863,g=(R>>26)-(h/67108864|0),this.words[x+E]=R&67108863}for(;x<this.length-E;x++)R=(this.words[x+E]|0)+g,g=R>>26,this.words[x+E]=R&67108863;if(g===0)return this._strip();for(r(g===-1),g=0,x=0;x<this.length;x++)R=-(this.words[x]|0)+g,g=R>>26,this.words[x]=R&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(s,l){var E=this.length-s.length,S=this.clone(),x=s,R=x.words[x.length-1]|0,g=this._countBits(R);E=26-g,E!==0&&(x=x.ushln(E),S.iushln(E),R=x.words[x.length-1]|0);var h=S.length-x.length,c;if(l!=="mod"){c=new i(null),c.length=h+1,c.words=new Array(c.length);for(var u=0;u<c.length;u++)c.words[u]=0}var _=S.clone()._ishlnsubmul(x,1,h);_.negative===0&&(S=_,c&&(c.words[h]=1));for(var O=h-1;O>=0;O--){var z=(S.words[x.length+O]|0)*67108864+(S.words[x.length+O-1]|0);for(z=Math.min(z/R|0,67108863),S._ishlnsubmul(x,z,O);S.negative!==0;)z--,S.negative=0,S._ishlnsubmul(x,1,O),S.isZero()||(S.negative^=1);c&&(c.words[O]=z)}return c&&c._strip(),S._strip(),l!=="div"&&E!==0&&S.iushrn(E),{div:c||null,mod:S}},i.prototype.divmod=function(s,l,E){if(r(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var S,x,R;return this.negative!==0&&s.negative===0?(R=this.neg().divmod(s,l),l!=="mod"&&(S=R.div.neg()),l!=="div"&&(x=R.mod.neg(),E&&x.negative!==0&&x.iadd(s)),{div:S,mod:x}):this.negative===0&&s.negative!==0?(R=this.divmod(s.neg(),l),l!=="mod"&&(S=R.div.neg()),{div:S,mod:R.mod}):(this.negative&s.negative)!==0?(R=this.neg().divmod(s.neg(),l),l!=="div"&&(x=R.mod.neg(),E&&x.negative!==0&&x.isub(s)),{div:R.div,mod:x}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?l==="div"?{div:this.divn(s.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modrn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modrn(s.words[0]))}:this._wordDiv(s,l)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var l=this.divmod(s);if(l.mod.isZero())return l.div;var E=l.div.negative!==0?l.mod.isub(s):l.mod,S=s.ushrn(1),x=s.andln(1),R=E.cmp(S);return R<0||x===1&&R===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modrn=function(s){var l=s<0;l&&(s=-s),r(s<=67108863);for(var E=(1<<26)%s,S=0,x=this.length-1;x>=0;x--)S=(E*S+(this.words[x]|0))%s;return l?-S:S},i.prototype.modn=function(s){return this.modrn(s)},i.prototype.idivn=function(s){var l=s<0;l&&(s=-s),r(s<=67108863);for(var E=0,S=this.length-1;S>=0;S--){var x=(this.words[S]|0)+E*67108864;this.words[S]=x/s|0,E=x%s}return this._strip(),l?this.ineg():this},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){r(s.negative===0),r(!s.isZero());var l=this,E=s.clone();l.negative!==0?l=l.umod(s):l=l.clone();for(var S=new i(1),x=new i(0),R=new i(0),g=new i(1),h=0;l.isEven()&&E.isEven();)l.iushrn(1),E.iushrn(1),++h;for(var c=E.clone(),u=l.clone();!l.isZero();){for(var _=0,O=1;(l.words[0]&O)===0&&_<26;++_,O<<=1);if(_>0)for(l.iushrn(_);_-- >0;)(S.isOdd()||x.isOdd())&&(S.iadd(c),x.isub(u)),S.iushrn(1),x.iushrn(1);for(var z=0,et=1;(E.words[0]&et)===0&&z<26;++z,et<<=1);if(z>0)for(E.iushrn(z);z-- >0;)(R.isOdd()||g.isOdd())&&(R.iadd(c),g.isub(u)),R.iushrn(1),g.iushrn(1);l.cmp(E)>=0?(l.isub(E),S.isub(R),x.isub(g)):(E.isub(l),R.isub(S),g.isub(x))}return{a:R,b:g,gcd:E.iushln(h)}},i.prototype._invmp=function(s){r(s.negative===0),r(!s.isZero());var l=this,E=s.clone();l.negative!==0?l=l.umod(s):l=l.clone();for(var S=new i(1),x=new i(0),R=E.clone();l.cmpn(1)>0&&E.cmpn(1)>0;){for(var g=0,h=1;(l.words[0]&h)===0&&g<26;++g,h<<=1);if(g>0)for(l.iushrn(g);g-- >0;)S.isOdd()&&S.iadd(R),S.iushrn(1);for(var c=0,u=1;(E.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0)for(E.iushrn(c);c-- >0;)x.isOdd()&&x.iadd(R),x.iushrn(1);l.cmp(E)>=0?(l.isub(E),S.isub(x)):(E.isub(l),x.isub(S))}var _;return l.cmpn(1)===0?_=S:_=x,_.cmpn(0)<0&&_.iadd(s),_},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var l=this.clone(),E=s.clone();l.negative=0,E.negative=0;for(var S=0;l.isEven()&&E.isEven();S++)l.iushrn(1),E.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;E.isEven();)E.iushrn(1);var x=l.cmp(E);if(x<0){var R=l;l=E,E=R}else if(x===0||E.cmpn(1)===0)break;l.isub(E)}while(!0);return E.iushln(S)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){r(typeof s=="number");var l=s%26,E=(s-l)/26,S=1<<l;if(this.length<=E)return this._expand(E+1),this.words[E]|=S,this;for(var x=S,R=E;x!==0&&R<this.length;R++){var g=this.words[R]|0;g+=x,x=g>>>26,g&=67108863,this.words[R]=g}return x!==0&&(this.words[R]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var l=s<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var E;if(this.length>1)E=1;else{l&&(s=-s),r(s<=67108863,"Number is too big");var S=this.words[0]|0;E=S===s?0:S<s?-1:1}return this.negative!==0?-E|0:E},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var l=this.ucmp(s);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var l=0,E=this.length-1;E>=0;E--){var S=this.words[E]|0,x=s.words[E]|0;if(S!==x){S<x?l=-1:S>x&&(l=1);break}}return l},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new G(s)},i.prototype.toRed=function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var at={k256:null,p224:null,p192:null,p25519:null};function st(A,s){this.name=A,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}st.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},st.prototype.ireduce=function(s){var l=s,E;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),E=l.bitLength();while(E>this.n);var S=E<this.n?-1:l.ucmp(this.p);return S===0?(l.words[0]=0,l.length=1):S>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},st.prototype.split=function(s,l){s.iushrn(this.n,0,l)},st.prototype.imulK=function(s){return s.imul(this.k)};function nt(){st.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(nt,st),nt.prototype.split=function(s,l){for(var E=4194303,S=Math.min(s.length,9),x=0;x<S;x++)l.words[x]=s.words[x];if(l.length=S,s.length<=9){s.words[0]=0,s.length=1;return}var R=s.words[9];for(l.words[l.length++]=R&E,x=10;x<s.length;x++){var g=s.words[x]|0;s.words[x-10]=(g&E)<<4|R>>>22,R=g}R>>>=22,s.words[x-10]=R,R===0&&s.length>10?s.length-=10:s.length-=9},nt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var l=0,E=0;E<s.length;E++){var S=s.words[E]|0;l+=S*977,s.words[E]=l&67108863,l=S*64+(l/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function it(){st.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(it,st);function j(){st.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(j,st);function $(){st.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o($,st),$.prototype.imulK=function(s){for(var l=0,E=0;E<s.length;E++){var S=(s.words[E]|0)*19+l,x=S&67108863;S>>>=26,s.words[E]=x,l=S}return l!==0&&(s.words[s.length++]=l),s},i._prime=function(s){if(at[s])return at[s];var l;if(s==="k256")l=new nt;else if(s==="p224")l=new it;else if(s==="p192")l=new j;else if(s==="p25519")l=new $;else throw new Error("Unknown prime "+s);return at[s]=l,l};function G(A){if(typeof A=="string"){var s=i._prime(A);this.m=s.p,this.prime=s}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}G.prototype._verify1=function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},G.prototype._verify2=function(s,l){r((s.negative|l.negative)===0,"red works only with positives"),r(s.red&&s.red===l.red,"red works only with red numbers")},G.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):(b(s,s.umod(this.m)._forceRed(this)),s)},G.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},G.prototype.add=function(s,l){this._verify2(s,l);var E=s.add(l);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},G.prototype.iadd=function(s,l){this._verify2(s,l);var E=s.iadd(l);return E.cmp(this.m)>=0&&E.isub(this.m),E},G.prototype.sub=function(s,l){this._verify2(s,l);var E=s.sub(l);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},G.prototype.isub=function(s,l){this._verify2(s,l);var E=s.isub(l);return E.cmpn(0)<0&&E.iadd(this.m),E},G.prototype.shl=function(s,l){return this._verify1(s),this.imod(s.ushln(l))},G.prototype.imul=function(s,l){return this._verify2(s,l),this.imod(s.imul(l))},G.prototype.mul=function(s,l){return this._verify2(s,l),this.imod(s.mul(l))},G.prototype.isqr=function(s){return this.imul(s,s.clone())},G.prototype.sqr=function(s){return this.mul(s,s)},G.prototype.sqrt=function(s){if(s.isZero())return s.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var E=this.m.add(new i(1)).iushrn(2);return this.pow(s,E)}for(var S=this.m.subn(1),x=0;!S.isZero()&&S.andln(1)===0;)x++,S.iushrn(1);r(!S.isZero());var R=new i(1).toRed(this),g=R.redNeg(),h=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,h).cmp(g)!==0;)c.redIAdd(g);for(var u=this.pow(c,S),_=this.pow(s,S.addn(1).iushrn(1)),O=this.pow(s,S),z=x;O.cmp(R)!==0;){for(var et=O,ht=0;et.cmp(R)!==0;ht++)et=et.redSqr();r(ht<z);var gt=this.pow(u,new i(1).iushln(z-ht-1));_=_.redMul(gt),u=gt.redSqr(),O=O.redMul(u),z=ht}return _},G.prototype.invm=function(s){var l=s._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},G.prototype.pow=function(s,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return s.clone();var E=4,S=new Array(1<<E);S[0]=new i(1).toRed(this),S[1]=s;for(var x=2;x<S.length;x++)S[x]=this.mul(S[x-1],s);var R=S[0],g=0,h=0,c=l.bitLength()%26;for(c===0&&(c=26),x=l.length-1;x>=0;x--){for(var u=l.words[x],_=c-1;_>=0;_--){var O=u>>_&1;if(R!==S[0]&&(R=this.sqr(R)),O===0&&g===0){h=0;continue}g<<=1,g|=O,h++,!(h!==E&&(x!==0||_!==0))&&(R=this.mul(R,S[g]),h=0,g=0)}c=26}return R},G.prototype.convertTo=function(s){var l=s.umod(this.m);return l===s?l.clone():l},G.prototype.convertFrom=function(s){var l=s.clone();return l.red=null,l},i.mont=function(s){return new T(s)};function T(A){G.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(T,G),T.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},T.prototype.convertFrom=function(s){var l=this.imod(s.mul(this.rinv));return l.red=null,l},T.prototype.imul=function(s,l){if(s.isZero()||l.isZero())return s.words[0]=0,s.length=1,s;var E=s.imul(l),S=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=E.isub(S).iushrn(this.shift),R=x;return x.cmp(this.m)>=0?R=x.isub(this.m):x.cmpn(0)<0&&(R=x.iadd(this.m)),R._forceRed(this)},T.prototype.mul=function(s,l){if(s.isZero()||l.isZero())return new i(0)._forceRed(this);var E=s.mul(l),S=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=E.isub(S).iushrn(this.shift),R=x;return x.cmp(this.m)>=0?R=x.isub(this.m):x.cmpn(0)<0&&(R=x.iadd(this.m)),R._forceRed(this)},T.prototype.invm=function(s){var l=this.imod(s._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(n,au)}(Dn)),Dn.exports}var cu=Ho();const Yr=ri(cu),Hr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uu(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function pn(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Cr(n,...t){if(!uu(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function hu(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");pn(n.outputLen),pn(n.blockLen)}function Zr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Oa(n,t){Cr(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function lu(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Ar(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function zi(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Ye(n,t){return n<<32-t|n>>>t}const fu=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function du(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function pu(n){for(let t=0;t<n.length;t++)n[t]=du(n[t]);return n}const _s=fu?n=>n:pu;function yu(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function ni(n){return typeof n=="string"&&(n=yu(n)),Cr(n),n}function gu(...n){let t=0;for(let r=0;r<n.length;r++){const o=n[r];Cr(o),t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<n.length;r++){const i=n[r];e.set(i,o),o+=i.length}return e}class zo{}function Ko(n){const t=r=>n().update(ni(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Na(n=32){if(Hr&&typeof Hr.getRandomValues=="function")return Hr.getRandomValues(new Uint8Array(n));if(Hr&&typeof Hr.randomBytes=="function")return Uint8Array.from(Hr.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function mu(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const o=BigInt(32),i=BigInt(4294967295),a=Number(e>>o&i),f=Number(e&i),d=r?4:0,I=r?0:4;n.setUint32(t+d,a,r),n.setUint32(t+I,f,r)}function wu(n,t,e){return n&t^~n&e}function bu(n,t,e){return n&t^n&e^t&e}class Ca extends zo{constructor(t,e,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(t),this.view=zi(this.buffer)}update(t){Zr(this),t=ni(t),Cr(t);const{view:e,buffer:r,blockLen:o}=this,i=t.length;for(let a=0;a<i;){const f=Math.min(o-this.pos,i-a);if(f===o){const d=zi(t);for(;o<=i-a;a+=o)this.process(d,a);continue}r.set(t.subarray(a,a+f),this.pos),this.pos+=f,a+=f,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Zr(this),Oa(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:o,isLE:i}=this;let{pos:a}=this;e[a++]=128,Ar(this.buffer.subarray(a)),this.padOffset>o-a&&(this.process(r,0),a=0);for(let N=a;N<o;N++)e[N]=0;mu(r,o-8,BigInt(this.length*8),i),this.process(r,0);const f=zi(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const I=d/4,b=this.get();if(I>b.length)throw new Error("_sha2: outputLen bigger than state");for(let N=0;N<I;N++)f.setUint32(4*N,b[N],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:o,finished:i,destroyed:a,pos:f}=this;return t.destroyed=a,t.finished=i,t.length=o,t.pos=f,o%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const gr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Tn=BigInt(2**32-1),Rs=BigInt(32);function Eu(n,t=!1){return t?{h:Number(n&Tn),l:Number(n>>Rs&Tn)}:{h:Number(n>>Rs&Tn)|0,l:Number(n&Tn)|0}}function Ma(n,t=!1){const e=n.length;let r=new Uint32Array(e),o=new Uint32Array(e);for(let i=0;i<e;i++){const{h:a,l:f}=Eu(n[i],t);[r[i],o[i]]=[a,f]}return[r,o]}const Is=(n,t,e)=>n>>>e,As=(n,t,e)=>n<<32-e|t>>>e,zr=(n,t,e)=>n>>>e|t<<32-e,Kr=(n,t,e)=>n<<32-e|t>>>e,Bn=(n,t,e)=>n<<64-e|t>>>e-32,On=(n,t,e)=>n>>>e-32|t<<64-e,_u=(n,t,e)=>n<<e|t>>>32-e,Ru=(n,t,e)=>t<<e|n>>>32-e,Iu=(n,t,e)=>t<<e-32|n>>>64-e,Au=(n,t,e)=>n<<e-32|t>>>64-e;function or(n,t,e,r){const o=(t>>>0)+(r>>>0);return{h:n+e+(o/2**32|0)|0,l:o|0}}const Su=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),xu=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,ku=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),vu=(n,t,e,r,o)=>t+e+r+o+(n/2**32|0)|0,Tu=(n,t,e,r,o)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),Bu=(n,t,e,r,o,i)=>t+e+r+o+i+(n/2**32|0)|0,Ou=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mr=new Uint32Array(64);class Nu extends Ca{constructor(t=32){super(64,t,8,!1),this.A=gr[0]|0,this.B=gr[1]|0,this.C=gr[2]|0,this.D=gr[3]|0,this.E=gr[4]|0,this.F=gr[5]|0,this.G=gr[6]|0,this.H=gr[7]|0}get(){const{A:t,B:e,C:r,D:o,E:i,F:a,G:f,H:d}=this;return[t,e,r,o,i,a,f,d]}set(t,e,r,o,i,a,f,d){this.A=t|0,this.B=e|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=f|0,this.H=d|0}process(t,e){for(let N=0;N<16;N++,e+=4)mr[N]=t.getUint32(e,!1);for(let N=16;N<64;N++){const L=mr[N-15],P=mr[N-2],H=Ye(L,7)^Ye(L,18)^L>>>3,F=Ye(P,17)^Ye(P,19)^P>>>10;mr[N]=F+mr[N-7]+H+mr[N-16]|0}let{A:r,B:o,C:i,D:a,E:f,F:d,G:I,H:b}=this;for(let N=0;N<64;N++){const L=Ye(f,6)^Ye(f,11)^Ye(f,25),P=b+L+wu(f,d,I)+Ou[N]+mr[N]|0,F=(Ye(r,2)^Ye(r,13)^Ye(r,22))+bu(r,o,i)|0;b=I,I=d,d=f,f=a+P|0,a=i,i=o,o=r,r=P+F|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,f=f+this.E|0,d=d+this.F|0,I=I+this.G|0,b=b+this.H|0,this.set(r,o,i,a,f,d,I,b)}roundClean(){Ar(mr)}destroy(){this.set(0,0,0,0,0,0,0,0),Ar(this.buffer)}}const La=Ma(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Cu=La[0],Mu=La[1],wr=new Uint32Array(80),br=new Uint32Array(80);class Lu extends Ca{constructor(t=64){super(128,t,16,!1),this.Ah=xe[0]|0,this.Al=xe[1]|0,this.Bh=xe[2]|0,this.Bl=xe[3]|0,this.Ch=xe[4]|0,this.Cl=xe[5]|0,this.Dh=xe[6]|0,this.Dl=xe[7]|0,this.Eh=xe[8]|0,this.El=xe[9]|0,this.Fh=xe[10]|0,this.Fl=xe[11]|0,this.Gh=xe[12]|0,this.Gl=xe[13]|0,this.Hh=xe[14]|0,this.Hl=xe[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:o,Ch:i,Cl:a,Dh:f,Dl:d,Eh:I,El:b,Fh:N,Fl:L,Gh:P,Gl:H,Hh:F,Hl:B}=this;return[t,e,r,o,i,a,f,d,I,b,N,L,P,H,F,B]}set(t,e,r,o,i,a,f,d,I,b,N,L,P,H,F,B){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=o|0,this.Ch=i|0,this.Cl=a|0,this.Dh=f|0,this.Dl=d|0,this.Eh=I|0,this.El=b|0,this.Fh=N|0,this.Fl=L|0,this.Gh=P|0,this.Gl=H|0,this.Hh=F|0,this.Hl=B|0}process(t,e){for(let U=0;U<16;U++,e+=4)wr[U]=t.getUint32(e),br[U]=t.getUint32(e+=4);for(let U=16;U<80;U++){const tt=wr[U-15]|0,at=br[U-15]|0,st=zr(tt,at,1)^zr(tt,at,8)^Is(tt,at,7),nt=Kr(tt,at,1)^Kr(tt,at,8)^As(tt,at,7),it=wr[U-2]|0,j=br[U-2]|0,$=zr(it,j,19)^Bn(it,j,61)^Is(it,j,6),G=Kr(it,j,19)^On(it,j,61)^As(it,j,6),T=ku(nt,G,br[U-7],br[U-16]),A=vu(T,st,$,wr[U-7],wr[U-16]);wr[U]=A|0,br[U]=T|0}let{Ah:r,Al:o,Bh:i,Bl:a,Ch:f,Cl:d,Dh:I,Dl:b,Eh:N,El:L,Fh:P,Fl:H,Gh:F,Gl:B,Hh:W,Hl:K}=this;for(let U=0;U<80;U++){const tt=zr(N,L,14)^zr(N,L,18)^Bn(N,L,41),at=Kr(N,L,14)^Kr(N,L,18)^On(N,L,41),st=N&P^~N&F,nt=L&H^~L&B,it=Tu(K,at,nt,Mu[U],br[U]),j=Bu(it,W,tt,st,Cu[U],wr[U]),$=it|0,G=zr(r,o,28)^Bn(r,o,34)^Bn(r,o,39),T=Kr(r,o,28)^On(r,o,34)^On(r,o,39),A=r&i^r&f^i&f,s=o&a^o&d^a&d;W=F|0,K=B|0,F=P|0,B=H|0,P=N|0,H=L|0,{h:N,l:L}=or(I|0,b|0,j|0,$|0),I=f|0,b=d|0,f=i|0,d=a|0,i=r|0,a=o|0;const l=Su($,T,s);r=xu(l,j,G,A),o=l|0}({h:r,l:o}=or(this.Ah|0,this.Al|0,r|0,o|0)),{h:i,l:a}=or(this.Bh|0,this.Bl|0,i|0,a|0),{h:f,l:d}=or(this.Ch|0,this.Cl|0,f|0,d|0),{h:I,l:b}=or(this.Dh|0,this.Dl|0,I|0,b|0),{h:N,l:L}=or(this.Eh|0,this.El|0,N|0,L|0),{h:P,l:H}=or(this.Fh|0,this.Fl|0,P|0,H|0),{h:F,l:B}=or(this.Gh|0,this.Gl|0,F|0,B|0),{h:W,l:K}=or(this.Hh|0,this.Hl|0,W|0,K|0),this.set(r,o,i,a,f,d,I,b,N,L,P,H,F,B,W,K)}roundClean(){Ar(wr,br)}destroy(){Ar(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Pa=Ko(()=>new Nu),Pu=Ko(()=>new Lu);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qo=BigInt(0),_o=BigInt(1);function Xr(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Wo(n){if(!Xr(n))throw new Error("Uint8Array expected")}function _r(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}function Nn(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Ua(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?qo:BigInt("0x"+n)}const Fa=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Uu=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Jr(n){if(Wo(n),Fa)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=Uu[n[e]];return t}const sr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ss(n){if(n>=sr._0&&n<=sr._9)return n-sr._0;if(n>=sr.A&&n<=sr.F)return n-(sr.A-10);if(n>=sr.a&&n<=sr.f)return n-(sr.a-10)}function Wn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Fa)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let o=0,i=0;o<e;o++,i+=2){const a=Ss(n.charCodeAt(i)),f=Ss(n.charCodeAt(i+1));if(a===void 0||f===void 0){const d=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[o]=a*16+f}return r}function Nr(n){return Ua(Jr(n))}function fn(n){return Wo(n),Ua(Jr(Uint8Array.from(n).reverse()))}function yn(n,t){return Wn(n.toString(16).padStart(t*2,"0"))}function $n(n,t){return yn(n,t).reverse()}function me(n,t,e){let r;if(typeof t=="string")try{r=Wn(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Xr(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const o=r.length;if(typeof e=="number"&&o!==e)throw new Error(n+" of length "+e+" expected, got "+o);return r}function Qr(...n){let t=0;for(let r=0;r<n.length;r++){const o=n[r];Wo(o),t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<n.length;r++){const i=n[r];e.set(i,o),o+=i.length}return e}const Ki=n=>typeof n=="bigint"&&qo<=n;function $o(n,t,e){return Ki(n)&&Ki(t)&&Ki(e)&&t<=n&&n<e}function Ve(n,t,e,r){if(!$o(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Fu(n){let t;for(t=0;n>qo;n>>=_o,t+=1);return t}const ii=n=>(_o<<BigInt(n))-_o,qi=n=>new Uint8Array(n),xs=n=>Uint8Array.from(n);function Du(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=qi(n),o=qi(n),i=0;const a=()=>{r.fill(1),o.fill(0),i=0},f=(...N)=>e(o,r,...N),d=(N=qi(0))=>{o=f(xs([0]),N),r=f(),N.length!==0&&(o=f(xs([1]),N),r=f())},I=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let N=0;const L=[];for(;N<t;){r=f();const P=r.slice();L.push(P),N+=r.length}return Qr(...L)};return(N,L)=>{a(),d(N);let P;for(;!(P=L(I()));)d();return a(),P}}const Hu={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Xr(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function En(n,t,e={}){const r=(o,i,a)=>{const f=Hu[i];if(typeof f!="function")throw new Error("invalid validator function");const d=n[o];if(!(a&&d===void 0)&&!f(d,n))throw new Error("param "+String(o)+" is invalid. Expected "+i+", got "+d)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(e))r(o,i,!0);return n}function Vn(n){const t=new WeakMap;return(e,...r)=>{const o=t.get(e);if(o!==void 0)return o;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fe=BigInt(0),Re=BigInt(1),vr=BigInt(2),zu=BigInt(3),Ro=BigInt(4),ks=BigInt(5),vs=BigInt(8);function ie(n,t){const e=n%t;return e>=Fe?e:t+e}function he(n,t,e){let r=n;for(;t-- >Fe;)r*=r,r%=e;return r}function Io(n,t){if(n===Fe)throw new Error("invert: expected non-zero number");if(t<=Fe)throw new Error("invert: expected positive modulus, got "+t);let e=ie(n,t),r=t,o=Fe,i=Re;for(;e!==Fe;){const f=r/e,d=r%e,I=o-i*f;r=e,e=d,o=i,i=I}if(r!==Re)throw new Error("invert: does not exist");return ie(o,t)}function Ku(n){let t=n-Re,e=0;for(;t%vr===Fe;)t/=vr,e++;let r=vr;const o=_n(n);for(;r<n&&Ts(o,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1){const a=(n+Re)/Ro;return function(d,I){const b=d.pow(I,a);if(!d.eql(d.sqr(b),I))throw new Error("Cannot find square root");return b}}const i=(t+Re)/vr;return function(f,d){if(!Ts(f,d))throw new Error("Cannot find square root");let I=e,b=f.pow(f.mul(f.ONE,r),t),N=f.pow(d,i),L=f.pow(d,t);for(;!f.eql(L,f.ONE);){if(f.eql(L,f.ZERO))return f.ZERO;let P=1;for(let F=f.sqr(L);P<I&&!f.eql(F,f.ONE);P++)F=f.sqr(F);const H=f.pow(b,Re<<BigInt(I-P-1));b=f.sqr(H),N=f.mul(N,H),L=f.mul(L,b),I=P}return N}}function qu(n){return n%Ro===zu?function(e,r){const o=(n+Re)/Ro,i=e.pow(r,o);if(!e.eql(e.sqr(i),r))throw new Error("Cannot find square root");return i}:n%vs===ks?function(e,r){const o=e.mul(r,vr),i=(n-ks)/vs,a=e.pow(o,i),f=e.mul(r,a),d=e.mul(e.mul(f,vr),a),I=e.mul(f,e.sub(d,e.ONE));if(!e.eql(e.sqr(I),r))throw new Error("Cannot find square root");return I}:Ku(n)}const Wu=(n,t)=>(ie(n,t)&Re)===Re,$u=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Vu(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=$u.reduce((r,o)=>(r[o]="function",r),t);return En(n,e)}function Gu(n,t,e){if(e<Fe)throw new Error("invalid exponent, negatives unsupported");if(e===Fe)return n.ONE;if(e===Re)return t;let r=n.ONE,o=t;for(;e>Fe;)e&Re&&(r=n.mul(r,o)),o=n.sqr(o),e>>=Re;return r}function Vo(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),o=t.reduce((a,f,d)=>n.is0(f)?a:(r[d]=a,n.mul(a,f)),n.ONE),i=n.inv(o);return t.reduceRight((a,f,d)=>n.is0(f)?a:(r[d]=n.mul(a,r[d]),n.mul(a,f)),i),r}function ju(n,t){const e=(n.ORDER-Re)/vr,r=n.pow(t,e),o=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),a=n.eql(r,n.neg(n.ONE));if(!o&&!i&&!a)throw new Error("Cannot find square root: probably non-prime P");return o?1:i?0:-1}function Ts(n,t){const e=ju(n,t);return e===0||e===1}function Da(n,t){t!==void 0&&pn(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function _n(n,t,e=!1,r={}){if(n<=Fe)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:o,nByteLength:i}=Da(n,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const f=Object.freeze({ORDER:n,isLE:e,BITS:o,BYTES:i,MASK:ii(o),ZERO:Fe,ONE:Re,create:d=>ie(d,n),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return Fe<=d&&d<n},is0:d=>d===Fe,isOdd:d=>(d&Re)===Re,neg:d=>ie(-d,n),eql:(d,I)=>d===I,sqr:d=>ie(d*d,n),add:(d,I)=>ie(d+I,n),sub:(d,I)=>ie(d-I,n),mul:(d,I)=>ie(d*I,n),pow:(d,I)=>Gu(f,d,I),div:(d,I)=>ie(d*Io(I,n),n),sqrN:d=>d*d,addN:(d,I)=>d+I,subN:(d,I)=>d-I,mulN:(d,I)=>d*I,inv:d=>Io(d,n),sqrt:r.sqrt||(d=>(a||(a=qu(n)),a(f,d))),toBytes:d=>e?$n(d,i):yn(d,i),fromBytes:d=>{if(d.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+d.length);return e?fn(d):Nr(d)},invertBatch:d=>Vo(f,d),cmov:(d,I,b)=>b?I:d});return Object.freeze(f)}function Ha(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function za(n){const t=Ha(n);return t+Math.ceil(t/2)}function Yu(n,t,e=!1){const r=n.length,o=Ha(t),i=za(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=e?fn(n):Nr(n),f=ie(a,t-Re)+Re;return e?$n(f,o):yn(f,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bs=BigInt(0),Ao=BigInt(1);function Wi(n,t){const e=t.negate();return n?e:t}function Ka(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function $i(n,t){Ka(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),o=2**n,i=ii(n),a=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:o,shiftBy:a}}function Os(n,t,e){const{windowSize:r,mask:o,maxNumber:i,shiftBy:a}=e;let f=Number(n&o),d=n>>a;f>r&&(f-=i,d+=Ao);const I=t*r,b=I+Math.abs(f)-1,N=f===0,L=f<0,P=t%2!==0;return{nextN:d,offset:b,isZero:N,isNeg:L,isNegF:P,offsetF:I}}function Zu(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Xu(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Vi=new WeakMap,qa=new WeakMap;function Gi(n){return qa.get(n)||1}function Wa(n,t){return{constTimeNegate:Wi,hasPrecomputes(e){return Gi(e)!==1},unsafeLadder(e,r,o=n.ZERO){let i=e;for(;r>Bs;)r&Ao&&(o=o.add(i)),i=i.double(),r>>=Ao;return o},precomputeWindow(e,r){const{windows:o,windowSize:i}=$i(r,t),a=[];let f=e,d=f;for(let I=0;I<o;I++){d=f,a.push(d);for(let b=1;b<i;b++)d=d.add(f),a.push(d);f=d.double()}return a},wNAF(e,r,o){let i=n.ZERO,a=n.BASE;const f=$i(e,t);for(let d=0;d<f.windows;d++){const{nextN:I,offset:b,isZero:N,isNeg:L,isNegF:P,offsetF:H}=Os(o,d,f);o=I,N?a=a.add(Wi(P,r[H])):i=i.add(Wi(L,r[b]))}return{p:i,f:a}},wNAFUnsafe(e,r,o,i=n.ZERO){const a=$i(e,t);for(let f=0;f<a.windows&&o!==Bs;f++){const{nextN:d,offset:I,isZero:b,isNeg:N}=Os(o,f,a);if(o=d,!b){const L=r[I];i=i.add(N?L.negate():L)}}return i},getPrecomputes(e,r,o){let i=Vi.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&Vi.set(r,o(i))),i},wNAFCached(e,r,o){const i=Gi(e);return this.wNAF(i,this.getPrecomputes(i,e,o),r)},wNAFCachedUnsafe(e,r,o,i){const a=Gi(e);return a===1?this.unsafeLadder(e,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,e,o),r,i)},setWindowSize(e,r){Ka(r,t),qa.set(e,r),Vi.delete(e)}}}function $a(n,t,e,r){if(Zu(e,n),Xu(r,t),e.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,i=Fu(BigInt(e.length)),a=i>12?i-3:i>4?i-2:i?2:1,f=ii(a),d=new Array(Number(f)+1).fill(o),I=Math.floor((t.BITS-1)/a)*a;let b=o;for(let N=I;N>=0;N-=a){d.fill(o);for(let P=0;P<r.length;P++){const H=r[P],F=Number(H>>BigInt(N)&f);d[F]=d[F].add(e[P])}let L=o;for(let P=d.length-1,H=o;P>0;P--)H=H.add(d[P]),L=L.add(H);if(b=b.add(L),N!==0)for(let P=0;P<a;P++)b=b.double()}return b}function Go(n){return Vu(n.Fp),En(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Da(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ze=BigInt(0),Ne=BigInt(1),Ns=BigInt(2),Ju=BigInt(8),Qu={zip215:!0};function th(n){const t=Go(n);return En(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function eh(n){const t=th(n),{Fp:e,n:r,prehash:o,hash:i,randomBytes:a,nByteLength:f,h:d}=t,I=Ns<<BigInt(f*8)-Ne,b=e.create,N=_n(t.n,t.nBitLength),L=t.uvRatio||((S,x)=>{try{return{isValid:!0,value:e.sqrt(S*e.inv(x))}}catch{return{isValid:!1,value:Ze}}}),P=t.adjustScalarBytes||(S=>S),H=t.domain||((S,x,R)=>{if(_r("phflag",R),x.length||R)throw new Error("Contexts/pre-hash are not supported");return S});function F(S,x,R=!1){const g=R?Ne:Ze;Ve("coordinate "+S,x,g,I)}function B(S){if(!(S instanceof U))throw new Error("ExtendedPoint expected")}const W=Vn((S,x)=>{const{ex:R,ey:g,ez:h}=S,c=S.is0();x==null&&(x=c?Ju:e.inv(h));const u=b(R*x),_=b(g*x),O=b(h*x);if(c)return{x:Ze,y:Ne};if(O!==Ne)throw new Error("invZ was invalid");return{x:u,y:_}}),K=Vn(S=>{const{a:x,d:R}=t;if(S.is0())throw new Error("bad point: ZERO");const{ex:g,ey:h,ez:c,et:u}=S,_=b(g*g),O=b(h*h),z=b(c*c),et=b(z*z),ht=b(_*x),gt=b(z*b(ht+O)),Ft=b(et+b(R*b(_*O)));if(gt!==Ft)throw new Error("bad point: equation left != right (1)");const Et=b(g*h),xt=b(c*u);if(Et!==xt)throw new Error("bad point: equation left != right (2)");return!0});class U{constructor(x,R,g,h){F("x",x),F("y",R),F("z",g,!0),F("t",h),this.ex=x,this.ey=R,this.ez=g,this.et=h,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof U)throw new Error("extended point not allowed");const{x:R,y:g}=x||{};return F("x",R),F("y",g),new U(R,g,Ne,b(R*g))}static normalizeZ(x){const R=Vo(e,x.map(g=>g.ez));return x.map((g,h)=>g.toAffine(R[h])).map(U.fromAffine)}static msm(x,R){return $a(U,N,x,R)}_setWindowSize(x){st.setWindowSize(this,x)}assertValidity(){K(this)}equals(x){B(x);const{ex:R,ey:g,ez:h}=this,{ex:c,ey:u,ez:_}=x,O=b(R*_),z=b(c*h),et=b(g*_),ht=b(u*h);return O===z&&et===ht}is0(){return this.equals(U.ZERO)}negate(){return new U(b(-this.ex),this.ey,this.ez,b(-this.et))}double(){const{a:x}=t,{ex:R,ey:g,ez:h}=this,c=b(R*R),u=b(g*g),_=b(Ns*b(h*h)),O=b(x*c),z=R+g,et=b(b(z*z)-c-u),ht=O+u,gt=ht-_,Ft=O-u,Et=b(et*gt),xt=b(ht*Ft),le=b(et*Ft),Lt=b(gt*ht);return new U(Et,xt,Lt,le)}add(x){B(x);const{a:R,d:g}=t,{ex:h,ey:c,ez:u,et:_}=this,{ex:O,ey:z,ez:et,et:ht}=x,gt=b(h*O),Ft=b(c*z),Et=b(_*g*ht),xt=b(u*et),le=b((h+c)*(O+z)-gt-Ft),Lt=xt-Et,Mt=xt+Et,Oe=b(Ft-R*gt),Ht=b(le*Lt),Zt=b(Mt*Oe),yr=b(le*Oe),Wt=b(Lt*Mt);return new U(Ht,Zt,Wt,yr)}subtract(x){return this.add(x.negate())}wNAF(x){return st.wNAFCached(this,x,U.normalizeZ)}multiply(x){const R=x;Ve("scalar",R,Ne,r);const{p:g,f:h}=this.wNAF(R);return U.normalizeZ([g,h])[0]}multiplyUnsafe(x,R=U.ZERO){const g=x;return Ve("scalar",g,Ze,r),g===Ze?at:this.is0()||g===Ne?this:st.wNAFCachedUnsafe(this,g,U.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return st.unsafeLadder(this,r).is0()}toAffine(x){return W(this,x)}clearCofactor(){const{h:x}=t;return x===Ne?this:this.multiplyUnsafe(x)}static fromHex(x,R=!1){const{d:g,a:h}=t,c=e.BYTES;x=me("pointHex",x,c),_r("zip215",R);const u=x.slice(),_=x[c-1];u[c-1]=_&-129;const O=fn(u),z=R?I:e.ORDER;Ve("pointHex.y",O,Ze,z);const et=b(O*O),ht=b(et-Ne),gt=b(g*et-h);let{isValid:Ft,value:Et}=L(ht,gt);if(!Ft)throw new Error("Point.fromHex: invalid y coordinate");const xt=(Et&Ne)===Ne,le=(_&128)!==0;if(!R&&Et===Ze&&le)throw new Error("Point.fromHex: x=0 and x_0=1");return le!==xt&&(Et=b(-Et)),U.fromAffine({x:Et,y:O})}static fromPrivateKey(x){const{scalar:R}=j(x);return tt.multiply(R)}toRawBytes(){const{x,y:R}=this.toAffine(),g=$n(R,e.BYTES);return g[g.length-1]|=x&Ne?128:0,g}toHex(){return Jr(this.toRawBytes())}}U.BASE=new U(t.Gx,t.Gy,Ne,b(t.Gx*t.Gy)),U.ZERO=new U(Ze,Ne,Ne,Ze);const{BASE:tt,ZERO:at}=U,st=Wa(U,f*8);function nt(S){return ie(S,r)}function it(S){return nt(fn(S))}function j(S){const x=e.BYTES;S=me("private key",S,x);const R=me("hashed private key",i(S),2*x),g=P(R.slice(0,x)),h=R.slice(x,2*x),c=it(g);return{head:g,prefix:h,scalar:c}}function $(S){const{head:x,prefix:R,scalar:g}=j(S),h=tt.multiply(g),c=h.toRawBytes();return{head:x,prefix:R,scalar:g,point:h,pointBytes:c}}function G(S){return $(S).pointBytes}function T(S=Uint8Array.of(),...x){const R=Qr(...x);return it(i(H(R,me("context",S),!!o)))}function A(S,x,R={}){S=me("message",S),o&&(S=o(S));const{prefix:g,scalar:h,pointBytes:c}=$(x),u=T(R.context,g,S),_=tt.multiply(u).toRawBytes(),O=T(R.context,_,c,S),z=nt(u+O*h);Ve("signature.s",z,Ze,r);const et=Qr(_,$n(z,e.BYTES));return me("result",et,e.BYTES*2)}const s=Qu;function l(S,x,R,g=s){const{context:h,zip215:c}=g,u=e.BYTES;S=me("signature",S,2*u),x=me("message",x),R=me("publicKey",R,u),c!==void 0&&_r("zip215",c),o&&(x=o(x));const _=fn(S.slice(u,2*u));let O,z,et;try{O=U.fromHex(R,c),z=U.fromHex(S.slice(0,u),c),et=tt.multiplyUnsafe(_)}catch{return!1}if(!c&&O.isSmallOrder())return!1;const ht=T(h,z.toRawBytes(),O.toRawBytes(),x);return z.add(O.multiplyUnsafe(ht)).subtract(et).clearCofactor().equals(U.ZERO)}return tt._setWindowSize(8),{CURVE:t,getPublicKey:G,sign:A,verify:l,ExtendedPoint:U,utils:{getExtendedPublicKey:$,randomPrivateKey:()=>a(e.BYTES),precompute(S=8,x=U.BASE){return x._setWindowSize(S),x.multiply(BigInt(3)),x}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Cs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const rh=BigInt(1),Ms=BigInt(2);BigInt(3);const nh=BigInt(5),ih=BigInt(8);function oh(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),o=BigInt(80),i=jo,f=n*n%i*n%i,d=he(f,Ms,i)*f%i,I=he(d,rh,i)*n%i,b=he(I,nh,i)*I%i,N=he(b,t,i)*b%i,L=he(N,e,i)*N%i,P=he(L,r,i)*L%i,H=he(P,o,i)*P%i,F=he(H,o,i)*P%i,B=he(F,t,i)*b%i;return{pow_p_5_8:he(B,Ms,i)*n%i,b2:f}}function sh(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function ah(n,t){const e=jo,r=ie(t*t*t,e),o=ie(r*r*t,e),i=oh(n*o).pow_p_5_8;let a=ie(n*r*i,e);const f=ie(t*a*a,e),d=a,I=ie(a*Cs,e),b=f===n,N=f===ie(-n,e),L=f===ie(-n*Cs,e);return b&&(a=d),(N||L)&&(a=I),Wu(a,e)&&(a=ie(-a,e)),{isValid:b||N,value:a}}const Ls=_n(jo,void 0,!0),ch={a:Ls.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ls,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ih,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Pu,randomBytes:Na,adjustScalarBytes:sh,uvRatio:ah},nn=eh(ch);var Cn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ps;function uh(){return Ps||(Ps=1,function(n,t){var e=Do(),r=e.Buffer;function o(a,f){for(var d in a)f[d]=a[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(o(e,t),t.Buffer=i);function i(a,f,d){return r(a,f,d)}i.prototype=Object.create(r.prototype),o(r,i),i.from=function(a,f,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,f,d)},i.alloc=function(a,f,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var I=r(a);return f!==void 0?typeof d=="string"?I.fill(f,d):I.fill(f):I.fill(0),I},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(a)}}(Cn,Cn.exports)),Cn.exports}var ji,Us;function hh(){if(Us)return ji;Us=1;var n=uh().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),o=0;o<r.length;o++)r[o]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),f=a.charCodeAt(0);if(r[f]!==255)throw new TypeError(a+" is ambiguous");r[f]=i}var d=e.length,I=e.charAt(0),b=Math.log(d)/Math.log(256),N=Math.log(256)/Math.log(d);function L(F){if((Array.isArray(F)||F instanceof Uint8Array)&&(F=n.from(F)),!n.isBuffer(F))throw new TypeError("Expected Buffer");if(F.length===0)return"";for(var B=0,W=0,K=0,U=F.length;K!==U&&F[K]===0;)K++,B++;for(var tt=(U-K)*N+1>>>0,at=new Uint8Array(tt);K!==U;){for(var st=F[K],nt=0,it=tt-1;(st!==0||nt<W)&&it!==-1;it--,nt++)st+=256*at[it]>>>0,at[it]=st%d>>>0,st=st/d>>>0;if(st!==0)throw new Error("Non-zero carry");W=nt,K++}for(var j=tt-W;j!==tt&&at[j]===0;)j++;for(var $=I.repeat(B);j<tt;++j)$+=e.charAt(at[j]);return $}function P(F){if(typeof F!="string")throw new TypeError("Expected String");if(F.length===0)return n.alloc(0);for(var B=0,W=0,K=0;F[B]===I;)W++,B++;for(var U=(F.length-B)*b+1>>>0,tt=new Uint8Array(U);B<F.length;){var at=F.charCodeAt(B);if(at>255)return;var st=r[at];if(st===255)return;for(var nt=0,it=U-1;(st!==0||nt<K)&&it!==-1;it--,nt++)st+=d*tt[it]>>>0,tt[it]=st%256>>>0,st=st/256>>>0;if(st!==0)throw new Error("Non-zero carry");K=nt,B++}for(var j=U-K;j!==U&&tt[j]===0;)j++;var $=n.allocUnsafe(W+(U-j));$.fill(0,0,W);for(var G=W;j!==U;)$[G++]=tt[j++];return $}function H(F){var B=P(F);if(B)return B;throw new Error("Non-base"+d+" character")}return{encode:L,decodeUnsafe:P,decode:H}}return ji=t,ji}var Yi,Fs;function Va(){if(Fs)return Yi;Fs=1;var n=hh(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Yi=n(t),Yi}var lh=Va();const Ae=ri(lh),Ds=Pa;var qt={};function hr(n,t,e){return t<=n&&n<=e}function oi(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function fh(n){for(var t=String(n),e=t.length,r=0,o=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)o.push(i);else if(56320<=i&&i<=57343)o.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)o.push(65533);else{var a=n.charCodeAt(r+1);if(56320<=a&&a<=57343){var f=i&1023,d=a&1023;o.push(65536+(f<<10)+d),r+=1}else o.push(65533)}r+=1}return o}function dh(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Gn=-1;function Yo(n){this.tokens=[].slice.call(n)}Yo.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Gn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var tn=-1;function Zi(n,t){if(n)throw TypeError("Decoder error");return t||65533}var jn="utf-8";function Yn(n,t){if(!(this instanceof Yn))return new Yn(n,t);if(n=n!==void 0?String(n).toLowerCase():jn,n!==jn)throw new Error("Encoding not supported. Only utf-8 is supported");t=oi(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Yn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=oi(e),this._streaming||(this._decoder=new ph({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var o=new Yo(r),i=[],a;!o.endOfStream()&&(a=this._decoder.handler(o,o.read()),a!==tn);)a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));if(!this._streaming){do{if(a=this._decoder.handler(o,o.read()),a===tn)break;a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a))}while(!o.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),dh(i)}};function Zn(n,t){if(!(this instanceof Zn))return new Zn(n,t);if(n=n!==void 0?String(n).toLowerCase():jn,n!==jn)throw new Error("Encoding not supported. Only utf-8 is supported");t=oi(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Zn.prototype={encode:function(t,e){t=t?String(t):"",e=oi(e),this._streaming||(this._encoder=new yh(this._options)),this._streaming=!!e.stream;for(var r=[],o=new Yo(fh(t)),i;!o.endOfStream()&&(i=this._encoder.handler(o,o.read()),i!==tn);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(o,o.read()),i!==tn;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function ph(n){var t=n.fatal,e=0,r=0,o=0,i=128,a=191;this.handler=function(f,d){if(d===Gn&&o!==0)return o=0,Zi(t);if(d===Gn)return tn;if(o===0){if(hr(d,0,127))return d;if(hr(d,194,223))o=1,e=d-192;else if(hr(d,224,239))d===224&&(i=160),d===237&&(a=159),o=2,e=d-224;else if(hr(d,240,244))d===240&&(i=144),d===244&&(a=143),o=3,e=d-240;else return Zi(t);return e=e<<6*o,null}if(!hr(d,i,a))return e=o=r=0,i=128,a=191,f.prepend(d),Zi(t);if(i=128,a=191,r+=1,e+=d-128<<6*(o-r),r!==o)return null;var I=e;return e=o=r=0,I}}function yh(n){n.fatal,this.handler=function(t,e){if(e===Gn)return tn;if(hr(e,0,127))return e;var r,o;hr(e,128,2047)?(r=1,o=192):hr(e,2048,65535)?(r=2,o=224):hr(e,65536,1114111)&&(r=3,o=240);for(var i=[(e>>6*r)+o];r>0;){var a=e>>6*(r-1);i.push(128|a&63),r-=1}return i}}const gh=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Yn,TextEncoder:Zn},Symbol.toStringTag,{value:"Module"})),mh=Fo(gh);var Hs;function wh(){if(Hs)return qt;Hs=1;var n=qt&&qt.__createBinding||(Object.create?function(j,$,G,T){T===void 0&&(T=G),Object.defineProperty(j,T,{enumerable:!0,get:function(){return $[G]}})}:function(j,$,G,T){T===void 0&&(T=G),j[T]=$[G]}),t=qt&&qt.__setModuleDefault||(Object.create?function(j,$){Object.defineProperty(j,"default",{enumerable:!0,value:$})}:function(j,$){j.default=$}),e=qt&&qt.__decorate||function(j,$,G,T){var A=arguments.length,s=A<3?$:T===null?T=Object.getOwnPropertyDescriptor($,G):T,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(j,$,G,T);else for(var E=j.length-1;E>=0;E--)(l=j[E])&&(s=(A<3?l(s):A>3?l($,G,s):l($,G))||s);return A>3&&s&&Object.defineProperty($,G,s),s},r=qt&&qt.__importStar||function(j){if(j&&j.__esModule)return j;var $={};if(j!=null)for(var G in j)G!=="default"&&Object.hasOwnProperty.call(j,G)&&n($,j,G);return t($,j),$},o=qt&&qt.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.deserializeUnchecked=qt.deserialize=qt.serialize=qt.BinaryReader=qt.BinaryWriter=qt.BorshError=qt.baseDecode=qt.baseEncode=void 0;const i=o(Ho()),a=o(Va()),f=r(mh),d=typeof TextDecoder!="function"?f.TextDecoder:TextDecoder,I=new d("utf-8",{fatal:!0});function b(j){return typeof j=="string"&&(j=Vt.from(j,"utf8")),a.default.encode(Vt.from(j))}qt.baseEncode=b;function N(j){return Vt.from(a.default.decode(j))}qt.baseDecode=N;const L=1024;class P extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}qt.BorshError=P;class H{constructor(){this.buf=Vt.alloc(L),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Vt.concat([this.buf,Vt.alloc(L)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(Vt.from(new i.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(Vt.from(new i.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(Vt.from(new i.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(Vt.from(new i.default($).toArray("le",64)))}writeBuffer($){this.buf=Vt.concat([Vt.from(this.buf.subarray(0,this.length)),$,Vt.alloc(L)]),this.length+=$.length}writeString($){this.maybeResize();const G=Vt.from($,"utf8");this.writeU32(G.length),this.writeBuffer(G)}writeFixedArray($){this.writeBuffer(Vt.from($))}writeArray($,G){this.maybeResize(),this.writeU32($.length);for(const T of $)this.maybeResize(),G(T)}toArray(){return this.buf.subarray(0,this.length)}}qt.BinaryWriter=H;function F(j,$,G){const T=G.value;G.value=function(...A){try{return T.apply(this,A)}catch(s){if(s instanceof RangeError){const l=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(l)>=0)throw new P("Reached the end of buffer when deserializing")}throw s}}}class B{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new i.default($,"le")}readU128(){const $=this.readBuffer(16);return new i.default($,"le")}readU256(){const $=this.readBuffer(32);return new i.default($,"le")}readU512(){const $=this.readBuffer(64);return new i.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new P(`Expected buffer length ${$} isn't within bounds`);const G=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,G}readString(){const $=this.readU32(),G=this.readBuffer($);try{return I.decode(G)}catch(T){throw new P(`Error decoding UTF-8 string: ${T}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const G=this.readU32(),T=Array();for(let A=0;A<G;++A)T.push($());return T}}e([F],B.prototype,"readU8",null),e([F],B.prototype,"readU16",null),e([F],B.prototype,"readU32",null),e([F],B.prototype,"readU64",null),e([F],B.prototype,"readU128",null),e([F],B.prototype,"readU256",null),e([F],B.prototype,"readU512",null),e([F],B.prototype,"readString",null),e([F],B.prototype,"readFixedArray",null),e([F],B.prototype,"readArray",null),qt.BinaryReader=B;function W(j){return j.charAt(0).toUpperCase()+j.slice(1)}function K(j,$,G,T,A){try{if(typeof T=="string")A[`write${W(T)}`](G);else if(T instanceof Array)if(typeof T[0]=="number"){if(G.length!==T[0])throw new P(`Expecting byte array of length ${T[0]}, but got ${G.length} bytes`);A.writeFixedArray(G)}else if(T.length===2&&typeof T[1]=="number"){if(G.length!==T[1])throw new P(`Expecting byte array of length ${T[1]}, but got ${G.length} bytes`);for(let s=0;s<T[1];s++)K(j,null,G[s],T[0],A)}else A.writeArray(G,s=>{K(j,$,s,T[0],A)});else if(T.kind!==void 0)switch(T.kind){case"option":{G==null?A.writeU8(0):(A.writeU8(1),K(j,$,G,T.type,A));break}case"map":{A.writeU32(G.size),G.forEach((s,l)=>{K(j,$,l,T.key,A),K(j,$,s,T.value,A)});break}default:throw new P(`FieldType ${T} unrecognized`)}else U(j,G,A)}catch(s){throw s instanceof P&&s.addToFieldPath($),s}}function U(j,$,G){if(typeof $.borshSerialize=="function"){$.borshSerialize(G);return}const T=j.get($.constructor);if(!T)throw new P(`Class ${$.constructor.name} is missing in schema`);if(T.kind==="struct")T.fields.map(([A,s])=>{K(j,A,$[A],s,G)});else if(T.kind==="enum"){const A=$[T.field];for(let s=0;s<T.values.length;++s){const[l,E]=T.values[s];if(l===A){G.writeU8(s),K(j,l,$[l],E,G);break}}}else throw new P(`Unexpected schema kind: ${T.kind} for ${$.constructor.name}`)}function tt(j,$,G=H){const T=new G;return U(j,$,T),T.toArray()}qt.serialize=tt;function at(j,$,G,T){try{if(typeof G=="string")return T[`read${W(G)}`]();if(G instanceof Array){if(typeof G[0]=="number")return T.readFixedArray(G[0]);if(typeof G[1]=="number"){const A=[];for(let s=0;s<G[1];s++)A.push(at(j,null,G[0],T));return A}else return T.readArray(()=>at(j,$,G[0],T))}if(G.kind==="option")return T.readU8()?at(j,$,G.type,T):void 0;if(G.kind==="map"){let A=new Map;const s=T.readU32();for(let l=0;l<s;l++){const E=at(j,$,G.key,T),S=at(j,$,G.value,T);A.set(E,S)}return A}return st(j,G,T)}catch(A){throw A instanceof P&&A.addToFieldPath($),A}}function st(j,$,G){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(G);const T=j.get($);if(!T)throw new P(`Class ${$.name} is missing in schema`);if(T.kind==="struct"){const A={};for(const[s,l]of j.get($).fields)A[s]=at(j,s,l,G);return new $(A)}if(T.kind==="enum"){const A=G.readU8();if(A>=T.values.length)throw new P(`Enum index: ${A} is out of range`);const[s,l]=T.values[A],E=at(j,s,l,G);return new $({[s]:E})}throw new P(`Unexpected schema kind: ${T.kind} for ${$.constructor.name}`)}function nt(j,$,G,T=B){const A=new T(G),s=st(j,$,A);if(A.offset<G.length)throw new P(`Unexpected ${G.length-A.offset} bytes after deserialized data`);return s}qt.deserialize=nt;function it(j,$,G,T=B){const A=new T(G);return st(j,$,A)}return qt.deserializeUnchecked=it,qt}var Xi=wh(),Q={},zs;function bh(){if(zs)return Q;zs=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.s16=Q.s8=Q.nu64be=Q.u48be=Q.u40be=Q.u32be=Q.u24be=Q.u16be=Q.nu64=Q.u48=Q.u40=Q.u32=Q.u24=Q.u16=Q.u8=Q.offset=Q.greedy=Q.Constant=Q.UTF8=Q.CString=Q.Blob=Q.Boolean=Q.BitField=Q.BitStructure=Q.VariantLayout=Q.Union=Q.UnionLayoutDiscriminator=Q.UnionDiscriminator=Q.Structure=Q.Sequence=Q.DoubleBE=Q.Double=Q.FloatBE=Q.Float=Q.NearInt64BE=Q.NearInt64=Q.NearUInt64BE=Q.NearUInt64=Q.IntBE=Q.Int=Q.UIntBE=Q.UInt=Q.OffsetLayout=Q.GreedyCount=Q.ExternalLayout=Q.bindConstructorLayout=Q.nameWithProperty=Q.Layout=Q.uint8ArrayToBuffer=Q.checkUint8Array=void 0,Q.constant=Q.utf8=Q.cstr=Q.blob=Q.unionLayoutDiscriminator=Q.union=Q.seq=Q.bits=Q.struct=Q.f64be=Q.f64=Q.f32be=Q.f32=Q.ns64be=Q.s48be=Q.s40be=Q.s32be=Q.s24be=Q.s16be=Q.ns64=Q.s48=Q.s40=Q.s32=Q.s24=void 0;const n=Do();function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Q.checkUint8Array=t;function e(c){return t(c),n.Buffer.from(c.buffer,c.byteOffset,c.length)}Q.uint8ArrayToBuffer=e;class r{constructor(u,_){if(!Number.isInteger(u))throw new TypeError("span must be an integer");this.span=u,this.property=_}makeDestinationObject(){return{}}getSpan(u,_){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(u){const _=Object.create(this.constructor.prototype);return Object.assign(_,this),_.property=u,_}fromArray(u){}}Q.Layout=r;function o(c,u){return u.property?c+"["+u.property+"]":c}Q.nameWithProperty=o;function i(c,u){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(u&&u instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(u,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=u,u.boundConstructor_=c,u.makeDestinationObject=()=>new c,Object.defineProperty(c.prototype,"encode",{value(_,O){return u.encode(this,_,O)},writable:!0}),Object.defineProperty(c,"decode",{value(_,O){return u.decode(_,O)},writable:!0})}Q.bindConstructorLayout=i;class a extends r{isCount(){throw new Error("ExternalLayout is abstract")}}Q.ExternalLayout=a;class f extends a{constructor(u=1,_){if(!Number.isInteger(u)||0>=u)throw new TypeError("elementSpan must be a (positive) integer");super(-1,_),this.elementSpan=u}isCount(){return!0}decode(u,_=0){t(u);const O=u.length-_;return Math.floor(O/this.elementSpan)}encode(u,_,O){return 0}}Q.GreedyCount=f;class d extends a{constructor(u,_=0,O){if(!(u instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(_))throw new TypeError("offset must be integer or undefined");super(u.span,O||u.property),this.layout=u,this.offset=_}isCount(){return this.layout instanceof I||this.layout instanceof b}decode(u,_=0){return this.layout.decode(u,_+this.offset)}encode(u,_,O=0){return this.layout.encode(u,_,O+this.offset)}}Q.OffsetLayout=d;class I extends r{constructor(u,_){if(super(u,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,_=0){return e(u).readUIntLE(_,this.span)}encode(u,_,O=0){return e(_).writeUIntLE(u,O,this.span),this.span}}Q.UInt=I;class b extends r{constructor(u,_){if(super(u,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,_=0){return e(u).readUIntBE(_,this.span)}encode(u,_,O=0){return e(_).writeUIntBE(u,O,this.span),this.span}}Q.UIntBE=b;class N extends r{constructor(u,_){if(super(u,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,_=0){return e(u).readIntLE(_,this.span)}encode(u,_,O=0){return e(_).writeIntLE(u,O,this.span),this.span}}Q.Int=N;class L extends r{constructor(u,_){if(super(u,_),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,_=0){return e(u).readIntBE(_,this.span)}encode(u,_,O=0){return e(_).writeIntBE(u,O,this.span),this.span}}Q.IntBE=L;const P=Math.pow(2,32);function H(c){const u=Math.floor(c/P),_=c-u*P;return{hi32:u,lo32:_}}function F(c,u){return c*P+u}class B extends r{constructor(u){super(8,u)}decode(u,_=0){const O=e(u),z=O.readUInt32LE(_),et=O.readUInt32LE(_+4);return F(et,z)}encode(u,_,O=0){const z=H(u),et=e(_);return et.writeUInt32LE(z.lo32,O),et.writeUInt32LE(z.hi32,O+4),8}}Q.NearUInt64=B;class W extends r{constructor(u){super(8,u)}decode(u,_=0){const O=e(u),z=O.readUInt32BE(_),et=O.readUInt32BE(_+4);return F(z,et)}encode(u,_,O=0){const z=H(u),et=e(_);return et.writeUInt32BE(z.hi32,O),et.writeUInt32BE(z.lo32,O+4),8}}Q.NearUInt64BE=W;class K extends r{constructor(u){super(8,u)}decode(u,_=0){const O=e(u),z=O.readUInt32LE(_),et=O.readInt32LE(_+4);return F(et,z)}encode(u,_,O=0){const z=H(u),et=e(_);return et.writeUInt32LE(z.lo32,O),et.writeInt32LE(z.hi32,O+4),8}}Q.NearInt64=K;class U extends r{constructor(u){super(8,u)}decode(u,_=0){const O=e(u),z=O.readInt32BE(_),et=O.readUInt32BE(_+4);return F(z,et)}encode(u,_,O=0){const z=H(u),et=e(_);return et.writeInt32BE(z.hi32,O),et.writeUInt32BE(z.lo32,O+4),8}}Q.NearInt64BE=U;class tt extends r{constructor(u){super(4,u)}decode(u,_=0){return e(u).readFloatLE(_)}encode(u,_,O=0){return e(_).writeFloatLE(u,O),4}}Q.Float=tt;class at extends r{constructor(u){super(4,u)}decode(u,_=0){return e(u).readFloatBE(_)}encode(u,_,O=0){return e(_).writeFloatBE(u,O),4}}Q.FloatBE=at;class st extends r{constructor(u){super(8,u)}decode(u,_=0){return e(u).readDoubleLE(_)}encode(u,_,O=0){return e(_).writeDoubleLE(u,O),8}}Q.Double=st;class nt extends r{constructor(u){super(8,u)}decode(u,_=0){return e(u).readDoubleBE(_)}encode(u,_,O=0){return e(_).writeDoubleBE(u,O),8}}Q.DoubleBE=nt;class it extends r{constructor(u,_,O){if(!(u instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(_ instanceof a&&_.isCount()||Number.isInteger(_)&&0<=_))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let z=-1;!(_ instanceof a)&&0<u.span&&(z=_*u.span),super(z,O),this.elementLayout=u,this.count=_}getSpan(u,_=0){if(0<=this.span)return this.span;let O=0,z=this.count;if(z instanceof a&&(z=z.decode(u,_)),0<this.elementLayout.span)O=z*this.elementLayout.span;else{let et=0;for(;et<z;)O+=this.elementLayout.getSpan(u,_+O),++et}return O}decode(u,_=0){const O=[];let z=0,et=this.count;for(et instanceof a&&(et=et.decode(u,_));z<et;)O.push(this.elementLayout.decode(u,_)),_+=this.elementLayout.getSpan(u,_),z+=1;return O}encode(u,_,O=0){const z=this.elementLayout,et=u.reduce((ht,gt)=>ht+z.encode(gt,_,O+ht),0);return this.count instanceof a&&this.count.encode(u.length,_,O),et}}Q.Sequence=it;class j extends r{constructor(u,_,O){if(!(Array.isArray(u)&&u.reduce((et,ht)=>et&&ht instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof _=="boolean"&&O===void 0&&(O=_,_=void 0);for(const et of u)if(0>et.span&&et.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let z=-1;try{z=u.reduce((et,ht)=>et+ht.getSpan(),0)}catch{}super(z,_),this.fields=u,this.decodePrefixes=!!O}getSpan(u,_=0){if(0<=this.span)return this.span;let O=0;try{O=this.fields.reduce((z,et)=>{const ht=et.getSpan(u,_);return _+=ht,z+ht},0)}catch{throw new RangeError("indeterminate span")}return O}decode(u,_=0){t(u);const O=this.makeDestinationObject();for(const z of this.fields)if(z.property!==void 0&&(O[z.property]=z.decode(u,_)),_+=z.getSpan(u,_),this.decodePrefixes&&u.length===_)break;return O}encode(u,_,O=0){const z=O;let et=0,ht=0;for(const gt of this.fields){let Ft=gt.span;if(ht=0<Ft?Ft:0,gt.property!==void 0){const Et=u[gt.property];Et!==void 0&&(ht=gt.encode(Et,_,O),0>Ft&&(Ft=gt.getSpan(_,O)))}et=O,O+=Ft}return et+ht-z}fromArray(u){const _=this.makeDestinationObject();for(const O of this.fields)O.property!==void 0&&0<u.length&&(_[O.property]=u.shift());return _}layoutFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const _ of this.fields)if(_.property===u)return _}offsetOf(u){if(typeof u!="string")throw new TypeError("property must be string");let _=0;for(const O of this.fields){if(O.property===u)return _;0>O.span?_=-1:0<=_&&(_+=O.span)}}}Q.Structure=j;class ${constructor(u){this.property=u}decode(u,_){throw new Error("UnionDiscriminator is abstract")}encode(u,_,O){throw new Error("UnionDiscriminator is abstract")}}Q.UnionDiscriminator=$;class G extends ${constructor(u,_){if(!(u instanceof a&&u.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(_||u.property||"variant"),this.layout=u}decode(u,_){return this.layout.decode(u,_)}encode(u,_,O){return this.layout.encode(u,_,O)}}Q.UnionLayoutDiscriminator=G;class T extends r{constructor(u,_,O){let z;if(u instanceof I||u instanceof b)z=new G(new d(u));else if(u instanceof a&&u.isCount())z=new G(u);else if(u instanceof $)z=u;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(_===void 0&&(_=null),!(_===null||_ instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(_!==null){if(0>_.span)throw new Error("defaultLayout must have constant span");_.property===void 0&&(_=_.replicate("content"))}let et=-1;_&&(et=_.span,0<=et&&(u instanceof I||u instanceof b)&&(et+=z.layout.span)),super(et,O),this.discriminator=z,this.usesPrefixDiscriminator=u instanceof I||u instanceof b,this.defaultLayout=_,this.registry={};let ht=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(gt){return ht(gt)},this.configGetSourceVariant=function(gt){ht=gt.bind(this)}}getSpan(u,_=0){if(0<=this.span)return this.span;const O=this.getVariant(u,_);if(!O)throw new Error("unable to determine span for unrecognized variant");return O.getSpan(u,_)}defaultGetSourceVariant(u){if(Object.prototype.hasOwnProperty.call(u,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(u,this.defaultLayout.property))return;const _=this.registry[u[this.discriminator.property]];if(_&&(!_.layout||_.property&&Object.prototype.hasOwnProperty.call(u,_.property)))return _}else for(const _ in this.registry){const O=this.registry[_];if(O.property&&Object.prototype.hasOwnProperty.call(u,O.property))return O}throw new Error("unable to infer src variant")}decode(u,_=0){let O;const z=this.discriminator,et=z.decode(u,_),ht=this.registry[et];if(ht===void 0){const gt=this.defaultLayout;let Ft=0;this.usesPrefixDiscriminator&&(Ft=z.layout.span),O=this.makeDestinationObject(),O[z.property]=et,O[gt.property]=gt.decode(u,_+Ft)}else O=ht.decode(u,_);return O}encode(u,_,O=0){const z=this.getSourceVariant(u);if(z===void 0){const et=this.discriminator,ht=this.defaultLayout;let gt=0;return this.usesPrefixDiscriminator&&(gt=et.layout.span),et.encode(u[et.property],_,O),gt+ht.encode(u[ht.property],_,O+gt)}return z.encode(u,_,O)}addVariant(u,_,O){const z=new A(this,u,_,O);return this.registry[u]=z,z}getVariant(u,_=0){let O;return u instanceof Uint8Array?O=this.discriminator.decode(u,_):O=u,this.registry[O]}}Q.Union=T;class A extends r{constructor(u,_,O,z){if(!(u instanceof T))throw new TypeError("union must be a Union");if(!Number.isInteger(_)||0>_)throw new TypeError("variant must be a (non-negative) integer");if(typeof O=="string"&&z===void 0&&(z=O,O=null),O){if(!(O instanceof r))throw new TypeError("layout must be a Layout");if(u.defaultLayout!==null&&0<=O.span&&O.span>u.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof z!="string")throw new TypeError("variant must have a String property")}let et=u.span;0>u.span&&(et=O?O.span:0,0<=et&&u.usesPrefixDiscriminator&&(et+=u.discriminator.layout.span)),super(et,z),this.union=u,this.variant=_,this.layout=O||null}getSpan(u,_=0){if(0<=this.span)return this.span;let O=0;this.union.usesPrefixDiscriminator&&(O=this.union.discriminator.layout.span);let z=0;return this.layout&&(z=this.layout.getSpan(u,_+O)),O+z}decode(u,_=0){const O=this.makeDestinationObject();if(this!==this.union.getVariant(u,_))throw new Error("variant mismatch");let z=0;return this.union.usesPrefixDiscriminator&&(z=this.union.discriminator.layout.span),this.layout?O[this.property]=this.layout.decode(u,_+z):this.property?O[this.property]=!0:this.union.usesPrefixDiscriminator&&(O[this.union.discriminator.property]=this.variant),O}encode(u,_,O=0){let z=0;if(this.union.usesPrefixDiscriminator&&(z=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(u,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,_,O);let et=z;if(this.layout&&(this.layout.encode(u[this.property],_,O+z),et+=this.layout.getSpan(_,O+z),0<=this.union.span&&et>this.union.span))throw new Error("encoded variant overruns containing union");return et}fromArray(u){if(this.layout)return this.layout.fromArray(u)}}Q.VariantLayout=A;function s(c){return 0>c&&(c+=4294967296),c}class l extends r{constructor(u,_,O){if(!(u instanceof I||u instanceof b))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof _=="string"&&O===void 0&&(O=_,_=!1),4<u.span)throw new RangeError("word cannot exceed 32 bits");super(u.span,O),this.word=u,this.msb=!!_,this.fields=[];let z=0;this._packedSetValue=function(et){return z=s(et),this},this._packedGetValue=function(){return z}}decode(u,_=0){const O=this.makeDestinationObject(),z=this.word.decode(u,_);this._packedSetValue(z);for(const et of this.fields)et.property!==void 0&&(O[et.property]=et.decode(u));return O}encode(u,_,O=0){const z=this.word.decode(_,O);this._packedSetValue(z);for(const et of this.fields)if(et.property!==void 0){const ht=u[et.property];ht!==void 0&&et.encode(ht)}return this.word.encode(this._packedGetValue(),_,O)}addField(u,_){const O=new E(this,u,_);return this.fields.push(O),O}addBoolean(u){const _=new S(this,u);return this.fields.push(_),_}fieldFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const _ of this.fields)if(_.property===u)return _}}Q.BitStructure=l;class E{constructor(u,_,O){if(!(u instanceof l))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(_)||0>=_)throw new TypeError("bits must be positive integer");const z=8*u.span,et=u.fields.reduce((ht,gt)=>ht+gt.bits,0);if(_+et>z)throw new Error("bits too long for span remainder ("+(z-et)+" of "+z+" remain)");this.container=u,this.bits=_,this.valueMask=(1<<_)-1,_===32&&(this.valueMask=4294967295),this.start=et,this.container.msb&&(this.start=z-et-_),this.wordMask=s(this.valueMask<<this.start),this.property=O}decode(u,_){const O=this.container._packedGetValue();return s(O&this.wordMask)>>>this.start}encode(u){if(typeof u!="number"||!Number.isInteger(u)||u!==s(u&this.valueMask))throw new TypeError(o("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const _=this.container._packedGetValue(),O=s(u<<this.start);this.container._packedSetValue(s(_&~this.wordMask)|O)}}Q.BitField=E;class S extends E{constructor(u,_){super(u,1,_)}decode(u,_){return!!super.decode(u,_)}encode(u){typeof u=="boolean"&&(u=+u),super.encode(u)}}Q.Boolean=S;class x extends r{constructor(u,_){if(!(u instanceof a&&u.isCount()||Number.isInteger(u)&&0<=u))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let O=-1;u instanceof a||(O=u),super(O,_),this.length=u}getSpan(u,_){let O=this.span;return 0>O&&(O=this.length.decode(u,_)),O}decode(u,_=0){let O=this.span;return 0>O&&(O=this.length.decode(u,_)),e(u).slice(_,_+O)}encode(u,_,O){let z=this.length;if(this.length instanceof a&&(z=u.length),!(u instanceof Uint8Array&&z===u.length))throw new TypeError(o("Blob.encode",this)+" requires (length "+z+") Uint8Array as src");if(O+z>_.length)throw new RangeError("encoding overruns Uint8Array");const et=e(u);return e(_).write(et.toString("hex"),O,z,"hex"),this.length instanceof a&&this.length.encode(z,_,O),z}}Q.Blob=x;class R extends r{constructor(u){super(-1,u)}getSpan(u,_=0){t(u);let O=_;for(;O<u.length&&u[O]!==0;)O+=1;return 1+O-_}decode(u,_=0){const O=this.getSpan(u,_);return e(u).slice(_,_+O-1).toString("utf-8")}encode(u,_,O=0){typeof u!="string"&&(u=String(u));const z=n.Buffer.from(u,"utf8"),et=z.length;if(O+et>_.length)throw new RangeError("encoding overruns Buffer");const ht=e(_);return z.copy(ht,O),ht[O+et]=0,et+1}}Q.CString=R;class g extends r{constructor(u,_){if(typeof u=="string"&&_===void 0&&(_=u,u=void 0),u===void 0)u=-1;else if(!Number.isInteger(u))throw new TypeError("maxSpan must be an integer");super(-1,_),this.maxSpan=u}getSpan(u,_=0){return t(u),u.length-_}decode(u,_=0){const O=this.getSpan(u,_);if(0<=this.maxSpan&&this.maxSpan<O)throw new RangeError("text length exceeds maxSpan");return e(u).slice(_,_+O).toString("utf-8")}encode(u,_,O=0){typeof u!="string"&&(u=String(u));const z=n.Buffer.from(u,"utf8"),et=z.length;if(0<=this.maxSpan&&this.maxSpan<et)throw new RangeError("text length exceeds maxSpan");if(O+et>_.length)throw new RangeError("encoding overruns Buffer");return z.copy(e(_),O),et}}Q.UTF8=g;class h extends r{constructor(u,_){super(0,_),this.value=u}decode(u,_){return this.value}encode(u,_,O){return 0}}return Q.Constant=h,Q.greedy=(c,u)=>new f(c,u),Q.offset=(c,u,_)=>new d(c,u,_),Q.u8=c=>new I(1,c),Q.u16=c=>new I(2,c),Q.u24=c=>new I(3,c),Q.u32=c=>new I(4,c),Q.u40=c=>new I(5,c),Q.u48=c=>new I(6,c),Q.nu64=c=>new B(c),Q.u16be=c=>new b(2,c),Q.u24be=c=>new b(3,c),Q.u32be=c=>new b(4,c),Q.u40be=c=>new b(5,c),Q.u48be=c=>new b(6,c),Q.nu64be=c=>new W(c),Q.s8=c=>new N(1,c),Q.s16=c=>new N(2,c),Q.s24=c=>new N(3,c),Q.s32=c=>new N(4,c),Q.s40=c=>new N(5,c),Q.s48=c=>new N(6,c),Q.ns64=c=>new K(c),Q.s16be=c=>new L(2,c),Q.s24be=c=>new L(3,c),Q.s32be=c=>new L(4,c),Q.s40be=c=>new L(5,c),Q.s48be=c=>new L(6,c),Q.ns64be=c=>new U(c),Q.f32=c=>new tt(c),Q.f32be=c=>new at(c),Q.f64=c=>new st(c),Q.f64be=c=>new nt(c),Q.struct=(c,u,_)=>new j(c,u,_),Q.bits=(c,u,_)=>new l(c,u,_),Q.seq=(c,u,_)=>new it(c,u,_),Q.union=(c,u,_)=>new T(c,u,_),Q.unionLayoutDiscriminator=(c,u)=>new G(c,u),Q.blob=(c,u)=>new x(c,u),Q.cstr=c=>new R(c),Q.utf8=(c,u)=>new g(c,u),Q.constant=(c,u)=>new h(c,u),Q}var D=bh(),Eh=8078e3,_h=8078001,Rh=8078004,Ih=8078005,Ah=8078006,Sh=8078011;function Ga(n){return Array.isArray(n)?"%5B"+n.map(Ga).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function xh([n,t]){return`${n}=${Ga(t)}`}function kh(n){const t=Object.entries(n).map(xh).join("&");return btoa(t)}function vh(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${kh(t)}'`),`${e}\``}}var $r=class extends Error{constructor(...[t,e]){let r,o;if(e){const{cause:a,...f}=e;a&&(o={cause:a}),Object.keys(f).length>0&&(r=f)}const i=vh(t,r);super(i,o);ge(this,"cause",this.cause);ge(this,"context");this.context={__code:t,...r},this.name="SolanaError"}};function Th(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function Bh(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(Th(t,n));return n.write(t,e,0),e}})}function Oh(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function qr(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function Nh(n,t){if(qr(n)!==qr(t))throw new $r(Rh);if(qr(n)&&qr(t)&&n.fixedSize!==t.fixedSize)throw new $r(Ih,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!qr(n)&&!qr(t)&&n.maxSize!==t.maxSize)throw new $r(Ah,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function Ch(n,t,e=0){if(t.length-e<=0)throw new $r(Eh,{codecDescription:n})}function Mh(n,t,e,r=0){const o=e.length-r;if(o<t)throw new $r(_h,{bytesLength:o,codecDescription:n,expected:t})}function Lh(n,t,e,r){if(r<t||r>e)throw new $r(Sh,{codecDescription:n,max:e,min:t,value:r})}function ja(n){return(n==null?void 0:n.endian)!==1}function Ph(n){return Bh({fixedSize:n.size,write(t,e,r){n.range&&Lh(n.name,n.range[0],n.range[1],t);const o=new ArrayBuffer(n.size);return n.set(new DataView(o),t,ja(n.config)),e.set(new Uint8Array(o),r),r+n.size}})}function Uh(n){return Oh({fixedSize:n.size,read(t,e=0){Ch(n.name,t,e),Mh(n.name,n.size,t,e);const r=new DataView(Fh(t,e,n.size));return[n.get(r,ja(n.config)),e+n.size]}})}function Fh(n,t,e){const r=n.byteOffset+(t??0),o=e??n.byteLength;return n.buffer.slice(r,r+o)}var Ya=(n={})=>Ph({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),Dh=(n={})=>Uh({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Hh=(n={})=>Nh(Ya(n),Dh(n));let zh=class extends TypeError{constructor(t,e){let r;const{message:o,explanation:i,...a}=t,{path:f}=t,d=f.length===0?o:`At path: ${f.join(".")} -- ${o}`;super(i??d),i!=null&&(this.cause=d),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}};function Kh(n){return Rn(n)&&typeof n[Symbol.iterator]=="function"}function Rn(n){return typeof n=="object"&&n!=null}function Xn(n){return Rn(n)&&!Array.isArray(n)}function Ge(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function qh(n){const{done:t,value:e}=n.next();return t?void 0:e}function Wh(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:o,branch:i}=t,{type:a}=e,{refinement:f,message:d=`Expected a value of type \`${a}\`${f?` with refinement \`${f}\``:""}, but received: \`${Ge(r)}\``}=n;return{value:r,type:a,refinement:f,key:o[o.length-1],path:o,branch:i,...n,message:d}}function*Ks(n,t,e,r){Kh(n)||(n=[n]);for(const o of n){const i=Wh(o,t,e,r);i&&(yield i)}}function*Zo(n,t,e={}){const{path:r=[],branch:o=[n],coerce:i=!1,mask:a=!1}=e,f={path:r,branch:o,mask:a};i&&(n=t.coercer(n,f));let d="valid";for(const I of t.validator(n,f))I.explanation=e.message,d="not_valid",yield[I,void 0];for(let[I,b,N]of t.entries(n,f)){const L=Zo(b,N,{path:I===void 0?r:[...r,I],branch:I===void 0?o:[...o,b],coerce:i,mask:a,message:e.message});for(const P of L)P[0]?(d=P[0].refinement!=null?"not_refined":"not_valid",yield[P[0],void 0]):i&&(b=P[1],I===void 0?n=b:n instanceof Map?n.set(I,b):n instanceof Set?n.add(b):Rn(n)&&(b!==void 0||I in n)&&(n[I]=b))}if(d!=="not_valid")for(const I of t.refiner(n,f))I.explanation=e.message,d="not_refined",yield[I,void 0];d==="valid"&&(yield[void 0,n])}let ir=class{constructor(t){const{type:e,schema:r,validator:o,refiner:i,coercer:a=d=>d,entries:f=function*(){}}=t;this.type=e,this.schema=r,this.entries=f,this.coercer=a,o?this.validator=(d,I)=>{const b=o(d,I);return Ks(b,I,this,d)}:this.validator=()=>[],i?this.refiner=(d,I)=>{const b=i(d,I);return Ks(b,I,this,d)}:this.refiner=()=>[]}assert(t,e){return Za(t,this,e)}create(t,e){return ft(t,this,e)}is(t){return Xa(t,this)}mask(t,e){return $h(t,this,e)}validate(t,e={}){return In(t,this,e)}};function Za(n,t,e){const r=In(n,t,{message:e});if(r[0])throw r[0]}function ft(n,t,e){const r=In(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function $h(n,t,e){const r=In(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Xa(n,t){return!In(n,t)[0]}function In(n,t,e={}){const r=Zo(n,t,e),o=qh(r);return o[0]?[new zh(o[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function Pr(n,t){return new ir({type:n,schema:null,validator:t})}function Vh(){return Pr("any",()=>!0)}function dt(n){return new ir({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ge(t)}`}})}function nr(){return Pr("boolean",n=>typeof n=="boolean")}function Xo(n){return Pr("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ge(t)}`)}function se(n){const t=Ge(n),e=typeof n;return new ir({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Ge(r)}`}})}function Gh(){return Pr("never",()=>!1)}function pt(n){return new ir({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function X(){return Pr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ge(n)}`)}function bt(n){return new ir({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Ja(n,t){return new ir({type:"record",schema:null,*entries(e){if(Rn(e))for(const r in e){const o=e[r];yield[r,r,n],yield[r,o,t]}},validator(e){return Xn(e)||`Expected an object, but received: ${Ge(e)}`},coercer(e){return Xn(e)?{...e}:e}})}function lt(){return Pr("string",n=>typeof n=="string"||`Expected a string, but received: ${Ge(n)}`)}function Jo(n){const t=Gh();return new ir({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let o=0;o<r;o++)yield[o,e[o],n[o]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ge(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function ct(n){const t=Object.keys(n);return new ir({type:"type",schema:n,*entries(e){if(Rn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Xn(e)||`Expected an object, but received: ${Ge(e)}`},coercer(e){return Xn(e)?{...e}:e}})}function Me(n){const t=n.map(e=>e.type).join(" | ");return new ir({type:"union",schema:null,coercer(e,r){for(const o of n){const[i,a]=o.validate(e,{coerce:!0,mask:r.mask});if(!i)return a}return e},validator(e,r){const o=[];for(const i of n){const[...a]=Zo(e,i,r),[f]=a;if(f[0])for(const[d]of a)d&&o.push(d);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ge(e)}`,...o]}})}function on(){return Pr("unknown",()=>!0)}function An(n,t,e){return new ir({...n,coercer:(r,o)=>Xa(r,t)?n.coercer(e(r,o),o):n.coercer(r,o)})}var Mn,jh=new Uint8Array(16);function Qa(){if(!Mn&&(Mn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Mn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mn(jh)}const Yh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function si(n){return typeof n=="string"&&Yh.test(n)}var Ie=[];for(var Ji=0;Ji<256;++Ji)Ie.push((Ji+256).toString(16).substr(1));function ai(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Ie[n[t+0]]+Ie[n[t+1]]+Ie[n[t+2]]+Ie[n[t+3]]+"-"+Ie[n[t+4]]+Ie[n[t+5]]+"-"+Ie[n[t+6]]+Ie[n[t+7]]+"-"+Ie[n[t+8]]+Ie[n[t+9]]+"-"+Ie[n[t+10]]+Ie[n[t+11]]+Ie[n[t+12]]+Ie[n[t+13]]+Ie[n[t+14]]+Ie[n[t+15]]).toLowerCase();if(!si(e))throw TypeError("Stringified UUID is invalid");return e}var qs,Qi,to=0,eo=0;function Zh(n,t,e){var r=t&&e||0,o=t||new Array(16);n=n||{};var i=n.node||qs,a=n.clockseq!==void 0?n.clockseq:Qi;if(i==null||a==null){var f=n.random||(n.rng||Qa)();i==null&&(i=qs=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),a==null&&(a=Qi=(f[6]<<8|f[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),I=n.nsecs!==void 0?n.nsecs:eo+1,b=d-to+(I-eo)/1e4;if(b<0&&n.clockseq===void 0&&(a=a+1&16383),(b<0||d>to)&&n.nsecs===void 0&&(I=0),I>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");to=d,eo=I,Qi=a,d+=122192928e5;var N=((d&268435455)*1e4+I)%4294967296;o[r++]=N>>>24&255,o[r++]=N>>>16&255,o[r++]=N>>>8&255,o[r++]=N&255;var L=d/4294967296*1e4&268435455;o[r++]=L>>>8&255,o[r++]=L&255,o[r++]=L>>>24&15|16,o[r++]=L>>>16&255,o[r++]=a>>>8|128,o[r++]=a&255;for(var P=0;P<6;++P)o[r+P]=i[P];return t||ai(o)}function tc(n){if(!si(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Xh(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Jh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Qh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ec(n,t,e){function r(o,i,a,f){if(typeof o=="string"&&(o=Xh(o)),typeof i=="string"&&(i=tc(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+o.length);if(d.set(i),d.set(o,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,a){f=f||0;for(var I=0;I<16;++I)a[f+I]=d[I];return a}return ai(d)}try{r.name=n}catch{}return r.DNS=Jh,r.URL=Qh,r}function tl(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return el(rl(nl(n),n.length*8))}function el(n){for(var t=[],e=n.length*32,r="0123456789abcdef",o=0;o<e;o+=8){var i=n[o>>5]>>>o%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(a)}return t}function rc(n){return(n+64>>>9<<4)+14+1}function rl(n,t){n[t>>5]|=128<<t%32,n[rc(t)-1]=t;for(var e=1732584193,r=-271733879,o=-1732584194,i=271733878,a=0;a<n.length;a+=16){var f=e,d=r,I=o,b=i;e=ke(e,r,o,i,n[a],7,-680876936),i=ke(i,e,r,o,n[a+1],12,-389564586),o=ke(o,i,e,r,n[a+2],17,606105819),r=ke(r,o,i,e,n[a+3],22,-1044525330),e=ke(e,r,o,i,n[a+4],7,-176418897),i=ke(i,e,r,o,n[a+5],12,1200080426),o=ke(o,i,e,r,n[a+6],17,-1473231341),r=ke(r,o,i,e,n[a+7],22,-45705983),e=ke(e,r,o,i,n[a+8],7,1770035416),i=ke(i,e,r,o,n[a+9],12,-1958414417),o=ke(o,i,e,r,n[a+10],17,-42063),r=ke(r,o,i,e,n[a+11],22,-1990404162),e=ke(e,r,o,i,n[a+12],7,1804603682),i=ke(i,e,r,o,n[a+13],12,-40341101),o=ke(o,i,e,r,n[a+14],17,-1502002290),r=ke(r,o,i,e,n[a+15],22,1236535329),e=ve(e,r,o,i,n[a+1],5,-165796510),i=ve(i,e,r,o,n[a+6],9,-1069501632),o=ve(o,i,e,r,n[a+11],14,643717713),r=ve(r,o,i,e,n[a],20,-373897302),e=ve(e,r,o,i,n[a+5],5,-701558691),i=ve(i,e,r,o,n[a+10],9,38016083),o=ve(o,i,e,r,n[a+15],14,-660478335),r=ve(r,o,i,e,n[a+4],20,-405537848),e=ve(e,r,o,i,n[a+9],5,568446438),i=ve(i,e,r,o,n[a+14],9,-1019803690),o=ve(o,i,e,r,n[a+3],14,-187363961),r=ve(r,o,i,e,n[a+8],20,1163531501),e=ve(e,r,o,i,n[a+13],5,-1444681467),i=ve(i,e,r,o,n[a+2],9,-51403784),o=ve(o,i,e,r,n[a+7],14,1735328473),r=ve(r,o,i,e,n[a+12],20,-1926607734),e=Te(e,r,o,i,n[a+5],4,-378558),i=Te(i,e,r,o,n[a+8],11,-2022574463),o=Te(o,i,e,r,n[a+11],16,1839030562),r=Te(r,o,i,e,n[a+14],23,-35309556),e=Te(e,r,o,i,n[a+1],4,-1530992060),i=Te(i,e,r,o,n[a+4],11,1272893353),o=Te(o,i,e,r,n[a+7],16,-155497632),r=Te(r,o,i,e,n[a+10],23,-1094730640),e=Te(e,r,o,i,n[a+13],4,681279174),i=Te(i,e,r,o,n[a],11,-358537222),o=Te(o,i,e,r,n[a+3],16,-722521979),r=Te(r,o,i,e,n[a+6],23,76029189),e=Te(e,r,o,i,n[a+9],4,-640364487),i=Te(i,e,r,o,n[a+12],11,-421815835),o=Te(o,i,e,r,n[a+15],16,530742520),r=Te(r,o,i,e,n[a+2],23,-995338651),e=Be(e,r,o,i,n[a],6,-198630844),i=Be(i,e,r,o,n[a+7],10,1126891415),o=Be(o,i,e,r,n[a+14],15,-1416354905),r=Be(r,o,i,e,n[a+5],21,-57434055),e=Be(e,r,o,i,n[a+12],6,1700485571),i=Be(i,e,r,o,n[a+3],10,-1894986606),o=Be(o,i,e,r,n[a+10],15,-1051523),r=Be(r,o,i,e,n[a+1],21,-2054922799),e=Be(e,r,o,i,n[a+8],6,1873313359),i=Be(i,e,r,o,n[a+15],10,-30611744),o=Be(o,i,e,r,n[a+6],15,-1560198380),r=Be(r,o,i,e,n[a+13],21,1309151649),e=Be(e,r,o,i,n[a+4],6,-145523070),i=Be(i,e,r,o,n[a+11],10,-1120210379),o=Be(o,i,e,r,n[a+2],15,718787259),r=Be(r,o,i,e,n[a+9],21,-343485551),e=Er(e,f),r=Er(r,d),o=Er(o,I),i=Er(i,b)}return[e,r,o,i]}function nl(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(rc(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function Er(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function il(n,t){return n<<t|n>>>32-t}function ci(n,t,e,r,o,i){return Er(il(Er(Er(t,n),Er(r,i)),o),e)}function ke(n,t,e,r,o,i,a){return ci(t&e|~t&r,n,t,o,i,a)}function ve(n,t,e,r,o,i,a){return ci(t&r|e&~r,n,t,o,i,a)}function Te(n,t,e,r,o,i,a){return ci(t^e^r,n,t,o,i,a)}function Be(n,t,e,r,o,i,a){return ci(e^(t|~r),n,t,o,i,a)}var ol=ec("v3",48,tl);function sl(n,t,e){n=n||{};var r=n.random||(n.rng||Qa)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=r[o];return t}return ai(r)}function al(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function ro(n,t){return n<<t|n>>>32-t}function cl(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var o=0;o<r.length;++o)n.push(r.charCodeAt(o))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,a=Math.ceil(i/16),f=new Array(a),d=0;d<a;++d){for(var I=new Uint32Array(16),b=0;b<16;++b)I[b]=n[d*64+b*4]<<24|n[d*64+b*4+1]<<16|n[d*64+b*4+2]<<8|n[d*64+b*4+3];f[d]=I}f[a-1][14]=(n.length-1)*8/Math.pow(2,32),f[a-1][14]=Math.floor(f[a-1][14]),f[a-1][15]=(n.length-1)*8&4294967295;for(var N=0;N<a;++N){for(var L=new Uint32Array(80),P=0;P<16;++P)L[P]=f[N][P];for(var H=16;H<80;++H)L[H]=ro(L[H-3]^L[H-8]^L[H-14]^L[H-16],1);for(var F=e[0],B=e[1],W=e[2],K=e[3],U=e[4],tt=0;tt<80;++tt){var at=Math.floor(tt/20),st=ro(F,5)+al(at,B,W,K)+U+t[at]+L[tt]>>>0;U=K,K=W,W=ro(B,30)>>>0,B=F,F=st}e[0]=e[0]+F>>>0,e[1]=e[1]+B>>>0,e[2]=e[2]+W>>>0,e[3]=e[3]+K>>>0,e[4]=e[4]+U>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var ul=ec("v5",80,cl);const hl="00000000-0000-0000-0000-000000000000";function ll(n){if(!si(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const fl=Object.freeze(Object.defineProperty({__proto__:null,NIL:hl,parse:tc,stringify:ai,v1:Zh,v3:ol,v4:sl,v5:ul,validate:si,version:ll},Symbol.toStringTag,{value:"Module"})),nc=Fo(fl);var no,Ws;function dl(){if(Ws)return no;Ws=1;const n=nc.v4;return no=function(e,r,o,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const a=typeof i.version=="number"?i.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const f={method:e};if(a===2&&(f.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");f.params=r}if(typeof o>"u"){const d=typeof i.generator=="function"?i.generator:function(){return n()};f.id=d(f,i)}else a===2&&o===null?i.notificationIdNull&&(f.id=null):f.id=o;return f},no}var io,$s;function pl(){if($s)return io;$s=1;const n=nc.v4,t=dl(),e=function(r,o){if(!(this instanceof e))return new e(r,o);o||(o={}),this.options={reviver:typeof o.reviver<"u"?o.reviver:null,replacer:typeof o.replacer<"u"?o.replacer:null,generator:typeof o.generator<"u"?o.generator:function(){return n()},version:typeof o.version<"u"?o.version:2,notificationIdNull:typeof o.notificationIdNull=="boolean"?o.notificationIdNull:!1},this.callServer=r};return io=e,e.prototype.request=function(r,o,i,a){const f=this;let d=null;const I=Array.isArray(r)&&typeof o=="function";if(this.options.version===1&&I)throw new TypeError("JSON-RPC 1.0 does not support batching");if(I||!I&&r&&typeof r=="object"&&typeof o=="function")a=o,d=r;else{typeof i=="function"&&(a=i,i=void 0);const L=typeof a=="function";try{d=t(r,o,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(P){if(L)return a(P);throw P}if(!L)return d}let N;try{N=JSON.stringify(d,this.options.replacer)}catch(L){return a(L)}return this.callServer(N,function(L,P){f._parseResponse(L,P,a)}),d},e.prototype._parseResponse=function(r,o,i){if(r){i(r);return}if(!o)return i();let a;try{a=JSON.parse(o,this.options.reviver)}catch(f){return i(f)}if(i.length===3)if(Array.isArray(a)){const f=function(I){return typeof I.error<"u"},d=function(I){return!f(I)};return i(null,a.filter(f),a.filter(d))}else return i(null,a.error,a.result);i(null,a)},io}var yl=pl();const gl=ri(yl);var oo={exports:{}},Vs;function ml(){return Vs||(Vs=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(d,I,b){this.fn=d,this.context=I,this.once=b||!1}function i(d,I,b,N,L){if(typeof b!="function")throw new TypeError("The listener must be a function");var P=new o(b,N||d,L),H=e?e+I:I;return d._events[H]?d._events[H].fn?d._events[H]=[d._events[H],P]:d._events[H].push(P):(d._events[H]=P,d._eventsCount++),d}function a(d,I){--d._eventsCount===0?d._events=new r:delete d._events[I]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var I=[],b,N;if(this._eventsCount===0)return I;for(N in b=this._events)t.call(b,N)&&I.push(e?N.slice(1):N);return Object.getOwnPropertySymbols?I.concat(Object.getOwnPropertySymbols(b)):I},f.prototype.listeners=function(I){var b=e?e+I:I,N=this._events[b];if(!N)return[];if(N.fn)return[N.fn];for(var L=0,P=N.length,H=new Array(P);L<P;L++)H[L]=N[L].fn;return H},f.prototype.listenerCount=function(I){var b=e?e+I:I,N=this._events[b];return N?N.fn?1:N.length:0},f.prototype.emit=function(I,b,N,L,P,H){var F=e?e+I:I;if(!this._events[F])return!1;var B=this._events[F],W=arguments.length,K,U;if(B.fn){switch(B.once&&this.removeListener(I,B.fn,void 0,!0),W){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,b),!0;case 3:return B.fn.call(B.context,b,N),!0;case 4:return B.fn.call(B.context,b,N,L),!0;case 5:return B.fn.call(B.context,b,N,L,P),!0;case 6:return B.fn.call(B.context,b,N,L,P,H),!0}for(U=1,K=new Array(W-1);U<W;U++)K[U-1]=arguments[U];B.fn.apply(B.context,K)}else{var tt=B.length,at;for(U=0;U<tt;U++)switch(B[U].once&&this.removeListener(I,B[U].fn,void 0,!0),W){case 1:B[U].fn.call(B[U].context);break;case 2:B[U].fn.call(B[U].context,b);break;case 3:B[U].fn.call(B[U].context,b,N);break;case 4:B[U].fn.call(B[U].context,b,N,L);break;default:if(!K)for(at=1,K=new Array(W-1);at<W;at++)K[at-1]=arguments[at];B[U].fn.apply(B[U].context,K)}}return!0},f.prototype.on=function(I,b,N){return i(this,I,b,N,!1)},f.prototype.once=function(I,b,N){return i(this,I,b,N,!0)},f.prototype.removeListener=function(I,b,N,L){var P=e?e+I:I;if(!this._events[P])return this;if(!b)return a(this,P),this;var H=this._events[P];if(H.fn)H.fn===b&&(!L||H.once)&&(!N||H.context===N)&&a(this,P);else{for(var F=0,B=[],W=H.length;F<W;F++)(H[F].fn!==b||L&&!H[F].once||N&&H[F].context!==N)&&B.push(H[F]);B.length?this._events[P]=B.length===1?B[0]:B:a(this,P)}return this},f.prototype.removeAllListeners=function(I){var b;return I?(b=e?e+I:I,this._events[b]&&a(this,b)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,n.exports=f}(oo)),oo.exports}var wl=ml();const ic=ri(wl);var bl=class extends ic{constructor(t,e,r){super();ge(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=o=>this.emit("message",o.data),this.socket.onerror=o=>this.emit("error",o),this.socket.onclose=o=>{this.emit("close",o.code,o.reason)}}send(t,e,r){const o=r||e;try{this.socket.send(t),o()}catch(i){o(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function El(n,t){return new bl(n,t)}var _l=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},Rl=class extends ic{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:o=!0,reconnect_interval:i=1e3,max_reconnects:a=5,...f}={},d,I){super();ge(this,"address");ge(this,"rpc_id");ge(this,"queue");ge(this,"options");ge(this,"autoconnect");ge(this,"ready");ge(this,"reconnect");ge(this,"reconnect_timer_id");ge(this,"reconnect_interval");ge(this,"max_reconnects");ge(this,"rest_options");ge(this,"current_reconnects");ge(this,"generate_request_id");ge(this,"socket");ge(this,"webSocketFactory");ge(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=o,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=a,this.rest_options=f,this.current_reconnects=0,this.generate_request_id=d||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),I?this.dataPack=I:this.dataPack=new _l,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,o){return!o&&typeof r=="object"&&(o=r,r=null),new Promise((i,a)=>{if(!this.ready)return a(new Error("socket not ready"));const f=this.generate_request_id(t,e),d={jsonrpc:"2.0",method:t,params:e||void 0,id:f};this.socket.send(this.dataPack.encode(d),o,I=>{if(I)return a(I);this.queue[f]={promise:[i,a]},r&&(this.queue[f].timeout=setTimeout(()=>{delete this.queue[f],a(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,o)=>{if(!this.ready)return o(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),a=>{if(a)return o(a);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=wt.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const o=[r.notification];if(r.params.constructor===Object)o.push(r.params);else for(let i=0;i<r.params.length;i++)o.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,o)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:o})=>{this.ready&&setTimeout(()=>this.emit("close",r,o),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};const Il=BigInt(0),un=BigInt(1),Al=BigInt(2),Sl=BigInt(7),xl=BigInt(256),kl=BigInt(113),oc=[],sc=[],ac=[];for(let n=0,t=un,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],oc.push(2*(5*r+e)),sc.push((n+1)*(n+2)/2%64);let o=Il;for(let i=0;i<7;i++)t=(t<<un^(t>>Sl)*kl)%xl,t&Al&&(o^=un<<(un<<BigInt(i))-un);ac.push(o)}const cc=Ma(ac,!0),vl=cc[0],Tl=cc[1],Gs=(n,t,e)=>e>32?Iu(n,t,e):_u(n,t,e),js=(n,t,e)=>e>32?Au(n,t,e):Ru(n,t,e);function Bl(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)e[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const f=(a+8)%10,d=(a+2)%10,I=e[d],b=e[d+1],N=Gs(I,b,1)^e[f],L=js(I,b,1)^e[f+1];for(let P=0;P<50;P+=10)n[a+P]^=N,n[a+P+1]^=L}let o=n[2],i=n[3];for(let a=0;a<24;a++){const f=sc[a],d=Gs(o,i,f),I=js(o,i,f),b=oc[a];o=n[b],i=n[b+1],n[b]=d,n[b+1]=I}for(let a=0;a<50;a+=10){for(let f=0;f<10;f++)e[f]=n[a+f];for(let f=0;f<10;f++)n[a+f]^=~e[(f+2)%10]&e[(f+4)%10]}n[0]^=vl[r],n[1]^=Tl[r]}Ar(e)}class Qo extends zo{constructor(t,e,r,o=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=o,this.rounds=i,pn(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=lu(this.state)}clone(){return this._cloneInto()}keccak(){_s(this.state32),Bl(this.state32,this.rounds),_s(this.state32),this.posOut=0,this.pos=0}update(t){Zr(this),t=ni(t),Cr(t);const{blockLen:e,state:r}=this,o=t.length;for(let i=0;i<o;){const a=Math.min(e-this.pos,o-i);for(let f=0;f<a;f++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:o}=this;t[r]^=e,(e&128)!==0&&r===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){Zr(this,!1),Cr(t),this.finish();const e=this.state,{blockLen:r}=this;for(let o=0,i=t.length;o<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-o);t.set(e.subarray(this.posOut,this.posOut+a),o),this.posOut+=a,o+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return pn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Oa(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ar(this.state)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:o,rounds:i,enableXOF:a}=this;return t||(t=new Qo(e,r,o,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=o,t.enableXOF=a,t.destroyed=this.destroyed,t}}const Ol=(n,t,e)=>Ko(()=>new Qo(t,n,e)),Ys=Ol(1,136,256/8);class uc extends zo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,hu(t);const r=ni(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),Ar(i)}update(t){return Zr(this),this.iHash.update(t),this}digestInto(t){Zr(this),Cr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:o,destroyed:i,blockLen:a,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=a,t.outputLen=f,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hc=(n,t,e)=>new uc(n,t).update(e).digest();hc.create=(n,t)=>new uc(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zs(n){n.lowS!==void 0&&_r("lowS",n.lowS),n.prehash!==void 0&&_r("prehash",n.prehash)}function Nl(n){const t=Go(n);En(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:o}=t;if(e){if(!r.eql(o,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}class Cl extends Error{constructor(t=""){super(t)}}const ur={Err:Cl,_tlv:{encode:(n,t)=>{const{Err:e}=ur;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,o=Nn(r);if(o.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?Nn(o.length/2|128):"";return Nn(n)+i+o+t},decode(n,t){const{Err:e}=ur;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const o=t[r++],i=!!(o&128);let a=0;if(!i)a=o;else{const d=o&127;if(!d)throw new e("tlv.decode(long): indefinite length not supported");if(d>4)throw new e("tlv.decode(long): byte length is too big");const I=t.subarray(r,r+d);if(I.length!==d)throw new e("tlv.decode: length bytes not complete");if(I[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const b of I)a=a<<8|b;if(r+=d,a<128)throw new e("tlv.decode(long): not minimal encoding")}const f=t.subarray(r,r+a);if(f.length!==a)throw new e("tlv.decode: wrong value length");return{v:f,l:t.subarray(r+a)}}},_int:{encode(n){const{Err:t}=ur;if(n<lr)throw new t("integer: negative integers are not allowed");let e=Nn(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=ur;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Nr(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=ur,o=me("signature",n),{v:i,l:a}=r.decode(48,o);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:f,l:d}=r.decode(2,i),{v:I,l:b}=r.decode(2,d);if(b.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(f),s:e.decode(I)}},hexFromSig(n){const{_tlv:t,_int:e}=ur,r=t.encode(2,e.encode(n.r)),o=t.encode(2,e.encode(n.s)),i=r+o;return t.encode(48,i)}},lr=BigInt(0),be=BigInt(1);BigInt(2);const Xs=BigInt(3);BigInt(4);function Ml(n){const t=Nl(n),{Fp:e}=t,r=_n(t.n,t.nBitLength),o=t.toBytes||((F,B,W)=>{const K=B.toAffine();return Qr(Uint8Array.from([4]),e.toBytes(K.x),e.toBytes(K.y))}),i=t.fromBytes||(F=>{const B=F.subarray(1),W=e.fromBytes(B.subarray(0,e.BYTES)),K=e.fromBytes(B.subarray(e.BYTES,2*e.BYTES));return{x:W,y:K}});function a(F){const{a:B,b:W}=t,K=e.sqr(F),U=e.mul(K,F);return e.add(e.add(U,e.mul(F,B)),W)}if(!e.eql(e.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function f(F){return $o(F,be,t.n)}function d(F){const{allowedPrivateKeyLengths:B,nByteLength:W,wrapPrivateKey:K,n:U}=t;if(B&&typeof F!="bigint"){if(Xr(F)&&(F=Jr(F)),typeof F!="string"||!B.includes(F.length))throw new Error("invalid private key");F=F.padStart(W*2,"0")}let tt;try{tt=typeof F=="bigint"?F:Nr(me("private key",F,W))}catch{throw new Error("invalid private key, expected hex or "+W+" bytes, got "+typeof F)}return K&&(tt=ie(tt,U)),Ve("private key",tt,be,U),tt}function I(F){if(!(F instanceof L))throw new Error("ProjectivePoint expected")}const b=Vn((F,B)=>{const{px:W,py:K,pz:U}=F;if(e.eql(U,e.ONE))return{x:W,y:K};const tt=F.is0();B==null&&(B=tt?e.ONE:e.inv(U));const at=e.mul(W,B),st=e.mul(K,B),nt=e.mul(U,B);if(tt)return{x:e.ZERO,y:e.ZERO};if(!e.eql(nt,e.ONE))throw new Error("invZ was invalid");return{x:at,y:st}}),N=Vn(F=>{if(F.is0()){if(t.allowInfinityPoint&&!e.is0(F.py))return;throw new Error("bad point: ZERO")}const{x:B,y:W}=F.toAffine();if(!e.isValid(B)||!e.isValid(W))throw new Error("bad point: x or y not FE");const K=e.sqr(W),U=a(B);if(!e.eql(K,U))throw new Error("bad point: equation left != right");if(!F.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class L{constructor(B,W,K){if(B==null||!e.isValid(B))throw new Error("x required");if(W==null||!e.isValid(W)||e.is0(W))throw new Error("y required");if(K==null||!e.isValid(K))throw new Error("z required");this.px=B,this.py=W,this.pz=K,Object.freeze(this)}static fromAffine(B){const{x:W,y:K}=B||{};if(!B||!e.isValid(W)||!e.isValid(K))throw new Error("invalid affine point");if(B instanceof L)throw new Error("projective point not allowed");const U=tt=>e.eql(tt,e.ZERO);return U(W)&&U(K)?L.ZERO:new L(W,K,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(B){const W=Vo(e,B.map(K=>K.pz));return B.map((K,U)=>K.toAffine(W[U])).map(L.fromAffine)}static fromHex(B){const W=L.fromAffine(i(me("pointHex",B)));return W.assertValidity(),W}static fromPrivateKey(B){return L.BASE.multiply(d(B))}static msm(B,W){return $a(L,r,B,W)}_setWindowSize(B){H.setWindowSize(this,B)}assertValidity(){N(this)}hasEvenY(){const{y:B}=this.toAffine();if(e.isOdd)return!e.isOdd(B);throw new Error("Field doesn't support isOdd")}equals(B){I(B);const{px:W,py:K,pz:U}=this,{px:tt,py:at,pz:st}=B,nt=e.eql(e.mul(W,st),e.mul(tt,U)),it=e.eql(e.mul(K,st),e.mul(at,U));return nt&&it}negate(){return new L(this.px,e.neg(this.py),this.pz)}double(){const{a:B,b:W}=t,K=e.mul(W,Xs),{px:U,py:tt,pz:at}=this;let st=e.ZERO,nt=e.ZERO,it=e.ZERO,j=e.mul(U,U),$=e.mul(tt,tt),G=e.mul(at,at),T=e.mul(U,tt);return T=e.add(T,T),it=e.mul(U,at),it=e.add(it,it),st=e.mul(B,it),nt=e.mul(K,G),nt=e.add(st,nt),st=e.sub($,nt),nt=e.add($,nt),nt=e.mul(st,nt),st=e.mul(T,st),it=e.mul(K,it),G=e.mul(B,G),T=e.sub(j,G),T=e.mul(B,T),T=e.add(T,it),it=e.add(j,j),j=e.add(it,j),j=e.add(j,G),j=e.mul(j,T),nt=e.add(nt,j),G=e.mul(tt,at),G=e.add(G,G),j=e.mul(G,T),st=e.sub(st,j),it=e.mul(G,$),it=e.add(it,it),it=e.add(it,it),new L(st,nt,it)}add(B){I(B);const{px:W,py:K,pz:U}=this,{px:tt,py:at,pz:st}=B;let nt=e.ZERO,it=e.ZERO,j=e.ZERO;const $=t.a,G=e.mul(t.b,Xs);let T=e.mul(W,tt),A=e.mul(K,at),s=e.mul(U,st),l=e.add(W,K),E=e.add(tt,at);l=e.mul(l,E),E=e.add(T,A),l=e.sub(l,E),E=e.add(W,U);let S=e.add(tt,st);return E=e.mul(E,S),S=e.add(T,s),E=e.sub(E,S),S=e.add(K,U),nt=e.add(at,st),S=e.mul(S,nt),nt=e.add(A,s),S=e.sub(S,nt),j=e.mul($,E),nt=e.mul(G,s),j=e.add(nt,j),nt=e.sub(A,j),j=e.add(A,j),it=e.mul(nt,j),A=e.add(T,T),A=e.add(A,T),s=e.mul($,s),E=e.mul(G,E),A=e.add(A,s),s=e.sub(T,s),s=e.mul($,s),E=e.add(E,s),T=e.mul(A,E),it=e.add(it,T),T=e.mul(S,E),nt=e.mul(l,nt),nt=e.sub(nt,T),T=e.mul(l,A),j=e.mul(S,j),j=e.add(j,T),new L(nt,it,j)}subtract(B){return this.add(B.negate())}is0(){return this.equals(L.ZERO)}wNAF(B){return H.wNAFCached(this,B,L.normalizeZ)}multiplyUnsafe(B){const{endo:W,n:K}=t;Ve("scalar",B,lr,K);const U=L.ZERO;if(B===lr)return U;if(this.is0()||B===be)return this;if(!W||H.hasPrecomputes(this))return H.wNAFCachedUnsafe(this,B,L.normalizeZ);let{k1neg:tt,k1:at,k2neg:st,k2:nt}=W.splitScalar(B),it=U,j=U,$=this;for(;at>lr||nt>lr;)at&be&&(it=it.add($)),nt&be&&(j=j.add($)),$=$.double(),at>>=be,nt>>=be;return tt&&(it=it.negate()),st&&(j=j.negate()),j=new L(e.mul(j.px,W.beta),j.py,j.pz),it.add(j)}multiply(B){const{endo:W,n:K}=t;Ve("scalar",B,be,K);let U,tt;if(W){const{k1neg:at,k1:st,k2neg:nt,k2:it}=W.splitScalar(B);let{p:j,f:$}=this.wNAF(st),{p:G,f:T}=this.wNAF(it);j=H.constTimeNegate(at,j),G=H.constTimeNegate(nt,G),G=new L(e.mul(G.px,W.beta),G.py,G.pz),U=j.add(G),tt=$.add(T)}else{const{p:at,f:st}=this.wNAF(B);U=at,tt=st}return L.normalizeZ([U,tt])[0]}multiplyAndAddUnsafe(B,W,K){const U=L.BASE,tt=(st,nt)=>nt===lr||nt===be||!st.equals(U)?st.multiplyUnsafe(nt):st.multiply(nt),at=tt(this,W).add(tt(B,K));return at.is0()?void 0:at}toAffine(B){return b(this,B)}isTorsionFree(){const{h:B,isTorsionFree:W}=t;if(B===be)return!0;if(W)return W(L,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:B,clearCofactor:W}=t;return B===be?this:W?W(L,this):this.multiplyUnsafe(t.h)}toRawBytes(B=!0){return _r("isCompressed",B),this.assertValidity(),o(L,this,B)}toHex(B=!0){return _r("isCompressed",B),Jr(this.toRawBytes(B))}}L.BASE=new L(t.Gx,t.Gy,e.ONE),L.ZERO=new L(e.ZERO,e.ONE,e.ZERO);const P=t.nBitLength,H=Wa(L,t.endo?Math.ceil(P/2):P);return{CURVE:t,ProjectivePoint:L,normPrivateKeyToScalar:d,weierstrassEquation:a,isWithinCurveOrder:f}}function Ll(n){const t=Go(n);return En(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Pl(n){const t=Ll(n),{Fp:e,n:r}=t,o=e.BYTES+1,i=2*e.BYTES+1;function a(s){return ie(s,r)}function f(s){return Io(s,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:I,weierstrassEquation:b,isWithinCurveOrder:N}=Ml({...t,toBytes(s,l,E){const S=l.toAffine(),x=e.toBytes(S.x),R=Qr;return _r("isCompressed",E),E?R(Uint8Array.from([l.hasEvenY()?2:3]),x):R(Uint8Array.from([4]),x,e.toBytes(S.y))},fromBytes(s){const l=s.length,E=s[0],S=s.subarray(1);if(l===o&&(E===2||E===3)){const x=Nr(S);if(!$o(x,be,e.ORDER))throw new Error("Point is not on curve");const R=b(x);let g;try{g=e.sqrt(R)}catch(u){const _=u instanceof Error?": "+u.message:"";throw new Error("Point is not on curve"+_)}const h=(g&be)===be;return(E&1)===1!==h&&(g=e.neg(g)),{x,y:g}}else if(l===i&&E===4){const x=e.fromBytes(S.subarray(0,e.BYTES)),R=e.fromBytes(S.subarray(e.BYTES,2*e.BYTES));return{x,y:R}}else{const x=o,R=i;throw new Error("invalid Point, expected length of "+x+", or uncompressed "+R+", got "+l)}}}),L=s=>Jr(yn(s,t.nByteLength));function P(s){const l=r>>be;return s>l}function H(s){return P(s)?a(-s):s}const F=(s,l,E)=>Nr(s.slice(l,E));class B{constructor(l,E,S){Ve("r",l,be,r),Ve("s",E,be,r),this.r=l,this.s=E,S!=null&&(this.recovery=S),Object.freeze(this)}static fromCompact(l){const E=t.nByteLength;return l=me("compactSignature",l,E*2),new B(F(l,0,E),F(l,E,2*E))}static fromDER(l){const{r:E,s:S}=ur.toSig(me("DER",l));return new B(E,S)}assertValidity(){}addRecoveryBit(l){return new B(this.r,this.s,l)}recoverPublicKey(l){const{r:E,s:S,recovery:x}=this,R=st(me("msgHash",l));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const g=x===2||x===3?E+t.n:E;if(g>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=(x&1)===0?"02":"03",c=d.fromHex(h+L(g)),u=f(g),_=a(-R*u),O=a(S*u),z=d.BASE.multiplyAndAddUnsafe(c,_,O);if(!z)throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return P(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Wn(this.toDERHex())}toDERHex(){return ur.hexFromSig(this)}toCompactRawBytes(){return Wn(this.toCompactHex())}toCompactHex(){return L(this.r)+L(this.s)}}const W={isValidPrivateKey(s){try{return I(s),!0}catch{return!1}},normPrivateKeyToScalar:I,randomPrivateKey:()=>{const s=za(t.n);return Yu(t.randomBytes(s),t.n)},precompute(s=8,l=d.BASE){return l._setWindowSize(s),l.multiply(BigInt(3)),l}};function K(s,l=!0){return d.fromPrivateKey(s).toRawBytes(l)}function U(s){const l=Xr(s),E=typeof s=="string",S=(l||E)&&s.length;return l?S===o||S===i:E?S===2*o||S===2*i:s instanceof d}function tt(s,l,E=!0){if(U(s))throw new Error("first arg must be private key");if(!U(l))throw new Error("second arg must be public key");return d.fromHex(l).multiply(I(s)).toRawBytes(E)}const at=t.bits2int||function(s){if(s.length>8192)throw new Error("input is too large");const l=Nr(s),E=s.length*8-t.nBitLength;return E>0?l>>BigInt(E):l},st=t.bits2int_modN||function(s){return a(at(s))},nt=ii(t.nBitLength);function it(s){return Ve("num < 2^"+t.nBitLength,s,lr,nt),yn(s,t.nByteLength)}function j(s,l,E=$){if(["recovered","canonical"].some(ht=>ht in E))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:x}=t;let{lowS:R,prehash:g,extraEntropy:h}=E;R==null&&(R=!0),s=me("msgHash",s),Zs(E),g&&(s=me("prehashed msgHash",S(s)));const c=st(s),u=I(l),_=[it(u),it(c)];if(h!=null&&h!==!1){const ht=h===!0?x(e.BYTES):h;_.push(me("extraEntropy",ht))}const O=Qr(..._),z=c;function et(ht){const gt=at(ht);if(!N(gt))return;const Ft=f(gt),Et=d.BASE.multiply(gt).toAffine(),xt=a(Et.x);if(xt===lr)return;const le=a(Ft*a(z+xt*u));if(le===lr)return;let Lt=(Et.x===xt?0:2)|Number(Et.y&be),Mt=le;return R&&P(le)&&(Mt=H(le),Lt^=1),new B(xt,Mt,Lt)}return{seed:O,k2sig:et}}const $={lowS:t.lowS,prehash:!1},G={lowS:t.lowS,prehash:!1};function T(s,l,E=$){const{seed:S,k2sig:x}=j(s,l,E),R=t;return Du(R.hash.outputLen,R.nByteLength,R.hmac)(S,x)}d.BASE._setWindowSize(8);function A(s,l,E,S=G){var Lt;const x=s;l=me("msgHash",l),E=me("publicKey",E);const{lowS:R,prehash:g,format:h}=S;if(Zs(S),"strict"in S)throw new Error("options.strict was renamed to lowS");if(h!==void 0&&h!=="compact"&&h!=="der")throw new Error("format must be compact or der");const c=typeof x=="string"||Xr(x),u=!c&&!h&&typeof x=="object"&&x!==null&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!c&&!u)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let _,O;try{if(u&&(_=new B(x.r,x.s)),c){try{h!=="compact"&&(_=B.fromDER(x))}catch(Mt){if(!(Mt instanceof ur.Err))throw Mt}!_&&h!=="der"&&(_=B.fromCompact(x))}O=d.fromHex(E)}catch{return!1}if(!_||R&&_.hasHighS())return!1;g&&(l=t.hash(l));const{r:z,s:et}=_,ht=st(l),gt=f(et),Ft=a(ht*gt),Et=a(z*gt),xt=(Lt=d.BASE.multiplyAndAddUnsafe(O,Ft,Et))==null?void 0:Lt.toAffine();return xt?a(xt.x)===z:!1}return{CURVE:t,getPublicKey:K,getSharedSecret:tt,sign:T,verify:A,ProjectivePoint:d,Signature:B,utils:W}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ul(n){return{hash:n,hmac:(t,...e)=>hc(n,t,gu(...e)),randomBytes:Na}}function Fl(n,t){const e=r=>Pl({...n,...Ul(r)});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Js=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Dl=BigInt(1),So=BigInt(2),Qs=(n,t)=>(n+t/So)/t;function Hl(n){const t=lc,e=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),f=BigInt(44),d=BigInt(88),I=n*n*n%t,b=I*I*n%t,N=he(b,e,t)*b%t,L=he(N,e,t)*b%t,P=he(L,So,t)*I%t,H=he(P,o,t)*P%t,F=he(H,i,t)*H%t,B=he(F,f,t)*F%t,W=he(B,d,t)*B%t,K=he(W,f,t)*F%t,U=he(K,e,t)*b%t,tt=he(U,a,t)*H%t,at=he(tt,r,t)*I%t,st=he(at,So,t);if(!xo.eql(xo.sqr(st),n))throw new Error("Cannot find square root");return st}const xo=_n(lc,void 0,void 0,{sqrt:Hl}),ui=Fl({a:BigInt(0),b:BigInt(7),Fp:xo,n:Js,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=Js,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Dl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,a=BigInt("0x100000000000000000000000000000000"),f=Qs(i*n,t),d=Qs(-r*n,t);let I=ie(n-f*e-d*o,t),b=ie(-f*r-d*i,t);const N=I>a,L=b>a;if(N&&(I=t-I),L&&(b=t-b),I>a||b>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:N,k1:I,k2neg:L,k2:b}}}},Pa);BigInt(0);ui.ProjectivePoint;const zl=nn.utils.randomPrivateKey,ta=()=>{const n=nn.utils.randomPrivateKey(),t=Jn(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},Jn=nn.getPublicKey;function ea(n){try{return nn.ExtendedPoint.fromHex(n),!0}catch{return!1}}const ts=(n,t)=>nn.sign(n,t.slice(0,32)),Kl=nn.verify,Ot=n=>wt.isBuffer(n)?n:n instanceof Uint8Array?wt.from(n.buffer,n.byteOffset,n.byteLength):wt.from(n);let es=class{constructor(t){Object.assign(this,t)}encode(){return wt.from(Xi.serialize(dn,this))}static decode(t){return Xi.deserialize(dn,this,t)}static decodeUnchecked(t){return Xi.deserializeUnchecked(dn,this,t)}};class ql extends es{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const dn=new Map;var fc;const dc=32,rr=32;function Wl(n){return n._bn!==void 0}let ra=1;class ut extends es{constructor(t){if(super({}),this._bn=void 0,Wl(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Ae.decode(t);if(e.length!=rr)throw new Error("Invalid public key input");this._bn=new Yr(e)}else this._bn=new Yr(t);if(this._bn.byteLength()>rr)throw new Error("Invalid public key input")}}static unique(){const t=new ut(ra);return ra+=1,new ut(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Ae.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(wt);if(t.length===rr)return t;const e=wt.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const o=wt.concat([t.toBuffer(),wt.from(e),r.toBuffer()]),i=Ds(o);return new ut(i)}static createProgramAddressSync(t,e){let r=wt.alloc(0);t.forEach(function(i){if(i.length>dc)throw new TypeError("Max seed length exceeded");r=wt.concat([r,Ot(i)])}),r=wt.concat([r,e.toBuffer(),wt.from("ProgramDerivedAddress")]);const o=Ds(r);if(ea(o))throw new Error("Invalid seeds, address must fall off the curve");return new ut(o)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,o;for(;r!=0;){try{const i=t.concat(wt.from([r]));o=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[o,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ut(t);return ea(e.toBytes())}}fc=ut;ut.default=new fc("11111111111111111111111111111111");dn.set(ut,{kind:"struct",fields:[["_bn","u256"]]});class $l{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=Ot(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=Ot(zl()),this._publicKey=Ot(Jn(this._secretKey))}get publicKey(){return new ut(this._publicKey)}get secretKey(){return wt.concat([this._secretKey,this._publicKey],64)}}const Vl=new ut("BPFLoader1111111111111111111111111111111111"),Rr=1232,hi=127,gn=64;class rs extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(rs.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ns extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ns.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Wr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Wr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class mn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,a)=>{r.set(i.toBase58(),a)});const o=i=>{const a=r.get(i.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(i=>({programIdIndex:o(i.programId),accountKeyIndexes:i.keys.map(a=>o(a.pubkey)),data:i.data}))}}const Ct=(n="publicKey")=>D.blob(32,n),Gl=(n="signature")=>D.blob(64,n),Tr=(n="string")=>{const t=D.struct([D.u32("length"),D.u32("lengthPadding"),D.blob(D.offset(D.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),o=t;return o.decode=(i,a)=>e(i,a).chars.toString(),o.encode=(i,a,f)=>{const d={chars:wt.from(i,"utf8")};return r(d,a,f)},o.alloc=i=>D.u32().span+D.u32().span+wt.from(i,"utf8").length,o},jl=(n="authorized")=>D.struct([Ct("staker"),Ct("withdrawer")],n),Yl=(n="lockup")=>D.struct([D.ns64("unixTimestamp"),D.ns64("epoch"),Ct("custodian")],n),Zl=(n="voteInit")=>D.struct([Ct("nodePubkey"),Ct("authorizedVoter"),Ct("authorizedWithdrawer"),D.u8("commission")],n),Xl=(n="voteAuthorizeWithSeedArgs")=>D.struct([D.u32("voteAuthorizationType"),Ct("currentAuthorityDerivedKeyOwnerPubkey"),Tr("currentAuthorityDerivedKeySeed"),Ct("newAuthorized")],n);function pc(n,t){const e=o=>{if(o.span>=0)return o.span;if(typeof o.alloc=="function")return o.alloc(t[o.property]);if("count"in o&&"elementLayout"in o){const i=t[o.property];if(Array.isArray(i))return i.length*e(o.elementLayout)}else if("fields"in o)return pc({layout:o},t[o.property]);return 0};let r=0;return n.layout.fields.forEach(o=>{r+=e(o)}),r}function Pe(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function ze(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function Ut(n,t){if(!n)throw new Error(t||"Assertion failed")}class li{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,o=a=>{const f=a.toBase58();let d=r.get(f);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(f,d)),d},i=o(e);i.isSigner=!0,i.isWritable=!0;for(const a of t){o(a.programId).isInvoked=!0;for(const f of a.keys){const d=o(f.pubkey);d.isSigner||(d.isSigner=f.isSigner),d.isWritable||(d.isWritable=f.isWritable)}}return new li(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Ut(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),o=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Ut(e.length>0,"Expected at least one writable signer key");const[d]=e[0];Ut(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const f=[...e.map(([d])=>new ut(d)),...r.map(([d])=>new ut(d)),...o.map(([d])=>new ut(d)),...i.map(([d])=>new ut(d))];return[a,f]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[o,i]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&o.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:o},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,o=new Array;for(const[i,a]of this.keyMetaMap.entries())if(e(a)){const f=new ut(i),d=t.findIndex(I=>I.equals(f));d>=0&&(Ut(d<256,"Max lookup table index exceeded"),r.push(d),o.push(f),this.keyMetaMap.delete(i))}return[r,o]}}const yc="Reached end of buffer unexpectedly";function Qe(n){if(n.length===0)throw new Error(yc);return n.shift()}function Ue(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(yc);return n.splice(...t)}class je{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ut(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ae.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new mn(this.staticAccountKeys)}static compile(t){const e=li.compile(t.instructions,t.payerKey),[r,o]=e.getMessageComponents(),a=new mn(o).compileInstructions(t.instructions).map(f=>({programIdIndex:f.programIdIndex,accounts:f.accountKeyIndexes,data:Ae.encode(f.data)}));return new je({header:r,accountKeys:o,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ze(e,t);const r=this.instructions.map(N=>{const{accounts:L,programIdIndex:P}=N,H=Array.from(Ae.decode(N.data));let F=[];ze(F,L.length);let B=[];return ze(B,H.length),{programIdIndex:P,keyIndicesCount:wt.from(F),keyIndices:L,dataLength:wt.from(B),data:H}});let o=[];ze(o,r.length);let i=wt.alloc(Rr);wt.from(o).copy(i);let a=o.length;r.forEach(N=>{const P=D.struct([D.u8("programIdIndex"),D.blob(N.keyIndicesCount.length,"keyIndicesCount"),D.seq(D.u8("keyIndex"),N.keyIndices.length,"keyIndices"),D.blob(N.dataLength.length,"dataLength"),D.seq(D.u8("userdatum"),N.data.length,"data")]).encode(N,i,a);a+=P}),i=i.slice(0,a);const f=D.struct([D.blob(1,"numRequiredSignatures"),D.blob(1,"numReadonlySignedAccounts"),D.blob(1,"numReadonlyUnsignedAccounts"),D.blob(e.length,"keyCount"),D.seq(Ct("key"),t,"keys"),Ct("recentBlockhash")]),d={numRequiredSignatures:wt.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:wt.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:wt.from([this.header.numReadonlyUnsignedAccounts]),keyCount:wt.from(e),keys:this.accountKeys.map(N=>Ot(N.toBytes())),recentBlockhash:Ae.decode(this.recentBlockhash)};let I=wt.alloc(2048);const b=f.encode(d,I);return i.copy(I,b),I.slice(0,b+i.length)}static from(t){let e=[...t];const r=Qe(e);if(r!==(r&hi))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const o=Qe(e),i=Qe(e),a=Pe(e);let f=[];for(let L=0;L<a;L++){const P=Ue(e,0,rr);f.push(new ut(wt.from(P)))}const d=Ue(e,0,rr),I=Pe(e);let b=[];for(let L=0;L<I;L++){const P=Qe(e),H=Pe(e),F=Ue(e,0,H),B=Pe(e),W=Ue(e,0,B),K=Ae.encode(wt.from(W));b.push({programIdIndex:P,accounts:F,data:K})}const N={header:{numRequiredSignatures:r,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:i},recentBlockhash:Ae.encode(wt.from(d)),accountKeys:f,instructions:b};return new je(N)}}class Mr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new mn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const o=t-r,i=this.addressTableLookups.reduce((a,f)=>a+f.writableIndexes.length,0);return o<i}else if(t>=this.header.numRequiredSignatures){const o=t-e,a=r-e-this.header.numReadonlyUnsignedAccounts;return o<a}else{const o=e-this.header.numReadonlySignedAccounts;return t<o}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const o=t.find(i=>i.key.equals(r.accountKey));if(!o)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<o.state.addresses.length)e.writable.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<o.state.addresses.length)e.readonly.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=li.compile(t.instructions,t.payerKey),r=new Array,o={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const b of i){const N=e.extractTableLookup(b);if(N!==void 0){const[L,{writable:P,readonly:H}]=N;r.push(L),o.writable.push(...P),o.readonly.push(...H)}}const[a,f]=e.getMessageComponents(),I=new mn(f,o).compileInstructions(t.instructions);return new Mr({header:a,staticAccountKeys:f,recentBlockhash:t.recentBlockhash,compiledInstructions:I,addressTableLookups:r})}serialize(){const t=Array();ze(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();ze(r,this.compiledInstructions.length);const o=this.serializeAddressTableLookups(),i=Array();ze(i,this.addressTableLookups.length);const a=D.struct([D.u8("prefix"),D.struct([D.u8("numRequiredSignatures"),D.u8("numReadonlySignedAccounts"),D.u8("numReadonlyUnsignedAccounts")],"header"),D.blob(t.length,"staticAccountKeysLength"),D.seq(Ct(),this.staticAccountKeys.length,"staticAccountKeys"),Ct("recentBlockhash"),D.blob(r.length,"instructionsLength"),D.blob(e.length,"serializedInstructions"),D.blob(i.length,"addressTableLookupsLength"),D.blob(o.length,"serializedAddressTableLookups")]),f=new Uint8Array(Rr),I=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(b=>b.toBytes()),recentBlockhash:Ae.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:o},f);return f.slice(0,I)}serializeInstructions(){let t=0;const e=new Uint8Array(Rr);for(const r of this.compiledInstructions){const o=Array();ze(o,r.accountKeyIndexes.length);const i=Array();ze(i,r.data.length);const a=D.struct([D.u8("programIdIndex"),D.blob(o.length,"encodedAccountKeyIndexesLength"),D.seq(D.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),D.blob(i.length,"encodedDataLength"),D.blob(r.data.length,"data")]);t+=a.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Rr);for(const r of this.addressTableLookups){const o=Array();ze(o,r.writableIndexes.length);const i=Array();ze(i,r.readonlyIndexes.length);const a=D.struct([Ct("accountKey"),D.blob(o.length,"encodedWritableIndexesLength"),D.seq(D.u8(),r.writableIndexes.length,"writableIndexes"),D.blob(i.length,"encodedReadonlyIndexesLength"),D.seq(D.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Qe(e),o=r&hi;Ut(r!==o,"Expected versioned message but received legacy message");const i=o;Ut(i===0,`Expected versioned message with version 0 but found version ${i}`);const a={numRequiredSignatures:Qe(e),numReadonlySignedAccounts:Qe(e),numReadonlyUnsignedAccounts:Qe(e)},f=[],d=Pe(e);for(let H=0;H<d;H++)f.push(new ut(Ue(e,0,rr)));const I=Ae.encode(Ue(e,0,rr)),b=Pe(e),N=[];for(let H=0;H<b;H++){const F=Qe(e),B=Pe(e),W=Ue(e,0,B),K=Pe(e),U=new Uint8Array(Ue(e,0,K));N.push({programIdIndex:F,accountKeyIndexes:W,data:U})}const L=Pe(e),P=[];for(let H=0;H<L;H++){const F=new ut(Ue(e,0,rr)),B=Pe(e),W=Ue(e,0,B),K=Pe(e),U=Ue(e,0,K);P.push({accountKey:F,writableIndexes:W,readonlyIndexes:U})}return new Mr({header:a,staticAccountKeys:f,recentBlockhash:I,compiledInstructions:N,addressTableLookups:P})}}const is={deserializeMessageVersion(n){const t=n[0],e=t&hi;return e===t?"legacy":e},deserialize:n=>{const t=is.deserializeMessageVersion(n);if(t==="legacy")return je.from(n);if(t===0)return Mr.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let cr=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const Jl=wt.alloc(gn).fill(0);class Yt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=wt.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Dt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Yt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let F=0;F<e.length;F++)if(e[F].programId===void 0)throw new Error(`Transaction instruction index ${F} has undefined program id`);const o=[],i=[];e.forEach(F=>{F.keys.forEach(W=>{i.push({...W})});const B=F.programId.toString();o.includes(B)||o.push(B)}),o.forEach(F=>{i.push({pubkey:new ut(F),isSigner:!1,isWritable:!1})});const a=[];i.forEach(F=>{const B=F.pubkey.toString(),W=a.findIndex(K=>K.pubkey.toString()===B);W>-1?(a[W].isWritable=a[W].isWritable||F.isWritable,a[W].isSigner=a[W].isSigner||F.isSigner):a.push(F)}),a.sort(function(F,B){if(F.isSigner!==B.isSigner)return F.isSigner?-1:1;if(F.isWritable!==B.isWritable)return F.isWritable?-1:1;const W={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return F.pubkey.toBase58().localeCompare(B.pubkey.toBase58(),"en",W)});const f=a.findIndex(F=>F.pubkey.equals(r));if(f>-1){const[F]=a.splice(f,1);F.isSigner=!0,F.isWritable=!0,a.unshift(F)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const F of this.signatures){const B=a.findIndex(W=>W.pubkey.equals(F.publicKey));if(B>-1)a[B].isSigner||(a[B].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${F.publicKey.toString()}`)}let d=0,I=0,b=0;const N=[],L=[];a.forEach(({pubkey:F,isSigner:B,isWritable:W})=>{B?(N.push(F.toString()),d+=1,W||(I+=1)):(L.push(F.toString()),W||(b+=1))});const P=N.concat(L),H=e.map(F=>{const{data:B,programId:W}=F;return{programIdIndex:P.indexOf(W.toString()),accounts:F.keys.map(K=>P.indexOf(K.pubkey.toString())),data:Ae.encode(B)}});return H.forEach(F=>{Ut(F.programIdIndex>=0),F.accounts.forEach(B=>Ut(B>=0))}),new je({header:{numRequiredSignatures:d,numReadonlySignedAccounts:I,numReadonlyUnsignedAccounts:b},accountKeys:P,recentBlockhash:t,instructions:H})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((o,i)=>e[i].equals(o.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const o=r.toString();return e.has(o)?!1:(e.add(o),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const o=this._compile();this._partialSign(o,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}const o=this._compile();this._partialSign(o,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(o=>{const i=ts(r,o.secretKey);this._addSignature(o.publicKey,Ot(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Ut(e.length===64);const r=this.signatures.findIndex(o=>t.equals(o.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=wt.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:o,publicKey:i}of this.signatures)o===null?e&&(r.missing||(r.missing=[])).push(i):Kl(o,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),o=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(o,e);if(i){let a="Signature verification failed.";throw i.invalid&&(a+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(f=>f.toBase58()).join("`, `")}\`].`),i.missing&&(a+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(f=>f.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(o)}_serialize(t){const{signatures:e}=this,r=[];ze(r,e.length);const o=r.length+e.length*64+t.length,i=wt.alloc(o);return Ut(e.length<256),wt.from(r).copy(i,0),e.forEach(({signature:a},f)=>{a!==null&&(Ut(a.length===64,"signature has invalid length"),wt.from(a).copy(i,r.length+f*64))}),t.copy(i,r.length+e.length*64),Ut(i.length<=Rr,`Transaction too large: ${i.length} > ${Rr}`),i}get keys(){return Ut(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Ut(this.instructions.length===1),this.instructions[0].programId}get data(){return Ut(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Pe(e);let o=[];for(let i=0;i<r;i++){const a=Ue(e,0,gn);o.push(Ae.encode(wt.from(a)))}return Dt.populate(je.from(e),o)}static populate(t,e=[]){const r=new Dt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((o,i)=>{const a={signature:o==Ae.encode(Jl)?null:Ae.decode(o),publicKey:t.accountKeys[i]};r.signatures.push(a)}),t.instructions.forEach(o=>{const i=o.accounts.map(a=>{const f=t.accountKeys[a];return{pubkey:f,isSigner:r.signatures.some(d=>d.publicKey.toString()===f.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});r.instructions.push(new Yt({keys:i,programId:t.accountKeys[o.programIdIndex],data:Ae.decode(o.data)}))}),r._message=t,r._json=r.toJSON(),r}}class os{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:o,recentBlockhash:i}=t,{numRequiredSignatures:a,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:d}=r,I=a-f;Ut(I>0,"Message header is invalid");const b=t.staticAccountKeys.length-a-d;Ut(b>=0,"Message header is invalid");const N=t.getAccountKeys(e),L=N.get(0);if(L===void 0)throw new Error("Failed to decompile message because no account keys were found");const P=[];for(const H of o){const F=[];for(const W of H.accountKeyIndexes){const K=N.get(W);if(K===void 0)throw new Error(`Failed to find key for account key index ${W}`);const U=W<a;let tt;U?tt=W<I:W<N.staticAccountKeys.length?tt=W-a<b:tt=W-N.staticAccountKeys.length<N.accountKeysFromLookups.writable.length,F.push({pubkey:K,isSigner:W<r.numRequiredSignatures,isWritable:tt})}const B=N.get(H.programIdIndex);if(B===void 0)throw new Error(`Failed to find program id for program id index ${H.programIdIndex}`);P.push(new Yt({programId:B,data:Ot(H.data),keys:F}))}return new os({payerKey:L,instructions:P,recentBlockhash:i})}compileToLegacyMessage(){return je.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Mr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class ss{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Ut(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let o=0;o<t.header.numRequiredSignatures;o++)r.push(new Uint8Array(gn));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();ze(e,this.signatures.length);const r=D.struct([D.blob(e.length,"encodedSignaturesLength"),D.seq(Gl(),this.signatures.length,"signatures"),D.blob(t.length,"serializedMessage")]),o=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},o);return o.slice(0,i)}static deserialize(t){let e=[...t];const r=[],o=Pe(e);for(let a=0;a<o;a++)r.push(new Uint8Array(Ue(e,0,gn)));const i=is.deserialize(new Uint8Array(e));return new ss(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const o of t){const i=r.findIndex(a=>a.equals(o.publicKey));Ut(i>=0,`Cannot sign with non signer key ${o.publicKey.toBase58()}`),this.signatures[i]=ts(e,o.secretKey)}}addSignature(t,e){Ut(e.byteLength===64,"Signature must be 64 bytes long");const o=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Ut(o>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[o]=e}}const Ql=160,tf=64,ef=Ql/tf,gc=1e3/ef,Xe=new ut("SysvarC1ock11111111111111111111111111111111"),rf=new ut("SysvarEpochSchedu1e111111111111111111111111"),nf=new ut("Sysvar1nstructions1111111111111111111111111"),Hn=new ut("SysvarRecentB1ockHashes11111111111111111111"),en=new ut("SysvarRent111111111111111111111111111111111"),of=new ut("SysvarRewards111111111111111111111111111111"),sf=new ut("SysvarS1otHashes111111111111111111111111111"),af=new ut("SysvarS1otHistory11111111111111111111111111"),zn=new ut("SysvarStakeHistory1111111111111111111111111");class wn extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:o}){const i=o?`Logs: 
${JSON.stringify(o.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let f;switch(t){case"send":f=`Transaction ${e} resulted in an error. 
${r}. `+i+a;break;case"simulate":f=`Simulation failed. 
Message: ${r}. 
`+i+a;break;default:f=`Unknown action '${(d=>d)(t)}'`}super(f),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=o||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(o=>{if(o&&o.meta&&o.meta.logMessages){const i=o.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const cf={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class mt extends Error{constructor({code:t,message:e,data:r},o){super(o!=null?`${o}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function ko(n,t,e,r){const o=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(t,e,o);let a;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)a=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:f}=t.nonceInfo,d=f.keys[0].pubkey;a=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await n.confirmTransaction(i,r&&r.commitment)).value;if(a.err)throw i!=null?new wn({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(a)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(a)})`);return i}function kr(n){return new Promise(t=>setTimeout(t,n))}function Pt(n,t){const e=n.layout.span>=0?n.layout.span:pc(n,t),r=wt.alloc(e),o=Object.assign({instruction:n.index},t);return n.layout.encode(o,r),r}function zt(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const mc=D.nu64("lamportsPerSignature"),wc=D.struct([D.u32("version"),D.u32("state"),Ct("authorizedPubkey"),Ct("nonce"),D.struct([mc],"feeCalculator")]),vo=wc.span;class fi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=wc.decode(Ot(t),0);return new fi({authorizedPubkey:new ut(e.authorizedPubkey),nonce:new ut(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function rn(n){const t=D.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),o=t,i=Hh();return o.decode=(a,f)=>{const d=e(a,f);return i.decode(d)},o.encode=(a,f,d)=>{const I=i.encode(a);return r(I,f,d)},o}class uf{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=D.u32("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(Jt))if(a.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a SystemInstruction");return o}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:o}=zt(Jt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new ut(o)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=zt(Jt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:o}=zt(Jt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new ut(o)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=zt(Jt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:o,programId:i}=zt(Jt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ut(e),seed:r,space:o,programId:new ut(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=zt(Jt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new ut(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:o}=zt(Jt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ut(e),seed:r,programId:new ut(o)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:o,space:i,programId:a}=zt(Jt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new ut(e),seed:r,lamports:o,space:i,programId:new ut(a)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=zt(Jt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new ut(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),zt(Jt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=zt(Jt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=zt(Jt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new ut(e)}}static checkProgramId(t){if(!t.equals(_e.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Jt=Object.freeze({Create:{index:0,layout:D.struct([D.u32("instruction"),D.ns64("lamports"),D.ns64("space"),Ct("programId")])},Assign:{index:1,layout:D.struct([D.u32("instruction"),Ct("programId")])},Transfer:{index:2,layout:D.struct([D.u32("instruction"),rn("lamports")])},CreateWithSeed:{index:3,layout:D.struct([D.u32("instruction"),Ct("base"),Tr("seed"),D.ns64("lamports"),D.ns64("space"),Ct("programId")])},AdvanceNonceAccount:{index:4,layout:D.struct([D.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:D.struct([D.u32("instruction"),Ct("authorized")])},AuthorizeNonceAccount:{index:7,layout:D.struct([D.u32("instruction"),Ct("authorized")])},Allocate:{index:8,layout:D.struct([D.u32("instruction"),D.ns64("space")])},AllocateWithSeed:{index:9,layout:D.struct([D.u32("instruction"),Ct("base"),Tr("seed"),D.ns64("space"),Ct("programId")])},AssignWithSeed:{index:10,layout:D.struct([D.u32("instruction"),Ct("base"),Tr("seed"),Ct("programId")])},TransferWithSeed:{index:11,layout:D.struct([D.u32("instruction"),rn("lamports"),Tr("seed"),Ct("programId")])},UpgradeNonceAccount:{index:12,layout:D.struct([D.u32("instruction")])}});class _e{constructor(){}static createAccount(t){const e=Jt.Create,r=Pt(e,{lamports:t.lamports,space:t.space,programId:Ot(t.programId.toBuffer())});return new Yt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const o=Jt.TransferWithSeed;e=Pt(o,{lamports:BigInt(t.lamports),seed:t.seed,programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const o=Jt.Transfer;e=Pt(o,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Yt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const o=Jt.AssignWithSeed;e=Pt(o,{base:Ot(t.basePubkey.toBuffer()),seed:t.seed,programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=Jt.Assign;e=Pt(o,{programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Yt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Jt.CreateWithSeed,r=Pt(e,{base:Ot(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Ot(t.programId.toBuffer())});let o=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||o.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Yt({keys:o,programId:this.programId,data:r})}static createNonceAccount(t){const e=new Dt;"basePubkey"in t&&"seed"in t?e.add(_e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:vo,programId:this.programId})):e.add(_e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:vo,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Jt.InitializeNonceAccount,r=Pt(e,{authorized:Ot(t.authorizedPubkey.toBuffer())}),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Hn,isSigner:!1,isWritable:!1},{pubkey:en,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Yt(o)}static nonceAdvance(t){const e=Jt.AdvanceNonceAccount,r=Pt(e),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Hn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Yt(o)}static nonceWithdraw(t){const e=Jt.WithdrawNonceAccount,r=Pt(e,{lamports:t.lamports});return new Yt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Hn,isSigner:!1,isWritable:!1},{pubkey:en,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Jt.AuthorizeNonceAccount,r=Pt(e,{authorized:Ot(t.newAuthorizedPubkey.toBuffer())});return new Yt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const o=Jt.AllocateWithSeed;e=Pt(o,{base:Ot(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Ot(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const o=Jt.Allocate;e=Pt(o,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Yt({keys:r,programId:this.programId,data:e})}}_e.programId=new ut("11111111111111111111111111111111");const hf=Rr-300;class Lr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Lr.chunkSize)+1+1)}static async load(t,e,r,o,i){{const N=await t.getMinimumBalanceForRentExemption(i.length),L=await t.getAccountInfo(r.publicKey,"confirmed");let P=null;if(L!==null){if(L.executable)return console.error("Program load failed, account is already executable"),!1;L.data.length!==i.length&&(P=P||new Dt,P.add(_e.allocate({accountPubkey:r.publicKey,space:i.length}))),L.owner.equals(o)||(P=P||new Dt,P.add(_e.assign({accountPubkey:r.publicKey,programId:o}))),L.lamports<N&&(P=P||new Dt,P.add(_e.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:N-L.lamports})))}else P=new Dt().add(_e.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:N>0?N:1,space:i.length,programId:o}));P!==null&&await ko(t,P,[e,r],{commitment:"confirmed"})}const a=D.struct([D.u32("instruction"),D.u32("offset"),D.u32("bytesLength"),D.u32("bytesLengthPadding"),D.seq(D.u8("byte"),D.offset(D.u32(),-8),"bytes")]),f=Lr.chunkSize;let d=0,I=i,b=[];for(;I.length>0;){const N=I.slice(0,f),L=wt.alloc(f+16);a.encode({instruction:0,offset:d,bytes:N,bytesLength:0,bytesLengthPadding:0},L);const P=new Dt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:L});b.push(ko(t,P,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await kr(1e3/4),d+=f,I=I.slice(f)}await Promise.all(b);{const N=D.struct([D.u32("instruction")]),L=wt.alloc(N.span);N.encode({instruction:1},L);const P=new Dt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:en,isSigner:!1,isWritable:!1}],programId:o,data:L}),H="processed",F=await t.sendTransaction(P,[e,r],{preflightCommitment:H}),{context:B,value:W}=await t.confirmTransaction({signature:F,lastValidBlockHeight:P.lastValidBlockHeight,blockhash:P.recentBlockhash},H);if(W.err)throw new Error(`Transaction ${F} failed (${JSON.stringify(W)})`);for(;;){try{if(await t.getSlot({commitment:H})>B.slot)break}catch{}await new Promise(K=>setTimeout(K,Math.round(gc/2)))}}return!0}}Lr.chunkSize=hf;const lf=new ut("BPFLoader2111111111111111111111111111111111");class ff{static getMinNumSignatures(t){return Lr.getMinNumSignatures(t)}static load(t,e,r,o,i){return Lr.load(t,e,r,i,o)}}function df(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var so,na;function pf(){if(na)return so;na=1;var n=Object.prototype.toString,t=Object.keys||function(r){var o=[];for(var i in r)o.push(i);return o};function e(r,o){var i,a,f,d,I,b,N;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),o);if(N=n.call(r),N==="[object Array]"){for(f="[",a=r.length-1,i=0;i<a;i++)f+=e(r[i],!0)+",";return a>-1&&(f+=e(r[i],!0)),f+"]"}else if(N==="[object Object]"){for(d=t(r).sort(),a=d.length,f="",i=0;i<a;)I=d[i],b=e(r[I],!1),b!==void 0&&(f&&(f+=","),f+=JSON.stringify(I)+":"+b),i++;return"{"+f+"}"}else return JSON.stringify(r);case"function":case"undefined":return o?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return so=function(r){var o=e(r,!1);if(o!==void 0)return""+o},so}var yf=pf(),ia=df(yf);const hn=32;function ao(n){let t=0;for(;n>1;)n/=2,t++;return t}function gf(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class bc{constructor(t,e,r,o,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=o,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=ao(gf(t+hn+1))-ao(hn)-1,r=this.getSlotsInEpoch(e),o=t-(r-hn);return[e,o]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),o=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[o,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*hn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+ao(hn)):this.slotsPerEpoch}}var mf=globalThis.fetch;class wf extends Rl{constructor(t,e,r){const o=i=>{const a=El(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(o,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function bf(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const oa=56;class To{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=bf(Ef,t),r=t.length-oa;Ut(r>=0,"lookup table is invalid"),Ut(r%32===0,"lookup table is invalid");const o=r/32,{addresses:i}=D.struct([D.seq(Ct(),o,"addresses")]).decode(t.slice(oa));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ut(e.authority[0]):void 0,addresses:i.map(a=>new ut(a))}}}const Ef={index:1,layout:D.struct([D.u32("typeIndex"),rn("deactivationSlot"),D.nu64("lastExtendedSlot"),D.u8("lastExtendedStartIndex"),D.u8(),D.seq(Ct(),D.offset(D.u8(),-1),"authority")])},_f=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Rf(n){const t=n.match(_f);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,o,i]=t,a=n.startsWith("https:")?"wss:":"ws:",f=o==null?null:parseInt(o.slice(1),10),d=f==null?"":`:${f+1}`;return`${a}//${r}${d}${i}`}const ae=An(Xo(ut),lt(),n=>new ut(n)),Ec=Jo([lt(),se("base64")]),as=An(Xo(wt),Ec,n=>wt.from(n[0],"base64")),_c=30*1e3;function If(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Xt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...o}=n;t=r,e=o}return{commitment:t,config:e}}function sa(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Rc(n){return Me([ct({jsonrpc:se("2.0"),id:lt(),result:n}),ct({jsonrpc:se("2.0"),id:lt(),error:ct({code:on(),message:lt(),data:bt(Vh())})})])}const Af=Rc(on());function Bt(n){return An(Rc(n),Af,t=>"error"in t?t:{...t,result:ft(t.result,n)})}function fe(n){return Bt(ct({context:ct({slot:X()}),value:n}))}function di(n){return ct({context:ct({slot:X()}),value:n})}function co(n,t){return n===0?new Mr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ut(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ae.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new je(t)}const Sf=ct({foundation:X(),foundationTerm:X(),initial:X(),taper:X(),terminal:X()}),xf=Bt(dt(pt(ct({epoch:X(),effectiveSlot:X(),amount:X(),postBalance:X(),commission:bt(pt(X()))})))),kf=dt(ct({slot:X(),prioritizationFee:X()})),vf=ct({total:X(),validator:X(),foundation:X(),epoch:X()}),Tf=ct({epoch:X(),slotIndex:X(),slotsInEpoch:X(),absoluteSlot:X(),blockHeight:bt(X()),transactionCount:bt(X())}),Bf=ct({slotsPerEpoch:X(),leaderScheduleSlotOffset:X(),warmup:nr(),firstNormalEpoch:X(),firstNormalSlot:X()}),Of=Ja(lt(),dt(X())),Ur=pt(Me([ct({}),lt()])),Nf=ct({err:Ur}),Cf=se("receivedSignature"),Mf=ct({"solana-core":lt(),"feature-set":bt(X())}),Lf=ct({program:lt(),programId:ae,parsed:on()}),Pf=ct({programId:ae,accounts:dt(ae),data:lt()}),aa=fe(ct({err:pt(Me([ct({}),lt()])),logs:pt(dt(lt())),accounts:bt(pt(dt(pt(ct({executable:nr(),owner:lt(),lamports:X(),data:dt(lt()),rentEpoch:bt(X())}))))),unitsConsumed:bt(X()),returnData:bt(pt(ct({programId:lt(),data:Jo([lt(),se("base64")])}))),innerInstructions:bt(pt(dt(ct({index:X(),instructions:dt(Me([Lf,Pf]))}))))})),Uf=fe(ct({byIdentity:Ja(lt(),dt(X())),range:ct({firstSlot:X(),lastSlot:X()})}));function Ff(n,t,e,r,o,i){const a=e||mf;let f;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return r&&(d=async(b,N)=>{const L=await new Promise((P,H)=>{try{r(b,N,(F,B)=>P([F,B]))}catch(F){H(F)}});return await a(...L)}),new gl(async(b,N)=>{const L={method:"POST",body:b,agent:f,headers:Object.assign({"Content-Type":"application/json"},t||{},Fd)};try{let P=5,H,F=500;for(;d?H=await d(n,L):H=await a(n,L),!(H.status!==429||o===!0||(P-=1,P===0));)console.error(`Server responded with ${H.status} ${H.statusText}.  Retrying after ${F}ms delay...`),await kr(F),F*=2;const B=await H.text();H.ok?N(null,B):N(new Error(`${H.status} ${H.statusText}: ${B}`))}catch(P){P instanceof Error&&N(P)}},{})}function Df(n){return(t,e)=>new Promise((r,o)=>{n.request(t,e,(i,a)=>{if(i){o(i);return}r(a)})})}function Hf(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const o=t.map(i=>n.request(i.methodName,i.args));n.request(o,(i,a)=>{if(i){r(i);return}e(a)})})}const zf=Bt(Sf),Kf=Bt(vf),qf=Bt(kf),Wf=Bt(Tf),$f=Bt(Bf),Vf=Bt(Of),Gf=Bt(X()),jf=fe(ct({total:X(),circulating:X(),nonCirculating:X(),nonCirculatingAccounts:dt(ae)})),Bo=ct({amount:lt(),uiAmount:pt(X()),decimals:X(),uiAmountString:bt(lt())}),Yf=fe(dt(ct({address:ae,amount:lt(),uiAmount:pt(X()),decimals:X(),uiAmountString:bt(lt())}))),Zf=fe(dt(ct({pubkey:ae,account:ct({executable:nr(),owner:ae,lamports:X(),data:as,rentEpoch:X()})}))),Oo=ct({program:lt(),parsed:on(),space:X()}),Xf=fe(dt(ct({pubkey:ae,account:ct({executable:nr(),owner:ae,lamports:X(),data:Oo,rentEpoch:X()})}))),Jf=fe(dt(ct({lamports:X(),address:ae}))),bn=ct({executable:nr(),owner:ae,lamports:X(),data:as,rentEpoch:X()}),Qf=ct({pubkey:ae,account:bn}),td=An(Me([Xo(wt),Oo]),Me([Ec,Oo]),n=>Array.isArray(n)?ft(n,as):n),No=ct({executable:nr(),owner:ae,lamports:X(),data:td,rentEpoch:X()}),ed=ct({pubkey:ae,account:No}),rd=ct({state:Me([se("active"),se("inactive"),se("activating"),se("deactivating")]),active:X(),inactive:X()}),nd=Bt(dt(ct({signature:lt(),slot:X(),err:Ur,memo:pt(lt()),blockTime:bt(pt(X()))}))),id=Bt(dt(ct({signature:lt(),slot:X(),err:Ur,memo:pt(lt()),blockTime:bt(pt(X()))}))),od=ct({subscription:X(),result:di(bn)}),sd=ct({pubkey:ae,account:bn}),ad=ct({subscription:X(),result:di(sd)}),cd=ct({parent:X(),slot:X(),root:X()}),ud=ct({subscription:X(),result:cd}),hd=Me([ct({type:Me([se("firstShredReceived"),se("completed"),se("optimisticConfirmation"),se("root")]),slot:X(),timestamp:X()}),ct({type:se("createdBank"),parent:X(),slot:X(),timestamp:X()}),ct({type:se("frozen"),slot:X(),timestamp:X(),stats:ct({numTransactionEntries:X(),numSuccessfulTransactions:X(),numFailedTransactions:X(),maxTransactionsPerEntry:X()})}),ct({type:se("dead"),slot:X(),timestamp:X(),err:lt()})]),ld=ct({subscription:X(),result:hd}),fd=ct({subscription:X(),result:di(Me([Nf,Cf]))}),dd=ct({subscription:X(),result:X()}),pd=ct({pubkey:lt(),gossip:pt(lt()),tpu:pt(lt()),rpc:pt(lt()),version:pt(lt())}),ca=ct({votePubkey:lt(),nodePubkey:lt(),activatedStake:X(),epochVoteAccount:nr(),epochCredits:dt(Jo([X(),X(),X()])),commission:X(),lastVote:X(),rootSlot:pt(X())}),yd=Bt(ct({current:dt(ca),delinquent:dt(ca)})),gd=Me([se("processed"),se("confirmed"),se("finalized")]),md=ct({slot:X(),confirmations:pt(X()),err:Ur,confirmationStatus:bt(gd)}),wd=fe(dt(pt(md))),bd=Bt(X()),Ic=ct({accountKey:ae,writableIndexes:dt(X()),readonlyIndexes:dt(X())}),cs=ct({signatures:dt(lt()),message:ct({accountKeys:dt(lt()),header:ct({numRequiredSignatures:X(),numReadonlySignedAccounts:X(),numReadonlyUnsignedAccounts:X()}),instructions:dt(ct({accounts:dt(X()),data:lt(),programIdIndex:X()})),recentBlockhash:lt(),addressTableLookups:bt(dt(Ic))})}),Ac=ct({pubkey:ae,signer:nr(),writable:nr(),source:bt(Me([se("transaction"),se("lookupTable")]))}),Sc=ct({accountKeys:dt(Ac),signatures:dt(lt())}),xc=ct({parsed:on(),program:lt(),programId:ae}),kc=ct({accounts:dt(ae),data:lt(),programId:ae}),Ed=Me([kc,xc]),_d=Me([ct({parsed:on(),program:lt(),programId:lt()}),ct({accounts:dt(lt()),data:lt(),programId:lt()})]),vc=An(Ed,_d,n=>"accounts"in n?ft(n,kc):ft(n,xc)),Tc=ct({signatures:dt(lt()),message:ct({accountKeys:dt(Ac),instructions:dt(vc),recentBlockhash:lt(),addressTableLookups:bt(pt(dt(Ic)))})}),Qn=ct({accountIndex:X(),mint:lt(),owner:bt(lt()),programId:bt(lt()),uiTokenAmount:Bo}),Bc=ct({writable:dt(ae),readonly:dt(ae)}),pi=ct({err:Ur,fee:X(),innerInstructions:bt(pt(dt(ct({index:X(),instructions:dt(ct({accounts:dt(X()),data:lt(),programIdIndex:X()}))})))),preBalances:dt(X()),postBalances:dt(X()),logMessages:bt(pt(dt(lt()))),preTokenBalances:bt(pt(dt(Qn))),postTokenBalances:bt(pt(dt(Qn))),loadedAddresses:bt(Bc),computeUnitsConsumed:bt(X())}),us=ct({err:Ur,fee:X(),innerInstructions:bt(pt(dt(ct({index:X(),instructions:dt(vc)})))),preBalances:dt(X()),postBalances:dt(X()),logMessages:bt(pt(dt(lt()))),preTokenBalances:bt(pt(dt(Qn))),postTokenBalances:bt(pt(dt(Qn))),loadedAddresses:bt(Bc),computeUnitsConsumed:bt(X())}),sn=Me([se(0),se("legacy")]),Fr=ct({pubkey:lt(),lamports:X(),postBalance:pt(X()),rewardType:pt(lt()),commission:bt(pt(X()))}),Rd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:cs,meta:pt(pi),version:bt(sn)})),rewards:bt(dt(Fr)),blockTime:pt(X()),blockHeight:pt(X())}))),Id=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),rewards:bt(dt(Fr)),blockTime:pt(X()),blockHeight:pt(X())}))),Ad=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:Sc,meta:pt(pi),version:bt(sn)})),rewards:bt(dt(Fr)),blockTime:pt(X()),blockHeight:pt(X())}))),Sd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:Tc,meta:pt(us),version:bt(sn)})),rewards:bt(dt(Fr)),blockTime:pt(X()),blockHeight:pt(X())}))),xd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:Sc,meta:pt(us),version:bt(sn)})),rewards:bt(dt(Fr)),blockTime:pt(X()),blockHeight:pt(X())}))),kd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),rewards:bt(dt(Fr)),blockTime:pt(X()),blockHeight:pt(X())}))),vd=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),transactions:dt(ct({transaction:cs,meta:pt(pi)})),rewards:bt(dt(Fr)),blockTime:pt(X())}))),ua=Bt(pt(ct({blockhash:lt(),previousBlockhash:lt(),parentSlot:X(),signatures:dt(lt()),blockTime:pt(X())}))),uo=Bt(pt(ct({slot:X(),meta:pt(pi),blockTime:bt(pt(X())),transaction:cs,version:bt(sn)}))),Ln=Bt(pt(ct({slot:X(),transaction:Tc,meta:pt(us),blockTime:bt(pt(X())),version:bt(sn)}))),Td=fe(ct({blockhash:lt(),lastValidBlockHeight:X()})),Bd=fe(nr()),Od=ct({slot:X(),numTransactions:X(),numSlots:X(),samplePeriodSecs:X()}),Nd=Bt(dt(Od)),Cd=fe(pt(ct({feeCalculator:ct({lamportsPerSignature:X()})}))),Md=Bt(lt()),Ld=Bt(lt()),Pd=ct({err:Ur,logs:dt(lt()),signature:lt()}),Ud=ct({result:di(Pd),subscription:X()}),Fd={"solana-client":"js/1.0.0-maintenance"};class Oc{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const I={};return async b=>{const{commitment:N,config:L}=Xt(b),P=this._buildArgs([],N,void 0,L),H=ia(P);return I[H]=I[H]??(async()=>{try{const F=await this._rpcRequest("getBlockHeight",P),B=ft(F,Bt(X()));if("error"in B)throw new mt(B.error,"failed to get block height information");return B.result}finally{delete I[H]}})(),await I[H]}})();let r,o,i,a,f,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,o=e.httpHeaders,i=e.fetch,a=e.fetchMiddleware,f=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=If(t),this._rpcWsEndpoint=r||Rf(t),this._rpcClient=Ff(t,o,i,a,f,d),this._rpcRequest=Df(this._rpcClient),this._rpcBatchRequest=Hf(this._rpcClient),this._rpcWebSocket=new wf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t.toBase58()],r,void 0,o),a=await this._rpcRequest("getBalance",i),f=ft(a,fe(X()));if("error"in f)throw new mt(f.error,`failed to get balance for ${t.toBase58()}`);return f.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=ft(e,Bt(pt(X())));if("error"in r)throw new mt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=ft(t,Bt(X()));if("error"in e)throw new mt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=ft(t,Gf);if("error"in e)throw new mt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),o=ft(r,jf);if("error"in o)throw new mt(o.error,"failed to get supply");return o.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenSupply",r),i=ft(o,fe(Bo));if("error"in i)throw new mt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenAccountBalance",r),i=ft(o,fe(Bo));if("error"in i)throw new mt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:o,config:i}=Xt(r);let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const f=this._buildArgs(a,o,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",f),I=ft(d,Zf);if("error"in I)throw new mt(I.error,`failed to get token accounts owned by account ${t.toBase58()}`);return I.result}async getParsedTokenAccountsByOwner(t,e,r){let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const i=this._buildArgs(o,r,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",i),f=ft(a,Xf);if("error"in f)throw new mt(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],o=await this._rpcRequest("getLargestAccounts",r),i=ft(o,Jf);if("error"in i)throw new mt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenLargestAccounts",r),i=ft(o,Yf);if("error"in i)throw new mt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t.toBase58()],r,"base64",o),a=await this._rpcRequest("getAccountInfo",i),f=ft(a,fe(pt(bn)));if("error"in f)throw new mt(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getParsedAccountInfo(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),a=await this._rpcRequest("getAccountInfo",i),f=ft(a,fe(pt(No)));if("error"in f)throw new mt(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:o}=Xt(e),i=t.map(I=>I.toBase58()),a=this._buildArgs([i],r,"jsonParsed",o),f=await this._rpcRequest("getMultipleAccounts",a),d=ft(f,fe(dt(pt(No))));if("error"in d)throw new mt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:o}=Xt(e),i=t.map(I=>I.toBase58()),a=this._buildArgs([i],r,"base64",o),f=await this._rpcRequest("getMultipleAccounts",a),d=ft(f,fe(dt(pt(bn))));if("error"in d)throw new mt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:o,config:i}=Xt(e),a=this._buildArgs([t.toBase58()],o,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),f=await this._rpcRequest("getStakeActivation",a),d=ft(f,Bt(rd));if("error"in d)throw new mt(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:r,config:o}=Xt(e),{encoding:i,...a}=o||{},f=this._buildArgs([t.toBase58()],r,i||"base64",{...a,...a.filters?{filters:sa(a.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",f),I=dt(Qf),b=a.withContext===!0?ft(d,fe(I)):ft(d,Bt(I));if("error"in b)throw new mt(b.error,`failed to get accounts owned by program ${t.toBase58()}`);return b.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),a=await this._rpcRequest("getProgramAccounts",i),f=ft(a,Bt(dt(ed)));if("error"in f)throw new mt(f.error,`failed to get accounts owned by program ${t.toBase58()}`);return f.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const a=t;if((i=a.abortSignal)!=null&&i.aborted)return Promise.reject(a.abortSignal.reason);r=a.signature}let o;try{o=Ae.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Ut(o.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,o,i=!1;const a=new Promise((d,I)=>{try{r=this.onSignature(e,(N,L)=>{r=void 0;const P={context:L,value:N};d({__type:cr.PROCESSED,response:P})},t);const b=new Promise(N=>{r==null?N():o=this._onSubscriptionStateChange(r,L=>{L==="subscribed"&&N()})});(async()=>{if(await b,i)return;const N=await this.getSignatureStatus(e);if(i||N==null)return;const{context:L,value:P}=N;if(P!=null)if(P!=null&&P.err)I(P.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(P.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(P.confirmationStatus==="processed"||P.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:cr.PROCESSED,response:{context:L,value:P}})}})()}catch(b){I(b)}});return{abortConfirmation:()=>{o&&(o(),o=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:o}}){let i=!1;const a=new Promise(N=>{const L=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let P=await L();if(!i){for(;P<=r;)if(await kr(1e3),i||(P=await L(),i))return;N({__type:cr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:f,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),I=this.getCancellationPromise(e);let b;try{const N=await Promise.race([I,d,a]);if(N.__type===cr.PROCESSED)b=N.response;else throw new rs(o)}finally{i=!0,f()}return b}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:o,nonceValue:i,signature:a}}){let f=!1;const d=new Promise(P=>{let H=i,F=null;const B=async()=>{try{const{context:W,value:K}=await this.getNonceAndContext(o,{commitment:t,minContextSlot:r});return F=W.slot,K==null?void 0:K.nonce}catch{return H}};(async()=>{if(H=await B(),!f)for(;;){if(i!==H){P({__type:cr.NONCE_INVALID,slotInWhichNonceDidAdvance:F});return}if(await kr(2e3),f||(H=await B(),f))return}})()}),{abortConfirmation:I,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),N=this.getCancellationPromise(e);let L;try{const P=await Promise.race([N,b,d]);if(P.__type===cr.PROCESSED)L=P.response;else{let H;for(;;){const F=await this.getSignatureStatus(a);if(F==null)break;if(F.context.slot<(P.slotInWhichNonceDidAdvance??r)){await kr(400);continue}H=F;break}if(H!=null&&H.value){const F=t||"finalized",{confirmationStatus:B}=H.value;switch(F){case"processed":case"recent":if(B!=="processed"&&B!=="confirmed"&&B!=="finalized")throw new Wr(a);break;case"confirmed":case"single":case"singleGossip":if(B!=="confirmed"&&B!=="finalized")throw new Wr(a);break;case"finalized":case"max":case"root":if(B!=="finalized")throw new Wr(a);break;default:}L={context:H.context,value:{err:H.value.err}}}else throw new Wr(a)}}finally{f=!0,I()}return L}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const o=new Promise(d=>{let I=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{I=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>d({__type:cr.TIMED_OUT,timeoutMs:I}),I)}),{abortConfirmation:i,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let f;try{const d=await Promise.race([a,o]);if(d.__type===cr.PROCESSED)f=d.response;else throw new ns(e,d.timeoutMs/1e3)}finally{clearTimeout(r),i()}return f}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=ft(t,Bt(dt(pd)));if("error"in e)throw new mt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),o=ft(r,yd);if("error"in o)throw new mt(o.error,"failed to get vote accounts");return o.result}async getSlot(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",o),a=ft(i,Bt(X()));if("error"in a)throw new mt(a.error,"failed to get slot");return a.result}async getSlotLeader(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",o),a=ft(i,Bt(lt()));if("error"in a)throw new mt(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){const r=[t,e],o=await this._rpcRequest("getSlotLeaders",r),i=ft(o,Bt(dt(ae)));if("error"in i)throw new mt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:o}=await this.getSignatureStatuses([t],e);Ut(o.length===1);const i=o[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const o=await this._rpcRequest("getSignatureStatuses",r),i=ft(o,wd);if("error"in i)throw new mt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",o),a=ft(i,Bt(X()));if("error"in a)throw new mt(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),o=ft(r,zf);if("error"in o)throw new mt(o.error,"failed to get inflation");return o.result}async getInflationReward(t,e,r){const{commitment:o,config:i}=Xt(r),a=this._buildArgs([t.map(I=>I.toBase58())],o,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),f=await this._rpcRequest("getInflationReward",a),d=ft(f,xf);if("error"in d)throw new mt(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=ft(t,Kf);if("error"in e)throw new mt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",o),a=ft(i,Wf);if("error"in a)throw new mt(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=ft(t,$f);if("error"in e)throw new mt(e.error,"failed to get epoch schedule");const r=e.result;return new bc(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=ft(t,Vf);if("error"in e)throw new mt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=ft(o,bd);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=ft(e,Nd);if("error"in r)throw new mt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=ft(o,Cd);if("error"in i)throw new mt(i.error,"failed to get fee calculator");const{context:a,value:f}=i.result;return{context:a,value:f!==null?f.feeCalculator:null}}async getFeeForMessage(t,e){const r=Ot(t.serialize()).toString("base64"),o=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",o),a=ft(i,fe(pt(X())));if("error"in a)throw new mt(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(t){var a;const e=(a=t==null?void 0:t.lockedWritableAccounts)==null?void 0:a.map(f=>f.toBase58()),r=e!=null&&e.length?[e]:[],o=await this._rpcRequest("getRecentPrioritizationFees",r),i=ft(o,qf);if("error"in i)throw new mt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",o),a=ft(i,Td);if("error"in a)throw new mt(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgs([t],r,void 0,o),a=await this._rpcRequest("isBlockhashValid",i),f=ft(a,Bd);if("error"in f)throw new mt(f.error,"failed to determine if the blockhash `"+t+"`is valid");return f.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=ft(t,Bt(Mf));if("error"in e)throw new mt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=ft(t,Bt(lt()));if("error"in e)throw new mt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),a=await this._rpcRequest("getBlock",i);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const f=ft(a,Ad);if("error"in f)throw f.error;return f.result}case"none":{const f=ft(a,Id);if("error"in f)throw f.error;return f.result}default:{const f=ft(a,Rd);if("error"in f)throw f.error;const{result:d}=f;return d?{...d,transactions:d.transactions.map(({transaction:I,meta:b,version:N})=>({meta:b,transaction:{...I,message:co(N,I.message)},version:N}))}:null}}}catch(f){throw new mt(f,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),a=await this._rpcRequest("getBlock",i);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const f=ft(a,xd);if("error"in f)throw f.error;return f.result}case"none":{const f=ft(a,kd);if("error"in f)throw f.error;return f.result}default:{const f=ft(a,Sd);if("error"in f)throw f.error;return f.result}}}catch(f){throw new mt(f,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:f,...d}=t;r=f,e=d}const o=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",o),a=ft(i,Uf);if("error"in a)throw new mt(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),a=await this._rpcRequest("getTransaction",i),f=ft(a,uo);if("error"in f)throw new mt(f.error,"failed to get transaction");const d=f.result;return d&&{...d,transaction:{...d.transaction,message:co(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:o}=Xt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),a=await this._rpcRequest("getTransaction",i),f=ft(a,Ln);if("error"in f)throw new mt(f.error,"failed to get transaction");return f.result}async getParsedTransactions(t,e){const{commitment:r,config:o}=Xt(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",o)}));return(await this._rpcBatchRequest(i)).map(d=>{const I=ft(d,Ln);if("error"in I)throw new mt(I.error,"failed to get transactions");return I.result})}async getTransactions(t,e){const{commitment:r,config:o}=Xt(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,void 0,o)}));return(await this._rpcBatchRequest(i)).map(d=>{const I=ft(d,uo);if("error"in I)throw new mt(I.error,"failed to get transactions");const b=I.result;return b&&{...b,transaction:{...b.transaction,message:co(b.version,b.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getBlock",r),i=ft(o,vd);if("error"in i)throw new mt(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");const f={...a,transactions:a.transactions.map(({transaction:d,meta:I})=>{const b=new je(d.message);return{meta:I,transaction:{...d,message:b}}})};return{...f,transactions:f.transactions.map(({transaction:d,meta:I})=>({meta:I,transaction:Dt.populate(d.message,d.signatures)}))}}async getBlocks(t,e,r){const o=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",o),a=ft(i,Bt(dt(X())));if("error"in a)throw new mt(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",r),i=ft(o,ua);if("error"in i)throw new mt(i.error,"failed to get block");const a=i.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",r),i=ft(o,ua);if("error"in i)throw new mt(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getTransaction",r),i=ft(o,uo);if("error"in i)throw new mt(i.error,"failed to get transaction");const a=i.result;if(!a)return a;const f=new je(a.transaction.message),d=a.transaction.signatures;return{...a,transaction:Dt.populate(f,d)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),o=await this._rpcRequest("getTransaction",r),i=ft(o,Ln);if("error"in i)throw new mt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(a=>{const f=ft(a,Ln);if("error"in f)throw new mt(f.error,"failed to get confirmed transactions");return f.result})}async getConfirmedSignaturesForAddress(t,e,r){let o={},i=await this.getFirstAvailableBlock();for(;!("until"in o)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(o.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let a=await this.getSlot("finalized");for(;!("before"in o)&&(r++,!(r>a));)try{const d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(o.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,o)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",o),a=ft(i,nd);if("error"in a)throw new mt(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",o),a=ft(i,id);if("error"in a)throw new mt(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=new To({key:t,state:To.deserialize(o.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=fi.fromAccountData(o.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),o=ft(r,Md);if("error"in o)throw new mt(o.error,`airdrop to ${t.toBase58()} failed`);return o.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await kr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=_c;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let o=0;o<50;o++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await kr(gc/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Xt(t),o=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",o),a=ft(i,fe(X()));if("error"in a)throw new mt(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,r){if("message"in t){const F=t.serialize(),B=wt.from(F).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const W=e||{};W.encoding="base64","commitment"in W||(W.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(W.innerInstructions=e.innerInstructions);const K=[B,W],U=await this._rpcRequest("simulateTransaction",K),tt=ft(U,aa);if("error"in tt)throw new Error("failed to simulate transaction: "+tt.error.message);return tt.result}let o;if(t instanceof Dt){let H=t;o=new Dt,o.feePayer=H.feePayer,o.instructions=t.instructions,o.nonceInfo=H.nonceInfo,o.signatures=H.signatures}else o=Dt.populate(t),o._message=o._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(o.nonceInfo&&i)o.sign(...i);else{let H=this._disableBlockhashCaching;for(;;){const F=await this._blockhashWithExpiryBlockHeight(H);if(o.lastValidBlockHeight=F.lastValidBlockHeight,o.recentBlockhash=F.blockhash,!i)break;if(o.sign(...i),!o.signature)throw new Error("!signature");const B=o.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(B)&&!this._blockhashInfo.transactionSignatures.includes(B)){this._blockhashInfo.simulatedSignatures.push(B);break}else H=!0}}const a=o._compile(),f=a.serialize(),I=o._serialize(f).toString("base64"),b={encoding:"base64",commitment:this.commitment};if(r){const H=(Array.isArray(r)?r:a.nonProgramIds()).map(F=>F.toBase58());b.accounts={encoding:"base64",addresses:H}}i&&(b.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(b.innerInstructions=e.innerInstructions);const N=[I,b],L=await this._rpcRequest("simulateTransaction",N),P=ft(L,aa);if("error"in P){let H;if("data"in P.error&&(H=P.error.data.logs,H&&Array.isArray(H))){const F=`
    `,B=F+H.join(F);console.error(P.error.message,B)}throw new wn({action:"simulate",signature:"",transactionMessage:P.error.message,logs:H})}return P.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const a=t.serialize();return await this.sendRawTransaction(a,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const o=e;if(t.nonceInfo)t.sign(...o);else{let a=this._disableBlockhashCaching;for(;;){const f=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=f.lastValidBlockHeight,t.recentBlockhash=f.blockhash,t.sign(...o),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))a=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Ot(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},o=e&&e.skipPreflight,i=o===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),o&&(r.skipPreflight=o),i&&(r.preflightCommitment=i);const a=[t,r],f=await this._rpcRequest("sendTransaction",a),d=ft(f,Ld);if("error"in d){let I;throw"data"in d.error&&(I=d.error.data.logs),new wn({action:o?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:I})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var o;const r=(o=this._subscriptionsByHash[t])==null?void 0:o.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(a=>{try{a(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const o=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return o.add(e),()=>{o.delete(e),o.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const o=this._subscriptionsByHash[r];if(o!==void 0)switch(o.state){case"pending":case"unsubscribed":if(o.callbacks.size===0){delete this._subscriptionsByHash[r],o.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[o.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:a}=o;try{this._setSubscription(r,{...o,state:"subscribing"});const f=await this._rpcWebSocket.call(a,i);this._setSubscription(r,{...o,serverSubscriptionId:f,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[f]=o.callbacks,await this._updateSubscriptions()}catch(f){if(console.error(`Received ${f instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:i,error:f}),!e())return;this._setSubscription(r,{...o,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":o.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:a}=o;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...o,state:"unsubscribing"}),this._setSubscription(r,{...o,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[i])}catch(f){if(f instanceof Error&&console.error(`${a} error:`,f.message),!e())return;this._setSubscription(r,{...o,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...o,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(o=>{try{o(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=ft(t,od);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,o=ia([t.method,e]),i=this._subscriptionsByHash[o];return i===void 0?this._subscriptionsByHash[o]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=o,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const a=this._subscriptionsByHash[o];Ut(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:o,config:i}=Xt(r),a=this._buildArgs([t.toBase58()],o||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=ft(t,ad);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,o){const{commitment:i,config:a}=Xt(r),f=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",a||(o?{filters:sa(o)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},f)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const o=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},o)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=ft(t,Ud);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=ft(t,ud);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=ft(t,ld);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,o){const i=e||this._commitment;if(i||r||o){let a={};r&&(a.encoding=r),i&&(a.commitment=i),o&&(a=Object.assign(a,o)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,r,o){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,o)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=ft(t,fd);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const o=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(a,f)=>{if(a.type==="status"){e(a.result,f);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return i}onSignatureWithOptions(t,e,r){const{commitment:o,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([t],o,void 0,i),f=this._makeSubscription({callback:(d,I)=>{e(d,I);try{this.removeSignatureListener(f)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return f}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=ft(t,dd);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Vr{constructor(t){this._keypair=void 0,this._keypair=t??ta()}static generate(){return new Vr(ta())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const o=t.slice(0,32),i=Jn(o);for(let a=0;a<32;a++)if(r[a]!==i[a])throw new Error("provided secretKey is invalid")}return new Vr({publicKey:r,secretKey:t})}static fromSeed(t){const e=Jn(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Vr({publicKey:e,secretKey:r})}get publicKey(){return new ut(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const fr=Object.freeze({CreateLookupTable:{index:0,layout:D.struct([D.u32("instruction"),rn("recentSlot"),D.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:D.struct([D.u32("instruction")])},ExtendLookupTable:{index:2,layout:D.struct([D.u32("instruction"),rn(),D.seq(Ct(),D.offset(D.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:D.struct([D.u32("instruction")])},CloseLookupTable:{index:4,layout:D.struct([D.u32("instruction")])}});class Dd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=D.u32("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(fr))if(a.index==r){o=i;break}if(!o)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return o}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=zt(fr.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=zt(fr.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new ut(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(hs.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class hs{constructor(){}static createLookupTable(t){const[e,r]=ut.findProgramAddressSync([t.authority.toBuffer(),Ya().encode(t.recentSlot)],this.programId),o=fr.CreateLookupTable,i=Pt(o,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:_e.programId,isSigner:!1,isWritable:!1}];return[new Yt({programId:this.programId,keys:a,data:i}),e]}static freezeLookupTable(t){const e=fr.FreezeLookupTable,r=Pt(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Yt({programId:this.programId,keys:o,data:r})}static extendLookupTable(t){const e=fr.ExtendLookupTable,r=Pt(e,{addresses:t.addresses.map(i=>i.toBytes())}),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&o.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:_e.programId,isSigner:!1,isWritable:!1}),new Yt({programId:this.programId,keys:o,data:r})}static deactivateLookupTable(t){const e=fr.DeactivateLookupTable,r=Pt(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Yt({programId:this.programId,keys:o,data:r})}static closeLookupTable(t){const e=fr.CloseLookupTable,r=Pt(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Yt({programId:this.programId,keys:o,data:r})}}hs.programId=new ut("AddressLookupTab1e1111111111111111111111111");class Hd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=D.u8("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(tr))if(a.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return o}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=zt(tr.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=zt(tr.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=zt(tr.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=zt(tr.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(ls.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const tr=Object.freeze({RequestUnits:{index:0,layout:D.struct([D.u8("instruction"),D.u32("units"),D.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:D.struct([D.u8("instruction"),D.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:D.struct([D.u8("instruction"),D.u32("units")])},SetComputeUnitPrice:{index:3,layout:D.struct([D.u8("instruction"),rn("microLamports")])}});class ls{constructor(){}static requestUnits(t){const e=tr.RequestUnits,r=Pt(e,t);return new Yt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=tr.RequestHeapFrame,r=Pt(e,t);return new Yt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=tr.SetComputeUnitLimit,r=Pt(e,t);return new Yt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=tr.SetComputeUnitPrice,r=Pt(e,{microLamports:BigInt(t.microLamports)});return new Yt({keys:[],programId:this.programId,data:r})}}ls.programId=new ut("ComputeBudget111111111111111111111111111111");const ha=64,la=32,fa=64,da=D.struct([D.u8("numSignatures"),D.u8("padding"),D.u16("signatureOffset"),D.u16("signatureInstructionIndex"),D.u16("publicKeyOffset"),D.u16("publicKeyInstructionIndex"),D.u16("messageDataOffset"),D.u16("messageDataSize"),D.u16("messageInstructionIndex")]);class yi{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:o,instructionIndex:i}=t;Ut(e.length===la,`Public Key must be ${la} bytes but received ${e.length} bytes`),Ut(o.length===fa,`Signature must be ${fa} bytes but received ${o.length} bytes`);const a=da.span,f=a+e.length,d=f+o.length,I=1,b=wt.alloc(d+r.length),N=i??65535;return da.encode({numSignatures:I,padding:0,signatureOffset:f,signatureInstructionIndex:N,publicKeyOffset:a,publicKeyInstructionIndex:N,messageDataOffset:d,messageDataSize:r.length,messageInstructionIndex:N},b),b.fill(e,a),b.fill(o,f),b.fill(r,d),new Yt({keys:[],programId:yi.programId,data:b})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:o}=t;Ut(e.length===ha,`Private key must be ${ha} bytes but received ${e.length} bytes`);try{const i=Vr.fromSecretKey(e),a=i.publicKey.toBytes(),f=ts(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:f,instructionIndex:o})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}yi.programId=new ut("Ed25519SigVerify111111111111111111111111111");const zd=(n,t)=>{const e=ui.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};ui.utils.isValidPrivateKey;const Kd=ui.getPublicKey,pa=32,ho=20,ya=64,qd=11,lo=D.struct([D.u8("numSignatures"),D.u16("signatureOffset"),D.u8("signatureInstructionIndex"),D.u16("ethAddressOffset"),D.u8("ethAddressInstructionIndex"),D.u16("messageDataOffset"),D.u16("messageDataSize"),D.u8("messageInstructionIndex"),D.blob(20,"ethAddress"),D.blob(64,"signature"),D.u8("recoveryId")]);class Gr{constructor(){}static publicKeyToEthAddress(t){Ut(t.length===ya,`Public key must be ${ya} bytes but received ${t.length} bytes`);try{return wt.from(Ys(Ot(t))).slice(-ho)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:o,recoveryId:i,instructionIndex:a}=t;return Gr.createInstructionWithEthAddress({ethAddress:Gr.publicKeyToEthAddress(e),message:r,signature:o,recoveryId:i,instructionIndex:a})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:o,recoveryId:i,instructionIndex:a=0}=t;let f;typeof e=="string"?e.startsWith("0x")?f=wt.from(e.substr(2),"hex"):f=wt.from(e,"hex"):f=e,Ut(f.length===ho,`Address must be ${ho} bytes but received ${f.length} bytes`);const d=1+qd,I=d,b=d+f.length,N=b+o.length+1,L=1,P=wt.alloc(lo.span+r.length);return lo.encode({numSignatures:L,signatureOffset:b,signatureInstructionIndex:a,ethAddressOffset:I,ethAddressInstructionIndex:a,messageDataOffset:N,messageDataSize:r.length,messageInstructionIndex:a,signature:Ot(o),ethAddress:Ot(f),recoveryId:i},P),P.fill(Ot(r),lo.span),new Yt({keys:[],programId:Gr.programId,data:P})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:o}=t;Ut(e.length===pa,`Private key must be ${pa} bytes but received ${e.length} bytes`);try{const i=Ot(e),a=Kd(i,!1).slice(1),f=wt.from(Ys(Ot(r))),[d,I]=zd(f,i);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:d,recoveryId:I,instructionIndex:o})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Gr.programId=new ut("KeccakSecp256k11111111111111111111111111111");var Nc;const Cc=new ut("StakeConfig11111111111111111111111111111111");class Mc{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Sn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Nc=Sn;Sn.default=new Nc(0,0,ut.default);class Wd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=D.u32("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(Ee))if(a.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a StakeInstruction");return o}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=zt(Ee.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Mc(new ut(e.staker),new ut(e.withdrawer)),lockup:new Sn(r.unixTimestamp,r.epoch,new ut(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),zt(Ee.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=zt(Ee.Authorize,t.data),o={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ut(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:o,authorityOwner:i}=zt(Ee.AuthorizeWithSeed,t.data),a={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:o,authorityOwner:new ut(i),newAuthorizedPubkey:new ut(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(a.custodianPubkey=t.keys[3].pubkey),a}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=zt(Ee.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),zt(Ee.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=zt(Ee.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),zt(Ee.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(gi.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ee=Object.freeze({Initialize:{index:0,layout:D.struct([D.u32("instruction"),jl(),Yl()])},Authorize:{index:1,layout:D.struct([D.u32("instruction"),Ct("newAuthorized"),D.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:D.struct([D.u32("instruction")])},Split:{index:3,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},Withdraw:{index:4,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},Deactivate:{index:5,layout:D.struct([D.u32("instruction")])},Merge:{index:7,layout:D.struct([D.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:D.struct([D.u32("instruction"),Ct("newAuthorized"),D.u32("stakeAuthorizationType"),Tr("authoritySeed"),Ct("authorityOwner")])}}),$d=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class gi{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:o}=t,i=o||Sn.default,a=Ee.Initialize,f=Pt(a,{authorized:{staker:Ot(r.staker.toBuffer()),withdrawer:Ot(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Ot(i.custodian.toBuffer())}}),d={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:en,isSigner:!1,isWritable:!1}],programId:this.programId,data:f};return new Yt(d)}static createAccountWithSeed(t){const e=new Dt;e.add(_e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:i}))}static createAccount(t){const e=new Dt;e.add(_e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:o,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:o}=t,i=Ee.Delegate,a=Pt(i);return new Dt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:zn,isSigner:!1,isWritable:!1},{pubkey:Cc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:o,stakeAuthorizationType:i,custodianPubkey:a}=t,f=Ee.Authorize,d=Pt(f,{newAuthorized:Ot(o.toBuffer()),stakeAuthorizationType:i.index}),I=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&I.push({pubkey:a,isSigner:!0,isWritable:!1}),new Dt().add({keys:I,programId:this.programId,data:d})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:o,authorityOwner:i,newAuthorizedPubkey:a,stakeAuthorizationType:f,custodianPubkey:d}=t,I=Ee.AuthorizeWithSeed,b=Pt(I,{newAuthorized:Ot(a.toBuffer()),stakeAuthorizationType:f.index,authoritySeed:o,authorityOwner:Ot(i.toBuffer())}),N=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Xe,isSigner:!1,isWritable:!1}];return d&&N.push({pubkey:d,isSigner:!0,isWritable:!1}),new Dt().add({keys:N,programId:this.programId,data:b})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:o,lamports:i}=t,a=Ee.Split,f=Pt(a,{lamports:i});return new Yt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:f})}static split(t,e){const r=new Dt;return r.add(_e.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:o,splitStakePubkey:i,basePubkey:a,seed:f,lamports:d}=t,I=new Dt;return I.add(_e.allocate({accountPubkey:i,basePubkey:a,seed:f,space:this.space,programId:this.programId})),e&&e>0&&I.add(_e.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),I.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:o,splitStakePubkey:i,lamports:d}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:o}=t,i=Ee.Merge,a=Pt(i);return new Dt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:zn,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:o,lamports:i,custodianPubkey:a}=t,f=Ee.Withdraw,d=Pt(f,{lamports:i}),I=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:zn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&I.push({pubkey:a,isSigner:!0,isWritable:!1}),new Dt().add({keys:I,programId:this.programId,data:d})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,o=Ee.Deactivate,i=Pt(o);return new Dt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}gi.programId=new ut("Stake11111111111111111111111111111111111111");gi.space=200;class Lc{constructor(t,e,r,o){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=o}}class Vd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=D.u32("instruction").decode(t.data);let o;for(const[i,a]of Object.entries(er))if(a.index==r){o=i;break}if(!o)throw new Error("Instruction type incorrect; not a VoteInstruction");return o}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=zt(er.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Lc(new ut(e.nodePubkey),new ut(e.authorizedVoter),new ut(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=zt(er.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ut(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:o,voteAuthorizationType:i}}=zt(er.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ut(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new ut(o),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=zt(er.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(an.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const er=Object.freeze({InitializeAccount:{index:0,layout:D.struct([D.u32("instruction"),Zl()])},Authorize:{index:1,layout:D.struct([D.u32("instruction"),Ct("newAuthorized"),D.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:D.struct([D.u32("instruction"),D.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:D.struct([D.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:D.struct([D.u32("instruction"),Xl()])}}),Gd=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class an{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:o}=t,i=er.InitializeAccount,a=Pt(i,{voteInit:{nodePubkey:Ot(o.nodePubkey.toBuffer()),authorizedVoter:Ot(o.authorizedVoter.toBuffer()),authorizedWithdrawer:Ot(o.authorizedWithdrawer.toBuffer()),commission:o.commission}}),f={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:en,isSigner:!1,isWritable:!1},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new Yt(f)}static createAccount(t){const e=new Dt;return e.add(_e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:o,voteAuthorizationType:i}=t,a=er.Authorize,f=Pt(a,{newAuthorized:Ot(o.toBuffer()),voteAuthorizationType:i.index}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Dt().add({keys:d,programId:this.programId,data:f})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:o,newAuthorizedPubkey:i,voteAuthorizationType:a,votePubkey:f}=t,d=er.AuthorizeWithSeed,I=Pt(d,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ot(r.toBuffer()),currentAuthorityDerivedKeySeed:o,newAuthorized:Ot(i.toBuffer()),voteAuthorizationType:a.index}}),b=[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:Xe,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new Dt().add({keys:b,programId:this.programId,data:I})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:o,toPubkey:i}=t,a=er.Withdraw,f=Pt(a,{lamports:o}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Dt().add({keys:d,programId:this.programId,data:f})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return an.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:o}=t,i=er.UpdateValidatorIdentity,a=Pt(i),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Dt().add({keys:f,programId:this.programId,data:a})}}an.programId=new ut("Vote111111111111111111111111111111111111111");an.space=3762;const Pc=new ut("Va1idator1nfo111111111111111111111111111111"),jd=ct({name:lt(),website:bt(lt()),details:bt(lt()),iconUrl:bt(lt()),keybaseUsername:bt(lt())});class fs{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(Pe(e)!==2)return null;const o=[];for(let i=0;i<2;i++){const a=new ut(Ue(e,0,rr)),f=Qe(e)===1;o.push({publicKey:a,isSigner:f})}if(o[0].publicKey.equals(Pc)&&o[1].isSigner){const i=Tr().decode(wt.from(e)),a=JSON.parse(i);return Za(a,jd),new fs(o[1].publicKey,a)}return null}}const Yd=new ut("Vote111111111111111111111111111111111111111"),Zd=D.struct([Ct("nodePubkey"),Ct("authorizedWithdrawer"),D.u8("commission"),D.nu64(),D.seq(D.struct([D.nu64("slot"),D.u32("confirmationCount")]),D.offset(D.u32(),-8),"votes"),D.u8("rootSlotValid"),D.nu64("rootSlot"),D.nu64(),D.seq(D.struct([D.nu64("epoch"),Ct("authorizedVoter")]),D.offset(D.u32(),-8),"authorizedVoters"),D.struct([D.seq(D.struct([Ct("authorizedPubkey"),D.nu64("epochOfLastAuthorizedSwitch"),D.nu64("targetEpoch")]),32,"buf"),D.nu64("idx"),D.u8("isEmpty")],"priorVoters"),D.nu64(),D.seq(D.struct([D.nu64("epoch"),D.nu64("credits"),D.nu64("prevCredits")]),D.offset(D.u32(),-8),"epochCredits"),D.struct([D.nu64("slot"),D.nu64("timestamp")],"lastTimestamp")]);class ds{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=Zd.decode(Ot(t),4);let o=r.rootSlot;return r.rootSlotValid||(o=null),new ds({nodePubkey:new ut(r.nodePubkey),authorizedWithdrawer:new ut(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:o,authorizedVoters:r.authorizedVoters.map(Xd),priorVoters:Jd(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Xd({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new ut(n)}}function ga({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new ut(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function Jd({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(ga),...n.slice(0,t).map(ga)]}const ma={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Qd(n,t){const e=t===!1?"http":"https";if(!n)return ma[e].devnet;const r=ma[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function t0(n,t,e,r){let o,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(o=e,i=r):i=e;const a=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},f=await n.sendRawTransaction(t,a),d=i&&i.commitment,b=(await(o?n.confirmTransaction(o,d):n.confirmTransaction(f,d))).value;if(b.err)throw f!=null?new wn({action:a!=null&&a.skipPreflight?"send":"simulate",signature:f,transactionMessage:`Status: (${JSON.stringify(b)})`}):new Error(`Raw transaction ${f} failed (${JSON.stringify(b)})`);return f}const e0=1e9,r0=Object.freeze(Object.defineProperty({__proto__:null,Account:$l,AddressLookupTableAccount:To,AddressLookupTableInstruction:Dd,AddressLookupTableProgram:hs,Authorized:Mc,BLOCKHASH_CACHE_TIMEOUT_MS:_c,BPF_LOADER_DEPRECATED_PROGRAM_ID:Vl,BPF_LOADER_PROGRAM_ID:lf,BpfLoader:ff,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:tr,ComputeBudgetInstruction:Hd,ComputeBudgetProgram:ls,Connection:Oc,Ed25519Program:yi,Enum:ql,EpochSchedule:bc,FeeCalculatorLayout:mc,Keypair:Vr,LAMPORTS_PER_SOL:e0,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:fr,Loader:Lr,Lockup:Sn,MAX_SEED_LENGTH:dc,Message:je,MessageAccountKeys:mn,MessageV0:Mr,NONCE_ACCOUNT_LENGTH:vo,NonceAccount:fi,PACKET_DATA_SIZE:Rr,PUBLIC_KEY_LENGTH:rr,PublicKey:ut,SIGNATURE_LENGTH_IN_BYTES:gn,SOLANA_SCHEMA:dn,STAKE_CONFIG_ID:Cc,STAKE_INSTRUCTION_LAYOUTS:Ee,SYSTEM_INSTRUCTION_LAYOUTS:Jt,SYSVAR_CLOCK_PUBKEY:Xe,SYSVAR_EPOCH_SCHEDULE_PUBKEY:rf,SYSVAR_INSTRUCTIONS_PUBKEY:nf,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Hn,SYSVAR_RENT_PUBKEY:en,SYSVAR_REWARDS_PUBKEY:of,SYSVAR_SLOT_HASHES_PUBKEY:sf,SYSVAR_SLOT_HISTORY_PUBKEY:af,SYSVAR_STAKE_HISTORY_PUBKEY:zn,Secp256k1Program:Gr,SendTransactionError:wn,SolanaJSONRPCError:mt,SolanaJSONRPCErrorCode:cf,StakeAuthorizationLayout:$d,StakeInstruction:Wd,StakeProgram:gi,Struct:es,SystemInstruction:uf,SystemProgram:_e,Transaction:Dt,TransactionExpiredBlockheightExceededError:rs,TransactionExpiredNonceInvalidError:Wr,TransactionExpiredTimeoutError:ns,TransactionInstruction:Yt,TransactionMessage:os,TransactionStatus:cr,VALIDATOR_INFO_KEY:Pc,VERSION_PREFIX_MASK:hi,VOTE_PROGRAM_ID:Yd,ValidatorInfo:fs,VersionedMessage:is,VersionedTransaction:ss,VoteAccount:ds,VoteAuthorizationLayout:Gd,VoteInit:Lc,VoteInstruction:Vd,VoteProgram:an,clusterApiUrl:Qd,sendAndConfirmRawTransaction:t0,sendAndConfirmTransaction:ko},Symbol.toStringTag,{value:"Module"}));var Pn={exports:{}},wa;function n0(){if(wa)return Pn.exports;wa=1;const n=/[\p{Lu}]/u,t=/[\p{Ll}]/u,e=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,o=/[_.\- ]+/,i=new RegExp("^"+o.source),a=new RegExp(o.source+r.source,"gu"),f=new RegExp("\\d+"+r.source,"gu"),d=(L,P,H)=>{let F=!1,B=!1,W=!1;for(let K=0;K<L.length;K++){const U=L[K];F&&n.test(U)?(L=L.slice(0,K)+"-"+L.slice(K),F=!1,W=B,B=!0,K++):B&&W&&t.test(U)?(L=L.slice(0,K-1)+"-"+L.slice(K-1),W=B,B=!1,F=!0):(F=P(U)===U&&H(U)!==U,W=B,B=H(U)===U&&P(U)!==U)}return L},I=(L,P)=>(e.lastIndex=0,L.replace(e,H=>P(H))),b=(L,P)=>(a.lastIndex=0,f.lastIndex=0,L.replace(a,(H,F)=>P(F)).replace(f,H=>P(H))),N=(L,P)=>{if(!(typeof L=="string"||Array.isArray(L)))throw new TypeError("Expected the input to be `string | string[]`");if(P={pascalCase:!1,preserveConsecutiveUppercase:!1,...P},Array.isArray(L)?L=L.map(W=>W.trim()).filter(W=>W.length).join("-"):L=L.trim(),L.length===0)return"";const H=P.locale===!1?W=>W.toLowerCase():W=>W.toLocaleLowerCase(P.locale),F=P.locale===!1?W=>W.toUpperCase():W=>W.toLocaleUpperCase(P.locale);return L.length===1?P.pascalCase?F(L):H(L):(L!==H(L)&&(L=d(L,H,F)),L=L.replace(i,""),P.preserveConsecutiveUppercase?L=I(L,H):L=H(L),P.pascalCase&&(L=F(L.charAt(0))+L.slice(1)),b(L,F))};return Pn.exports=N,Pn.exports.default=N,Pn.exports}n0();var ln={},yt={},ba;function Ea(){if(ba)return yt;ba=1;class n{constructor(g,h){if(!Number.isInteger(g))throw new TypeError("span must be an integer");this.span=g,this.property=h}makeDestinationObject(){return{}}decode(g,h){throw new Error("Layout is abstract")}encode(g,h,c){throw new Error("Layout is abstract")}getSpan(g,h){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(g){const h=Object.create(this.constructor.prototype);return Object.assign(h,this),h.property=g,h}fromArray(g){}}yt.Layout=n;function t(R,g){return g.property?R+"["+g.property+"]":R}yt.nameWithProperty=t;function e(R,g){if(typeof R!="function")throw new TypeError("Class must be constructor");if(R.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(g&&g instanceof n))throw new TypeError("layout must be a Layout");if(g.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");R.layout_=g,g.boundConstructor_=R,g.makeDestinationObject=()=>new R,Object.defineProperty(R.prototype,"encode",{value:function(h,c){return g.encode(this,h,c)},writable:!0}),Object.defineProperty(R,"decode",{value:function(h,c){return g.decode(h,c)},writable:!0})}yt.bindConstructorLayout=e;class r extends n{isCount(){throw new Error("ExternalLayout is abstract")}}class o extends r{constructor(g,h){if(g===void 0&&(g=1),!Number.isInteger(g)||0>=g)throw new TypeError("elementSpan must be a (positive) integer");super(-1,h),this.elementSpan=g}isCount(){return!0}decode(g,h){h===void 0&&(h=0);const c=g.length-h;return Math.floor(c/this.elementSpan)}encode(g,h,c){return 0}}class i extends r{constructor(g,h,c){if(!(g instanceof n))throw new TypeError("layout must be a Layout");if(h===void 0)h=0;else if(!Number.isInteger(h))throw new TypeError("offset must be integer or undefined");super(g.span,c||g.property),this.layout=g,this.offset=h}isCount(){return this.layout instanceof a||this.layout instanceof f}decode(g,h){return h===void 0&&(h=0),this.layout.decode(g,h+this.offset)}encode(g,h,c){return c===void 0&&(c=0),this.layout.encode(g,h,c+this.offset)}}class a extends n{constructor(g,h){if(super(g,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,h){return h===void 0&&(h=0),g.readUIntLE(h,this.span)}encode(g,h,c){return c===void 0&&(c=0),h.writeUIntLE(g,c,this.span),this.span}}class f extends n{constructor(g,h){if(super(g,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,h){return h===void 0&&(h=0),g.readUIntBE(h,this.span)}encode(g,h,c){return c===void 0&&(c=0),h.writeUIntBE(g,c,this.span),this.span}}class d extends n{constructor(g,h){if(super(g,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,h){return h===void 0&&(h=0),g.readIntLE(h,this.span)}encode(g,h,c){return c===void 0&&(c=0),h.writeIntLE(g,c,this.span),this.span}}class I extends n{constructor(g,h){if(super(g,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(g,h){return h===void 0&&(h=0),g.readIntBE(h,this.span)}encode(g,h,c){return c===void 0&&(c=0),h.writeIntBE(g,c,this.span),this.span}}const b=Math.pow(2,32);function N(R){const g=Math.floor(R/b),h=R-g*b;return{hi32:g,lo32:h}}function L(R,g){return R*b+g}class P extends n{constructor(g){super(8,g)}decode(g,h){h===void 0&&(h=0);const c=g.readUInt32LE(h),u=g.readUInt32LE(h+4);return L(u,c)}encode(g,h,c){c===void 0&&(c=0);const u=N(g);return h.writeUInt32LE(u.lo32,c),h.writeUInt32LE(u.hi32,c+4),8}}class H extends n{constructor(g){super(8,g)}decode(g,h){h===void 0&&(h=0);const c=g.readUInt32BE(h),u=g.readUInt32BE(h+4);return L(c,u)}encode(g,h,c){c===void 0&&(c=0);const u=N(g);return h.writeUInt32BE(u.hi32,c),h.writeUInt32BE(u.lo32,c+4),8}}class F extends n{constructor(g){super(8,g)}decode(g,h){h===void 0&&(h=0);const c=g.readUInt32LE(h),u=g.readInt32LE(h+4);return L(u,c)}encode(g,h,c){c===void 0&&(c=0);const u=N(g);return h.writeUInt32LE(u.lo32,c),h.writeInt32LE(u.hi32,c+4),8}}class B extends n{constructor(g){super(8,g)}decode(g,h){h===void 0&&(h=0);const c=g.readInt32BE(h),u=g.readUInt32BE(h+4);return L(c,u)}encode(g,h,c){c===void 0&&(c=0);const u=N(g);return h.writeInt32BE(u.hi32,c),h.writeUInt32BE(u.lo32,c+4),8}}class W extends n{constructor(g){super(4,g)}decode(g,h){return h===void 0&&(h=0),g.readFloatLE(h)}encode(g,h,c){return c===void 0&&(c=0),h.writeFloatLE(g,c),4}}class K extends n{constructor(g){super(4,g)}decode(g,h){return h===void 0&&(h=0),g.readFloatBE(h)}encode(g,h,c){return c===void 0&&(c=0),h.writeFloatBE(g,c),4}}class U extends n{constructor(g){super(8,g)}decode(g,h){return h===void 0&&(h=0),g.readDoubleLE(h)}encode(g,h,c){return c===void 0&&(c=0),h.writeDoubleLE(g,c),8}}class tt extends n{constructor(g){super(8,g)}decode(g,h){return h===void 0&&(h=0),g.readDoubleBE(h)}encode(g,h,c){return c===void 0&&(c=0),h.writeDoubleBE(g,c),8}}class at extends n{constructor(g,h,c){if(!(g instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(h instanceof r&&h.isCount()||Number.isInteger(h)&&0<=h))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let u=-1;!(h instanceof r)&&0<g.span&&(u=h*g.span),super(u,c),this.elementLayout=g,this.count=h}getSpan(g,h){if(0<=this.span)return this.span;h===void 0&&(h=0);let c=0,u=this.count;if(u instanceof r&&(u=u.decode(g,h)),0<this.elementLayout.span)c=u*this.elementLayout.span;else{let _=0;for(;_<u;)c+=this.elementLayout.getSpan(g,h+c),++_}return c}decode(g,h){h===void 0&&(h=0);const c=[];let u=0,_=this.count;for(_ instanceof r&&(_=_.decode(g,h));u<_;)c.push(this.elementLayout.decode(g,h)),h+=this.elementLayout.getSpan(g,h),u+=1;return c}encode(g,h,c){c===void 0&&(c=0);const u=this.elementLayout,_=g.reduce((O,z)=>O+u.encode(z,h,c+O),0);return this.count instanceof r&&this.count.encode(g.length,h,c),_}}class st extends n{constructor(g,h,c){if(!(Array.isArray(g)&&g.reduce((_,O)=>_&&O instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof h=="boolean"&&c===void 0&&(c=h,h=void 0);for(const _ of g)if(0>_.span&&_.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let u=-1;try{u=g.reduce((_,O)=>_+O.getSpan(),0)}catch{}super(u,h),this.fields=g,this.decodePrefixes=!!c}getSpan(g,h){if(0<=this.span)return this.span;h===void 0&&(h=0);let c=0;try{c=this.fields.reduce((u,_)=>{const O=_.getSpan(g,h);return h+=O,u+O},0)}catch{throw new RangeError("indeterminate span")}return c}decode(g,h){h===void 0&&(h=0);const c=this.makeDestinationObject();for(const u of this.fields)if(u.property!==void 0&&(c[u.property]=u.decode(g,h)),h+=u.getSpan(g,h),this.decodePrefixes&&g.length===h)break;return c}encode(g,h,c){c===void 0&&(c=0);const u=c;let _=0,O=0;for(const z of this.fields){let et=z.span;if(O=0<et?et:0,z.property!==void 0){const ht=g[z.property];ht!==void 0&&(O=z.encode(ht,h,c),0>et&&(et=z.getSpan(h,c)))}_=c,c+=et}return _+O-u}fromArray(g){const h=this.makeDestinationObject();for(const c of this.fields)c.property!==void 0&&0<g.length&&(h[c.property]=g.shift());return h}layoutFor(g){if(typeof g!="string")throw new TypeError("property must be string");for(const h of this.fields)if(h.property===g)return h}offsetOf(g){if(typeof g!="string")throw new TypeError("property must be string");let h=0;for(const c of this.fields){if(c.property===g)return h;0>c.span?h=-1:0<=h&&(h+=c.span)}}}class nt{constructor(g){this.property=g}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class it extends nt{constructor(g,h){if(!(g instanceof r&&g.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(h||g.property||"variant"),this.layout=g}decode(g,h){return this.layout.decode(g,h)}encode(g,h,c){return this.layout.encode(g,h,c)}}class j extends n{constructor(g,h,c){const u=g instanceof a||g instanceof f;if(u)g=new it(new i(g));else if(g instanceof r&&g.isCount())g=new it(g);else if(!(g instanceof nt))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(h===void 0&&(h=null),!(h===null||h instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(h!==null){if(0>h.span)throw new Error("defaultLayout must have constant span");h.property===void 0&&(h=h.replicate("content"))}let _=-1;h&&(_=h.span,0<=_&&u&&(_+=g.layout.span)),super(_,c),this.discriminator=g,this.usesPrefixDiscriminator=u,this.defaultLayout=h,this.registry={};let O=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(z){return O(z)},this.configGetSourceVariant=function(z){O=z.bind(this)}}getSpan(g,h){if(0<=this.span)return this.span;h===void 0&&(h=0);const c=this.getVariant(g,h);if(!c)throw new Error("unable to determine span for unrecognized variant");return c.getSpan(g,h)}defaultGetSourceVariant(g){if(g.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&g.hasOwnProperty(this.defaultLayout.property))return;const h=this.registry[g[this.discriminator.property]];if(h&&(!h.layout||g.hasOwnProperty(h.property)))return h}else for(const h in this.registry){const c=this.registry[h];if(g.hasOwnProperty(c.property))return c}throw new Error("unable to infer src variant")}decode(g,h){h===void 0&&(h=0);let c;const u=this.discriminator,_=u.decode(g,h);let O=this.registry[_];if(O===void 0){let z=0;O=this.defaultLayout,this.usesPrefixDiscriminator&&(z=u.layout.span),c=this.makeDestinationObject(),c[u.property]=_,c[O.property]=this.defaultLayout.decode(g,h+z)}else c=O.decode(g,h);return c}encode(g,h,c){c===void 0&&(c=0);const u=this.getSourceVariant(g);if(u===void 0){const _=this.discriminator,O=this.defaultLayout;let z=0;return this.usesPrefixDiscriminator&&(z=_.layout.span),_.encode(g[_.property],h,c),z+O.encode(g[O.property],h,c+z)}return u.encode(g,h,c)}addVariant(g,h,c){const u=new $(this,g,h,c);return this.registry[g]=u,u}getVariant(g,h){let c=g;return Vt.isBuffer(g)&&(h===void 0&&(h=0),c=this.discriminator.decode(g,h)),this.registry[c]}}class $ extends n{constructor(g,h,c,u){if(!(g instanceof j))throw new TypeError("union must be a Union");if(!Number.isInteger(h)||0>h)throw new TypeError("variant must be a (non-negative) integer");if(typeof c=="string"&&u===void 0&&(u=c,c=null),c){if(!(c instanceof n))throw new TypeError("layout must be a Layout");if(g.defaultLayout!==null&&0<=c.span&&c.span>g.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof u!="string")throw new TypeError("variant must have a String property")}let _=g.span;0>g.span&&(_=c?c.span:0,0<=_&&g.usesPrefixDiscriminator&&(_+=g.discriminator.layout.span)),super(_,u),this.union=g,this.variant=h,this.layout=c||null}getSpan(g,h){if(0<=this.span)return this.span;h===void 0&&(h=0);let c=0;return this.union.usesPrefixDiscriminator&&(c=this.union.discriminator.layout.span),c+this.layout.getSpan(g,h+c)}decode(g,h){const c=this.makeDestinationObject();if(h===void 0&&(h=0),this!==this.union.getVariant(g,h))throw new Error("variant mismatch");let u=0;return this.union.usesPrefixDiscriminator&&(u=this.union.discriminator.layout.span),this.layout?c[this.property]=this.layout.decode(g,h+u):this.property?c[this.property]=!0:this.union.usesPrefixDiscriminator&&(c[this.union.discriminator.property]=this.variant),c}encode(g,h,c){c===void 0&&(c=0);let u=0;if(this.union.usesPrefixDiscriminator&&(u=this.union.discriminator.layout.span),this.layout&&!g.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,h,c);let _=u;if(this.layout&&(this.layout.encode(g[this.property],h,c+u),_+=this.layout.getSpan(h,c+u),0<=this.union.span&&_>this.union.span))throw new Error("encoded variant overruns containing union");return _}fromArray(g){if(this.layout)return this.layout.fromArray(g)}}function G(R){return 0>R&&(R+=4294967296),R}class T extends n{constructor(g,h,c){if(!(g instanceof a||g instanceof f))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof h=="string"&&c===void 0&&(c=h,h=void 0),4<g.span)throw new RangeError("word cannot exceed 32 bits");super(g.span,c),this.word=g,this.msb=!!h,this.fields=[];let u=0;this._packedSetValue=function(_){return u=G(_),this},this._packedGetValue=function(){return u}}decode(g,h){const c=this.makeDestinationObject();h===void 0&&(h=0);const u=this.word.decode(g,h);this._packedSetValue(u);for(const _ of this.fields)_.property!==void 0&&(c[_.property]=_.decode(u));return c}encode(g,h,c){c===void 0&&(c=0);const u=this.word.decode(h,c);this._packedSetValue(u);for(const _ of this.fields)if(_.property!==void 0){const O=g[_.property];O!==void 0&&_.encode(O)}return this.word.encode(this._packedGetValue(),h,c)}addField(g,h){const c=new A(this,g,h);return this.fields.push(c),c}addBoolean(g){const h=new s(this,g);return this.fields.push(h),h}fieldFor(g){if(typeof g!="string")throw new TypeError("property must be string");for(const h of this.fields)if(h.property===g)return h}}class A{constructor(g,h,c){if(!(g instanceof T))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(h)||0>=h)throw new TypeError("bits must be positive integer");const u=8*g.span,_=g.fields.reduce((O,z)=>O+z.bits,0);if(h+_>u)throw new Error("bits too long for span remainder ("+(u-_)+" of "+u+" remain)");this.container=g,this.bits=h,this.valueMask=(1<<h)-1,h===32&&(this.valueMask=4294967295),this.start=_,this.container.msb&&(this.start=u-_-h),this.wordMask=G(this.valueMask<<this.start),this.property=c}decode(){const g=this.container._packedGetValue();return G(g&this.wordMask)>>>this.start}encode(g){if(!Number.isInteger(g)||g!==G(g&this.valueMask))throw new TypeError(t("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const h=this.container._packedGetValue(),c=G(g<<this.start);this.container._packedSetValue(G(h&~this.wordMask)|c)}}class s extends A{constructor(g,h){super(g,1,h)}decode(g,h){return!!A.prototype.decode.call(this,g,h)}encode(g){return typeof g=="boolean"&&(g=+g),A.prototype.encode.call(this,g)}}class l extends n{constructor(g,h){if(!(g instanceof r&&g.isCount()||Number.isInteger(g)&&0<=g))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let c=-1;g instanceof r||(c=g),super(c,h),this.length=g}getSpan(g,h){let c=this.span;return 0>c&&(c=this.length.decode(g,h)),c}decode(g,h){h===void 0&&(h=0);let c=this.span;return 0>c&&(c=this.length.decode(g,h)),g.slice(h,h+c)}encode(g,h,c){let u=this.length;if(this.length instanceof r&&(u=g.length),!(Vt.isBuffer(g)&&u===g.length))throw new TypeError(t("Blob.encode",this)+" requires (length "+u+") Buffer as src");if(c+u>h.length)throw new RangeError("encoding overruns Buffer");return h.write(g.toString("hex"),c,u,"hex"),this.length instanceof r&&this.length.encode(u,h,c),u}}class E extends n{constructor(g){super(-1,g)}getSpan(g,h){if(!Vt.isBuffer(g))throw new TypeError("b must be a Buffer");h===void 0&&(h=0);let c=h;for(;c<g.length&&g[c]!==0;)c+=1;return 1+c-h}decode(g,h,c){h===void 0&&(h=0);let u=this.getSpan(g,h);return g.slice(h,h+u-1).toString("utf-8")}encode(g,h,c){c===void 0&&(c=0),typeof g!="string"&&(g=g.toString());const u=new Vt(g,"utf8"),_=u.length;if(c+_>h.length)throw new RangeError("encoding overruns Buffer");return u.copy(h,c),h[c+_]=0,_+1}}class S extends n{constructor(g,h){if(typeof g=="string"&&h===void 0&&(h=g,g=void 0),g===void 0)g=-1;else if(!Number.isInteger(g))throw new TypeError("maxSpan must be an integer");super(-1,h),this.maxSpan=g}getSpan(g,h){if(!Vt.isBuffer(g))throw new TypeError("b must be a Buffer");return h===void 0&&(h=0),g.length-h}decode(g,h,c){h===void 0&&(h=0);let u=this.getSpan(g,h);if(0<=this.maxSpan&&this.maxSpan<u)throw new RangeError("text length exceeds maxSpan");return g.slice(h,h+u).toString("utf-8")}encode(g,h,c){c===void 0&&(c=0),typeof g!="string"&&(g=g.toString());const u=new Vt(g,"utf8"),_=u.length;if(0<=this.maxSpan&&this.maxSpan<_)throw new RangeError("text length exceeds maxSpan");if(c+_>h.length)throw new RangeError("encoding overruns Buffer");return u.copy(h,c),_}}class x extends n{constructor(g,h){super(0,h),this.value=g}decode(g,h,c){return this.value}encode(g,h,c){return 0}}return yt.ExternalLayout=r,yt.GreedyCount=o,yt.OffsetLayout=i,yt.UInt=a,yt.UIntBE=f,yt.Int=d,yt.IntBE=I,yt.Float=W,yt.FloatBE=K,yt.Double=U,yt.DoubleBE=tt,yt.Sequence=at,yt.Structure=st,yt.UnionDiscriminator=nt,yt.UnionLayoutDiscriminator=it,yt.Union=j,yt.VariantLayout=$,yt.BitStructure=T,yt.BitField=A,yt.Boolean=s,yt.Blob=l,yt.CString=E,yt.UTF8=S,yt.Constant=x,yt.greedy=(R,g)=>new o(R,g),yt.offset=(R,g,h)=>new i(R,g,h),yt.u8=R=>new a(1,R),yt.u16=R=>new a(2,R),yt.u24=R=>new a(3,R),yt.u32=R=>new a(4,R),yt.u40=R=>new a(5,R),yt.u48=R=>new a(6,R),yt.nu64=R=>new P(R),yt.u16be=R=>new f(2,R),yt.u24be=R=>new f(3,R),yt.u32be=R=>new f(4,R),yt.u40be=R=>new f(5,R),yt.u48be=R=>new f(6,R),yt.nu64be=R=>new H(R),yt.s8=R=>new d(1,R),yt.s16=R=>new d(2,R),yt.s24=R=>new d(3,R),yt.s32=R=>new d(4,R),yt.s40=R=>new d(5,R),yt.s48=R=>new d(6,R),yt.ns64=R=>new F(R),yt.s16be=R=>new I(2,R),yt.s24be=R=>new I(3,R),yt.s32be=R=>new I(4,R),yt.s40be=R=>new I(5,R),yt.s48be=R=>new I(6,R),yt.ns64be=R=>new B(R),yt.f32=R=>new W(R),yt.f32be=R=>new K(R),yt.f64=R=>new U(R),yt.f64be=R=>new tt(R),yt.struct=(R,g,h)=>new st(R,g,h),yt.bits=(R,g,h)=>new T(R,g,h),yt.seq=(R,g,h)=>new at(R,g,h),yt.union=(R,g,h)=>new j(R,g,h),yt.unionLayoutDiscriminator=(R,g)=>new it(R,g),yt.blob=(R,g)=>new l(R,g),yt.cstr=R=>new E(R),yt.utf8=(R,g)=>new S(R,g),yt.const=(R,g)=>new x(R,g),yt}const i0=Fo(r0);var _a;function o0(){return _a||(_a=1,function(n){var t=ln&&ln.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(n,"__esModule",{value:!0}),n.struct=n.f64=n.f32=n.i32=n.u32=n.i16=n.u16=n.i8=n.u8=void 0,n.u64=f,n.i64=d,n.u128=I,n.i128=b,n.u256=N,n.i256=L,n.publicKey=H,n.option=B,n.bool=W,n.vec=tt,n.tagged=at,n.vecU8=st,n.str=nt,n.rustEnum=it,n.array=j,n.map=G;const e=Ea(),r=i0,o=t(Ho());var i=Ea();Object.defineProperty(n,"u8",{enumerable:!0,get:function(){return i.u8}}),Object.defineProperty(n,"i8",{enumerable:!0,get:function(){return i.s8}}),Object.defineProperty(n,"u16",{enumerable:!0,get:function(){return i.u16}}),Object.defineProperty(n,"i16",{enumerable:!0,get:function(){return i.s16}}),Object.defineProperty(n,"u32",{enumerable:!0,get:function(){return i.u32}}),Object.defineProperty(n,"i32",{enumerable:!0,get:function(){return i.s32}}),Object.defineProperty(n,"f32",{enumerable:!0,get:function(){return i.f32}}),Object.defineProperty(n,"f64",{enumerable:!0,get:function(){return i.f64}}),Object.defineProperty(n,"struct",{enumerable:!0,get:function(){return i.struct}});class a extends e.Layout{constructor(A,s,l){super(A,l),this.blob=(0,e.blob)(A),this.signed=s}decode(A,s=0){const l=new o.default(this.blob.decode(A,s),10,"le");return this.signed?l.fromTwos(this.span*8).clone():l}encode(A,s,l=0){return this.signed&&(A=A.toTwos(this.span*8)),this.blob.encode(A.toArrayLike(Vt,"le",this.span),s,l)}}function f(T){return new a(8,!1,T)}function d(T){return new a(8,!0,T)}function I(T){return new a(16,!1,T)}function b(T){return new a(16,!0,T)}function N(T){return new a(32,!1,T)}function L(T){return new a(32,!0,T)}class P extends e.Layout{constructor(A,s,l,E){super(A.span,E),this.layout=A,this.decoder=s,this.encoder=l}decode(A,s){return this.decoder(this.layout.decode(A,s))}encode(A,s,l){return this.layout.encode(this.encoder(A),s,l)}getSpan(A,s){return this.layout.getSpan(A,s)}}function H(T){return new P((0,e.blob)(32),A=>new r.PublicKey(A),A=>A.toBuffer(),T)}class F extends e.Layout{constructor(A,s){super(-1,s),this.layout=A,this.discriminator=(0,e.u8)()}encode(A,s,l=0){return A==null?this.discriminator.encode(0,s,l):(this.discriminator.encode(1,s,l),this.layout.encode(A,s,l+1)+1)}decode(A,s=0){const l=this.discriminator.decode(A,s);if(l===0)return null;if(l===1)return this.layout.decode(A,s+1);throw new Error("Invalid option "+this.property)}getSpan(A,s=0){const l=this.discriminator.decode(A,s);if(l===0)return 1;if(l===1)return this.layout.getSpan(A,s+1)+1;throw new Error("Invalid option "+this.property)}}function B(T,A){return new F(T,A)}function W(T){return new P((0,e.u8)(),K,U,T)}function K(T){if(T===0)return!1;if(T===1)return!0;throw new Error("Invalid bool: "+T)}function U(T){return T?1:0}function tt(T,A){const s=(0,e.u32)("length"),l=(0,e.struct)([s,(0,e.seq)(T,(0,e.offset)(s,-s.span),"values")]);return new P(l,({values:E})=>E,E=>({values:E}),A)}function at(T,A,s){const l=(0,e.struct)([f("tag"),A.replicate("data")]);function E({tag:S,data:x}){if(!S.eq(T))throw new Error("Invalid tag, expected: "+T.toString("hex")+", got: "+S.toString("hex"));return x}return new P(l,E,S=>({tag:T,data:S}),s)}function st(T){const A=(0,e.u32)("length"),s=(0,e.struct)([A,(0,e.blob)((0,e.offset)(A,-A.span),"data")]);return new P(s,({data:l})=>l,l=>({data:l}),T)}function nt(T){return new P(st(),A=>A.toString("utf-8"),A=>Vt.from(A,"utf-8"),T)}function it(T,A,s){const l=(0,e.union)(s??(0,e.u8)(),A);return T.forEach((E,S)=>l.addVariant(S,E,E.property)),l}function j(T,A,s){const l=(0,e.struct)([(0,e.seq)(T,A,"values")]);return new P(l,({values:E})=>E,E=>({values:E}),s)}class $ extends e.Layout{constructor(A,s,l){super(A.span+s.span,l),this.keyLayout=A,this.valueLayout=s}decode(A,s){s=s||0;const l=this.keyLayout.decode(A,s),E=this.valueLayout.decode(A,s+this.keyLayout.getSpan(A,s));return[l,E]}encode(A,s,l){l=l||0;const E=this.keyLayout.encode(A[0],s,l),S=this.valueLayout.encode(A[1],s,l+E);return E+S}getSpan(A,s){return this.keyLayout.getSpan(A,s)+this.valueLayout.getSpan(A,s)}}function G(T,A,s){const l=(0,e.u32)("length"),E=(0,e.struct)([l,(0,e.seq)(new $(T,A),(0,e.offset)(l,-l.span),"values")]);return new P(E,({values:S})=>new Map(S),S=>({values:Array.from(S.entries())}),s)}}(ln)),ln}var Ce=o0();function cn(n){let t=n.length;for(;--t>=0;)n[t]=0}const s0=3,a0=258,Uc=29,c0=256,u0=c0+1+Uc,Fc=30,h0=512,l0=new Array((u0+2)*2);cn(l0);const f0=new Array(Fc*2);cn(f0);const d0=new Array(h0);cn(d0);const p0=new Array(a0-s0+1);cn(p0);const y0=new Array(Uc);cn(y0);const g0=new Array(Fc);cn(g0);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const Co=new Uint8Array(256);for(let n=0;n<256;n++)Co[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Co[254]=Co[254]=1;var fo={exports:{}},Ra;function m0(){return Ra||(Ra=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(d,I,b){this.fn=d,this.context=I,this.once=b||!1}function i(d,I,b,N,L){if(typeof b!="function")throw new TypeError("The listener must be a function");var P=new o(b,N||d,L),H=e?e+I:I;return d._events[H]?d._events[H].fn?d._events[H]=[d._events[H],P]:d._events[H].push(P):(d._events[H]=P,d._eventsCount++),d}function a(d,I){--d._eventsCount===0?d._events=new r:delete d._events[I]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var I=[],b,N;if(this._eventsCount===0)return I;for(N in b=this._events)t.call(b,N)&&I.push(e?N.slice(1):N);return Object.getOwnPropertySymbols?I.concat(Object.getOwnPropertySymbols(b)):I},f.prototype.listeners=function(I){var b=e?e+I:I,N=this._events[b];if(!N)return[];if(N.fn)return[N.fn];for(var L=0,P=N.length,H=new Array(P);L<P;L++)H[L]=N[L].fn;return H},f.prototype.listenerCount=function(I){var b=e?e+I:I,N=this._events[b];return N?N.fn?1:N.length:0},f.prototype.emit=function(I,b,N,L,P,H){var F=e?e+I:I;if(!this._events[F])return!1;var B=this._events[F],W=arguments.length,K,U;if(B.fn){switch(B.once&&this.removeListener(I,B.fn,void 0,!0),W){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,b),!0;case 3:return B.fn.call(B.context,b,N),!0;case 4:return B.fn.call(B.context,b,N,L),!0;case 5:return B.fn.call(B.context,b,N,L,P),!0;case 6:return B.fn.call(B.context,b,N,L,P,H),!0}for(U=1,K=new Array(W-1);U<W;U++)K[U-1]=arguments[U];B.fn.apply(B.context,K)}else{var tt=B.length,at;for(U=0;U<tt;U++)switch(B[U].once&&this.removeListener(I,B[U].fn,void 0,!0),W){case 1:B[U].fn.call(B[U].context);break;case 2:B[U].fn.call(B[U].context,b);break;case 3:B[U].fn.call(B[U].context,b,N);break;case 4:B[U].fn.call(B[U].context,b,N,L);break;default:if(!K)for(at=1,K=new Array(W-1);at<W;at++)K[at-1]=arguments[at];B[U].fn.apply(B[U].context,K)}}return!0},f.prototype.on=function(I,b,N){return i(this,I,b,N,!1)},f.prototype.once=function(I,b,N){return i(this,I,b,N,!0)},f.prototype.removeListener=function(I,b,N,L){var P=e?e+I:I;if(!this._events[P])return this;if(!b)return a(this,P),this;var H=this._events[P];if(H.fn)H.fn===b&&(!L||H.once)&&(!N||H.context===N)&&a(this,P);else{for(var F=0,B=[],W=H.length;F<W;F++)(H[F].fn!==b||L&&!H[F].once||N&&H[F].context!==N)&&B.push(H[F]);B.length?this._events[P]=B.length===1?B[0]:B:a(this,P)}return this},f.prototype.removeAllListeners=function(I){var b;return I?(b=e?e+I:I,this._events[b]&&a(this,b)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,n.exports=f}(fo)),fo.exports}m0();Ce.struct([Ce.publicKey("authority"),Ce.vecU8("data")]);class w0 extends TypeError{constructor(t,e){let r;const{message:o,...i}=t,{path:a}=t,f=a.length===0?o:"At path: "+a.join(".")+" -- "+o;super(f),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var d;return(d=r)!=null?d:r=[t,...e()]}}}function b0(n){return jr(n)&&typeof n[Symbol.iterator]=="function"}function jr(n){return typeof n=="object"&&n!=null}function Sr(n){return typeof n=="string"?JSON.stringify(n):""+n}function E0(n){const{done:t,value:e}=n.next();return t?void 0:e}function _0(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:o,branch:i}=t,{type:a}=e,{refinement:f,message:d="Expected a value of type `"+a+"`"+(f?" with refinement `"+f+"`":"")+", but received: `"+Sr(r)+"`"}=n;return{value:r,type:a,refinement:f,key:o[o.length-1],path:o,branch:i,...n,message:d}}function*Ia(n,t,e,r){b0(n)||(n=[n]);for(const o of n){const i=_0(o,t,e,r);i&&(yield i)}}function*ps(n,t,e){e===void 0&&(e={});const{path:r=[],branch:o=[n],coerce:i=!1,mask:a=!1}=e,f={path:r,branch:o};if(i&&(n=t.coercer(n,f),a&&t.type!=="type"&&jr(t.schema)&&jr(n)&&!Array.isArray(n)))for(const I in n)t.schema[I]===void 0&&delete n[I];let d=!0;for(const I of t.validator(n,f))d=!1,yield[I,void 0];for(let[I,b,N]of t.entries(n,f)){const L=ps(b,N,{path:I===void 0?r:[...r,I],branch:I===void 0?o:[...o,b],coerce:i,mask:a});for(const P of L)P[0]?(d=!1,yield[P[0],void 0]):i&&(b=P[1],I===void 0?n=b:n instanceof Map?n.set(I,b):n instanceof Set?n.add(b):jr(n)&&(n[I]=b))}if(d)for(const I of t.refiner(n,f))d=!1,yield[I,void 0];d&&(yield[void 0,n])}class xr{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:o,refiner:i,coercer:a=d=>d,entries:f=function*(){}}=t;this.type=e,this.schema=r,this.entries=f,this.coercer=a,o?this.validator=(d,I)=>{const b=o(d,I);return Ia(b,I,this,d)}:this.validator=()=>[],i?this.refiner=(d,I)=>{const b=i(d,I);return Ia(b,I,this,d)}:this.refiner=()=>[]}assert(t){return R0(t,this)}create(t){return Dc(t,this)}is(t){return Hc(t,this)}mask(t){return I0(t,this)}validate(t,e){return e===void 0&&(e={}),xn(t,this,e)}}function R0(n,t){const e=xn(n,t);if(e[0])throw e[0]}function Dc(n,t){const e=xn(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function I0(n,t){const e=xn(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Hc(n,t){return!xn(n,t)[0]}function xn(n,t,e){e===void 0&&(e={});const r=ps(n,t,e),o=E0(r);return o[0]?[new w0(o[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,o[1]]}function kn(n,t){return new xr({type:n,schema:null,validator:t})}function A0(){return kn("any",()=>!0)}function po(n){return new xr({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Sr(t)}})}function S0(){return kn("boolean",n=>typeof n=="boolean")}function Aa(n){const t=Sr(n);return new xr({type:"literal",schema:n,validator(e){return e===n||"Expected the literal `"+t+"`, but received: "+Sr(e)}})}function Un(n){return new xr({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function Kn(){return kn("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+Sr(n))}function qn(n){return new xr({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Br(){return kn("string",n=>typeof n=="string"||"Expected a string, but received: "+Sr(n))}function Ir(n){const t=Object.keys(n);return new xr({type:"type",schema:n,*entries(e){if(jr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return jr(e)||"Expected an object, but received: "+Sr(e)}})}function zc(n){const t=n.map(e=>e.type).join(" | ");return new xr({type:"union",schema:null,coercer(e,r){return(n.find(i=>{const[a]=i.validate(e,{coerce:!0});return!a})||ys()).coercer(e,r)},validator(e,r){const o=[];for(const i of n){const[...a]=ps(e,i,r),[f]=a;if(f[0])for(const[d]of a)d&&o.push(d);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Sr(e),...o]}})}function ys(){return kn("unknown",()=>!0)}function x0(n,t,e){return new xr({...n,coercer:(r,o)=>Hc(r,t)?n.coercer(e(r,o),o):n.coercer(r,o)})}function k0(n){return x0(Kc(n),v0,t=>"error"in t?t:{...t,result:Dc(t.result,n)})}const v0=Kc(ys());function Kc(n){return zc([Ir({jsonrpc:Aa("2.0"),id:Br(),result:n}),Ir({jsonrpc:Aa("2.0"),id:Br(),error:Ir({code:ys(),message:Br(),data:qn(A0())})})])}function T0(n){return k0(Ir({context:Ir({slot:Kn()}),value:n}))}T0(Ir({err:Un(zc([Ir({}),Br()])),logs:Un(po(Br())),accounts:qn(Un(po(Un(Ir({executable:S0(),owner:Br(),lamports:Kn(),data:po(Br()),rentEpoch:qn(Kn())}))))),unitsConsumed:qn(Kn())}));var B0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ws<"u"?ws:typeof self<"u"?self:{},J={};Object.defineProperty(J,"__esModule",{value:!0});J.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=J.ANCHOR_ERROR__REQUIRE_VIOLATED=J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=J.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=J.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=J.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=J.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=J.ANCHOR_ERROR__CONSTRAINT_SPACE=J.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=J.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=J.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=J.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=J.ANCHOR_ERROR__CONSTRAINT_ZERO=J.ANCHOR_ERROR__CONSTRAINT_ADDRESS=J.ANCHOR_ERROR__CONSTRAINT_CLOSE=J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=J.ANCHOR_ERROR__CONSTRAINT_STATE=J.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=J.ANCHOR_ERROR__CONSTRAINT_SEEDS=J.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=J.ANCHOR_ERROR__CONSTRAINT_OWNER=J.ANCHOR_ERROR__CONSTRAINT_RAW=J.ANCHOR_ERROR__CONSTRAINT_SIGNER=J.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=J.ANCHOR_ERROR__CONSTRAINT_MUT=J.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=J.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=J.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=J.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=J.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=J.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=J.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=J.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0;J.ANCHOR_ERROR__DEPRECATED=J.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=J.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=J.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=J.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=J.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=J.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=J.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=J.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=J.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=J.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=J.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=J.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=J.ANCHOR_ERROR__INVALID_PROGRAM_ID=J.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=J.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=J.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=J.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=J.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=J.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=J.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=J.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=J.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=J.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0;J.ANCHOR_ERROR__INSTRUCTION_MISSING=100;J.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101;J.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102;J.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103;J.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3;J.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001;J.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002;J.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500;J.ANCHOR_ERROR__CONSTRAINT_MUT=2e3;J.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001;J.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002;J.ANCHOR_ERROR__CONSTRAINT_RAW=2003;J.ANCHOR_ERROR__CONSTRAINT_OWNER=2004;J.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005;J.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006;J.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007;J.ANCHOR_ERROR__CONSTRAINT_STATE=2008;J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009;J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010;J.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011;J.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012;J.ANCHOR_ERROR__CONSTRAINT_ZERO=2013;J.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014;J.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015;J.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016;J.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017;J.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018;J.ANCHOR_ERROR__CONSTRAINT_SPACE=2019;J.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020;J.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021;J.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022;J.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028;J.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029;J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030;J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031;J.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032;J.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033;J.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034;J.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035;J.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036;J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037;J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038;J.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039;J.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;J.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;J.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502;J.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503;J.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504;J.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505;J.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506;J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3;J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001;J.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002;J.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003;J.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004;J.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005;J.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006;J.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007;J.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008;J.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009;J.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010;J.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011;J.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012;J.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013;J.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014;J.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015;J.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016;J.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017;J.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100;J.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101;J.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;J.ANCHOR_ERROR__DEPRECATED=5e3;class De{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var mi=De;function O0(n,t){return t.property?n+"["+t.property+"]":n}class Or extends De{isCount(){throw new Error("ExternalLayout is abstract")}}class qc extends Or{constructor(t,e,r){if(!(t instanceof De))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof wi||this.layout instanceof Wc}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return r===void 0&&(r=0),this.layout.encode(t,e,r+this.offset)}}class wi extends De{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntLE(t,r,this.span),this.span}}class Wc extends De{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntBE(t,r,this.span),this.span}}const Mo=Math.pow(2,32);function $c(n){const t=Math.floor(n/Mo),e=n-t*Mo;return{hi32:t,lo32:e}}function Vc(n,t){return n*Mo+t}class N0 extends De{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),o=t.readUInt32LE(e+4);return Vc(o,r)}encode(t,e,r){r===void 0&&(r=0);const o=$c(t);return e.writeUInt32LE(o.lo32,r),e.writeUInt32LE(o.hi32,r+4),8}}class C0 extends De{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),o=t.readInt32LE(e+4);return Vc(o,r)}encode(t,e,r){r===void 0&&(r=0);const o=$c(t);return e.writeUInt32LE(o.lo32,r),e.writeInt32LE(o.hi32,r+4),8}}class M0 extends De{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,a)=>i&&a instanceof De,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=t.reduce((i,a)=>i+a.getSpan(),0)}catch{}super(o,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((o,i)=>{const a=i.getSpan(t,e);return e+=a,o+a},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(r[o.property]=o.decode(t,e)),e+=o.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){r===void 0&&(r=0);const o=r;let i=0,a=0;for(const f of this.fields){let d=f.span;if(a=0<d?d:0,f.property!==void 0){const I=t[f.property];I!==void 0&&(a=f.encode(I,e,r),0>d&&(d=f.getSpan(e,r)))}i=r,r+=d}return i+a-o}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class Gc{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Sa extends Gc{constructor(t,e){if(!(t instanceof Or&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class jc extends De{constructor(t,e,r){const o=t instanceof wi||t instanceof Wc;if(o)t=new Sa(new qc(t));else if(t instanceof Or&&t.isCount())t=new Sa(t);else if(!(t instanceof Gc))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof De))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&o&&(i+=t.layout.span)),super(i,r),this.discriminator=t,this.usesPrefixDiscriminator=o,this.defaultLayout=e,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(f){return a(f)},this.configGetSourceVariant=function(f){a=f.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let r;const o=this.discriminator,i=o.decode(t,e);let a=this.registry[i];if(a===void 0){let f=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(f=o.layout.span),r=this.makeDestinationObject(),r[o.property]=i,r[a.property]=this.defaultLayout.decode(t,e+f)}else r=a.decode(t,e);return r}encode(t,e,r){r===void 0&&(r=0);const o=this.getSourceVariant(t);if(o===void 0){const i=this.discriminator,a=this.defaultLayout;let f=0;return this.usesPrefixDiscriminator&&(f=i.layout.span),i.encode(t[i.property],e,r),f+a.encode(t[a.property],e,r+f)}return o.encode(t,e,r)}addVariant(t,e,r){const o=new L0(this,t,e,r);return this.registry[t]=o,o}getVariant(t,e){let r=t;return Vt.isBuffer(t)&&(e===void 0&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}}class L0 extends De{constructor(t,e,r,o){if(!(t instanceof jc))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&o===void 0&&(o=r,r=null),r){if(!(r instanceof De))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,o),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+o):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){r===void 0&&(r=0);let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=o;if(this.layout&&(this.layout.encode(t[this.property],e,r+o),i+=this.layout.getSpan(e,r+o),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class P0 extends De{constructor(t,e){if(!(t instanceof Or&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Or||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let o=this.length;if(this.length instanceof Or&&(o=t.length),!(Vt.isBuffer(t)&&o===t.length))throw new TypeError(O0("Blob.encode",this)+" requires (length "+o+") Buffer as src");if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,o,"hex"),this.length instanceof Or&&this.length.encode(o,e,r),o}}var U0=(n,t,e)=>new qc(n,t,e),F0=n=>new wi(1,n),dr=n=>new wi(4,n),D0=n=>new N0(n),pr=n=>new C0(n),we=(n,t,e)=>new M0(n,t,e),Yc=(n,t,e)=>new jc(n,t,e),vn=(n,t)=>new P0(n,t);class H0 extends mi{constructor(t){super(-1,t),this.property=t,this.layout=we([dr("length"),dr("lengthPadding"),vn(U0(dr(),-8),"chars")],this.property)}encode(t,e,r=0){if(t==null)return this.layout.span;const o={chars:Vt.from(t,"utf8")};return this.layout.encode(o,e,r)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return dr().span+dr().span+new Yr(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function bi(n){return new H0(n)}function We(n){return vn(32,n)}const Ke=Yc(dr("instruction"));Ke.addVariant(0,we([pr("lamports"),pr("space"),We("owner")]),"createAccount");Ke.addVariant(1,we([We("owner")]),"assign");Ke.addVariant(2,we([pr("lamports")]),"transfer");Ke.addVariant(3,we([We("base"),bi("seed"),pr("lamports"),pr("space"),We("owner")]),"createAccountWithSeed");Ke.addVariant(4,we([We("authorized")]),"advanceNonceAccount");Ke.addVariant(5,we([pr("lamports")]),"withdrawNonceAccount");Ke.addVariant(6,we([We("authorized")]),"initializeNonceAccount");Ke.addVariant(7,we([We("authorized")]),"authorizeNonceAccount");Ke.addVariant(8,we([pr("space")]),"allocate");Ke.addVariant(9,we([We("base"),bi("seed"),pr("space"),We("owner")]),"allocateWithSeed");Ke.addVariant(10,we([We("base"),bi("seed"),We("owner")]),"assignWithSeed");Ke.addVariant(11,we([pr("lamports"),bi("seed"),We("owner")]),"transferWithSeed");Math.max(...Object.values(Ke.registry).map(n=>n.span));class z0 extends mi{constructor(t,e,r,o){super(t.span,o),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}function xa(n){return new z0(vn(32),t=>new ut(t),t=>t.toBuffer(),n)}we([dr("version"),dr("state"),xa("authorizedPubkey"),xa("nonce"),we([D0("lamportsPerSignature")],"feeCalculator")]);new ut("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new ut("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var ka={exports:{}};(function(n,t){var e=typeof self<"u"?self:B0,r=function(){function i(){this.fetch=!1,this.DOMException=e.DOMException}return i.prototype=e,new i}();(function(i){(function(a){var f={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function d(s){return s&&DataView.prototype.isPrototypeOf(s)}if(f.arrayBuffer)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=ArrayBuffer.isView||function(s){return s&&I.indexOf(Object.prototype.toString.call(s))>-1};function N(s){if(typeof s!="string"&&(s=String(s)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(s))throw new TypeError("Invalid character in header field name");return s.toLowerCase()}function L(s){return typeof s!="string"&&(s=String(s)),s}function P(s){var l={next:function(){var E=s.shift();return{done:E===void 0,value:E}}};return f.iterable&&(l[Symbol.iterator]=function(){return l}),l}function H(s){this.map={},s instanceof H?s.forEach(function(l,E){this.append(E,l)},this):Array.isArray(s)?s.forEach(function(l){this.append(l[0],l[1])},this):s&&Object.getOwnPropertyNames(s).forEach(function(l){this.append(l,s[l])},this)}H.prototype.append=function(s,l){s=N(s),l=L(l);var E=this.map[s];this.map[s]=E?E+", "+l:l},H.prototype.delete=function(s){delete this.map[N(s)]},H.prototype.get=function(s){return s=N(s),this.has(s)?this.map[s]:null},H.prototype.has=function(s){return this.map.hasOwnProperty(N(s))},H.prototype.set=function(s,l){this.map[N(s)]=L(l)},H.prototype.forEach=function(s,l){for(var E in this.map)this.map.hasOwnProperty(E)&&s.call(l,this.map[E],E,this)},H.prototype.keys=function(){var s=[];return this.forEach(function(l,E){s.push(E)}),P(s)},H.prototype.values=function(){var s=[];return this.forEach(function(l){s.push(l)}),P(s)},H.prototype.entries=function(){var s=[];return this.forEach(function(l,E){s.push([E,l])}),P(s)},f.iterable&&(H.prototype[Symbol.iterator]=H.prototype.entries);function F(s){if(s.bodyUsed)return Promise.reject(new TypeError("Already read"));s.bodyUsed=!0}function B(s){return new Promise(function(l,E){s.onload=function(){l(s.result)},s.onerror=function(){E(s.error)}})}function W(s){var l=new FileReader,E=B(l);return l.readAsArrayBuffer(s),E}function K(s){var l=new FileReader,E=B(l);return l.readAsText(s),E}function U(s){for(var l=new Uint8Array(s),E=new Array(l.length),S=0;S<l.length;S++)E[S]=String.fromCharCode(l[S]);return E.join("")}function tt(s){if(s.slice)return s.slice(0);var l=new Uint8Array(s.byteLength);return l.set(new Uint8Array(s)),l.buffer}function at(){return this.bodyUsed=!1,this._initBody=function(s){this._bodyInit=s,s?typeof s=="string"?this._bodyText=s:f.blob&&Blob.prototype.isPrototypeOf(s)?this._bodyBlob=s:f.formData&&FormData.prototype.isPrototypeOf(s)?this._bodyFormData=s:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)?this._bodyText=s.toString():f.arrayBuffer&&f.blob&&d(s)?(this._bodyArrayBuffer=tt(s.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(s)||b(s))?this._bodyArrayBuffer=tt(s):this._bodyText=s=Object.prototype.toString.call(s):this._bodyText="",this.headers.get("content-type")||(typeof s=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var s=F(this);if(s)return s;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?F(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(W)}),this.text=function(){var s=F(this);if(s)return s;if(this._bodyBlob)return K(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var st=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function nt(s){var l=s.toUpperCase();return st.indexOf(l)>-1?l:s}function it(s,l){l=l||{};var E=l.body;if(s instanceof it){if(s.bodyUsed)throw new TypeError("Already read");this.url=s.url,this.credentials=s.credentials,l.headers||(this.headers=new H(s.headers)),this.method=s.method,this.mode=s.mode,this.signal=s.signal,!E&&s._bodyInit!=null&&(E=s._bodyInit,s.bodyUsed=!0)}else this.url=String(s);if(this.credentials=l.credentials||this.credentials||"same-origin",(l.headers||!this.headers)&&(this.headers=new H(l.headers)),this.method=nt(l.method||this.method||"GET"),this.mode=l.mode||this.mode||null,this.signal=l.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&E)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(E)}it.prototype.clone=function(){return new it(this,{body:this._bodyInit})};function j(s){var l=new FormData;return s.trim().split("&").forEach(function(E){if(E){var S=E.split("="),x=S.shift().replace(/\+/g," "),R=S.join("=").replace(/\+/g," ");l.append(decodeURIComponent(x),decodeURIComponent(R))}}),l}function $(s){var l=new H,E=s.replace(/\r?\n[\t ]+/g," ");return E.split(/\r?\n/).forEach(function(S){var x=S.split(":"),R=x.shift().trim();if(R){var g=x.join(":").trim();l.append(R,g)}}),l}at.call(it.prototype);function G(s,l){l||(l={}),this.type="default",this.status=l.status===void 0?200:l.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in l?l.statusText:"OK",this.headers=new H(l.headers),this.url=l.url||"",this._initBody(s)}at.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new H(this.headers),url:this.url})},G.error=function(){var s=new G(null,{status:0,statusText:""});return s.type="error",s};var T=[301,302,303,307,308];G.redirect=function(s,l){if(T.indexOf(l)===-1)throw new RangeError("Invalid status code");return new G(null,{status:l,headers:{location:s}})},a.DOMException=i.DOMException;try{new a.DOMException}catch{a.DOMException=function(l,E){this.message=l,this.name=E;var S=Error(l);this.stack=S.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function A(s,l){return new Promise(function(E,S){var x=new it(s,l);if(x.signal&&x.signal.aborted)return S(new a.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function g(){R.abort()}R.onload=function(){var h={status:R.status,statusText:R.statusText,headers:$(R.getAllResponseHeaders()||"")};h.url="responseURL"in R?R.responseURL:h.headers.get("X-Request-URL");var c="response"in R?R.response:R.responseText;E(new G(c,h))},R.onerror=function(){S(new TypeError("Network request failed"))},R.ontimeout=function(){S(new TypeError("Network request failed"))},R.onabort=function(){S(new a.DOMException("Aborted","AbortError"))},R.open(x.method,x.url,!0),x.credentials==="include"?R.withCredentials=!0:x.credentials==="omit"&&(R.withCredentials=!1),"responseType"in R&&f.blob&&(R.responseType="blob"),x.headers.forEach(function(h,c){R.setRequestHeader(c,h)}),x.signal&&(x.signal.addEventListener("abort",g),R.onreadystatechange=function(){R.readyState===4&&x.signal.removeEventListener("abort",g)}),R.send(typeof x._bodyInit>"u"?null:x._bodyInit)})}return A.polyfill=!0,i.fetch||(i.fetch=A,i.Headers=H,i.Request=it,i.Response=G),a.Headers=H,a.Request=it,a.Response=G,a.fetch=A,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;t=o.fetch,t.default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,n.exports=t})(ka,ka.exports);Ce.rustEnum([Ce.struct([],"uninitialized"),Ce.struct([Ce.option(Ce.publicKey(),"authorityAddress")],"buffer"),Ce.struct([Ce.publicKey("programdataAddress")],"program"),Ce.struct([Ce.u64("slot"),Ce.option(Ce.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Ce.u32());function yo(n){return new Zc(vn(8),t=>gs.fromBuffer(t),t=>t.toBuffer(),n)}function Fn(n){return new Zc(vn(32),t=>new ut(t),t=>t.toBuffer(),n)}function go(n,t){return new K0(n,t)}class Zc extends mi{constructor(t,e,r,o){super(t.span,o),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}class K0 extends mi{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=dr()}encode(t,e,r=0){return t==null?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(t,e,r+4)+4)}decode(t,e=0){const r=this.discriminator.decode(t,e);if(r===0)return null;if(r===1)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}class gs extends Yr{toBuffer(){const t=super.toArray().reverse(),e=Vt.from(t);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const r=Vt.alloc(8);return e.copy(r),r}static fromBuffer(t){if(t.length!==8)throw new Error(`Invalid buffer length: ${t.length}`);return new gs([...t].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}}we([Fn("mint"),Fn("owner"),yo("amount"),go(Fn(),"delegate"),(n=>{const t=Yc(F0("discriminator"),null,n);return t.addVariant(0,we([]),"uninitialized"),t.addVariant(1,we([]),"initialized"),t.addVariant(2,we([]),"frozen"),t})("state"),go(yo(),"isNative"),yo("delegatedAmount"),go(Fn(),"closeAuthority")]);new ut("11111111111111111111111111111111");window.Buffer=wt;const q0="https://api.devnet.solana.com",W0="DP9kZHS77pbTuTHKNsaxqFjrUboFLGXvyCQsxYvWM26c",$0="aggregator_v2";let mo=new ut(W0);const wo=document.getElementById("program-id"),V0=document.getElementById("aggregator-pda"),Lo=document.getElementById("refresh-button"),va=document.getElementById("loading-indicator"),ti=document.getElementById("error-message"),ar=document.getElementById("token-table-body"),G0=document.getElementById("last-updated");function j0(n){ti.textContent=`Error: ${n}`,ti.style.display="block",console.error(n)}function Y0(){ti.textContent="",ti.style.display="none"}function Ta(n,t,e="devnet"){n.innerHTML="";const r=document.createElement("a");r.href=`https://solscan.io/account/${t}?cluster=${e}`,r.textContent=t,r.target="_blank",r.rel="noopener noreferrer",n.appendChild(r)}function bo(n){const t=wt.from(n),e=t.indexOf(0),r=e===-1?t:t.subarray(0,e);return new TextDecoder("utf-8").decode(r)}async function Eo(){console.log("Attempting to fetch data..."),Y0(),va.style.display="inline",Lo.disabled=!0;try{const n=new Oc(q0,"confirmed");(!wo.hasChildNodes()||wo.textContent==="Loading...")&&Ta(wo,mo.toBase58(),"devnet");const[t]=await ut.findProgramAddressSync([wt.from($0)],mo);Ta(V0,t.toBase58(),"devnet"),console.log(`Aggregator PDA: ${t.toBase58()}`);const e=await n.getAccountInfo(t);if(!e)throw ar.innerHTML='<tr><td colspan="5">Aggregator account not found.</td></tr>',new Error(`Aggregator account (${t.toBase58()}) not found. Has it been initialized?`);if(e.owner.toBase58()!==mo.toBase58())throw ar.innerHTML='<tr><td colspan="5">Account owner mismatch.</td></tr>',new Error(`Account owner (${e.owner.toBase58()}) does not match program ID.`);console.log("Account data fetched, attempting to decode..."),ar.innerHTML='<tr><td colspan="5">Decoding data...</td></tr>';const r=e.data.subarray(0,8);console.log(`Discriminator (hex): ${r.toString("hex")}`);const o=8,i=new ut(e.data.subarray(o,o+32)),a=o+32,f=e.data.readUInt32LE(a),d=a+4,I=e.data.readUInt32LE(d);console.log(`Decoded Header: Authority=${i.toBase58()}, TotalTokens=${f}, VecLen=${I}`),I!==f&&console.warn(`Warning: Decoded vector length (${I}) does not match totalTokens field (${f}). Using vecLen.`);let N=d+4;const L=[];let P=new Yr(0);const H=146;for(let B=0;B<I;B++){if(N+H>e.data.length)throw new Error(`Buffer overflow detected while reading token ${B+1}. Expected size ${H}, remaining buffer ${e.data.length-N}`);const W=e.data.subarray(N,N+H),K=W.subarray(0,10),U=new Yr(W.subarray(10,18),"le"),tt=W.subarray(18,82),at=W.subarray(82,146),st=bo(tt),nt=bo(at);P=P.add(U),L.push({symbol:bo(K),dominance:U.toString(),address:st,priceFeedId:nt,authority:i.toBase58()}),N+=H}console.log(`Successfully decoded ${L.length} tokens.`),ar.innerHTML="",L.length===0?ar.innerHTML='<tr><td colspan="5">No token data found in the aggregator account.</td></tr>':L.forEach((B,W)=>{const K=ar.insertRow();K.insertCell(0).textContent=W+1,K.insertCell(1).textContent=B.symbol;try{const nt=parseFloat(B.dominance)/1e10*100;K.insertCell(2).textContent=nt.toFixed(3)+"%"}catch(st){console.error(`Error calculating dominance for token ${B.symbol}:`,st),K.insertCell(2).textContent="Error"}const U=K.insertCell(3),tt=document.createElement("a");tt.href=`https://solscan.io/token/${B.address}?cluster=mainnet`,tt.textContent=B.address,tt.target="_blank",tt.rel="noopener noreferrer",U.appendChild(tt);const at=K.insertCell(4);at.textContent=B.priceFeedId});const F=document.getElementById("total-dominance-cell");if(F)try{const B=parseFloat(P.toString());if(isNaN(B))throw new Error("Total dominance calculation resulted in NaN");const W=B/1e10*100;F.textContent=W.toFixed(3)+"%"}catch(B){console.error("Error calculating or displaying total dominance:",B),F.textContent="Error"}else console.warn("Total dominance cell not found.");G0.textContent=new Date().toLocaleString()}catch(n){console.error("Failed to fetch or display data:",n),j0(n.message||"An unknown error occurred."),(ar.innerHTML.includes("Decoding data...")||ar.innerHTML==="")&&(ar.innerHTML=`<tr><td colspan="5">Error loading data: ${n.message}</td></tr>`)}finally{va.style.display="none",Lo.disabled=!1}}document.addEventListener("DOMContentLoaded",()=>{console.log("DOM Loaded."),Lo.addEventListener("click",Eo),Eo();const n=5*60*1e3;setInterval(Eo,n),console.log(`Auto-refresh enabled every ${n/1e3/60} minutes.`)});
