var Pc=Object.defineProperty;var Uc=(n,t,e)=>t in n?Pc(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var pe=(n,t,e)=>Uc(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function Dn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Fn(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),e}var En={exports:{}};const Dc={},Fc=Object.freeze(Object.defineProperty({__proto__:null,default:Dc},Symbol.toStringTag,{value:"Module"})),Hc=Fn(Fc);var zc=En.exports,oo;function Es(){return oo||(oo=1,function(n){(function(t,e){function r(E,o){if(!E)throw new Error(o||"Assertion failed")}function s(E,o){E.super_=o;var f=function(){};f.prototype=o.prototype,E.prototype=new f,E.prototype.constructor=E}function i(E,o,f){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((o==="le"||o==="be")&&(f=o,o=10),this._init(E||0,o||10,f||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Hc.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,f){return o.cmp(f)>0?o:f},i.min=function(o,f){return o.cmp(f)<0?o:f},i.prototype._init=function(o,f,m){if(typeof o=="number")return this._initNumber(o,f,m);if(typeof o=="object")return this._initArray(o,f,m);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),o=o.toString().replace(/\s+/g,"");var R=0;o[0]==="-"&&(R++,this.negative=1),R<o.length&&(f===16?this._parseHex(o,R,m):(this._parseBase(o,f,R),m==="le"&&this._initArray(this.toArray(),f,m)))},i.prototype._initNumber=function(o,f,m){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),f,m)},i.prototype._initArray=function(o,f,m){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var S,w,y=0;if(m==="be")for(R=o.length-1,S=0;R>=0;R-=3)w=o[R]|o[R-1]<<8|o[R-2]<<16,this.words[S]|=w<<y&67108863,this.words[S+1]=w>>>26-y&67108863,y+=24,y>=26&&(y-=26,S++);else if(m==="le")for(R=0,S=0;R<o.length;R+=3)w=o[R]|o[R+1]<<8|o[R+2]<<16,this.words[S]|=w<<y&67108863,this.words[S+1]=w>>>26-y&67108863,y+=24,y>=26&&(y-=26,S++);return this._strip()};function u(E,o){var f=E.charCodeAt(o);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;r(!1,"Invalid character in "+E)}function d(E,o,f){var m=u(E,f);return f-1>=o&&(m|=u(E,f-1)<<4),m}i.prototype._parseHex=function(o,f,m){this.length=Math.ceil((o.length-f)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var S=0,w=0,y;if(m==="be")for(R=o.length-1;R>=f;R-=2)y=d(o,f,R)<<S,this.words[w]|=y&67108863,S>=18?(S-=18,w+=1,this.words[w]|=y>>>26):S+=8;else{var h=o.length-f;for(R=h%2===0?f+1:f;R<o.length;R+=2)y=d(o,f,R)<<S,this.words[w]|=y&67108863,S>=18?(S-=18,w+=1,this.words[w]|=y>>>26):S+=8}this._strip()};function _(E,o,f,m){for(var R=0,S=0,w=Math.min(E.length,f),y=o;y<w;y++){var h=E.charCodeAt(y)-48;R*=m,h>=49?S=h-49+10:h>=17?S=h-17+10:S=h,r(h>=0&&S<m,"Invalid character"),R+=S}return R}i.prototype._parseBase=function(o,f,m){this.words=[0],this.length=1;for(var R=0,S=1;S<=67108863;S*=f)R++;R--,S=S/f|0;for(var w=o.length-m,y=w%R,h=Math.min(w,w-y)+m,c=0,l=m;l<h;l+=R)c=_(o,l,l+R,f),this.imuln(S),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(y!==0){var b=1;for(c=_(o,l,o.length,f),l=0;l<y;l++)b*=f;this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var f=0;f<this.length;f++)o.words[f]=this.words[f];o.length=this.length,o.negative=this.negative,o.red=this.red};function I(E,o){E.words=o.words,E.length=o.length,E.negative=o.negative,E.red=o.red}if(i.prototype._move=function(o){I(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{i.prototype.inspect=x}else i.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,f){o=o||10,f=f|0||1;var m;if(o===16||o==="hex"){m="";for(var R=0,S=0,w=0;w<this.length;w++){var y=this.words[w],h=((y<<R|S)&16777215).toString(16);S=y>>>24-R&16777215,R+=2,R>=26&&(R-=26,w--),S!==0||w!==this.length-1?m=B[6-h.length]+h+m:m=h+m}for(S!==0&&(m=S.toString(16)+m);m.length%f!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(o===(o|0)&&o>=2&&o<=36){var c=k[o],l=C[o];m="";var b=this.clone();for(b.negative=0;!b.isZero();){var T=b.modrn(l).toString(o);b=b.idivn(l),b.isZero()?m=T+m:m=B[c-T.length]+T+m}for(this.isZero()&&(m="0"+m);m.length%f!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(o,f){return this.toArrayLike(a,o,f)}),i.prototype.toArray=function(o,f){return this.toArrayLike(Array,o,f)};var N=function(o,f){return o.allocUnsafe?o.allocUnsafe(f):new o(f)};i.prototype.toArrayLike=function(o,f,m){this._strip();var R=this.byteLength(),S=m||Math.max(1,R);r(R<=S,"byte array longer than desired length"),r(S>0,"Requested array length <= 0");var w=N(o,S),y=f==="le"?"LE":"BE";return this["_toArrayLike"+y](w,R),w},i.prototype._toArrayLikeLE=function(o,f){for(var m=0,R=0,S=0,w=0;S<this.length;S++){var y=this.words[S]<<w|R;o[m++]=y&255,m<o.length&&(o[m++]=y>>8&255),m<o.length&&(o[m++]=y>>16&255),w===6?(m<o.length&&(o[m++]=y>>24&255),R=0,w=0):(R=y>>>24,w+=2)}if(m<o.length)for(o[m++]=R;m<o.length;)o[m++]=0},i.prototype._toArrayLikeBE=function(o,f){for(var m=o.length-1,R=0,S=0,w=0;S<this.length;S++){var y=this.words[S]<<w|R;o[m--]=y&255,m>=0&&(o[m--]=y>>8&255),m>=0&&(o[m--]=y>>16&255),w===6?(m>=0&&(o[m--]=y>>24&255),R=0,w=0):(R=y>>>24,w+=2)}if(m>=0)for(o[m--]=R;m>=0;)o[m--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var f=o,m=0;return f>=4096&&(m+=13,f>>>=13),f>=64&&(m+=7,f>>>=7),f>=8&&(m+=4,f>>>=4),f>=2&&(m+=2,f>>>=2),m+f},i.prototype._zeroBits=function(o){if(o===0)return 26;var f=o,m=0;return(f&8191)===0&&(m+=13,f>>>=13),(f&127)===0&&(m+=7,f>>>=7),(f&15)===0&&(m+=4,f>>>=4),(f&3)===0&&(m+=2,f>>>=2),(f&1)===0&&m++,m},i.prototype.bitLength=function(){var o=this.words[this.length-1],f=this._countBits(o);return(this.length-1)*26+f};function v(E){for(var o=new Array(E.bitLength()),f=0;f<o.length;f++){var m=f/26|0,R=f%26;o[f]=E.words[m]>>>R&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,f=0;f<this.length;f++){var m=this._zeroBits(this.words[f]);if(o+=m,m!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var f=0;f<o.length;f++)this.words[f]=this.words[f]|o.words[f];return this._strip()},i.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var f;this.length>o.length?f=o:f=this;for(var m=0;m<f.length;m++)this.words[m]=this.words[m]&o.words[m];return this.length=f.length,this._strip()},i.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var f,m;this.length>o.length?(f=this,m=o):(f=o,m=this);for(var R=0;R<m.length;R++)this.words[R]=f.words[R]^m.words[R];if(this!==f)for(;R<f.length;R++)this.words[R]=f.words[R];return this.length=f.length,this._strip()},i.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var f=Math.ceil(o/26)|0,m=o%26;this._expand(f),m>0&&f--;for(var R=0;R<f;R++)this.words[R]=~this.words[R]&67108863;return m>0&&(this.words[R]=~this.words[R]&67108863>>26-m),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,f){r(typeof o=="number"&&o>=0);var m=o/26|0,R=o%26;return this._expand(m+1),f?this.words[m]=this.words[m]|1<<R:this.words[m]=this.words[m]&~(1<<R),this._strip()},i.prototype.iadd=function(o){var f;if(this.negative!==0&&o.negative===0)return this.negative=0,f=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,f=this.isub(o),o.negative=1,f._normSign();var m,R;this.length>o.length?(m=this,R=o):(m=o,R=this);for(var S=0,w=0;w<R.length;w++)f=(m.words[w]|0)+(R.words[w]|0)+S,this.words[w]=f&67108863,S=f>>>26;for(;S!==0&&w<m.length;w++)f=(m.words[w]|0)+S,this.words[w]=f&67108863,S=f>>>26;if(this.length=m.length,S!==0)this.words[this.length]=S,this.length++;else if(m!==this)for(;w<m.length;w++)this.words[w]=m.words[w];return this},i.prototype.add=function(o){var f;return o.negative!==0&&this.negative===0?(o.negative=0,f=this.sub(o),o.negative^=1,f):o.negative===0&&this.negative!==0?(this.negative=0,f=o.sub(this),this.negative=1,f):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var f=this.iadd(o);return o.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var m=this.cmp(o);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,S;m>0?(R=this,S=o):(R=o,S=this);for(var w=0,y=0;y<S.length;y++)f=(R.words[y]|0)-(S.words[y]|0)+w,w=f>>26,this.words[y]=f&67108863;for(;w!==0&&y<R.length;y++)f=(R.words[y]|0)+w,w=f>>26,this.words[y]=f&67108863;if(w===0&&y<R.length&&R!==this)for(;y<R.length;y++)this.words[y]=R.words[y];return this.length=Math.max(this.length,y),R!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function U(E,o,f){f.negative=o.negative^E.negative;var m=E.length+o.length|0;f.length=m,m=m-1|0;var R=E.words[0]|0,S=o.words[0]|0,w=R*S,y=w&67108863,h=w/67108864|0;f.words[0]=y;for(var c=1;c<m;c++){for(var l=h>>>26,b=h&67108863,T=Math.min(c,o.length-1),P=Math.max(0,c-E.length+1);P<=T;P++){var j=c-P|0;R=E.words[j]|0,S=o.words[P]|0,w=R*S+b,l+=w/67108864|0,b=w&67108863}f.words[c]=b|0,h=l|0}return h!==0?f.words[c]=h|0:f.length--,f._strip()}var H=function(o,f,m){var R=o.words,S=f.words,w=m.words,y=0,h,c,l,b=R[0]|0,T=b&8191,P=b>>>13,j=R[1]|0,et=j&8191,ut=j>>>13,Tt=R[2]|0,yt=Tt&8191,mt=Tt>>>13,zt=R[3]|0,Rt=zt&8191,It=zt>>>13,dr=R[4]|0,Nt=dr&8191,Dt=dr>>>13,vr=R[5]|0,Lt=vr&8191,Pt=vr>>>13,Be=R[6]|0,Ft=Be&8191,$t=Be>>>13,Le=R[7]|0,Vt=Le&8191,A=Le>>>13,p=R[8]|0,g=p&8191,O=p>>>13,D=R[9]|0,z=D&8191,Y=D>>>13,wt=S[0]|0,gt=wt&8191,pt=wt>>>13,Ut=S[1]|0,dt=Ut&8191,Yt=Ut>>>13,Js=S[2]|0,Zt=Js&8191,Xt=Js>>>13,Qs=S[3]|0,Jt=Qs&8191,Qt=Qs>>>13,to=S[4]|0,te=to&8191,ee=to>>>13,eo=S[5]|0,re=eo&8191,ne=eo>>>13,ro=S[6]|0,ie=ro&8191,se=ro>>>13,no=S[7]|0,oe=no&8191,ae=no>>>13,io=S[8]|0,ce=io&8191,ue=io>>>13,so=S[9]|0,le=so&8191,he=so>>>13;m.negative=o.negative^f.negative,m.length=19,h=Math.imul(T,gt),c=Math.imul(T,pt),c=c+Math.imul(P,gt)|0,l=Math.imul(P,pt);var ii=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(ii>>>26)|0,ii&=67108863,h=Math.imul(et,gt),c=Math.imul(et,pt),c=c+Math.imul(ut,gt)|0,l=Math.imul(ut,pt),h=h+Math.imul(T,dt)|0,c=c+Math.imul(T,Yt)|0,c=c+Math.imul(P,dt)|0,l=l+Math.imul(P,Yt)|0;var si=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(si>>>26)|0,si&=67108863,h=Math.imul(yt,gt),c=Math.imul(yt,pt),c=c+Math.imul(mt,gt)|0,l=Math.imul(mt,pt),h=h+Math.imul(et,dt)|0,c=c+Math.imul(et,Yt)|0,c=c+Math.imul(ut,dt)|0,l=l+Math.imul(ut,Yt)|0,h=h+Math.imul(T,Zt)|0,c=c+Math.imul(T,Xt)|0,c=c+Math.imul(P,Zt)|0,l=l+Math.imul(P,Xt)|0;var oi=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(oi>>>26)|0,oi&=67108863,h=Math.imul(Rt,gt),c=Math.imul(Rt,pt),c=c+Math.imul(It,gt)|0,l=Math.imul(It,pt),h=h+Math.imul(yt,dt)|0,c=c+Math.imul(yt,Yt)|0,c=c+Math.imul(mt,dt)|0,l=l+Math.imul(mt,Yt)|0,h=h+Math.imul(et,Zt)|0,c=c+Math.imul(et,Xt)|0,c=c+Math.imul(ut,Zt)|0,l=l+Math.imul(ut,Xt)|0,h=h+Math.imul(T,Jt)|0,c=c+Math.imul(T,Qt)|0,c=c+Math.imul(P,Jt)|0,l=l+Math.imul(P,Qt)|0;var ai=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(ai>>>26)|0,ai&=67108863,h=Math.imul(Nt,gt),c=Math.imul(Nt,pt),c=c+Math.imul(Dt,gt)|0,l=Math.imul(Dt,pt),h=h+Math.imul(Rt,dt)|0,c=c+Math.imul(Rt,Yt)|0,c=c+Math.imul(It,dt)|0,l=l+Math.imul(It,Yt)|0,h=h+Math.imul(yt,Zt)|0,c=c+Math.imul(yt,Xt)|0,c=c+Math.imul(mt,Zt)|0,l=l+Math.imul(mt,Xt)|0,h=h+Math.imul(et,Jt)|0,c=c+Math.imul(et,Qt)|0,c=c+Math.imul(ut,Jt)|0,l=l+Math.imul(ut,Qt)|0,h=h+Math.imul(T,te)|0,c=c+Math.imul(T,ee)|0,c=c+Math.imul(P,te)|0,l=l+Math.imul(P,ee)|0;var ci=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(ci>>>26)|0,ci&=67108863,h=Math.imul(Lt,gt),c=Math.imul(Lt,pt),c=c+Math.imul(Pt,gt)|0,l=Math.imul(Pt,pt),h=h+Math.imul(Nt,dt)|0,c=c+Math.imul(Nt,Yt)|0,c=c+Math.imul(Dt,dt)|0,l=l+Math.imul(Dt,Yt)|0,h=h+Math.imul(Rt,Zt)|0,c=c+Math.imul(Rt,Xt)|0,c=c+Math.imul(It,Zt)|0,l=l+Math.imul(It,Xt)|0,h=h+Math.imul(yt,Jt)|0,c=c+Math.imul(yt,Qt)|0,c=c+Math.imul(mt,Jt)|0,l=l+Math.imul(mt,Qt)|0,h=h+Math.imul(et,te)|0,c=c+Math.imul(et,ee)|0,c=c+Math.imul(ut,te)|0,l=l+Math.imul(ut,ee)|0,h=h+Math.imul(T,re)|0,c=c+Math.imul(T,ne)|0,c=c+Math.imul(P,re)|0,l=l+Math.imul(P,ne)|0;var ui=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(ui>>>26)|0,ui&=67108863,h=Math.imul(Ft,gt),c=Math.imul(Ft,pt),c=c+Math.imul($t,gt)|0,l=Math.imul($t,pt),h=h+Math.imul(Lt,dt)|0,c=c+Math.imul(Lt,Yt)|0,c=c+Math.imul(Pt,dt)|0,l=l+Math.imul(Pt,Yt)|0,h=h+Math.imul(Nt,Zt)|0,c=c+Math.imul(Nt,Xt)|0,c=c+Math.imul(Dt,Zt)|0,l=l+Math.imul(Dt,Xt)|0,h=h+Math.imul(Rt,Jt)|0,c=c+Math.imul(Rt,Qt)|0,c=c+Math.imul(It,Jt)|0,l=l+Math.imul(It,Qt)|0,h=h+Math.imul(yt,te)|0,c=c+Math.imul(yt,ee)|0,c=c+Math.imul(mt,te)|0,l=l+Math.imul(mt,ee)|0,h=h+Math.imul(et,re)|0,c=c+Math.imul(et,ne)|0,c=c+Math.imul(ut,re)|0,l=l+Math.imul(ut,ne)|0,h=h+Math.imul(T,ie)|0,c=c+Math.imul(T,se)|0,c=c+Math.imul(P,ie)|0,l=l+Math.imul(P,se)|0;var li=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(li>>>26)|0,li&=67108863,h=Math.imul(Vt,gt),c=Math.imul(Vt,pt),c=c+Math.imul(A,gt)|0,l=Math.imul(A,pt),h=h+Math.imul(Ft,dt)|0,c=c+Math.imul(Ft,Yt)|0,c=c+Math.imul($t,dt)|0,l=l+Math.imul($t,Yt)|0,h=h+Math.imul(Lt,Zt)|0,c=c+Math.imul(Lt,Xt)|0,c=c+Math.imul(Pt,Zt)|0,l=l+Math.imul(Pt,Xt)|0,h=h+Math.imul(Nt,Jt)|0,c=c+Math.imul(Nt,Qt)|0,c=c+Math.imul(Dt,Jt)|0,l=l+Math.imul(Dt,Qt)|0,h=h+Math.imul(Rt,te)|0,c=c+Math.imul(Rt,ee)|0,c=c+Math.imul(It,te)|0,l=l+Math.imul(It,ee)|0,h=h+Math.imul(yt,re)|0,c=c+Math.imul(yt,ne)|0,c=c+Math.imul(mt,re)|0,l=l+Math.imul(mt,ne)|0,h=h+Math.imul(et,ie)|0,c=c+Math.imul(et,se)|0,c=c+Math.imul(ut,ie)|0,l=l+Math.imul(ut,se)|0,h=h+Math.imul(T,oe)|0,c=c+Math.imul(T,ae)|0,c=c+Math.imul(P,oe)|0,l=l+Math.imul(P,ae)|0;var hi=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(hi>>>26)|0,hi&=67108863,h=Math.imul(g,gt),c=Math.imul(g,pt),c=c+Math.imul(O,gt)|0,l=Math.imul(O,pt),h=h+Math.imul(Vt,dt)|0,c=c+Math.imul(Vt,Yt)|0,c=c+Math.imul(A,dt)|0,l=l+Math.imul(A,Yt)|0,h=h+Math.imul(Ft,Zt)|0,c=c+Math.imul(Ft,Xt)|0,c=c+Math.imul($t,Zt)|0,l=l+Math.imul($t,Xt)|0,h=h+Math.imul(Lt,Jt)|0,c=c+Math.imul(Lt,Qt)|0,c=c+Math.imul(Pt,Jt)|0,l=l+Math.imul(Pt,Qt)|0,h=h+Math.imul(Nt,te)|0,c=c+Math.imul(Nt,ee)|0,c=c+Math.imul(Dt,te)|0,l=l+Math.imul(Dt,ee)|0,h=h+Math.imul(Rt,re)|0,c=c+Math.imul(Rt,ne)|0,c=c+Math.imul(It,re)|0,l=l+Math.imul(It,ne)|0,h=h+Math.imul(yt,ie)|0,c=c+Math.imul(yt,se)|0,c=c+Math.imul(mt,ie)|0,l=l+Math.imul(mt,se)|0,h=h+Math.imul(et,oe)|0,c=c+Math.imul(et,ae)|0,c=c+Math.imul(ut,oe)|0,l=l+Math.imul(ut,ae)|0,h=h+Math.imul(T,ce)|0,c=c+Math.imul(T,ue)|0,c=c+Math.imul(P,ce)|0,l=l+Math.imul(P,ue)|0;var fi=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(fi>>>26)|0,fi&=67108863,h=Math.imul(z,gt),c=Math.imul(z,pt),c=c+Math.imul(Y,gt)|0,l=Math.imul(Y,pt),h=h+Math.imul(g,dt)|0,c=c+Math.imul(g,Yt)|0,c=c+Math.imul(O,dt)|0,l=l+Math.imul(O,Yt)|0,h=h+Math.imul(Vt,Zt)|0,c=c+Math.imul(Vt,Xt)|0,c=c+Math.imul(A,Zt)|0,l=l+Math.imul(A,Xt)|0,h=h+Math.imul(Ft,Jt)|0,c=c+Math.imul(Ft,Qt)|0,c=c+Math.imul($t,Jt)|0,l=l+Math.imul($t,Qt)|0,h=h+Math.imul(Lt,te)|0,c=c+Math.imul(Lt,ee)|0,c=c+Math.imul(Pt,te)|0,l=l+Math.imul(Pt,ee)|0,h=h+Math.imul(Nt,re)|0,c=c+Math.imul(Nt,ne)|0,c=c+Math.imul(Dt,re)|0,l=l+Math.imul(Dt,ne)|0,h=h+Math.imul(Rt,ie)|0,c=c+Math.imul(Rt,se)|0,c=c+Math.imul(It,ie)|0,l=l+Math.imul(It,se)|0,h=h+Math.imul(yt,oe)|0,c=c+Math.imul(yt,ae)|0,c=c+Math.imul(mt,oe)|0,l=l+Math.imul(mt,ae)|0,h=h+Math.imul(et,ce)|0,c=c+Math.imul(et,ue)|0,c=c+Math.imul(ut,ce)|0,l=l+Math.imul(ut,ue)|0,h=h+Math.imul(T,le)|0,c=c+Math.imul(T,he)|0,c=c+Math.imul(P,le)|0,l=l+Math.imul(P,he)|0;var di=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(di>>>26)|0,di&=67108863,h=Math.imul(z,dt),c=Math.imul(z,Yt),c=c+Math.imul(Y,dt)|0,l=Math.imul(Y,Yt),h=h+Math.imul(g,Zt)|0,c=c+Math.imul(g,Xt)|0,c=c+Math.imul(O,Zt)|0,l=l+Math.imul(O,Xt)|0,h=h+Math.imul(Vt,Jt)|0,c=c+Math.imul(Vt,Qt)|0,c=c+Math.imul(A,Jt)|0,l=l+Math.imul(A,Qt)|0,h=h+Math.imul(Ft,te)|0,c=c+Math.imul(Ft,ee)|0,c=c+Math.imul($t,te)|0,l=l+Math.imul($t,ee)|0,h=h+Math.imul(Lt,re)|0,c=c+Math.imul(Lt,ne)|0,c=c+Math.imul(Pt,re)|0,l=l+Math.imul(Pt,ne)|0,h=h+Math.imul(Nt,ie)|0,c=c+Math.imul(Nt,se)|0,c=c+Math.imul(Dt,ie)|0,l=l+Math.imul(Dt,se)|0,h=h+Math.imul(Rt,oe)|0,c=c+Math.imul(Rt,ae)|0,c=c+Math.imul(It,oe)|0,l=l+Math.imul(It,ae)|0,h=h+Math.imul(yt,ce)|0,c=c+Math.imul(yt,ue)|0,c=c+Math.imul(mt,ce)|0,l=l+Math.imul(mt,ue)|0,h=h+Math.imul(et,le)|0,c=c+Math.imul(et,he)|0,c=c+Math.imul(ut,le)|0,l=l+Math.imul(ut,he)|0;var pi=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(pi>>>26)|0,pi&=67108863,h=Math.imul(z,Zt),c=Math.imul(z,Xt),c=c+Math.imul(Y,Zt)|0,l=Math.imul(Y,Xt),h=h+Math.imul(g,Jt)|0,c=c+Math.imul(g,Qt)|0,c=c+Math.imul(O,Jt)|0,l=l+Math.imul(O,Qt)|0,h=h+Math.imul(Vt,te)|0,c=c+Math.imul(Vt,ee)|0,c=c+Math.imul(A,te)|0,l=l+Math.imul(A,ee)|0,h=h+Math.imul(Ft,re)|0,c=c+Math.imul(Ft,ne)|0,c=c+Math.imul($t,re)|0,l=l+Math.imul($t,ne)|0,h=h+Math.imul(Lt,ie)|0,c=c+Math.imul(Lt,se)|0,c=c+Math.imul(Pt,ie)|0,l=l+Math.imul(Pt,se)|0,h=h+Math.imul(Nt,oe)|0,c=c+Math.imul(Nt,ae)|0,c=c+Math.imul(Dt,oe)|0,l=l+Math.imul(Dt,ae)|0,h=h+Math.imul(Rt,ce)|0,c=c+Math.imul(Rt,ue)|0,c=c+Math.imul(It,ce)|0,l=l+Math.imul(It,ue)|0,h=h+Math.imul(yt,le)|0,c=c+Math.imul(yt,he)|0,c=c+Math.imul(mt,le)|0,l=l+Math.imul(mt,he)|0;var yi=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(yi>>>26)|0,yi&=67108863,h=Math.imul(z,Jt),c=Math.imul(z,Qt),c=c+Math.imul(Y,Jt)|0,l=Math.imul(Y,Qt),h=h+Math.imul(g,te)|0,c=c+Math.imul(g,ee)|0,c=c+Math.imul(O,te)|0,l=l+Math.imul(O,ee)|0,h=h+Math.imul(Vt,re)|0,c=c+Math.imul(Vt,ne)|0,c=c+Math.imul(A,re)|0,l=l+Math.imul(A,ne)|0,h=h+Math.imul(Ft,ie)|0,c=c+Math.imul(Ft,se)|0,c=c+Math.imul($t,ie)|0,l=l+Math.imul($t,se)|0,h=h+Math.imul(Lt,oe)|0,c=c+Math.imul(Lt,ae)|0,c=c+Math.imul(Pt,oe)|0,l=l+Math.imul(Pt,ae)|0,h=h+Math.imul(Nt,ce)|0,c=c+Math.imul(Nt,ue)|0,c=c+Math.imul(Dt,ce)|0,l=l+Math.imul(Dt,ue)|0,h=h+Math.imul(Rt,le)|0,c=c+Math.imul(Rt,he)|0,c=c+Math.imul(It,le)|0,l=l+Math.imul(It,he)|0;var gi=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(gi>>>26)|0,gi&=67108863,h=Math.imul(z,te),c=Math.imul(z,ee),c=c+Math.imul(Y,te)|0,l=Math.imul(Y,ee),h=h+Math.imul(g,re)|0,c=c+Math.imul(g,ne)|0,c=c+Math.imul(O,re)|0,l=l+Math.imul(O,ne)|0,h=h+Math.imul(Vt,ie)|0,c=c+Math.imul(Vt,se)|0,c=c+Math.imul(A,ie)|0,l=l+Math.imul(A,se)|0,h=h+Math.imul(Ft,oe)|0,c=c+Math.imul(Ft,ae)|0,c=c+Math.imul($t,oe)|0,l=l+Math.imul($t,ae)|0,h=h+Math.imul(Lt,ce)|0,c=c+Math.imul(Lt,ue)|0,c=c+Math.imul(Pt,ce)|0,l=l+Math.imul(Pt,ue)|0,h=h+Math.imul(Nt,le)|0,c=c+Math.imul(Nt,he)|0,c=c+Math.imul(Dt,le)|0,l=l+Math.imul(Dt,he)|0;var mi=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(mi>>>26)|0,mi&=67108863,h=Math.imul(z,re),c=Math.imul(z,ne),c=c+Math.imul(Y,re)|0,l=Math.imul(Y,ne),h=h+Math.imul(g,ie)|0,c=c+Math.imul(g,se)|0,c=c+Math.imul(O,ie)|0,l=l+Math.imul(O,se)|0,h=h+Math.imul(Vt,oe)|0,c=c+Math.imul(Vt,ae)|0,c=c+Math.imul(A,oe)|0,l=l+Math.imul(A,ae)|0,h=h+Math.imul(Ft,ce)|0,c=c+Math.imul(Ft,ue)|0,c=c+Math.imul($t,ce)|0,l=l+Math.imul($t,ue)|0,h=h+Math.imul(Lt,le)|0,c=c+Math.imul(Lt,he)|0,c=c+Math.imul(Pt,le)|0,l=l+Math.imul(Pt,he)|0;var wi=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(wi>>>26)|0,wi&=67108863,h=Math.imul(z,ie),c=Math.imul(z,se),c=c+Math.imul(Y,ie)|0,l=Math.imul(Y,se),h=h+Math.imul(g,oe)|0,c=c+Math.imul(g,ae)|0,c=c+Math.imul(O,oe)|0,l=l+Math.imul(O,ae)|0,h=h+Math.imul(Vt,ce)|0,c=c+Math.imul(Vt,ue)|0,c=c+Math.imul(A,ce)|0,l=l+Math.imul(A,ue)|0,h=h+Math.imul(Ft,le)|0,c=c+Math.imul(Ft,he)|0,c=c+Math.imul($t,le)|0,l=l+Math.imul($t,he)|0;var bi=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(bi>>>26)|0,bi&=67108863,h=Math.imul(z,oe),c=Math.imul(z,ae),c=c+Math.imul(Y,oe)|0,l=Math.imul(Y,ae),h=h+Math.imul(g,ce)|0,c=c+Math.imul(g,ue)|0,c=c+Math.imul(O,ce)|0,l=l+Math.imul(O,ue)|0,h=h+Math.imul(Vt,le)|0,c=c+Math.imul(Vt,he)|0,c=c+Math.imul(A,le)|0,l=l+Math.imul(A,he)|0;var _i=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(_i>>>26)|0,_i&=67108863,h=Math.imul(z,ce),c=Math.imul(z,ue),c=c+Math.imul(Y,ce)|0,l=Math.imul(Y,ue),h=h+Math.imul(g,le)|0,c=c+Math.imul(g,he)|0,c=c+Math.imul(O,le)|0,l=l+Math.imul(O,he)|0;var Ei=(y+h|0)+((c&8191)<<13)|0;y=(l+(c>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,h=Math.imul(z,le),c=Math.imul(z,he),c=c+Math.imul(Y,le)|0,l=Math.imul(Y,he);var Ri=(y+h|0)+((c&8191)<<13)|0;return y=(l+(c>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,w[0]=ii,w[1]=si,w[2]=oi,w[3]=ai,w[4]=ci,w[5]=ui,w[6]=li,w[7]=hi,w[8]=fi,w[9]=di,w[10]=pi,w[11]=yi,w[12]=gi,w[13]=mi,w[14]=wi,w[15]=bi,w[16]=_i,w[17]=Ei,w[18]=Ri,y!==0&&(w[19]=y,m.length++),m};Math.imul||(H=U);function L(E,o,f){f.negative=o.negative^E.negative,f.length=E.length+o.length;for(var m=0,R=0,S=0;S<f.length-1;S++){var w=R;R=0;for(var y=m&67108863,h=Math.min(S,o.length-1),c=Math.max(0,S-E.length+1);c<=h;c++){var l=S-c,b=E.words[l]|0,T=o.words[c]|0,P=b*T,j=P&67108863;w=w+(P/67108864|0)|0,j=j+y|0,y=j&67108863,w=w+(j>>>26)|0,R+=w>>>26,w&=67108863}f.words[S]=y,m=w,w=R}return m!==0?f.words[S]=m:f.length--,f._strip()}function X(E,o,f){return L(E,o,f)}i.prototype.mulTo=function(o,f){var m,R=this.length+o.length;return this.length===10&&o.length===10?m=H(this,o,f):R<63?m=U(this,o,f):R<1024?m=L(this,o,f):m=X(this,o,f),m},i.prototype.mul=function(o){var f=new i(null);return f.words=new Array(this.length+o.length),this.mulTo(o,f)},i.prototype.mulf=function(o){var f=new i(null);return f.words=new Array(this.length+o.length),X(this,o,f)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var f=o<0;f&&(o=-o),r(typeof o=="number"),r(o<67108864);for(var m=0,R=0;R<this.length;R++){var S=(this.words[R]|0)*o,w=(S&67108863)+(m&67108863);m>>=26,m+=S/67108864|0,m+=w>>>26,this.words[R]=w&67108863}return m!==0&&(this.words[R]=m,this.length++),f?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var f=v(o);if(f.length===0)return new i(1);for(var m=this,R=0;R<f.length&&f[R]===0;R++,m=m.sqr());if(++R<f.length)for(var S=m.sqr();R<f.length;R++,S=S.sqr())f[R]!==0&&(m=m.mul(S));return m},i.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var f=o%26,m=(o-f)/26,R=67108863>>>26-f<<26-f,S;if(f!==0){var w=0;for(S=0;S<this.length;S++){var y=this.words[S]&R,h=(this.words[S]|0)-y<<f;this.words[S]=h|w,w=y>>>26-f}w&&(this.words[S]=w,this.length++)}if(m!==0){for(S=this.length-1;S>=0;S--)this.words[S+m]=this.words[S];for(S=0;S<m;S++)this.words[S]=0;this.length+=m}return this._strip()},i.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,f,m){r(typeof o=="number"&&o>=0);var R;f?R=(f-f%26)/26:R=0;var S=o%26,w=Math.min((o-S)/26,this.length),y=67108863^67108863>>>S<<S,h=m;if(R-=w,R=Math.max(0,R),h){for(var c=0;c<w;c++)h.words[c]=this.words[c];h.length=w}if(w!==0)if(this.length>w)for(this.length-=w,c=0;c<this.length;c++)this.words[c]=this.words[c+w];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(l!==0||c>=R);c--){var b=this.words[c]|0;this.words[c]=l<<26-S|b>>>S,l=b&y}return h&&l!==0&&(h.words[h.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,f,m){return r(this.negative===0),this.iushrn(o,f,m)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var f=o%26,m=(o-f)/26,R=1<<f;if(this.length<=m)return!1;var S=this.words[m];return!!(S&R)},i.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var f=o%26,m=(o-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(f!==0&&m++,this.length=Math.min(m,this.length),f!==0){var R=67108863^67108863>>>f<<f;this.words[this.length-1]&=R}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,f,m){var R=o.length+m,S;this._expand(R);var w,y=0;for(S=0;S<o.length;S++){w=(this.words[S+m]|0)+y;var h=(o.words[S]|0)*f;w-=h&67108863,y=(w>>26)-(h/67108864|0),this.words[S+m]=w&67108863}for(;S<this.length-m;S++)w=(this.words[S+m]|0)+y,y=w>>26,this.words[S+m]=w&67108863;if(y===0)return this._strip();for(r(y===-1),y=0,S=0;S<this.length;S++)w=-(this.words[S]|0)+y,y=w>>26,this.words[S]=w&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,f){var m=this.length-o.length,R=this.clone(),S=o,w=S.words[S.length-1]|0,y=this._countBits(w);m=26-y,m!==0&&(S=S.ushln(m),R.iushln(m),w=S.words[S.length-1]|0);var h=R.length-S.length,c;if(f!=="mod"){c=new i(null),c.length=h+1,c.words=new Array(c.length);for(var l=0;l<c.length;l++)c.words[l]=0}var b=R.clone()._ishlnsubmul(S,1,h);b.negative===0&&(R=b,c&&(c.words[h]=1));for(var T=h-1;T>=0;T--){var P=(R.words[S.length+T]|0)*67108864+(R.words[S.length+T-1]|0);for(P=Math.min(P/w|0,67108863),R._ishlnsubmul(S,P,T);R.negative!==0;)P--,R.negative=0,R._ishlnsubmul(S,1,T),R.isZero()||(R.negative^=1);c&&(c.words[T]=P)}return c&&c._strip(),R._strip(),f!=="div"&&m!==0&&R.iushrn(m),{div:c||null,mod:R}},i.prototype.divmod=function(o,f,m){if(r(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var R,S,w;return this.negative!==0&&o.negative===0?(w=this.neg().divmod(o,f),f!=="mod"&&(R=w.div.neg()),f!=="div"&&(S=w.mod.neg(),m&&S.negative!==0&&S.iadd(o)),{div:R,mod:S}):this.negative===0&&o.negative!==0?(w=this.divmod(o.neg(),f),f!=="mod"&&(R=w.div.neg()),{div:R,mod:w.mod}):(this.negative&o.negative)!==0?(w=this.neg().divmod(o.neg(),f),f!=="div"&&(S=w.mod.neg(),m&&S.negative!==0&&S.isub(o)),{div:w.div,mod:S}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?f==="div"?{div:this.divn(o.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,f)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var f=this.divmod(o);if(f.mod.isZero())return f.div;var m=f.div.negative!==0?f.mod.isub(o):f.mod,R=o.ushrn(1),S=o.andln(1),w=m.cmp(R);return w<0||S===1&&w===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(o){var f=o<0;f&&(o=-o),r(o<=67108863);for(var m=(1<<26)%o,R=0,S=this.length-1;S>=0;S--)R=(m*R+(this.words[S]|0))%o;return f?-R:R},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var f=o<0;f&&(o=-o),r(o<=67108863);for(var m=0,R=this.length-1;R>=0;R--){var S=(this.words[R]|0)+m*67108864;this.words[R]=S/o|0,m=S%o}return this._strip(),f?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var f=this,m=o.clone();f.negative!==0?f=f.umod(o):f=f.clone();for(var R=new i(1),S=new i(0),w=new i(0),y=new i(1),h=0;f.isEven()&&m.isEven();)f.iushrn(1),m.iushrn(1),++h;for(var c=m.clone(),l=f.clone();!f.isZero();){for(var b=0,T=1;(f.words[0]&T)===0&&b<26;++b,T<<=1);if(b>0)for(f.iushrn(b);b-- >0;)(R.isOdd()||S.isOdd())&&(R.iadd(c),S.isub(l)),R.iushrn(1),S.iushrn(1);for(var P=0,j=1;(m.words[0]&j)===0&&P<26;++P,j<<=1);if(P>0)for(m.iushrn(P);P-- >0;)(w.isOdd()||y.isOdd())&&(w.iadd(c),y.isub(l)),w.iushrn(1),y.iushrn(1);f.cmp(m)>=0?(f.isub(m),R.isub(w),S.isub(y)):(m.isub(f),w.isub(R),y.isub(S))}return{a:w,b:y,gcd:m.iushln(h)}},i.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var f=this,m=o.clone();f.negative!==0?f=f.umod(o):f=f.clone();for(var R=new i(1),S=new i(0),w=m.clone();f.cmpn(1)>0&&m.cmpn(1)>0;){for(var y=0,h=1;(f.words[0]&h)===0&&y<26;++y,h<<=1);if(y>0)for(f.iushrn(y);y-- >0;)R.isOdd()&&R.iadd(w),R.iushrn(1);for(var c=0,l=1;(m.words[0]&l)===0&&c<26;++c,l<<=1);if(c>0)for(m.iushrn(c);c-- >0;)S.isOdd()&&S.iadd(w),S.iushrn(1);f.cmp(m)>=0?(f.isub(m),R.isub(S)):(m.isub(f),S.isub(R))}var b;return f.cmpn(1)===0?b=R:b=S,b.cmpn(0)<0&&b.iadd(o),b},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var f=this.clone(),m=o.clone();f.negative=0,m.negative=0;for(var R=0;f.isEven()&&m.isEven();R++)f.iushrn(1),m.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;m.isEven();)m.iushrn(1);var S=f.cmp(m);if(S<0){var w=f;f=m,m=w}else if(S===0||m.cmpn(1)===0)break;f.isub(m)}while(!0);return m.iushln(R)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){r(typeof o=="number");var f=o%26,m=(o-f)/26,R=1<<f;if(this.length<=m)return this._expand(m+1),this.words[m]|=R,this;for(var S=R,w=m;S!==0&&w<this.length;w++){var y=this.words[w]|0;y+=S,S=y>>>26,y&=67108863,this.words[w]=y}return S!==0&&(this.words[w]=S,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var f=o<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var m;if(this.length>1)m=1;else{f&&(o=-o),r(o<=67108863,"Number is too big");var R=this.words[0]|0;m=R===o?0:R<o?-1:1}return this.negative!==0?-m|0:m},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var f=this.ucmp(o);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var f=0,m=this.length-1;m>=0;m--){var R=this.words[m]|0,S=o.words[m]|0;if(R!==S){R<S?f=-1:R>S&&(f=1);break}}return f},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new q(o)},i.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Z={k256:null,p224:null,p192:null,p25519:null};function Q(E,o){this.name=E,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Q.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},Q.prototype.ireduce=function(o){var f=o,m;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),m=f.bitLength();while(m>this.n);var R=m<this.n?-1:f.ucmp(this.p);return R===0?(f.words[0]=0,f.length=1):R>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},Q.prototype.split=function(o,f){o.iushrn(this.n,0,f)},Q.prototype.imulK=function(o){return o.imul(this.k)};function st(){Q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(st,Q),st.prototype.split=function(o,f){for(var m=4194303,R=Math.min(o.length,9),S=0;S<R;S++)f.words[S]=o.words[S];if(f.length=R,o.length<=9){o.words[0]=0,o.length=1;return}var w=o.words[9];for(f.words[f.length++]=w&m,S=10;S<o.length;S++){var y=o.words[S]|0;o.words[S-10]=(y&m)<<4|w>>>22,w=y}w>>>=22,o.words[S-10]=w,w===0&&o.length>10?o.length-=10:o.length-=9},st.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var f=0,m=0;m<o.length;m++){var R=o.words[m]|0;f+=R*977,o.words[m]=f&67108863,f=R*64+(f/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function nt(){Q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(nt,Q);function V(){Q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(V,Q);function K(){Q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(K,Q),K.prototype.imulK=function(o){for(var f=0,m=0;m<o.length;m++){var R=(o.words[m]|0)*19+f,S=R&67108863;R>>>=26,o.words[m]=S,f=R}return f!==0&&(o.words[o.length++]=f),o},i._prime=function(o){if(Z[o])return Z[o];var f;if(o==="k256")f=new st;else if(o==="p224")f=new nt;else if(o==="p192")f=new V;else if(o==="p25519")f=new K;else throw new Error("Unknown prime "+o);return Z[o]=f,f};function q(E){if(typeof E=="string"){var o=i._prime(E);this.m=o.p,this.prime=o}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}q.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},q.prototype._verify2=function(o,f){r((o.negative|f.negative)===0,"red works only with positives"),r(o.red&&o.red===f.red,"red works only with red numbers")},q.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(I(o,o.umod(this.m)._forceRed(this)),o)},q.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},q.prototype.add=function(o,f){this._verify2(o,f);var m=o.add(f);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},q.prototype.iadd=function(o,f){this._verify2(o,f);var m=o.iadd(f);return m.cmp(this.m)>=0&&m.isub(this.m),m},q.prototype.sub=function(o,f){this._verify2(o,f);var m=o.sub(f);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},q.prototype.isub=function(o,f){this._verify2(o,f);var m=o.isub(f);return m.cmpn(0)<0&&m.iadd(this.m),m},q.prototype.shl=function(o,f){return this._verify1(o),this.imod(o.ushln(f))},q.prototype.imul=function(o,f){return this._verify2(o,f),this.imod(o.imul(f))},q.prototype.mul=function(o,f){return this._verify2(o,f),this.imod(o.mul(f))},q.prototype.isqr=function(o){return this.imul(o,o.clone())},q.prototype.sqr=function(o){return this.mul(o,o)},q.prototype.sqrt=function(o){if(o.isZero())return o.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var m=this.m.add(new i(1)).iushrn(2);return this.pow(o,m)}for(var R=this.m.subn(1),S=0;!R.isZero()&&R.andln(1)===0;)S++,R.iushrn(1);r(!R.isZero());var w=new i(1).toRed(this),y=w.redNeg(),h=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,h).cmp(y)!==0;)c.redIAdd(y);for(var l=this.pow(c,R),b=this.pow(o,R.addn(1).iushrn(1)),T=this.pow(o,R),P=S;T.cmp(w)!==0;){for(var j=T,et=0;j.cmp(w)!==0;et++)j=j.redSqr();r(et<P);var ut=this.pow(l,new i(1).iushln(P-et-1));b=b.redMul(ut),l=ut.redSqr(),T=T.redMul(l),P=et}return b},q.prototype.invm=function(o){var f=o._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},q.prototype.pow=function(o,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return o.clone();var m=4,R=new Array(1<<m);R[0]=new i(1).toRed(this),R[1]=o;for(var S=2;S<R.length;S++)R[S]=this.mul(R[S-1],o);var w=R[0],y=0,h=0,c=f.bitLength()%26;for(c===0&&(c=26),S=f.length-1;S>=0;S--){for(var l=f.words[S],b=c-1;b>=0;b--){var T=l>>b&1;if(w!==R[0]&&(w=this.sqr(w)),T===0&&y===0){h=0;continue}y<<=1,y|=T,h++,!(h!==m&&(S!==0||b!==0))&&(w=this.mul(w,R[y]),h=0,y=0)}c=26}return w},q.prototype.convertTo=function(o){var f=o.umod(this.m);return f===o?f.clone():f},q.prototype.convertFrom=function(o){var f=o.clone();return f.red=null,f},i.mont=function(o){return new F(o)};function F(E){q.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(F,q),F.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},F.prototype.convertFrom=function(o){var f=this.imod(o.mul(this.rinv));return f.red=null,f},F.prototype.imul=function(o,f){if(o.isZero()||f.isZero())return o.words[0]=0,o.length=1,o;var m=o.imul(f),R=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=m.isub(R).iushrn(this.shift),w=S;return S.cmp(this.m)>=0?w=S.isub(this.m):S.cmpn(0)<0&&(w=S.iadd(this.m)),w._forceRed(this)},F.prototype.mul=function(o,f){if(o.isZero()||f.isZero())return new i(0)._forceRed(this);var m=o.mul(f),R=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=m.isub(R).iushrn(this.shift),w=S;return S.cmp(this.m)>=0?w=S.isub(this.m):S.cmpn(0)<0&&(w=S.iadd(this.m)),w._forceRed(this)},F.prototype.invm=function(o){var f=this.imod(o._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(n,zc)}(En)),En.exports}var Kc=Es();const Zr=Dn(Kc);var Si={},Wr={},ao;function qc(){if(ao)return Wr;ao=1,Wr.byteLength=u,Wr.toByteArray=_,Wr.fromByteArray=B;for(var n=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)n[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function a(k){var C=k.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=k.indexOf("=");N===-1&&(N=C);var v=N===C?0:4-N%4;return[N,v]}function u(k){var C=a(k),N=C[0],v=C[1];return(N+v)*3/4-v}function d(k,C,N){return(C+N)*3/4-N}function _(k){var C,N=a(k),v=N[0],U=N[1],H=new e(d(k,v,U)),L=0,X=U>0?v-4:v,Z;for(Z=0;Z<X;Z+=4)C=t[k.charCodeAt(Z)]<<18|t[k.charCodeAt(Z+1)]<<12|t[k.charCodeAt(Z+2)]<<6|t[k.charCodeAt(Z+3)],H[L++]=C>>16&255,H[L++]=C>>8&255,H[L++]=C&255;return U===2&&(C=t[k.charCodeAt(Z)]<<2|t[k.charCodeAt(Z+1)]>>4,H[L++]=C&255),U===1&&(C=t[k.charCodeAt(Z)]<<10|t[k.charCodeAt(Z+1)]<<4|t[k.charCodeAt(Z+2)]>>2,H[L++]=C>>8&255,H[L++]=C&255),H}function I(k){return n[k>>18&63]+n[k>>12&63]+n[k>>6&63]+n[k&63]}function x(k,C,N){for(var v,U=[],H=C;H<N;H+=3)v=(k[H]<<16&16711680)+(k[H+1]<<8&65280)+(k[H+2]&255),U.push(I(v));return U.join("")}function B(k){for(var C,N=k.length,v=N%3,U=[],H=16383,L=0,X=N-v;L<X;L+=H)U.push(x(k,L,L+H>X?X:L+H));return v===1?(C=k[N-1],U.push(n[C>>2]+n[C<<4&63]+"==")):v===2&&(C=(k[N-2]<<8)+k[N-1],U.push(n[C>>10]+n[C>>4&63]+n[C<<2&63]+"=")),U.join("")}return Wr}var fn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var co;function Wc(){return co||(co=1,fn.read=function(n,t,e,r,s){var i,a,u=s*8-r-1,d=(1<<u)-1,_=d>>1,I=-7,x=e?s-1:0,B=e?-1:1,k=n[t+x];for(x+=B,i=k&(1<<-I)-1,k>>=-I,I+=u;I>0;i=i*256+n[t+x],x+=B,I-=8);for(a=i&(1<<-I)-1,i>>=-I,I+=r;I>0;a=a*256+n[t+x],x+=B,I-=8);if(i===0)i=1-_;else{if(i===d)return a?NaN:(k?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-_}return(k?-1:1)*a*Math.pow(2,i-r)},fn.write=function(n,t,e,r,s,i){var a,u,d,_=i*8-s-1,I=(1<<_)-1,x=I>>1,B=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=r?0:i-1,C=r?1:-1,N=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=I):(a=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+x>=1?t+=B/d:t+=B*Math.pow(2,1-x),t*d>=2&&(a++,d/=2),a+x>=I?(u=0,a=I):a+x>=1?(u=(t*d-1)*Math.pow(2,s),a=a+x):(u=t*Math.pow(2,x-1)*Math.pow(2,s),a=0));s>=8;n[e+k]=u&255,k+=C,u/=256,s-=8);for(a=a<<s|u,_+=s;_>0;n[e+k]=a&255,k+=C,a/=256,_-=8);n[e+k-C]|=N*128}),fn}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var uo;function Rs(){return uo||(uo=1,function(n){const t=qc(),e=Wc(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=u,n.SlowBuffer=H,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const A=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(A,p),A.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function a(A){if(A>s)throw new RangeError('The value "'+A+'" is invalid for option "size"');const p=new Uint8Array(A);return Object.setPrototypeOf(p,u.prototype),p}function u(A,p,g){if(typeof A=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(A)}return d(A,p,g)}u.poolSize=8192;function d(A,p,g){if(typeof A=="string")return B(A,p);if(ArrayBuffer.isView(A))return C(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(Be(A,ArrayBuffer)||A&&Be(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Be(A,SharedArrayBuffer)||A&&Be(A.buffer,SharedArrayBuffer)))return N(A,p,g);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=A.valueOf&&A.valueOf();if(O!=null&&O!==A)return u.from(O,p,g);const D=v(A);if(D)return D;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return u.from(A[Symbol.toPrimitive]("string"),p,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}u.from=function(A,p,g){return d(A,p,g)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function _(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function I(A,p,g){return _(A),A<=0?a(A):p!==void 0?typeof g=="string"?a(A).fill(p,g):a(A).fill(p):a(A)}u.alloc=function(A,p,g){return I(A,p,g)};function x(A){return _(A),a(A<0?0:U(A)|0)}u.allocUnsafe=function(A){return x(A)},u.allocUnsafeSlow=function(A){return x(A)};function B(A,p){if((typeof p!="string"||p==="")&&(p="utf8"),!u.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const g=L(A,p)|0;let O=a(g);const D=O.write(A,p);return D!==g&&(O=O.slice(0,D)),O}function k(A){const p=A.length<0?0:U(A.length)|0,g=a(p);for(let O=0;O<p;O+=1)g[O]=A[O]&255;return g}function C(A){if(Be(A,Uint8Array)){const p=new Uint8Array(A);return N(p.buffer,p.byteOffset,p.byteLength)}return k(A)}function N(A,p,g){if(p<0||A.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<p+(g||0))throw new RangeError('"length" is outside of buffer bounds');let O;return p===void 0&&g===void 0?O=new Uint8Array(A):g===void 0?O=new Uint8Array(A,p):O=new Uint8Array(A,p,g),Object.setPrototypeOf(O,u.prototype),O}function v(A){if(u.isBuffer(A)){const p=U(A.length)|0,g=a(p);return g.length===0||A.copy(g,0,0,p),g}if(A.length!==void 0)return typeof A.length!="number"||Ft(A.length)?a(0):k(A);if(A.type==="Buffer"&&Array.isArray(A.data))return k(A.data)}function U(A){if(A>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return A|0}function H(A){return+A!=A&&(A=0),u.alloc(+A)}u.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==u.prototype},u.compare=function(p,g){if(Be(p,Uint8Array)&&(p=u.from(p,p.offset,p.byteLength)),Be(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(p)||!u.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===g)return 0;let O=p.length,D=g.length;for(let z=0,Y=Math.min(O,D);z<Y;++z)if(p[z]!==g[z]){O=p[z],D=g[z];break}return O<D?-1:D<O?1:0},u.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(p,g){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return u.alloc(0);let O;if(g===void 0)for(g=0,O=0;O<p.length;++O)g+=p[O].length;const D=u.allocUnsafe(g);let z=0;for(O=0;O<p.length;++O){let Y=p[O];if(Be(Y,Uint8Array))z+Y.length>D.length?(u.isBuffer(Y)||(Y=u.from(Y)),Y.copy(D,z)):Uint8Array.prototype.set.call(D,Y,z);else if(u.isBuffer(Y))Y.copy(D,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=Y.length}return D};function L(A,p){if(u.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||Be(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const g=A.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&g===0)return 0;let D=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return Nt(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return Lt(A).length;default:if(D)return O?-1:Nt(A).length;p=(""+p).toLowerCase(),D=!0}}u.byteLength=L;function X(A,p,g){let O=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,p>>>=0,g<=p))return"";for(A||(A="utf8");;)switch(A){case"hex":return w(this,p,g);case"utf8":case"utf-8":return o(this,p,g);case"ascii":return R(this,p,g);case"latin1":case"binary":return S(this,p,g);case"base64":return E(this,p,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,p,g);default:if(O)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),O=!0}}u.prototype._isBuffer=!0;function Z(A,p,g){const O=A[p];A[p]=A[g],A[g]=O}u.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<p;g+=2)Z(this,g,g+1);return this},u.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<p;g+=4)Z(this,g,g+3),Z(this,g+1,g+2);return this},u.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<p;g+=8)Z(this,g,g+7),Z(this,g+1,g+6),Z(this,g+2,g+5),Z(this,g+3,g+4);return this},u.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?o(this,0,p):X.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(p){if(!u.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:u.compare(this,p)===0},u.prototype.inspect=function(){let p="";const g=n.INSPECT_MAX_BYTES;return p=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(p+=" ... "),"<Buffer "+p+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(p,g,O,D,z){if(Be(p,Uint8Array)&&(p=u.from(p,p.offset,p.byteLength)),!u.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(g===void 0&&(g=0),O===void 0&&(O=p?p.length:0),D===void 0&&(D=0),z===void 0&&(z=this.length),g<0||O>p.length||D<0||z>this.length)throw new RangeError("out of range index");if(D>=z&&g>=O)return 0;if(D>=z)return-1;if(g>=O)return 1;if(g>>>=0,O>>>=0,D>>>=0,z>>>=0,this===p)return 0;let Y=z-D,wt=O-g;const gt=Math.min(Y,wt),pt=this.slice(D,z),Ut=p.slice(g,O);for(let dt=0;dt<gt;++dt)if(pt[dt]!==Ut[dt]){Y=pt[dt],wt=Ut[dt];break}return Y<wt?-1:wt<Y?1:0};function Q(A,p,g,O,D){if(A.length===0)return-1;if(typeof g=="string"?(O=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,Ft(g)&&(g=D?0:A.length-1),g<0&&(g=A.length+g),g>=A.length){if(D)return-1;g=A.length-1}else if(g<0)if(D)g=0;else return-1;if(typeof p=="string"&&(p=u.from(p,O)),u.isBuffer(p))return p.length===0?-1:st(A,p,g,O,D);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?D?Uint8Array.prototype.indexOf.call(A,p,g):Uint8Array.prototype.lastIndexOf.call(A,p,g):st(A,[p],g,O,D);throw new TypeError("val must be string, number or Buffer")}function st(A,p,g,O,D){let z=1,Y=A.length,wt=p.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(A.length<2||p.length<2)return-1;z=2,Y/=2,wt/=2,g/=2}function gt(Ut,dt){return z===1?Ut[dt]:Ut.readUInt16BE(dt*z)}let pt;if(D){let Ut=-1;for(pt=g;pt<Y;pt++)if(gt(A,pt)===gt(p,Ut===-1?0:pt-Ut)){if(Ut===-1&&(Ut=pt),pt-Ut+1===wt)return Ut*z}else Ut!==-1&&(pt-=pt-Ut),Ut=-1}else for(g+wt>Y&&(g=Y-wt),pt=g;pt>=0;pt--){let Ut=!0;for(let dt=0;dt<wt;dt++)if(gt(A,pt+dt)!==gt(p,dt)){Ut=!1;break}if(Ut)return pt}return-1}u.prototype.includes=function(p,g,O){return this.indexOf(p,g,O)!==-1},u.prototype.indexOf=function(p,g,O){return Q(this,p,g,O,!0)},u.prototype.lastIndexOf=function(p,g,O){return Q(this,p,g,O,!1)};function nt(A,p,g,O){g=Number(g)||0;const D=A.length-g;O?(O=Number(O),O>D&&(O=D)):O=D;const z=p.length;O>z/2&&(O=z/2);let Y;for(Y=0;Y<O;++Y){const wt=parseInt(p.substr(Y*2,2),16);if(Ft(wt))return Y;A[g+Y]=wt}return Y}function V(A,p,g,O){return Pt(Nt(p,A.length-g),A,g,O)}function K(A,p,g,O){return Pt(Dt(p),A,g,O)}function q(A,p,g,O){return Pt(Lt(p),A,g,O)}function F(A,p,g,O){return Pt(vr(p,A.length-g),A,g,O)}u.prototype.write=function(p,g,O,D){if(g===void 0)D="utf8",O=this.length,g=0;else if(O===void 0&&typeof g=="string")D=g,O=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(O)?(O=O>>>0,D===void 0&&(D="utf8")):(D=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-g;if((O===void 0||O>z)&&(O=z),p.length>0&&(O<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");let Y=!1;for(;;)switch(D){case"hex":return nt(this,p,g,O);case"utf8":case"utf-8":return V(this,p,g,O);case"ascii":case"latin1":case"binary":return K(this,p,g,O);case"base64":return q(this,p,g,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,p,g,O);default:if(Y)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),Y=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(A,p,g){return p===0&&g===A.length?t.fromByteArray(A):t.fromByteArray(A.slice(p,g))}function o(A,p,g){g=Math.min(A.length,g);const O=[];let D=p;for(;D<g;){const z=A[D];let Y=null,wt=z>239?4:z>223?3:z>191?2:1;if(D+wt<=g){let gt,pt,Ut,dt;switch(wt){case 1:z<128&&(Y=z);break;case 2:gt=A[D+1],(gt&192)===128&&(dt=(z&31)<<6|gt&63,dt>127&&(Y=dt));break;case 3:gt=A[D+1],pt=A[D+2],(gt&192)===128&&(pt&192)===128&&(dt=(z&15)<<12|(gt&63)<<6|pt&63,dt>2047&&(dt<55296||dt>57343)&&(Y=dt));break;case 4:gt=A[D+1],pt=A[D+2],Ut=A[D+3],(gt&192)===128&&(pt&192)===128&&(Ut&192)===128&&(dt=(z&15)<<18|(gt&63)<<12|(pt&63)<<6|Ut&63,dt>65535&&dt<1114112&&(Y=dt))}}Y===null?(Y=65533,wt=1):Y>65535&&(Y-=65536,O.push(Y>>>10&1023|55296),Y=56320|Y&1023),O.push(Y),D+=wt}return m(O)}const f=4096;function m(A){const p=A.length;if(p<=f)return String.fromCharCode.apply(String,A);let g="",O=0;for(;O<p;)g+=String.fromCharCode.apply(String,A.slice(O,O+=f));return g}function R(A,p,g){let O="";g=Math.min(A.length,g);for(let D=p;D<g;++D)O+=String.fromCharCode(A[D]&127);return O}function S(A,p,g){let O="";g=Math.min(A.length,g);for(let D=p;D<g;++D)O+=String.fromCharCode(A[D]);return O}function w(A,p,g){const O=A.length;(!p||p<0)&&(p=0),(!g||g<0||g>O)&&(g=O);let D="";for(let z=p;z<g;++z)D+=$t[A[z]];return D}function y(A,p,g){const O=A.slice(p,g);let D="";for(let z=0;z<O.length-1;z+=2)D+=String.fromCharCode(O[z]+O[z+1]*256);return D}u.prototype.slice=function(p,g){const O=this.length;p=~~p,g=g===void 0?O:~~g,p<0?(p+=O,p<0&&(p=0)):p>O&&(p=O),g<0?(g+=O,g<0&&(g=0)):g>O&&(g=O),g<p&&(g=p);const D=this.subarray(p,g);return Object.setPrototypeOf(D,u.prototype),D};function h(A,p,g){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+p>g)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(p,g,O){p=p>>>0,g=g>>>0,O||h(p,g,this.length);let D=this[p],z=1,Y=0;for(;++Y<g&&(z*=256);)D+=this[p+Y]*z;return D},u.prototype.readUintBE=u.prototype.readUIntBE=function(p,g,O){p=p>>>0,g=g>>>0,O||h(p,g,this.length);let D=this[p+--g],z=1;for(;g>0&&(z*=256);)D+=this[p+--g]*z;return D},u.prototype.readUint8=u.prototype.readUInt8=function(p,g){return p=p>>>0,g||h(p,1,this.length),this[p]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(p,g){return p=p>>>0,g||h(p,2,this.length),this[p]|this[p+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(p,g){return p=p>>>0,g||h(p,2,this.length),this[p]<<8|this[p+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(p,g){return p=p>>>0,g||h(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(p,g){return p=p>>>0,g||h(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},u.prototype.readBigUInt64LE=Le(function(p){p=p>>>0,zt(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&Rt(p,this.length-8);const D=g+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,z=this[++p]+this[++p]*2**8+this[++p]*2**16+O*2**24;return BigInt(D)+(BigInt(z)<<BigInt(32))}),u.prototype.readBigUInt64BE=Le(function(p){p=p>>>0,zt(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&Rt(p,this.length-8);const D=g*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],z=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+O;return(BigInt(D)<<BigInt(32))+BigInt(z)}),u.prototype.readIntLE=function(p,g,O){p=p>>>0,g=g>>>0,O||h(p,g,this.length);let D=this[p],z=1,Y=0;for(;++Y<g&&(z*=256);)D+=this[p+Y]*z;return z*=128,D>=z&&(D-=Math.pow(2,8*g)),D},u.prototype.readIntBE=function(p,g,O){p=p>>>0,g=g>>>0,O||h(p,g,this.length);let D=g,z=1,Y=this[p+--D];for(;D>0&&(z*=256);)Y+=this[p+--D]*z;return z*=128,Y>=z&&(Y-=Math.pow(2,8*g)),Y},u.prototype.readInt8=function(p,g){return p=p>>>0,g||h(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},u.prototype.readInt16LE=function(p,g){p=p>>>0,g||h(p,2,this.length);const O=this[p]|this[p+1]<<8;return O&32768?O|4294901760:O},u.prototype.readInt16BE=function(p,g){p=p>>>0,g||h(p,2,this.length);const O=this[p+1]|this[p]<<8;return O&32768?O|4294901760:O},u.prototype.readInt32LE=function(p,g){return p=p>>>0,g||h(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},u.prototype.readInt32BE=function(p,g){return p=p>>>0,g||h(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},u.prototype.readBigInt64LE=Le(function(p){p=p>>>0,zt(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&Rt(p,this.length-8);const D=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(O<<24);return(BigInt(D)<<BigInt(32))+BigInt(g+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),u.prototype.readBigInt64BE=Le(function(p){p=p>>>0,zt(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&Rt(p,this.length-8);const D=(g<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(D)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+O)}),u.prototype.readFloatLE=function(p,g){return p=p>>>0,g||h(p,4,this.length),e.read(this,p,!0,23,4)},u.prototype.readFloatBE=function(p,g){return p=p>>>0,g||h(p,4,this.length),e.read(this,p,!1,23,4)},u.prototype.readDoubleLE=function(p,g){return p=p>>>0,g||h(p,8,this.length),e.read(this,p,!0,52,8)},u.prototype.readDoubleBE=function(p,g){return p=p>>>0,g||h(p,8,this.length),e.read(this,p,!1,52,8)};function c(A,p,g,O,D,z){if(!u.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>D||p<z)throw new RangeError('"value" argument is out of bounds');if(g+O>A.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(p,g,O,D){if(p=+p,g=g>>>0,O=O>>>0,!D){const wt=Math.pow(2,8*O)-1;c(this,p,g,O,wt,0)}let z=1,Y=0;for(this[g]=p&255;++Y<O&&(z*=256);)this[g+Y]=p/z&255;return g+O},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(p,g,O,D){if(p=+p,g=g>>>0,O=O>>>0,!D){const wt=Math.pow(2,8*O)-1;c(this,p,g,O,wt,0)}let z=O-1,Y=1;for(this[g+z]=p&255;--z>=0&&(Y*=256);)this[g+z]=p/Y&255;return g+O},u.prototype.writeUint8=u.prototype.writeUInt8=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,1,255,0),this[g]=p&255,g+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,2,65535,0),this[g]=p&255,this[g+1]=p>>>8,g+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,2,65535,0),this[g]=p>>>8,this[g+1]=p&255,g+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,4,4294967295,0),this[g+3]=p>>>24,this[g+2]=p>>>16,this[g+1]=p>>>8,this[g]=p&255,g+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,4,4294967295,0),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4};function l(A,p,g,O,D){mt(p,O,D,A,g,7);let z=Number(p&BigInt(4294967295));A[g++]=z,z=z>>8,A[g++]=z,z=z>>8,A[g++]=z,z=z>>8,A[g++]=z;let Y=Number(p>>BigInt(32)&BigInt(4294967295));return A[g++]=Y,Y=Y>>8,A[g++]=Y,Y=Y>>8,A[g++]=Y,Y=Y>>8,A[g++]=Y,g}function b(A,p,g,O,D){mt(p,O,D,A,g,7);let z=Number(p&BigInt(4294967295));A[g+7]=z,z=z>>8,A[g+6]=z,z=z>>8,A[g+5]=z,z=z>>8,A[g+4]=z;let Y=Number(p>>BigInt(32)&BigInt(4294967295));return A[g+3]=Y,Y=Y>>8,A[g+2]=Y,Y=Y>>8,A[g+1]=Y,Y=Y>>8,A[g]=Y,g+8}u.prototype.writeBigUInt64LE=Le(function(p,g=0){return l(this,p,g,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Le(function(p,g=0){return b(this,p,g,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(p,g,O,D){if(p=+p,g=g>>>0,!D){const gt=Math.pow(2,8*O-1);c(this,p,g,O,gt-1,-gt)}let z=0,Y=1,wt=0;for(this[g]=p&255;++z<O&&(Y*=256);)p<0&&wt===0&&this[g+z-1]!==0&&(wt=1),this[g+z]=(p/Y>>0)-wt&255;return g+O},u.prototype.writeIntBE=function(p,g,O,D){if(p=+p,g=g>>>0,!D){const gt=Math.pow(2,8*O-1);c(this,p,g,O,gt-1,-gt)}let z=O-1,Y=1,wt=0;for(this[g+z]=p&255;--z>=0&&(Y*=256);)p<0&&wt===0&&this[g+z+1]!==0&&(wt=1),this[g+z]=(p/Y>>0)-wt&255;return g+O},u.prototype.writeInt8=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,1,127,-128),p<0&&(p=255+p+1),this[g]=p&255,g+1},u.prototype.writeInt16LE=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,2,32767,-32768),this[g]=p&255,this[g+1]=p>>>8,g+2},u.prototype.writeInt16BE=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,2,32767,-32768),this[g]=p>>>8,this[g+1]=p&255,g+2},u.prototype.writeInt32LE=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,4,2147483647,-2147483648),this[g]=p&255,this[g+1]=p>>>8,this[g+2]=p>>>16,this[g+3]=p>>>24,g+4},u.prototype.writeInt32BE=function(p,g,O){return p=+p,g=g>>>0,O||c(this,p,g,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4},u.prototype.writeBigInt64LE=Le(function(p,g=0){return l(this,p,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Le(function(p,g=0){return b(this,p,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function T(A,p,g,O,D,z){if(g+O>A.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function P(A,p,g,O,D){return p=+p,g=g>>>0,D||T(A,p,g,4),e.write(A,p,g,O,23,4),g+4}u.prototype.writeFloatLE=function(p,g,O){return P(this,p,g,!0,O)},u.prototype.writeFloatBE=function(p,g,O){return P(this,p,g,!1,O)};function j(A,p,g,O,D){return p=+p,g=g>>>0,D||T(A,p,g,8),e.write(A,p,g,O,52,8),g+8}u.prototype.writeDoubleLE=function(p,g,O){return j(this,p,g,!0,O)},u.prototype.writeDoubleBE=function(p,g,O){return j(this,p,g,!1,O)},u.prototype.copy=function(p,g,O,D){if(!u.isBuffer(p))throw new TypeError("argument should be a Buffer");if(O||(O=0),!D&&D!==0&&(D=this.length),g>=p.length&&(g=p.length),g||(g=0),D>0&&D<O&&(D=O),D===O||p.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),p.length-g<D-O&&(D=p.length-g+O);const z=D-O;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,O,D):Uint8Array.prototype.set.call(p,this.subarray(O,D),g),z},u.prototype.fill=function(p,g,O,D){if(typeof p=="string"){if(typeof g=="string"?(D=g,g=0,O=this.length):typeof O=="string"&&(D=O,O=this.length),D!==void 0&&typeof D!="string")throw new TypeError("encoding must be a string");if(typeof D=="string"&&!u.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(p.length===1){const Y=p.charCodeAt(0);(D==="utf8"&&Y<128||D==="latin1")&&(p=Y)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(g<0||this.length<g||this.length<O)throw new RangeError("Out of range index");if(O<=g)return this;g=g>>>0,O=O===void 0?this.length:O>>>0,p||(p=0);let z;if(typeof p=="number")for(z=g;z<O;++z)this[z]=p;else{const Y=u.isBuffer(p)?p:u.from(p,D),wt=Y.length;if(wt===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(z=0;z<O-g;++z)this[z+g]=Y[z%wt]}return this};const et={};function ut(A,p,g){et[A]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(D){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:D,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}ut("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ut("ERR_INVALID_ARG_TYPE",function(A,p){return`The "${A}" argument must be of type number. Received type ${typeof p}`},TypeError),ut("ERR_OUT_OF_RANGE",function(A,p,g){let O=`The value of "${A}" is out of range.`,D=g;return Number.isInteger(g)&&Math.abs(g)>2**32?D=Tt(String(g)):typeof g=="bigint"&&(D=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(D=Tt(D)),D+="n"),O+=` It must be ${p}. Received ${D}`,O},RangeError);function Tt(A){let p="",g=A.length;const O=A[0]==="-"?1:0;for(;g>=O+4;g-=3)p=`_${A.slice(g-3,g)}${p}`;return`${A.slice(0,g)}${p}`}function yt(A,p,g){zt(p,"offset"),(A[p]===void 0||A[p+g]===void 0)&&Rt(p,A.length-(g+1))}function mt(A,p,g,O,D,z){if(A>g||A<p){const Y=typeof p=="bigint"?"n":"";let wt;throw p===0||p===BigInt(0)?wt=`>= 0${Y} and < 2${Y} ** ${(z+1)*8}${Y}`:wt=`>= -(2${Y} ** ${(z+1)*8-1}${Y}) and < 2 ** ${(z+1)*8-1}${Y}`,new et.ERR_OUT_OF_RANGE("value",wt,A)}yt(O,D,z)}function zt(A,p){if(typeof A!="number")throw new et.ERR_INVALID_ARG_TYPE(p,"number",A)}function Rt(A,p,g){throw Math.floor(A)!==A?(zt(A,g),new et.ERR_OUT_OF_RANGE("offset","an integer",A)):p<0?new et.ERR_BUFFER_OUT_OF_BOUNDS:new et.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,A)}const It=/[^+/0-9A-Za-z-_]/g;function dr(A){if(A=A.split("=")[0],A=A.trim().replace(It,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function Nt(A,p){p=p||1/0;let g;const O=A.length;let D=null;const z=[];for(let Y=0;Y<O;++Y){if(g=A.charCodeAt(Y),g>55295&&g<57344){if(!D){if(g>56319){(p-=3)>-1&&z.push(239,191,189);continue}else if(Y+1===O){(p-=3)>-1&&z.push(239,191,189);continue}D=g;continue}if(g<56320){(p-=3)>-1&&z.push(239,191,189),D=g;continue}g=(D-55296<<10|g-56320)+65536}else D&&(p-=3)>-1&&z.push(239,191,189);if(D=null,g<128){if((p-=1)<0)break;z.push(g)}else if(g<2048){if((p-=2)<0)break;z.push(g>>6|192,g&63|128)}else if(g<65536){if((p-=3)<0)break;z.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((p-=4)<0)break;z.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return z}function Dt(A){const p=[];for(let g=0;g<A.length;++g)p.push(A.charCodeAt(g)&255);return p}function vr(A,p){let g,O,D;const z=[];for(let Y=0;Y<A.length&&!((p-=2)<0);++Y)g=A.charCodeAt(Y),O=g>>8,D=g%256,z.push(D),z.push(O);return z}function Lt(A){return t.toByteArray(dr(A))}function Pt(A,p,g,O){let D;for(D=0;D<O&&!(D+g>=p.length||D>=A.length);++D)p[D+g]=A[D];return D}function Be(A,p){return A instanceof p||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===p.name}function Ft(A){return A!==A}const $t=function(){const A="0123456789abcdef",p=new Array(256);for(let g=0;g<16;++g){const O=g*16;for(let D=0;D<16;++D)p[O+D]=A[g]+A[D]}return p}();function Le(A){return typeof BigInt>"u"?Vt:A}function Vt(){throw new Error("BigInt not supported")}}(Si)),Si}var ht=Rs();function vn(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function $c(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function rn(n,...t){if(!$c(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function Vc(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");vn(n.outputLen),vn(n.blockLen)}function Nr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function ma(n,t){rn(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}const kr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gc(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Ai(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Fe(n,t){return n<<32-t|n>>>t}const lo=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function jc(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function ho(n){for(let t=0;t<n.length;t++)n[t]=jc(n[t])}typeof Uint8Array.from([]).toHex=="function"&&Uint8Array.fromHex;function Yc(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function Hn(n){return typeof n=="string"&&(n=Yc(n)),rn(n),n}function Zc(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];rn(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class Ss{clone(){return this._cloneInto()}}function As(n){const t=r=>n().update(Hn(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function wa(n=32){if(kr&&typeof kr.getRandomValues=="function")return kr.getRandomValues(new Uint8Array(n));if(kr&&typeof kr.randomBytes=="function")return Uint8Array.from(kr.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function Xc(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(e>>s&i),u=Number(e&i),d=r?4:0,_=r?0:4;n.setUint32(t+d,a,r),n.setUint32(t+_,u,r)}function Jc(n,t,e){return n&t^~n&e}function Qc(n,t,e){return n&t^n&e^t&e}class ba extends Ss{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Ai(this.buffer)}update(t){Nr(this);const{view:e,buffer:r,blockLen:s}=this;t=Hn(t);const i=t.length;for(let a=0;a<i;){const u=Math.min(s-this.pos,i-a);if(u===s){const d=Ai(t);for(;s<=i-a;a+=s)this.process(d,a);continue}r.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Nr(this),ma(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let x=a;x<s;x++)e[x]=0;Xc(r,s-8,BigInt(this.length*8),i),this.process(r,0);const u=Ai(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const _=d/4,I=this.get();if(_>I.length)throw new Error("_sha2: outputLen bigger than state");for(let x=0;x<_;x++)u.setUint32(4*x,I[x],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:a,pos:u}=this;return t.length=s,t.pos=u,t.finished=i,t.destroyed=a,s%e&&t.buffer.set(r),t}}const tu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ir=new Uint32Array(64);class eu extends ba{constructor(t=32){super(64,t,8,!1),this.A=nr[0]|0,this.B=nr[1]|0,this.C=nr[2]|0,this.D=nr[3]|0,this.E=nr[4]|0,this.F=nr[5]|0,this.G=nr[6]|0,this.H=nr[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:a,G:u,H:d}=this;return[t,e,r,s,i,a,u,d]}set(t,e,r,s,i,a,u,d){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,e){for(let x=0;x<16;x++,e+=4)ir[x]=t.getUint32(e,!1);for(let x=16;x<64;x++){const B=ir[x-15],k=ir[x-2],C=Fe(B,7)^Fe(B,18)^B>>>3,N=Fe(k,17)^Fe(k,19)^k>>>10;ir[x]=N+ir[x-7]+C+ir[x-16]|0}let{A:r,B:s,C:i,D:a,E:u,F:d,G:_,H:I}=this;for(let x=0;x<64;x++){const B=Fe(u,6)^Fe(u,11)^Fe(u,25),k=I+B+Jc(u,d,_)+tu[x]+ir[x]|0,N=(Fe(r,2)^Fe(r,13)^Fe(r,22))+Qc(r,s,i)|0;I=_,_=d,d=u,u=a+k|0,a=i,i=s,s=r,r=k+N|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,_=_+this.G|0,I=I+this.H|0,this.set(r,s,i,a,u,d,_,I)}roundClean(){ir.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ns=As(()=>new eu),dn=BigInt(2**32-1),is=BigInt(32);function _a(n,t=!1){return t?{h:Number(n&dn),l:Number(n>>is&dn)}:{h:Number(n>>is&dn)|0,l:Number(n&dn)|0}}function Ea(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:a}=_a(n[s],t);[e[s],r[s]]=[i,a]}return[e,r]}const ru=(n,t)=>BigInt(n>>>0)<<is|BigInt(t>>>0),nu=(n,t,e)=>n>>>e,iu=(n,t,e)=>n<<32-e|t>>>e,su=(n,t,e)=>n>>>e|t<<32-e,ou=(n,t,e)=>n<<32-e|t>>>e,au=(n,t,e)=>n<<64-e|t>>>e-32,cu=(n,t,e)=>n>>>e-32|t<<64-e,uu=(n,t)=>t,lu=(n,t)=>n,Ra=(n,t,e)=>n<<e|t>>>32-e,Sa=(n,t,e)=>t<<e|n>>>32-e,Aa=(n,t,e)=>t<<e-32|n>>>64-e,Ia=(n,t,e)=>n<<e-32|t>>>64-e;function hu(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const fu=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),du=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,pu=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),yu=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,gu=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),mu=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,bt={fromBig:_a,split:Ea,toBig:ru,shrSH:nu,shrSL:iu,rotrSH:su,rotrSL:ou,rotrBH:au,rotrBL:cu,rotr32H:uu,rotr32L:lu,rotlSH:Ra,rotlSL:Sa,rotlBH:Aa,rotlBL:Ia,add:hu,add3L:fu,add3H:du,add4L:pu,add4H:yu,add5H:mu,add5L:gu},[wu,bu]=bt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),sr=new Uint32Array(80),or=new Uint32Array(80);class _u extends ba{constructor(t=64){super(128,t,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:a,Dh:u,Dl:d,Eh:_,El:I,Fh:x,Fl:B,Gh:k,Gl:C,Hh:N,Hl:v}=this;return[t,e,r,s,i,a,u,d,_,I,x,B,k,C,N,v]}set(t,e,r,s,i,a,u,d,_,I,x,B,k,C,N,v){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=u|0,this.Dl=d|0,this.Eh=_|0,this.El=I|0,this.Fh=x|0,this.Fl=B|0,this.Gh=k|0,this.Gl=C|0,this.Hh=N|0,this.Hl=v|0}process(t,e){for(let L=0;L<16;L++,e+=4)sr[L]=t.getUint32(e),or[L]=t.getUint32(e+=4);for(let L=16;L<80;L++){const X=sr[L-15]|0,Z=or[L-15]|0,Q=bt.rotrSH(X,Z,1)^bt.rotrSH(X,Z,8)^bt.shrSH(X,Z,7),st=bt.rotrSL(X,Z,1)^bt.rotrSL(X,Z,8)^bt.shrSL(X,Z,7),nt=sr[L-2]|0,V=or[L-2]|0,K=bt.rotrSH(nt,V,19)^bt.rotrBH(nt,V,61)^bt.shrSH(nt,V,6),q=bt.rotrSL(nt,V,19)^bt.rotrBL(nt,V,61)^bt.shrSL(nt,V,6),F=bt.add4L(st,q,or[L-7],or[L-16]),E=bt.add4H(F,Q,K,sr[L-7],sr[L-16]);sr[L]=E|0,or[L]=F|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:u,Cl:d,Dh:_,Dl:I,Eh:x,El:B,Fh:k,Fl:C,Gh:N,Gl:v,Hh:U,Hl:H}=this;for(let L=0;L<80;L++){const X=bt.rotrSH(x,B,14)^bt.rotrSH(x,B,18)^bt.rotrBH(x,B,41),Z=bt.rotrSL(x,B,14)^bt.rotrSL(x,B,18)^bt.rotrBL(x,B,41),Q=x&k^~x&N,st=B&C^~B&v,nt=bt.add5L(H,Z,st,bu[L],or[L]),V=bt.add5H(nt,U,X,Q,wu[L],sr[L]),K=nt|0,q=bt.rotrSH(r,s,28)^bt.rotrBH(r,s,34)^bt.rotrBH(r,s,39),F=bt.rotrSL(r,s,28)^bt.rotrBL(r,s,34)^bt.rotrBL(r,s,39),E=r&i^r&u^i&u,o=s&a^s&d^a&d;U=N|0,H=v|0,N=k|0,v=C|0,k=x|0,C=B|0,{h:x,l:B}=bt.add(_|0,I|0,V|0,K|0),_=u|0,I=d|0,u=i|0,d=a|0,i=r|0,a=s|0;const f=bt.add3L(K,F,o);r=bt.add3H(f,V,q,E),s=f|0}({h:r,l:s}=bt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=bt.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:u,l:d}=bt.add(this.Ch|0,this.Cl|0,u|0,d|0),{h:_,l:I}=bt.add(this.Dh|0,this.Dl|0,_|0,I|0),{h:x,l:B}=bt.add(this.Eh|0,this.El|0,x|0,B|0),{h:k,l:C}=bt.add(this.Fh|0,this.Fl|0,k|0,C|0),{h:N,l:v}=bt.add(this.Gh|0,this.Gl|0,N|0,v|0),{h:U,l:H}=bt.add(this.Hh|0,this.Hl|0,U|0,H|0),this.set(r,s,i,a,u,d,_,I,x,B,k,C,N,v,U,H)}roundClean(){sr.fill(0),or.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Eu=As(()=>new _u);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Is=BigInt(0),ss=BigInt(1);function Cr(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function vs(n){if(!Cr(n))throw new Error("Uint8Array expected")}function cr(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}function pn(n){const t=n.toString(16);return t.length&1?"0"+t:t}function va(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Is:BigInt("0x"+n)}const ka=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Ru=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Mr(n){if(vs(n),ka)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=Ru[n[e]];return t}const je={_0:48,_9:57,A:65,F:70,a:97,f:102};function fo(n){if(n>=je._0&&n<=je._9)return n-je._0;if(n>=je.A&&n<=je.F)return n-(je.A-10);if(n>=je.a&&n<=je.f)return n-(je.a-10)}function kn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(ka)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const a=fo(n.charCodeAt(i)),u=fo(n.charCodeAt(i+1));if(a===void 0||u===void 0){const d=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[s]=a*16+u}return r}function _r(n){return va(Mr(n))}function jr(n){return vs(n),va(Mr(Uint8Array.from(n).reverse()))}function Xr(n,t){return kn(n.toString(16).padStart(t*2,"0"))}function xn(n,t){return Xr(n,t).reverse()}function fe(n,t,e){let r;if(typeof t=="string")try{r=kn(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Cr(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function Lr(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];vs(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}const Ii=n=>typeof n=="bigint"&&Is<=n;function ks(n,t,e){return Ii(n)&&Ii(t)&&Ii(e)&&t<=n&&n<e}function Pe(n,t,e,r){if(!ks(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Su(n){let t;for(t=0;n>Is;n>>=ss,t+=1);return t}const zn=n=>(ss<<BigInt(n))-ss,vi=n=>new Uint8Array(n),po=n=>Uint8Array.from(n);function Au(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=vi(n),s=vi(n),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},u=(...x)=>e(s,r,...x),d=(x=vi(0))=>{s=u(po([0]),x),r=u(),x.length!==0&&(s=u(po([1]),x),r=u())},_=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let x=0;const B=[];for(;x<t;){r=u();const k=r.slice();B.push(k),x+=r.length}return Lr(...B)};return(x,B)=>{a(),d(x);let k;for(;!(k=B(_()));)d();return a(),k}}const Iu={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Cr(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function nn(n,t,e={}){const r=(s,i,a)=>{const u=Iu[i];if(typeof u!="function")throw new Error("invalid validator function");const d=n[s];if(!(a&&d===void 0)&&!u(d,n))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+d)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(e))r(s,i,!0);return n}function Tn(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const we=BigInt(0),qt=BigInt(1),yr=BigInt(2),vu=BigInt(3),os=BigInt(4),yo=BigInt(5),go=BigInt(8);function Ht(n,t){const e=n%t;return e>=we?e:t+e}function ku(n,t,e){if(t<we)throw new Error("invalid exponent, negatives unsupported");if(e<=we)throw new Error("invalid modulus");if(e===qt)return we;let r=qt;for(;t>we;)t&qt&&(r=r*n%e),n=n*n%e,t>>=qt;return r}function Gt(n,t,e){let r=n;for(;t-- >we;)r*=r,r%=e;return r}function as(n,t){if(n===we)throw new Error("invert: expected non-zero number");if(t<=we)throw new Error("invert: expected positive modulus, got "+t);let e=Ht(n,t),r=t,s=we,i=qt;for(;e!==we;){const u=r/e,d=r%e,_=s-i*u;r=e,e=d,s=i,i=_}if(r!==qt)throw new Error("invert: does not exist");return Ht(s,t)}function xu(n){const t=(n-qt)/yr;let e,r,s;for(e=n-qt,r=0;e%yr===we;e/=yr,r++);for(s=yr;s<n&&ku(s,t,n)!==n-qt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const a=(n+qt)/os;return function(d,_){const I=d.pow(_,a);if(!d.eql(d.sqr(I),_))throw new Error("Cannot find square root");return I}}const i=(e+qt)/yr;return function(u,d){if(u.pow(d,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let _=r,I=u.pow(u.mul(u.ONE,s),e),x=u.pow(d,i),B=u.pow(d,e);for(;!u.eql(B,u.ONE);){if(u.eql(B,u.ZERO))return u.ZERO;let k=1;for(let N=u.sqr(B);k<_&&!u.eql(N,u.ONE);k++)N=u.sqr(N);const C=u.pow(I,qt<<BigInt(_-k-1));I=u.sqr(C),x=u.mul(x,C),B=u.mul(B,I),_=k}return x}}function Tu(n){if(n%os===vu){const t=(n+qt)/os;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%go===yo){const t=(n-yo)/go;return function(r,s){const i=r.mul(s,yr),a=r.pow(i,t),u=r.mul(s,a),d=r.mul(r.mul(u,yr),a),_=r.mul(u,r.sub(d,r.ONE));if(!r.eql(r.sqr(_),s))throw new Error("Cannot find square root");return _}}return xu(n)}const Ou=(n,t)=>(Ht(n,t)&qt)===qt,Bu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Nu(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Bu.reduce((r,s)=>(r[s]="function",r),t);return nn(n,e)}function Cu(n,t,e){if(e<we)throw new Error("invalid exponent, negatives unsupported");if(e===we)return n.ONE;if(e===qt)return t;let r=n.ONE,s=t;for(;e>we;)e&qt&&(r=n.mul(r,s)),s=n.sqr(s),e>>=qt;return r}function Mu(n,t){const e=new Array(t.length),r=t.reduce((i,a,u)=>n.is0(a)?i:(e[u]=i,n.mul(i,a)),n.ONE),s=n.inv(r);return t.reduceRight((i,a,u)=>n.is0(a)?i:(e[u]=n.mul(i,e[u]),n.mul(i,a)),s),e}function xa(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Kn(n,t,e=!1,r={}){if(n<=we)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:s,nByteLength:i}=xa(n,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const u=Object.freeze({ORDER:n,isLE:e,BITS:s,BYTES:i,MASK:zn(s),ZERO:we,ONE:qt,create:d=>Ht(d,n),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return we<=d&&d<n},is0:d=>d===we,isOdd:d=>(d&qt)===qt,neg:d=>Ht(-d,n),eql:(d,_)=>d===_,sqr:d=>Ht(d*d,n),add:(d,_)=>Ht(d+_,n),sub:(d,_)=>Ht(d-_,n),mul:(d,_)=>Ht(d*_,n),pow:(d,_)=>Cu(u,d,_),div:(d,_)=>Ht(d*as(_,n),n),sqrN:d=>d*d,addN:(d,_)=>d+_,subN:(d,_)=>d-_,mulN:(d,_)=>d*_,inv:d=>as(d,n),sqrt:r.sqrt||(d=>(a||(a=Tu(n)),a(u,d))),invertBatch:d=>Mu(u,d),cmov:(d,_,I)=>I?_:d,toBytes:d=>e?xn(d,i):Xr(d,i),fromBytes:d=>{if(d.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+d.length);return e?jr(d):_r(d)}});return Object.freeze(u)}function Ta(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Oa(n){const t=Ta(n);return t+Math.ceil(t/2)}function Lu(n,t,e=!1){const r=n.length,s=Ta(t),i=Oa(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=e?jr(n):_r(n),u=Ht(a,t-qt)+qt;return e?xn(u,s):Xr(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mo=BigInt(0),cs=BigInt(1);function ki(n,t){const e=t.negate();return n?e:t}function Ba(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function xi(n,t){Ba(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=zn(n),a=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function wo(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=e;let u=Number(n&s),d=n>>a;u>r&&(u-=i,d+=cs);const _=t*r,I=_+Math.abs(u)-1,x=u===0,B=u<0,k=t%2!==0;return{nextN:d,offset:I,isZero:x,isNeg:B,isNegF:k,offsetF:_}}function Pu(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Uu(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Ti=new WeakMap,Na=new WeakMap;function Oi(n){return Na.get(n)||1}function Ca(n,t){return{constTimeNegate:ki,hasPrecomputes(e){return Oi(e)!==1},unsafeLadder(e,r,s=n.ZERO){let i=e;for(;r>mo;)r&cs&&(s=s.add(i)),i=i.double(),r>>=cs;return s},precomputeWindow(e,r){const{windows:s,windowSize:i}=xi(r,t),a=[];let u=e,d=u;for(let _=0;_<s;_++){d=u,a.push(d);for(let I=1;I<i;I++)d=d.add(u),a.push(d);u=d.double()}return a},wNAF(e,r,s){let i=n.ZERO,a=n.BASE;const u=xi(e,t);for(let d=0;d<u.windows;d++){const{nextN:_,offset:I,isZero:x,isNeg:B,isNegF:k,offsetF:C}=wo(s,d,u);s=_,x?a=a.add(ki(k,r[C])):i=i.add(ki(B,r[I]))}return{p:i,f:a}},wNAFUnsafe(e,r,s,i=n.ZERO){const a=xi(e,t);for(let u=0;u<a.windows&&s!==mo;u++){const{nextN:d,offset:_,isZero:I,isNeg:x}=wo(s,u,a);if(s=d,!I){const B=r[_];i=i.add(x?B.negate():B)}}return i},getPrecomputes(e,r,s){let i=Ti.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&Ti.set(r,s(i))),i},wNAFCached(e,r,s){const i=Oi(e);return this.wNAF(i,this.getPrecomputes(i,e,s),r)},wNAFCachedUnsafe(e,r,s,i){const a=Oi(e);return a===1?this.unsafeLadder(e,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,e,s),r,i)},setWindowSize(e,r){Ba(r,t),Na.set(e,r),Ti.delete(e)}}}function Ma(n,t,e,r){if(Pu(e,n),Uu(r,t),e.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=n.ZERO,i=Su(BigInt(e.length)),a=i>12?i-3:i>4?i-2:i?2:1,u=zn(a),d=new Array(Number(u)+1).fill(s),_=Math.floor((t.BITS-1)/a)*a;let I=s;for(let x=_;x>=0;x-=a){d.fill(s);for(let k=0;k<r.length;k++){const C=r[k],N=Number(C>>BigInt(x)&u);d[N]=d[N].add(e[k])}let B=s;for(let k=d.length-1,C=s;k>0;k--)C=C.add(d[k]),B=B.add(C);if(I=I.add(B),x!==0)for(let k=0;k<a;k++)I=I.double()}return I}function xs(n){return Nu(n.Fp),nn(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xa(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const He=BigInt(0),Ie=BigInt(1),bo=BigInt(2),Du=BigInt(8),Fu={zip215:!0};function Hu(n){const t=xs(n);return nn(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function zu(n){const t=Hu(n),{Fp:e,n:r,prehash:s,hash:i,randomBytes:a,nByteLength:u,h:d}=t,_=bo<<BigInt(u*8)-Ie,I=e.create,x=Kn(t.n,t.nBitLength),B=t.uvRatio||((R,S)=>{try{return{isValid:!0,value:e.sqrt(R*e.inv(S))}}catch{return{isValid:!1,value:He}}}),k=t.adjustScalarBytes||(R=>R),C=t.domain||((R,S,w)=>{if(cr("phflag",w),S.length||w)throw new Error("Contexts/pre-hash are not supported");return R});function N(R,S,w=!1){const y=w?Ie:He;Pe("coordinate "+R,S,y,_)}function v(R){if(!(R instanceof L))throw new Error("ExtendedPoint expected")}const U=Tn((R,S)=>{const{ex:w,ey:y,ez:h}=R,c=R.is0();S==null&&(S=c?Du:e.inv(h));const l=I(w*S),b=I(y*S),T=I(h*S);if(c)return{x:He,y:Ie};if(T!==Ie)throw new Error("invZ was invalid");return{x:l,y:b}}),H=Tn(R=>{const{a:S,d:w}=t;if(R.is0())throw new Error("bad point: ZERO");const{ex:y,ey:h,ez:c,et:l}=R,b=I(y*y),T=I(h*h),P=I(c*c),j=I(P*P),et=I(b*S),ut=I(P*I(et+T)),Tt=I(j+I(w*I(b*T)));if(ut!==Tt)throw new Error("bad point: equation left != right (1)");const yt=I(y*h),mt=I(c*l);if(yt!==mt)throw new Error("bad point: equation left != right (2)");return!0});class L{constructor(S,w,y,h){N("x",S),N("y",w),N("z",y,!0),N("t",h),this.ex=S,this.ey=w,this.ez=y,this.et=h,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof L)throw new Error("extended point not allowed");const{x:w,y}=S||{};return N("x",w),N("y",y),new L(w,y,Ie,I(w*y))}static normalizeZ(S){const w=e.invertBatch(S.map(y=>y.ez));return S.map((y,h)=>y.toAffine(w[h])).map(L.fromAffine)}static msm(S,w){return Ma(L,x,S,w)}_setWindowSize(S){Q.setWindowSize(this,S)}assertValidity(){H(this)}equals(S){v(S);const{ex:w,ey:y,ez:h}=this,{ex:c,ey:l,ez:b}=S,T=I(w*b),P=I(c*h),j=I(y*b),et=I(l*h);return T===P&&j===et}is0(){return this.equals(L.ZERO)}negate(){return new L(I(-this.ex),this.ey,this.ez,I(-this.et))}double(){const{a:S}=t,{ex:w,ey:y,ez:h}=this,c=I(w*w),l=I(y*y),b=I(bo*I(h*h)),T=I(S*c),P=w+y,j=I(I(P*P)-c-l),et=T+l,ut=et-b,Tt=T-l,yt=I(j*ut),mt=I(et*Tt),zt=I(j*Tt),Rt=I(ut*et);return new L(yt,mt,Rt,zt)}add(S){v(S);const{a:w,d:y}=t,{ex:h,ey:c,ez:l,et:b}=this,{ex:T,ey:P,ez:j,et}=S,ut=I(h*T),Tt=I(c*P),yt=I(b*y*et),mt=I(l*j),zt=I((h+c)*(T+P)-ut-Tt),Rt=mt-yt,It=mt+yt,dr=I(Tt-w*ut),Nt=I(zt*Rt),Dt=I(It*dr),vr=I(zt*dr),Lt=I(Rt*It);return new L(Nt,Dt,Lt,vr)}subtract(S){return this.add(S.negate())}wNAF(S){return Q.wNAFCached(this,S,L.normalizeZ)}multiply(S){const w=S;Pe("scalar",w,Ie,r);const{p:y,f:h}=this.wNAF(w);return L.normalizeZ([y,h])[0]}multiplyUnsafe(S,w=L.ZERO){const y=S;return Pe("scalar",y,He,r),y===He?Z:this.is0()||y===Ie?this:Q.wNAFCachedUnsafe(this,y,L.normalizeZ,w)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return Q.unsafeLadder(this,r).is0()}toAffine(S){return U(this,S)}clearCofactor(){const{h:S}=t;return S===Ie?this:this.multiplyUnsafe(S)}static fromHex(S,w=!1){const{d:y,a:h}=t,c=e.BYTES;S=fe("pointHex",S,c),cr("zip215",w);const l=S.slice(),b=S[c-1];l[c-1]=b&-129;const T=jr(l),P=w?_:e.ORDER;Pe("pointHex.y",T,He,P);const j=I(T*T),et=I(j-Ie),ut=I(y*j-h);let{isValid:Tt,value:yt}=B(et,ut);if(!Tt)throw new Error("Point.fromHex: invalid y coordinate");const mt=(yt&Ie)===Ie,zt=(b&128)!==0;if(!w&&yt===He&&zt)throw new Error("Point.fromHex: x=0 and x_0=1");return zt!==mt&&(yt=I(-yt)),L.fromAffine({x:yt,y:T})}static fromPrivateKey(S){const{scalar:w}=V(S);return X.multiply(w)}toRawBytes(){const{x:S,y:w}=this.toAffine(),y=xn(w,e.BYTES);return y[y.length-1]|=S&Ie?128:0,y}toHex(){return Mr(this.toRawBytes())}}L.BASE=new L(t.Gx,t.Gy,Ie,I(t.Gx*t.Gy)),L.ZERO=new L(He,Ie,Ie,He);const{BASE:X,ZERO:Z}=L,Q=Ca(L,u*8);function st(R){return Ht(R,r)}function nt(R){return st(jr(R))}function V(R){const S=e.BYTES;R=fe("private key",R,S);const w=fe("hashed private key",i(R),2*S),y=k(w.slice(0,S)),h=w.slice(S,2*S),c=nt(y);return{head:y,prefix:h,scalar:c}}function K(R){const{head:S,prefix:w,scalar:y}=V(R),h=X.multiply(y),c=h.toRawBytes();return{head:S,prefix:w,scalar:y,point:h,pointBytes:c}}function q(R){return K(R).pointBytes}function F(R=new Uint8Array,...S){const w=Lr(...S);return nt(i(C(w,fe("context",R),!!s)))}function E(R,S,w={}){R=fe("message",R),s&&(R=s(R));const{prefix:y,scalar:h,pointBytes:c}=K(S),l=F(w.context,y,R),b=X.multiply(l).toRawBytes(),T=F(w.context,b,c,R),P=st(l+T*h);Pe("signature.s",P,He,r);const j=Lr(b,xn(P,e.BYTES));return fe("result",j,e.BYTES*2)}const o=Fu;function f(R,S,w,y=o){const{context:h,zip215:c}=y,l=e.BYTES;R=fe("signature",R,2*l),S=fe("message",S),w=fe("publicKey",w,l),c!==void 0&&cr("zip215",c),s&&(S=s(S));const b=jr(R.slice(l,2*l));let T,P,j;try{T=L.fromHex(w,c),P=L.fromHex(R.slice(0,l),c),j=X.multiplyUnsafe(b)}catch{return!1}if(!c&&T.isSmallOrder())return!1;const et=F(h,P.toRawBytes(),T.toRawBytes(),S);return P.add(T.multiplyUnsafe(et)).subtract(j).clearCofactor().equals(L.ZERO)}return X._setWindowSize(8),{CURVE:t,getPublicKey:q,sign:E,verify:f,ExtendedPoint:L,utils:{getExtendedPublicKey:K,randomPrivateKey:()=>a(e.BYTES),precompute(R=8,S=L.BASE){return S._setWindowSize(R),S.multiply(BigInt(3)),S}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ts=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),_o=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Ku=BigInt(1),Eo=BigInt(2);BigInt(3);const qu=BigInt(5),Wu=BigInt(8);function $u(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=Ts,u=n*n%i*n%i,d=Gt(u,Eo,i)*u%i,_=Gt(d,Ku,i)*n%i,I=Gt(_,qu,i)*_%i,x=Gt(I,t,i)*I%i,B=Gt(x,e,i)*x%i,k=Gt(B,r,i)*B%i,C=Gt(k,s,i)*k%i,N=Gt(C,s,i)*k%i,v=Gt(N,t,i)*I%i;return{pow_p_5_8:Gt(v,Eo,i)*n%i,b2:u}}function Vu(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Gu(n,t){const e=Ts,r=Ht(t*t*t,e),s=Ht(r*r*t,e),i=$u(n*s).pow_p_5_8;let a=Ht(n*r*i,e);const u=Ht(t*a*a,e),d=a,_=Ht(a*_o,e),I=u===n,x=u===Ht(-n,e),B=u===Ht(-n*_o,e);return I&&(a=d),(x||B)&&(a=_),Ou(a,e)&&(a=Ht(-a,e)),{isValid:I||x,value:a}}const Ro=Kn(Ts,void 0,!0),ju={a:Ro.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ro,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Wu,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Eu,randomBytes:wa,adjustScalarBytes:Vu,uvRatio:Gu},Fr=zu(ju);var yn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var So;function Yu(){return So||(So=1,function(n,t){var e=Rs(),r=e.Buffer;function s(a,u){for(var d in a)u[d]=a[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(a,u,d){return r(a,u,d)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(a,u,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,u,d)},i.alloc=function(a,u,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var _=r(a);return u!==void 0?typeof d=="string"?_.fill(u,d):_.fill(u):_.fill(0),_},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(a)}}(yn,yn.exports)),yn.exports}var Bi,Ao;function Zu(){if(Ao)return Bi;Ao=1;var n=Yu().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),u=a.charCodeAt(0);if(r[u]!==255)throw new TypeError(a+" is ambiguous");r[u]=i}var d=e.length,_=e.charAt(0),I=Math.log(d)/Math.log(256),x=Math.log(256)/Math.log(d);function B(N){if((Array.isArray(N)||N instanceof Uint8Array)&&(N=n.from(N)),!n.isBuffer(N))throw new TypeError("Expected Buffer");if(N.length===0)return"";for(var v=0,U=0,H=0,L=N.length;H!==L&&N[H]===0;)H++,v++;for(var X=(L-H)*x+1>>>0,Z=new Uint8Array(X);H!==L;){for(var Q=N[H],st=0,nt=X-1;(Q!==0||st<U)&&nt!==-1;nt--,st++)Q+=256*Z[nt]>>>0,Z[nt]=Q%d>>>0,Q=Q/d>>>0;if(Q!==0)throw new Error("Non-zero carry");U=st,H++}for(var V=X-U;V!==X&&Z[V]===0;)V++;for(var K=_.repeat(v);V<X;++V)K+=e.charAt(Z[V]);return K}function k(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return n.alloc(0);for(var v=0,U=0,H=0;N[v]===_;)U++,v++;for(var L=(N.length-v)*I+1>>>0,X=new Uint8Array(L);v<N.length;){var Z=N.charCodeAt(v);if(Z>255)return;var Q=r[Z];if(Q===255)return;for(var st=0,nt=L-1;(Q!==0||st<H)&&nt!==-1;nt--,st++)Q+=d*X[nt]>>>0,X[nt]=Q%256>>>0,Q=Q/256>>>0;if(Q!==0)throw new Error("Non-zero carry");H=st,v++}for(var V=L-H;V!==L&&X[V]===0;)V++;var K=n.allocUnsafe(U+(L-V));K.fill(0,0,U);for(var q=U;V!==L;)K[q++]=X[V++];return K}function C(N){var v=k(N);if(v)return v;throw new Error("Non-base"+d+" character")}return{encode:B,decodeUnsafe:k,decode:C}}return Bi=t,Bi}var Ni,Io;function La(){if(Io)return Ni;Io=1;var n=Zu(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Ni=n(t),Ni}var Xu=La();const _e=Dn(Xu);var Ot={};function Je(n,t,e){return t<=n&&n<=e}function qn(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Ju(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var a=n.charCodeAt(r+1);if(56320<=a&&a<=57343){var u=i&1023,d=a&1023;s.push(65536+(u<<10)+d),r+=1}else s.push(65533)}r+=1}return s}function Qu(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var On=-1;function Os(n){this.tokens=[].slice.call(n)}Os.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():On},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Pr=-1;function Ci(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Bn="utf-8";function Nn(n,t){if(!(this instanceof Nn))return new Nn(n,t);if(n=n!==void 0?String(n).toLowerCase():Bn,n!==Bn)throw new Error("Encoding not supported. Only utf-8 is supported");t=qn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Nn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=qn(e),this._streaming||(this._decoder=new tl({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Os(r),i=[],a;!s.endOfStream()&&(a=this._decoder.handler(s,s.read()),a!==Pr);)a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));if(!this._streaming){do{if(a=this._decoder.handler(s,s.read()),a===Pr)break;a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Qu(i)}};function Cn(n,t){if(!(this instanceof Cn))return new Cn(n,t);if(n=n!==void 0?String(n).toLowerCase():Bn,n!==Bn)throw new Error("Encoding not supported. Only utf-8 is supported");t=qn(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Cn.prototype={encode:function(t,e){t=t?String(t):"",e=qn(e),this._streaming||(this._encoder=new el(this._options)),this._streaming=!!e.stream;for(var r=[],s=new Os(Ju(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Pr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Pr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function tl(n){var t=n.fatal,e=0,r=0,s=0,i=128,a=191;this.handler=function(u,d){if(d===On&&s!==0)return s=0,Ci(t);if(d===On)return Pr;if(s===0){if(Je(d,0,127))return d;if(Je(d,194,223))s=1,e=d-192;else if(Je(d,224,239))d===224&&(i=160),d===237&&(a=159),s=2,e=d-224;else if(Je(d,240,244))d===240&&(i=144),d===244&&(a=143),s=3,e=d-240;else return Ci(t);return e=e<<6*s,null}if(!Je(d,i,a))return e=s=r=0,i=128,a=191,u.prepend(d),Ci(t);if(i=128,a=191,r+=1,e+=d-128<<6*(s-r),r!==s)return null;var _=e;return e=s=r=0,_}}function el(n){n.fatal,this.handler=function(t,e){if(e===On)return Pr;if(Je(e,0,127))return e;var r,s;Je(e,128,2047)?(r=1,s=192):Je(e,2048,65535)?(r=2,s=224):Je(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var a=e>>6*(r-1);i.push(128|a&63),r-=1}return i}}const rl=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Nn,TextEncoder:Cn},Symbol.toStringTag,{value:"Module"})),nl=Fn(rl);var vo;function il(){if(vo)return Ot;vo=1;var n=Ot&&Ot.__createBinding||(Object.create?function(V,K,q,F){F===void 0&&(F=q),Object.defineProperty(V,F,{enumerable:!0,get:function(){return K[q]}})}:function(V,K,q,F){F===void 0&&(F=q),V[F]=K[q]}),t=Ot&&Ot.__setModuleDefault||(Object.create?function(V,K){Object.defineProperty(V,"default",{enumerable:!0,value:K})}:function(V,K){V.default=K}),e=Ot&&Ot.__decorate||function(V,K,q,F){var E=arguments.length,o=E<3?K:F===null?F=Object.getOwnPropertyDescriptor(K,q):F,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(V,K,q,F);else for(var m=V.length-1;m>=0;m--)(f=V[m])&&(o=(E<3?f(o):E>3?f(K,q,o):f(K,q))||o);return E>3&&o&&Object.defineProperty(K,q,o),o},r=Ot&&Ot.__importStar||function(V){if(V&&V.__esModule)return V;var K={};if(V!=null)for(var q in V)q!=="default"&&Object.hasOwnProperty.call(V,q)&&n(K,V,q);return t(K,V),K},s=Ot&&Ot.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.deserializeUnchecked=Ot.deserialize=Ot.serialize=Ot.BinaryReader=Ot.BinaryWriter=Ot.BorshError=Ot.baseDecode=Ot.baseEncode=void 0;const i=s(Es()),a=s(La()),u=r(nl),d=typeof TextDecoder!="function"?u.TextDecoder:TextDecoder,_=new d("utf-8",{fatal:!0});function I(V){return typeof V=="string"&&(V=Buffer.from(V,"utf8")),a.default.encode(Buffer.from(V))}Ot.baseEncode=I;function x(V){return Buffer.from(a.default.decode(V))}Ot.baseDecode=x;const B=1024;class k extends Error{constructor(K){super(K),this.fieldPath=[],this.originalMessage=K}addToFieldPath(K){this.fieldPath.splice(0,0,K),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ot.BorshError=k;class C{constructor(){this.buf=Buffer.alloc(B),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(B)]))}writeU8(K){this.maybeResize(),this.buf.writeUInt8(K,this.length),this.length+=1}writeU16(K){this.maybeResize(),this.buf.writeUInt16LE(K,this.length),this.length+=2}writeU32(K){this.maybeResize(),this.buf.writeUInt32LE(K,this.length),this.length+=4}writeU64(K){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(K).toArray("le",8)))}writeU128(K){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(K).toArray("le",16)))}writeU256(K){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(K).toArray("le",32)))}writeU512(K){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(K).toArray("le",64)))}writeBuffer(K){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),K,Buffer.alloc(B)]),this.length+=K.length}writeString(K){this.maybeResize();const q=Buffer.from(K,"utf8");this.writeU32(q.length),this.writeBuffer(q)}writeFixedArray(K){this.writeBuffer(Buffer.from(K))}writeArray(K,q){this.maybeResize(),this.writeU32(K.length);for(const F of K)this.maybeResize(),q(F)}toArray(){return this.buf.subarray(0,this.length)}}Ot.BinaryWriter=C;function N(V,K,q){const F=q.value;q.value=function(...E){try{return F.apply(this,E)}catch(o){if(o instanceof RangeError){const f=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(f)>=0)throw new k("Reached the end of buffer when deserializing")}throw o}}}class v{constructor(K){this.buf=K,this.offset=0}readU8(){const K=this.buf.readUInt8(this.offset);return this.offset+=1,K}readU16(){const K=this.buf.readUInt16LE(this.offset);return this.offset+=2,K}readU32(){const K=this.buf.readUInt32LE(this.offset);return this.offset+=4,K}readU64(){const K=this.readBuffer(8);return new i.default(K,"le")}readU128(){const K=this.readBuffer(16);return new i.default(K,"le")}readU256(){const K=this.readBuffer(32);return new i.default(K,"le")}readU512(){const K=this.readBuffer(64);return new i.default(K,"le")}readBuffer(K){if(this.offset+K>this.buf.length)throw new k(`Expected buffer length ${K} isn't within bounds`);const q=this.buf.slice(this.offset,this.offset+K);return this.offset+=K,q}readString(){const K=this.readU32(),q=this.readBuffer(K);try{return _.decode(q)}catch(F){throw new k(`Error decoding UTF-8 string: ${F}`)}}readFixedArray(K){return new Uint8Array(this.readBuffer(K))}readArray(K){const q=this.readU32(),F=Array();for(let E=0;E<q;++E)F.push(K());return F}}e([N],v.prototype,"readU8",null),e([N],v.prototype,"readU16",null),e([N],v.prototype,"readU32",null),e([N],v.prototype,"readU64",null),e([N],v.prototype,"readU128",null),e([N],v.prototype,"readU256",null),e([N],v.prototype,"readU512",null),e([N],v.prototype,"readString",null),e([N],v.prototype,"readFixedArray",null),e([N],v.prototype,"readArray",null),Ot.BinaryReader=v;function U(V){return V.charAt(0).toUpperCase()+V.slice(1)}function H(V,K,q,F,E){try{if(typeof F=="string")E[`write${U(F)}`](q);else if(F instanceof Array)if(typeof F[0]=="number"){if(q.length!==F[0])throw new k(`Expecting byte array of length ${F[0]}, but got ${q.length} bytes`);E.writeFixedArray(q)}else if(F.length===2&&typeof F[1]=="number"){if(q.length!==F[1])throw new k(`Expecting byte array of length ${F[1]}, but got ${q.length} bytes`);for(let o=0;o<F[1];o++)H(V,null,q[o],F[0],E)}else E.writeArray(q,o=>{H(V,K,o,F[0],E)});else if(F.kind!==void 0)switch(F.kind){case"option":{q==null?E.writeU8(0):(E.writeU8(1),H(V,K,q,F.type,E));break}case"map":{E.writeU32(q.size),q.forEach((o,f)=>{H(V,K,f,F.key,E),H(V,K,o,F.value,E)});break}default:throw new k(`FieldType ${F} unrecognized`)}else L(V,q,E)}catch(o){throw o instanceof k&&o.addToFieldPath(K),o}}function L(V,K,q){if(typeof K.borshSerialize=="function"){K.borshSerialize(q);return}const F=V.get(K.constructor);if(!F)throw new k(`Class ${K.constructor.name} is missing in schema`);if(F.kind==="struct")F.fields.map(([E,o])=>{H(V,E,K[E],o,q)});else if(F.kind==="enum"){const E=K[F.field];for(let o=0;o<F.values.length;++o){const[f,m]=F.values[o];if(f===E){q.writeU8(o),H(V,f,K[f],m,q);break}}}else throw new k(`Unexpected schema kind: ${F.kind} for ${K.constructor.name}`)}function X(V,K,q=C){const F=new q;return L(V,K,F),F.toArray()}Ot.serialize=X;function Z(V,K,q,F){try{if(typeof q=="string")return F[`read${U(q)}`]();if(q instanceof Array){if(typeof q[0]=="number")return F.readFixedArray(q[0]);if(typeof q[1]=="number"){const E=[];for(let o=0;o<q[1];o++)E.push(Z(V,null,q[0],F));return E}else return F.readArray(()=>Z(V,K,q[0],F))}if(q.kind==="option")return F.readU8()?Z(V,K,q.type,F):void 0;if(q.kind==="map"){let E=new Map;const o=F.readU32();for(let f=0;f<o;f++){const m=Z(V,K,q.key,F),R=Z(V,K,q.value,F);E.set(m,R)}return E}return Q(V,q,F)}catch(E){throw E instanceof k&&E.addToFieldPath(K),E}}function Q(V,K,q){if(typeof K.borshDeserialize=="function")return K.borshDeserialize(q);const F=V.get(K);if(!F)throw new k(`Class ${K.name} is missing in schema`);if(F.kind==="struct"){const E={};for(const[o,f]of V.get(K).fields)E[o]=Z(V,o,f,q);return new K(E)}if(F.kind==="enum"){const E=q.readU8();if(E>=F.values.length)throw new k(`Enum index: ${E} is out of range`);const[o,f]=F.values[E],m=Z(V,o,f,q);return new K({[o]:m})}throw new k(`Unexpected schema kind: ${F.kind} for ${K.constructor.name}`)}function st(V,K,q,F=v){const E=new F(q),o=Q(V,K,E);if(E.offset<q.length)throw new k(`Unexpected ${q.length-E.offset} bytes after deserialized data`);return o}Ot.deserialize=st;function nt(V,K,q,F=v){const E=new F(q);return Q(V,K,E)}return Ot.deserializeUnchecked=nt,Ot}var Mi=il(),G={},ko;function sl(){if(ko)return G;ko=1,Object.defineProperty(G,"__esModule",{value:!0}),G.s16=G.s8=G.nu64be=G.u48be=G.u40be=G.u32be=G.u24be=G.u16be=G.nu64=G.u48=G.u40=G.u32=G.u24=G.u16=G.u8=G.offset=G.greedy=G.Constant=G.UTF8=G.CString=G.Blob=G.Boolean=G.BitField=G.BitStructure=G.VariantLayout=G.Union=G.UnionLayoutDiscriminator=G.UnionDiscriminator=G.Structure=G.Sequence=G.DoubleBE=G.Double=G.FloatBE=G.Float=G.NearInt64BE=G.NearInt64=G.NearUInt64BE=G.NearUInt64=G.IntBE=G.Int=G.UIntBE=G.UInt=G.OffsetLayout=G.GreedyCount=G.ExternalLayout=G.bindConstructorLayout=G.nameWithProperty=G.Layout=G.uint8ArrayToBuffer=G.checkUint8Array=void 0,G.constant=G.utf8=G.cstr=G.blob=G.unionLayoutDiscriminator=G.union=G.seq=G.bits=G.struct=G.f64be=G.f64=G.f32be=G.f32=G.ns64be=G.s48be=G.s40be=G.s32be=G.s24be=G.s16be=G.ns64=G.s48=G.s40=G.s32=G.s24=void 0;const n=Rs();function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}G.checkUint8Array=t;function e(c){return t(c),n.Buffer.from(c.buffer,c.byteOffset,c.length)}G.uint8ArrayToBuffer=e;class r{constructor(l,b){if(!Number.isInteger(l))throw new TypeError("span must be an integer");this.span=l,this.property=b}makeDestinationObject(){return{}}getSpan(l,b){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(l){const b=Object.create(this.constructor.prototype);return Object.assign(b,this),b.property=l,b}fromArray(l){}}G.Layout=r;function s(c,l){return l.property?c+"["+l.property+"]":c}G.nameWithProperty=s;function i(c,l){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(l&&l instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(l,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=l,l.boundConstructor_=c,l.makeDestinationObject=()=>new c,Object.defineProperty(c.prototype,"encode",{value(b,T){return l.encode(this,b,T)},writable:!0}),Object.defineProperty(c,"decode",{value(b,T){return l.decode(b,T)},writable:!0})}G.bindConstructorLayout=i;class a extends r{isCount(){throw new Error("ExternalLayout is abstract")}}G.ExternalLayout=a;class u extends a{constructor(l=1,b){if(!Number.isInteger(l)||0>=l)throw new TypeError("elementSpan must be a (positive) integer");super(-1,b),this.elementSpan=l}isCount(){return!0}decode(l,b=0){t(l);const T=l.length-b;return Math.floor(T/this.elementSpan)}encode(l,b,T){return 0}}G.GreedyCount=u;class d extends a{constructor(l,b=0,T){if(!(l instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(b))throw new TypeError("offset must be integer or undefined");super(l.span,T||l.property),this.layout=l,this.offset=b}isCount(){return this.layout instanceof _||this.layout instanceof I}decode(l,b=0){return this.layout.decode(l,b+this.offset)}encode(l,b,T=0){return this.layout.encode(l,b,T+this.offset)}}G.OffsetLayout=d;class _ extends r{constructor(l,b){if(super(l,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,b=0){return e(l).readUIntLE(b,this.span)}encode(l,b,T=0){return e(b).writeUIntLE(l,T,this.span),this.span}}G.UInt=_;class I extends r{constructor(l,b){if(super(l,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,b=0){return e(l).readUIntBE(b,this.span)}encode(l,b,T=0){return e(b).writeUIntBE(l,T,this.span),this.span}}G.UIntBE=I;class x extends r{constructor(l,b){if(super(l,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,b=0){return e(l).readIntLE(b,this.span)}encode(l,b,T=0){return e(b).writeIntLE(l,T,this.span),this.span}}G.Int=x;class B extends r{constructor(l,b){if(super(l,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,b=0){return e(l).readIntBE(b,this.span)}encode(l,b,T=0){return e(b).writeIntBE(l,T,this.span),this.span}}G.IntBE=B;const k=Math.pow(2,32);function C(c){const l=Math.floor(c/k),b=c-l*k;return{hi32:l,lo32:b}}function N(c,l){return c*k+l}class v extends r{constructor(l){super(8,l)}decode(l,b=0){const T=e(l),P=T.readUInt32LE(b),j=T.readUInt32LE(b+4);return N(j,P)}encode(l,b,T=0){const P=C(l),j=e(b);return j.writeUInt32LE(P.lo32,T),j.writeUInt32LE(P.hi32,T+4),8}}G.NearUInt64=v;class U extends r{constructor(l){super(8,l)}decode(l,b=0){const T=e(l),P=T.readUInt32BE(b),j=T.readUInt32BE(b+4);return N(P,j)}encode(l,b,T=0){const P=C(l),j=e(b);return j.writeUInt32BE(P.hi32,T),j.writeUInt32BE(P.lo32,T+4),8}}G.NearUInt64BE=U;class H extends r{constructor(l){super(8,l)}decode(l,b=0){const T=e(l),P=T.readUInt32LE(b),j=T.readInt32LE(b+4);return N(j,P)}encode(l,b,T=0){const P=C(l),j=e(b);return j.writeUInt32LE(P.lo32,T),j.writeInt32LE(P.hi32,T+4),8}}G.NearInt64=H;class L extends r{constructor(l){super(8,l)}decode(l,b=0){const T=e(l),P=T.readInt32BE(b),j=T.readUInt32BE(b+4);return N(P,j)}encode(l,b,T=0){const P=C(l),j=e(b);return j.writeInt32BE(P.hi32,T),j.writeUInt32BE(P.lo32,T+4),8}}G.NearInt64BE=L;class X extends r{constructor(l){super(4,l)}decode(l,b=0){return e(l).readFloatLE(b)}encode(l,b,T=0){return e(b).writeFloatLE(l,T),4}}G.Float=X;class Z extends r{constructor(l){super(4,l)}decode(l,b=0){return e(l).readFloatBE(b)}encode(l,b,T=0){return e(b).writeFloatBE(l,T),4}}G.FloatBE=Z;class Q extends r{constructor(l){super(8,l)}decode(l,b=0){return e(l).readDoubleLE(b)}encode(l,b,T=0){return e(b).writeDoubleLE(l,T),8}}G.Double=Q;class st extends r{constructor(l){super(8,l)}decode(l,b=0){return e(l).readDoubleBE(b)}encode(l,b,T=0){return e(b).writeDoubleBE(l,T),8}}G.DoubleBE=st;class nt extends r{constructor(l,b,T){if(!(l instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(b instanceof a&&b.isCount()||Number.isInteger(b)&&0<=b))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let P=-1;!(b instanceof a)&&0<l.span&&(P=b*l.span),super(P,T),this.elementLayout=l,this.count=b}getSpan(l,b=0){if(0<=this.span)return this.span;let T=0,P=this.count;if(P instanceof a&&(P=P.decode(l,b)),0<this.elementLayout.span)T=P*this.elementLayout.span;else{let j=0;for(;j<P;)T+=this.elementLayout.getSpan(l,b+T),++j}return T}decode(l,b=0){const T=[];let P=0,j=this.count;for(j instanceof a&&(j=j.decode(l,b));P<j;)T.push(this.elementLayout.decode(l,b)),b+=this.elementLayout.getSpan(l,b),P+=1;return T}encode(l,b,T=0){const P=this.elementLayout,j=l.reduce((et,ut)=>et+P.encode(ut,b,T+et),0);return this.count instanceof a&&this.count.encode(l.length,b,T),j}}G.Sequence=nt;class V extends r{constructor(l,b,T){if(!(Array.isArray(l)&&l.reduce((j,et)=>j&&et instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof b=="boolean"&&T===void 0&&(T=b,b=void 0);for(const j of l)if(0>j.span&&j.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let P=-1;try{P=l.reduce((j,et)=>j+et.getSpan(),0)}catch{}super(P,b),this.fields=l,this.decodePrefixes=!!T}getSpan(l,b=0){if(0<=this.span)return this.span;let T=0;try{T=this.fields.reduce((P,j)=>{const et=j.getSpan(l,b);return b+=et,P+et},0)}catch{throw new RangeError("indeterminate span")}return T}decode(l,b=0){t(l);const T=this.makeDestinationObject();for(const P of this.fields)if(P.property!==void 0&&(T[P.property]=P.decode(l,b)),b+=P.getSpan(l,b),this.decodePrefixes&&l.length===b)break;return T}encode(l,b,T=0){const P=T;let j=0,et=0;for(const ut of this.fields){let Tt=ut.span;if(et=0<Tt?Tt:0,ut.property!==void 0){const yt=l[ut.property];yt!==void 0&&(et=ut.encode(yt,b,T),0>Tt&&(Tt=ut.getSpan(b,T)))}j=T,T+=Tt}return j+et-P}fromArray(l){const b=this.makeDestinationObject();for(const T of this.fields)T.property!==void 0&&0<l.length&&(b[T.property]=l.shift());return b}layoutFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const b of this.fields)if(b.property===l)return b}offsetOf(l){if(typeof l!="string")throw new TypeError("property must be string");let b=0;for(const T of this.fields){if(T.property===l)return b;0>T.span?b=-1:0<=b&&(b+=T.span)}}}G.Structure=V;class K{constructor(l){this.property=l}decode(l,b){throw new Error("UnionDiscriminator is abstract")}encode(l,b,T){throw new Error("UnionDiscriminator is abstract")}}G.UnionDiscriminator=K;class q extends K{constructor(l,b){if(!(l instanceof a&&l.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(b||l.property||"variant"),this.layout=l}decode(l,b){return this.layout.decode(l,b)}encode(l,b,T){return this.layout.encode(l,b,T)}}G.UnionLayoutDiscriminator=q;class F extends r{constructor(l,b,T){let P;if(l instanceof _||l instanceof I)P=new q(new d(l));else if(l instanceof a&&l.isCount())P=new q(l);else if(l instanceof K)P=l;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(b===void 0&&(b=null),!(b===null||b instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(b!==null){if(0>b.span)throw new Error("defaultLayout must have constant span");b.property===void 0&&(b=b.replicate("content"))}let j=-1;b&&(j=b.span,0<=j&&(l instanceof _||l instanceof I)&&(j+=P.layout.span)),super(j,T),this.discriminator=P,this.usesPrefixDiscriminator=l instanceof _||l instanceof I,this.defaultLayout=b,this.registry={};let et=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ut){return et(ut)},this.configGetSourceVariant=function(ut){et=ut.bind(this)}}getSpan(l,b=0){if(0<=this.span)return this.span;const T=this.getVariant(l,b);if(!T)throw new Error("unable to determine span for unrecognized variant");return T.getSpan(l,b)}defaultGetSourceVariant(l){if(Object.prototype.hasOwnProperty.call(l,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(l,this.defaultLayout.property))return;const b=this.registry[l[this.discriminator.property]];if(b&&(!b.layout||b.property&&Object.prototype.hasOwnProperty.call(l,b.property)))return b}else for(const b in this.registry){const T=this.registry[b];if(T.property&&Object.prototype.hasOwnProperty.call(l,T.property))return T}throw new Error("unable to infer src variant")}decode(l,b=0){let T;const P=this.discriminator,j=P.decode(l,b),et=this.registry[j];if(et===void 0){const ut=this.defaultLayout;let Tt=0;this.usesPrefixDiscriminator&&(Tt=P.layout.span),T=this.makeDestinationObject(),T[P.property]=j,T[ut.property]=ut.decode(l,b+Tt)}else T=et.decode(l,b);return T}encode(l,b,T=0){const P=this.getSourceVariant(l);if(P===void 0){const j=this.discriminator,et=this.defaultLayout;let ut=0;return this.usesPrefixDiscriminator&&(ut=j.layout.span),j.encode(l[j.property],b,T),ut+et.encode(l[et.property],b,T+ut)}return P.encode(l,b,T)}addVariant(l,b,T){const P=new E(this,l,b,T);return this.registry[l]=P,P}getVariant(l,b=0){let T;return l instanceof Uint8Array?T=this.discriminator.decode(l,b):T=l,this.registry[T]}}G.Union=F;class E extends r{constructor(l,b,T,P){if(!(l instanceof F))throw new TypeError("union must be a Union");if(!Number.isInteger(b)||0>b)throw new TypeError("variant must be a (non-negative) integer");if(typeof T=="string"&&P===void 0&&(P=T,T=null),T){if(!(T instanceof r))throw new TypeError("layout must be a Layout");if(l.defaultLayout!==null&&0<=T.span&&T.span>l.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof P!="string")throw new TypeError("variant must have a String property")}let j=l.span;0>l.span&&(j=T?T.span:0,0<=j&&l.usesPrefixDiscriminator&&(j+=l.discriminator.layout.span)),super(j,P),this.union=l,this.variant=b,this.layout=T||null}getSpan(l,b=0){if(0<=this.span)return this.span;let T=0;this.union.usesPrefixDiscriminator&&(T=this.union.discriminator.layout.span);let P=0;return this.layout&&(P=this.layout.getSpan(l,b+T)),T+P}decode(l,b=0){const T=this.makeDestinationObject();if(this!==this.union.getVariant(l,b))throw new Error("variant mismatch");let P=0;return this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout?T[this.property]=this.layout.decode(l,b+P):this.property?T[this.property]=!0:this.union.usesPrefixDiscriminator&&(T[this.union.discriminator.property]=this.variant),T}encode(l,b,T=0){let P=0;if(this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(l,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,b,T);let j=P;if(this.layout&&(this.layout.encode(l[this.property],b,T+P),j+=this.layout.getSpan(b,T+P),0<=this.union.span&&j>this.union.span))throw new Error("encoded variant overruns containing union");return j}fromArray(l){if(this.layout)return this.layout.fromArray(l)}}G.VariantLayout=E;function o(c){return 0>c&&(c+=4294967296),c}class f extends r{constructor(l,b,T){if(!(l instanceof _||l instanceof I))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof b=="string"&&T===void 0&&(T=b,b=!1),4<l.span)throw new RangeError("word cannot exceed 32 bits");super(l.span,T),this.word=l,this.msb=!!b,this.fields=[];let P=0;this._packedSetValue=function(j){return P=o(j),this},this._packedGetValue=function(){return P}}decode(l,b=0){const T=this.makeDestinationObject(),P=this.word.decode(l,b);this._packedSetValue(P);for(const j of this.fields)j.property!==void 0&&(T[j.property]=j.decode(l));return T}encode(l,b,T=0){const P=this.word.decode(b,T);this._packedSetValue(P);for(const j of this.fields)if(j.property!==void 0){const et=l[j.property];et!==void 0&&j.encode(et)}return this.word.encode(this._packedGetValue(),b,T)}addField(l,b){const T=new m(this,l,b);return this.fields.push(T),T}addBoolean(l){const b=new R(this,l);return this.fields.push(b),b}fieldFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const b of this.fields)if(b.property===l)return b}}G.BitStructure=f;class m{constructor(l,b,T){if(!(l instanceof f))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(b)||0>=b)throw new TypeError("bits must be positive integer");const P=8*l.span,j=l.fields.reduce((et,ut)=>et+ut.bits,0);if(b+j>P)throw new Error("bits too long for span remainder ("+(P-j)+" of "+P+" remain)");this.container=l,this.bits=b,this.valueMask=(1<<b)-1,b===32&&(this.valueMask=4294967295),this.start=j,this.container.msb&&(this.start=P-j-b),this.wordMask=o(this.valueMask<<this.start),this.property=T}decode(l,b){const T=this.container._packedGetValue();return o(T&this.wordMask)>>>this.start}encode(l){if(typeof l!="number"||!Number.isInteger(l)||l!==o(l&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const b=this.container._packedGetValue(),T=o(l<<this.start);this.container._packedSetValue(o(b&~this.wordMask)|T)}}G.BitField=m;class R extends m{constructor(l,b){super(l,1,b)}decode(l,b){return!!super.decode(l,b)}encode(l){typeof l=="boolean"&&(l=+l),super.encode(l)}}G.Boolean=R;class S extends r{constructor(l,b){if(!(l instanceof a&&l.isCount()||Number.isInteger(l)&&0<=l))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let T=-1;l instanceof a||(T=l),super(T,b),this.length=l}getSpan(l,b){let T=this.span;return 0>T&&(T=this.length.decode(l,b)),T}decode(l,b=0){let T=this.span;return 0>T&&(T=this.length.decode(l,b)),e(l).slice(b,b+T)}encode(l,b,T){let P=this.length;if(this.length instanceof a&&(P=l.length),!(l instanceof Uint8Array&&P===l.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+P+") Uint8Array as src");if(T+P>b.length)throw new RangeError("encoding overruns Uint8Array");const j=e(l);return e(b).write(j.toString("hex"),T,P,"hex"),this.length instanceof a&&this.length.encode(P,b,T),P}}G.Blob=S;class w extends r{constructor(l){super(-1,l)}getSpan(l,b=0){t(l);let T=b;for(;T<l.length&&l[T]!==0;)T+=1;return 1+T-b}decode(l,b=0){const T=this.getSpan(l,b);return e(l).slice(b,b+T-1).toString("utf-8")}encode(l,b,T=0){typeof l!="string"&&(l=String(l));const P=n.Buffer.from(l,"utf8"),j=P.length;if(T+j>b.length)throw new RangeError("encoding overruns Buffer");const et=e(b);return P.copy(et,T),et[T+j]=0,j+1}}G.CString=w;class y extends r{constructor(l,b){if(typeof l=="string"&&b===void 0&&(b=l,l=void 0),l===void 0)l=-1;else if(!Number.isInteger(l))throw new TypeError("maxSpan must be an integer");super(-1,b),this.maxSpan=l}getSpan(l,b=0){return t(l),l.length-b}decode(l,b=0){const T=this.getSpan(l,b);if(0<=this.maxSpan&&this.maxSpan<T)throw new RangeError("text length exceeds maxSpan");return e(l).slice(b,b+T).toString("utf-8")}encode(l,b,T=0){typeof l!="string"&&(l=String(l));const P=n.Buffer.from(l,"utf8"),j=P.length;if(0<=this.maxSpan&&this.maxSpan<j)throw new RangeError("text length exceeds maxSpan");if(T+j>b.length)throw new RangeError("encoding overruns Buffer");return P.copy(e(b),T),j}}G.UTF8=y;class h extends r{constructor(l,b){super(0,b),this.value=l}decode(l,b){return this.value}encode(l,b,T){return 0}}return G.Constant=h,G.greedy=(c,l)=>new u(c,l),G.offset=(c,l,b)=>new d(c,l,b),G.u8=c=>new _(1,c),G.u16=c=>new _(2,c),G.u24=c=>new _(3,c),G.u32=c=>new _(4,c),G.u40=c=>new _(5,c),G.u48=c=>new _(6,c),G.nu64=c=>new v(c),G.u16be=c=>new I(2,c),G.u24be=c=>new I(3,c),G.u32be=c=>new I(4,c),G.u40be=c=>new I(5,c),G.u48be=c=>new I(6,c),G.nu64be=c=>new U(c),G.s8=c=>new x(1,c),G.s16=c=>new x(2,c),G.s24=c=>new x(3,c),G.s32=c=>new x(4,c),G.s40=c=>new x(5,c),G.s48=c=>new x(6,c),G.ns64=c=>new H(c),G.s16be=c=>new B(2,c),G.s24be=c=>new B(3,c),G.s32be=c=>new B(4,c),G.s40be=c=>new B(5,c),G.s48be=c=>new B(6,c),G.ns64be=c=>new L(c),G.f32=c=>new X(c),G.f32be=c=>new Z(c),G.f64=c=>new Q(c),G.f64be=c=>new st(c),G.struct=(c,l,b)=>new V(c,l,b),G.bits=(c,l,b)=>new f(c,l,b),G.seq=(c,l,b)=>new nt(c,l,b),G.union=(c,l,b)=>new F(c,l,b),G.unionLayoutDiscriminator=(c,l)=>new q(c,l),G.blob=(c,l)=>new S(c,l),G.cstr=c=>new w(c),G.utf8=(c,l)=>new y(c,l),G.constant=(c,l)=>new h(c,l),G}var M=sl(),pr={},xo;function ol(){if(xo)return pr;xo=1,Object.defineProperty(pr,"__esModule",{value:!0});function n(s){{const i=Buffer.from(s);i.reverse();const a=i.toString("hex");return a.length===0?BigInt(0):BigInt(`0x${a}`)}}pr.toBigIntLE=n;function t(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}pr.toBigIntBE=t;function e(s,i){{const a=s.toString(16),u=Buffer.from(a.padStart(i*2,"0").slice(0,i*2),"hex");return u.reverse(),u}}pr.toBufferLE=e;function r(s,i){{const a=s.toString(16);return Buffer.from(a.padStart(i*2,"0").slice(0,i*2),"hex")}}return pr.toBufferBE=r,pr}var us=ol();let al=class extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...a}=t,{path:u}=t,d=u.length===0?s:`At path: ${u.join(".")} -- ${s}`;super(i??d),i!=null&&(this.cause=d),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}};function cl(n){return sn(n)&&typeof n[Symbol.iterator]=="function"}function sn(n){return typeof n=="object"&&n!=null}function Mn(n){return sn(n)&&!Array.isArray(n)}function Ue(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function ul(n){const{done:t,value:e}=n.next();return t?void 0:e}function ll(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:a}=e,{refinement:u,message:d=`Expected a value of type \`${a}\`${u?` with refinement \`${u}\``:""}, but received: \`${Ue(r)}\``}=n;return{value:r,type:a,refinement:u,key:s[s.length-1],path:s,branch:i,...n,message:d}}function*To(n,t,e,r){cl(n)||(n=[n]);for(const s of n){const i=ll(s,t,e,r);i&&(yield i)}}function*Bs(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:a=!1}=e,u={path:r,branch:s,mask:a};i&&(n=t.coercer(n,u));let d="valid";for(const _ of t.validator(n,u))_.explanation=e.message,d="not_valid",yield[_,void 0];for(let[_,I,x]of t.entries(n,u)){const B=Bs(I,x,{path:_===void 0?r:[...r,_],branch:_===void 0?s:[...s,I],coerce:i,mask:a,message:e.message});for(const k of B)k[0]?(d=k[0].refinement!=null?"not_refined":"not_valid",yield[k[0],void 0]):i&&(I=k[1],_===void 0?n=I:n instanceof Map?n.set(_,I):n instanceof Set?n.add(I):sn(n)&&(I!==void 0||_ in n)&&(n[_]=I))}if(d!=="not_valid")for(const _ of t.refiner(n,u))_.explanation=e.message,d="not_refined",yield[_,void 0];d==="valid"&&(yield[void 0,n])}let Ge=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:a=d=>d,entries:u=function*(){}}=t;this.type=e,this.schema=r,this.entries=u,this.coercer=a,s?this.validator=(d,_)=>{const I=s(d,_);return To(I,_,this,d)}:this.validator=()=>[],i?this.refiner=(d,_)=>{const I=i(d,_);return To(I,_,this,d)}:this.refiner=()=>[]}assert(t,e){return Pa(t,this,e)}create(t,e){return it(t,this,e)}is(t){return Ua(t,this)}mask(t,e){return hl(t,this,e)}validate(t,e={}){return on(t,this,e)}};function Pa(n,t,e){const r=on(n,t,{message:e});if(r[0])throw r[0]}function it(n,t,e){const r=on(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function hl(n,t,e){const r=on(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Ua(n,t){return!on(n,t)[0]}function on(n,t,e={}){const r=Bs(n,t,e),s=ul(r);return s[0]?[new al(s[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function Sr(n,t){return new Ge({type:n,schema:null,validator:t})}function fl(){return Sr("any",()=>!0)}function ot(n){return new Ge({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ue(t)}`}})}function Ve(){return Sr("boolean",n=>typeof n=="boolean")}function Ns(n){return Sr("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ue(t)}`)}function Kt(n){const t=Ue(n),e=typeof n;return new Ge({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Ue(r)}`}})}function dl(){return Sr("never",()=>!1)}function at(n){return new Ge({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function W(){return Sr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ue(n)}`)}function ft(n){return new Ge({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Da(n,t){return new Ge({type:"record",schema:null,*entries(e){if(sn(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return Mn(e)||`Expected an object, but received: ${Ue(e)}`},coercer(e){return Mn(e)?{...e}:e}})}function rt(){return Sr("string",n=>typeof n=="string"||`Expected a string, but received: ${Ue(n)}`)}function Cs(n){const t=dl();return new Ge({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ue(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function J(n){const t=Object.keys(n);return new Ge({type:"type",schema:n,*entries(e){if(sn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Mn(e)||`Expected an object, but received: ${Ue(e)}`},coercer(e){return Mn(e)?{...e}:e}})}function ke(n){const t=n.map(e=>e.type).join(" | ");return new Ge({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,a]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return a}return e},validator(e,r){const s=[];for(const i of n){const[...a]=Bs(e,i,r),[u]=a;if(u[0])for(const[d]of a)d&&s.push(d);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ue(e)}`,...s]}})}function Hr(){return Sr("unknown",()=>!0)}function an(n,t,e){return new Ge({...n,coercer:(r,s)=>Ua(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var gn,pl=new Uint8Array(16);function Fa(){if(!gn&&(gn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!gn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gn(pl)}const yl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Wn(n){return typeof n=="string"&&yl.test(n)}var be=[];for(var Li=0;Li<256;++Li)be.push((Li+256).toString(16).substr(1));function $n(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(be[n[t+0]]+be[n[t+1]]+be[n[t+2]]+be[n[t+3]]+"-"+be[n[t+4]]+be[n[t+5]]+"-"+be[n[t+6]]+be[n[t+7]]+"-"+be[n[t+8]]+be[n[t+9]]+"-"+be[n[t+10]]+be[n[t+11]]+be[n[t+12]]+be[n[t+13]]+be[n[t+14]]+be[n[t+15]]).toLowerCase();if(!Wn(e))throw TypeError("Stringified UUID is invalid");return e}var Oo,Pi,Ui=0,Di=0;function gl(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||Oo,a=n.clockseq!==void 0?n.clockseq:Pi;if(i==null||a==null){var u=n.random||(n.rng||Fa)();i==null&&(i=Oo=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),a==null&&(a=Pi=(u[6]<<8|u[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),_=n.nsecs!==void 0?n.nsecs:Di+1,I=d-Ui+(_-Di)/1e4;if(I<0&&n.clockseq===void 0&&(a=a+1&16383),(I<0||d>Ui)&&n.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ui=d,Di=_,Pi=a,d+=122192928e5;var x=((d&268435455)*1e4+_)%4294967296;s[r++]=x>>>24&255,s[r++]=x>>>16&255,s[r++]=x>>>8&255,s[r++]=x&255;var B=d/4294967296*1e4&268435455;s[r++]=B>>>8&255,s[r++]=B&255,s[r++]=B>>>24&15|16,s[r++]=B>>>16&255,s[r++]=a>>>8|128,s[r++]=a&255;for(var k=0;k<6;++k)s[r+k]=i[k];return t||$n(s)}function Ha(n){if(!Wn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function ml(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var wl="6ba7b810-9dad-11d1-80b4-00c04fd430c8",bl="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function za(n,t,e){function r(s,i,a,u){if(typeof s=="string"&&(s=ml(s)),typeof i=="string"&&(i=Ha(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,a){u=u||0;for(var _=0;_<16;++_)a[u+_]=d[_];return a}return $n(d)}try{r.name=n}catch{}return r.DNS=wl,r.URL=bl,r}function _l(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return El(Rl(Sl(n),n.length*8))}function El(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(a)}return t}function Ka(n){return(n+64>>>9<<4)+14+1}function Rl(n,t){n[t>>5]|=128<<t%32,n[Ka(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,a=0;a<n.length;a+=16){var u=e,d=r,_=s,I=i;e=Ee(e,r,s,i,n[a],7,-680876936),i=Ee(i,e,r,s,n[a+1],12,-389564586),s=Ee(s,i,e,r,n[a+2],17,606105819),r=Ee(r,s,i,e,n[a+3],22,-1044525330),e=Ee(e,r,s,i,n[a+4],7,-176418897),i=Ee(i,e,r,s,n[a+5],12,1200080426),s=Ee(s,i,e,r,n[a+6],17,-1473231341),r=Ee(r,s,i,e,n[a+7],22,-45705983),e=Ee(e,r,s,i,n[a+8],7,1770035416),i=Ee(i,e,r,s,n[a+9],12,-1958414417),s=Ee(s,i,e,r,n[a+10],17,-42063),r=Ee(r,s,i,e,n[a+11],22,-1990404162),e=Ee(e,r,s,i,n[a+12],7,1804603682),i=Ee(i,e,r,s,n[a+13],12,-40341101),s=Ee(s,i,e,r,n[a+14],17,-1502002290),r=Ee(r,s,i,e,n[a+15],22,1236535329),e=Re(e,r,s,i,n[a+1],5,-165796510),i=Re(i,e,r,s,n[a+6],9,-1069501632),s=Re(s,i,e,r,n[a+11],14,643717713),r=Re(r,s,i,e,n[a],20,-373897302),e=Re(e,r,s,i,n[a+5],5,-701558691),i=Re(i,e,r,s,n[a+10],9,38016083),s=Re(s,i,e,r,n[a+15],14,-660478335),r=Re(r,s,i,e,n[a+4],20,-405537848),e=Re(e,r,s,i,n[a+9],5,568446438),i=Re(i,e,r,s,n[a+14],9,-1019803690),s=Re(s,i,e,r,n[a+3],14,-187363961),r=Re(r,s,i,e,n[a+8],20,1163531501),e=Re(e,r,s,i,n[a+13],5,-1444681467),i=Re(i,e,r,s,n[a+2],9,-51403784),s=Re(s,i,e,r,n[a+7],14,1735328473),r=Re(r,s,i,e,n[a+12],20,-1926607734),e=Se(e,r,s,i,n[a+5],4,-378558),i=Se(i,e,r,s,n[a+8],11,-2022574463),s=Se(s,i,e,r,n[a+11],16,1839030562),r=Se(r,s,i,e,n[a+14],23,-35309556),e=Se(e,r,s,i,n[a+1],4,-1530992060),i=Se(i,e,r,s,n[a+4],11,1272893353),s=Se(s,i,e,r,n[a+7],16,-155497632),r=Se(r,s,i,e,n[a+10],23,-1094730640),e=Se(e,r,s,i,n[a+13],4,681279174),i=Se(i,e,r,s,n[a],11,-358537222),s=Se(s,i,e,r,n[a+3],16,-722521979),r=Se(r,s,i,e,n[a+6],23,76029189),e=Se(e,r,s,i,n[a+9],4,-640364487),i=Se(i,e,r,s,n[a+12],11,-421815835),s=Se(s,i,e,r,n[a+15],16,530742520),r=Se(r,s,i,e,n[a+2],23,-995338651),e=Ae(e,r,s,i,n[a],6,-198630844),i=Ae(i,e,r,s,n[a+7],10,1126891415),s=Ae(s,i,e,r,n[a+14],15,-1416354905),r=Ae(r,s,i,e,n[a+5],21,-57434055),e=Ae(e,r,s,i,n[a+12],6,1700485571),i=Ae(i,e,r,s,n[a+3],10,-1894986606),s=Ae(s,i,e,r,n[a+10],15,-1051523),r=Ae(r,s,i,e,n[a+1],21,-2054922799),e=Ae(e,r,s,i,n[a+8],6,1873313359),i=Ae(i,e,r,s,n[a+15],10,-30611744),s=Ae(s,i,e,r,n[a+6],15,-1560198380),r=Ae(r,s,i,e,n[a+13],21,1309151649),e=Ae(e,r,s,i,n[a+4],6,-145523070),i=Ae(i,e,r,s,n[a+11],10,-1120210379),s=Ae(s,i,e,r,n[a+2],15,718787259),r=Ae(r,s,i,e,n[a+9],21,-343485551),e=ar(e,u),r=ar(r,d),s=ar(s,_),i=ar(i,I)}return[e,r,s,i]}function Sl(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(Ka(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function ar(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Al(n,t){return n<<t|n>>>32-t}function Vn(n,t,e,r,s,i){return ar(Al(ar(ar(t,n),ar(r,i)),s),e)}function Ee(n,t,e,r,s,i,a){return Vn(t&e|~t&r,n,t,s,i,a)}function Re(n,t,e,r,s,i,a){return Vn(t&r|e&~r,n,t,s,i,a)}function Se(n,t,e,r,s,i,a){return Vn(t^e^r,n,t,s,i,a)}function Ae(n,t,e,r,s,i,a){return Vn(e^(t|~r),n,t,s,i,a)}var Il=za("v3",48,_l);function vl(n,t,e){n=n||{};var r=n.random||(n.rng||Fa)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return $n(r)}function kl(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Fi(n,t){return n<<t|n>>>32-t}function xl(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,a=Math.ceil(i/16),u=new Array(a),d=0;d<a;++d){for(var _=new Uint32Array(16),I=0;I<16;++I)_[I]=n[d*64+I*4]<<24|n[d*64+I*4+1]<<16|n[d*64+I*4+2]<<8|n[d*64+I*4+3];u[d]=_}u[a-1][14]=(n.length-1)*8/Math.pow(2,32),u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=(n.length-1)*8&4294967295;for(var x=0;x<a;++x){for(var B=new Uint32Array(80),k=0;k<16;++k)B[k]=u[x][k];for(var C=16;C<80;++C)B[C]=Fi(B[C-3]^B[C-8]^B[C-14]^B[C-16],1);for(var N=e[0],v=e[1],U=e[2],H=e[3],L=e[4],X=0;X<80;++X){var Z=Math.floor(X/20),Q=Fi(N,5)+kl(Z,v,U,H)+L+t[Z]+B[X]>>>0;L=H,H=U,U=Fi(v,30)>>>0,v=N,N=Q}e[0]=e[0]+N>>>0,e[1]=e[1]+v>>>0,e[2]=e[2]+U>>>0,e[3]=e[3]+H>>>0,e[4]=e[4]+L>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Tl=za("v5",80,xl);const Ol="00000000-0000-0000-0000-000000000000";function Bl(n){if(!Wn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Nl=Object.freeze(Object.defineProperty({__proto__:null,NIL:Ol,parse:Ha,stringify:$n,v1:gl,v3:Il,v4:vl,v5:Tl,validate:Wn,version:Bl},Symbol.toStringTag,{value:"Module"})),qa=Fn(Nl);var Hi,Bo;function Cl(){if(Bo)return Hi;Bo=1;const n=qa.v4;return Hi=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const a=typeof i.version=="number"?i.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const u={method:e};if(a===2&&(u.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");u.params=r}if(typeof s>"u"){const d=typeof i.generator=="function"?i.generator:function(){return n()};u.id=d(u,i)}else a===2&&s===null?i.notificationIdNull&&(u.id=null):u.id=s;return u},Hi}var zi,No;function Ml(){if(No)return zi;No=1;const n=qa.v4,t=Cl(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return zi=e,e.prototype.request=function(r,s,i,a){const u=this;let d=null;const _=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&_)throw new TypeError("JSON-RPC 1.0 does not support batching");if(_||!_&&r&&typeof r=="object"&&typeof s=="function")a=s,d=r;else{typeof i=="function"&&(a=i,i=void 0);const B=typeof a=="function";try{d=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(k){if(B)return a(k);throw k}if(!B)return d}let x;try{x=JSON.stringify(d,this.options.replacer)}catch(B){return a(B)}return this.callServer(x,function(B,k){u._parseResponse(B,k,a)}),d},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let a;try{a=JSON.parse(s,this.options.reviver)}catch(u){return i(u)}if(i.length===3)if(Array.isArray(a)){const u=function(_){return typeof _.error<"u"},d=function(_){return!u(_)};return i(null,a.filter(u),a.filter(d))}else return i(null,a.error,a.result);i(null,a)},zi}var Ll=Ml();const Pl=Dn(Ll);var Ki={exports:{}},Co;function Ul(){return Co||(Co=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(d,_,I){this.fn=d,this.context=_,this.once=I||!1}function i(d,_,I,x,B){if(typeof I!="function")throw new TypeError("The listener must be a function");var k=new s(I,x||d,B),C=e?e+_:_;return d._events[C]?d._events[C].fn?d._events[C]=[d._events[C],k]:d._events[C].push(k):(d._events[C]=k,d._eventsCount++),d}function a(d,_){--d._eventsCount===0?d._events=new r:delete d._events[_]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var _=[],I,x;if(this._eventsCount===0)return _;for(x in I=this._events)t.call(I,x)&&_.push(e?x.slice(1):x);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(I)):_},u.prototype.listeners=function(_){var I=e?e+_:_,x=this._events[I];if(!x)return[];if(x.fn)return[x.fn];for(var B=0,k=x.length,C=new Array(k);B<k;B++)C[B]=x[B].fn;return C},u.prototype.listenerCount=function(_){var I=e?e+_:_,x=this._events[I];return x?x.fn?1:x.length:0},u.prototype.emit=function(_,I,x,B,k,C){var N=e?e+_:_;if(!this._events[N])return!1;var v=this._events[N],U=arguments.length,H,L;if(v.fn){switch(v.once&&this.removeListener(_,v.fn,void 0,!0),U){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,I),!0;case 3:return v.fn.call(v.context,I,x),!0;case 4:return v.fn.call(v.context,I,x,B),!0;case 5:return v.fn.call(v.context,I,x,B,k),!0;case 6:return v.fn.call(v.context,I,x,B,k,C),!0}for(L=1,H=new Array(U-1);L<U;L++)H[L-1]=arguments[L];v.fn.apply(v.context,H)}else{var X=v.length,Z;for(L=0;L<X;L++)switch(v[L].once&&this.removeListener(_,v[L].fn,void 0,!0),U){case 1:v[L].fn.call(v[L].context);break;case 2:v[L].fn.call(v[L].context,I);break;case 3:v[L].fn.call(v[L].context,I,x);break;case 4:v[L].fn.call(v[L].context,I,x,B);break;default:if(!H)for(Z=1,H=new Array(U-1);Z<U;Z++)H[Z-1]=arguments[Z];v[L].fn.apply(v[L].context,H)}}return!0},u.prototype.on=function(_,I,x){return i(this,_,I,x,!1)},u.prototype.once=function(_,I,x){return i(this,_,I,x,!0)},u.prototype.removeListener=function(_,I,x,B){var k=e?e+_:_;if(!this._events[k])return this;if(!I)return a(this,k),this;var C=this._events[k];if(C.fn)C.fn===I&&(!B||C.once)&&(!x||C.context===x)&&a(this,k);else{for(var N=0,v=[],U=C.length;N<U;N++)(C[N].fn!==I||B&&!C[N].once||x&&C[N].context!==x)&&v.push(C[N]);v.length?this._events[k]=v.length===1?v[0]:v:a(this,k)}return this},u.prototype.removeAllListeners=function(_){var I;return _?(I=e?e+_:_,this._events[I]&&a(this,I)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u}(Ki)),Ki.exports}var Dl=Ul();const Wa=Dn(Dl);var Fl=class extends Wa{constructor(t,e,r){super();pe(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,r){const s=r||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function Hl(n,t){return new Fl(n,t)}var zl=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},Kl=class extends Wa{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:a=5,...u}={},d,_){super();pe(this,"address");pe(this,"rpc_id");pe(this,"queue");pe(this,"options");pe(this,"autoconnect");pe(this,"ready");pe(this,"reconnect");pe(this,"reconnect_timer_id");pe(this,"reconnect_interval");pe(this,"max_reconnects");pe(this,"rest_options");pe(this,"current_reconnects");pe(this,"generate_request_id");pe(this,"socket");pe(this,"webSocketFactory");pe(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=a,this.rest_options=u,this.current_reconnects=0,this.generate_request_id=d||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),_?this.dataPack=_:this.dataPack=new zl,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,a)=>{if(!this.ready)return a(new Error("socket not ready"));const u=this.generate_request_id(t,e),d={jsonrpc:"2.0",method:t,params:e||void 0,id:u};this.socket.send(this.dataPack.encode(d),s,_=>{if(_)return a(_);this.queue[u]={promise:[i,a]},r&&(this.queue[u].timeout=setTimeout(()=>{delete this.queue[u],a(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),a=>{if(a)return s(a);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=ht.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};const $a=[],Va=[],Ga=[],ql=BigInt(0),$r=BigInt(1),Wl=BigInt(2),$l=BigInt(7),Vl=BigInt(256),Gl=BigInt(113);for(let n=0,t=$r,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],$a.push(2*(5*r+e)),Va.push((n+1)*(n+2)/2%64);let s=ql;for(let i=0;i<7;i++)t=(t<<$r^(t>>$l)*Gl)%Vl,t&Wl&&(s^=$r<<($r<<BigInt(i))-$r);Ga.push(s)}const[jl,Yl]=Ea(Ga,!0),Mo=(n,t,e)=>e>32?Aa(n,t,e):Ra(n,t,e),Lo=(n,t,e)=>e>32?Ia(n,t,e):Sa(n,t,e);function Zl(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)e[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const u=(a+8)%10,d=(a+2)%10,_=e[d],I=e[d+1],x=Mo(_,I,1)^e[u],B=Lo(_,I,1)^e[u+1];for(let k=0;k<50;k+=10)n[a+k]^=x,n[a+k+1]^=B}let s=n[2],i=n[3];for(let a=0;a<24;a++){const u=Va[a],d=Mo(s,i,u),_=Lo(s,i,u),I=$a[a];s=n[I],i=n[I+1],n[I]=d,n[I+1]=_}for(let a=0;a<50;a+=10){for(let u=0;u<10;u++)e[u]=n[a+u];for(let u=0;u<10;u++)n[a+u]^=~e[(u+2)%10]&e[(u+4)%10]}n[0]^=jl[r],n[1]^=Yl[r]}e.fill(0)}class Ms extends Ss{constructor(t,e,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,vn(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Gc(this.state)}keccak(){lo||ho(this.state32),Zl(this.state32,this.rounds),lo||ho(this.state32),this.posOut=0,this.pos=0}update(t){Nr(this);const{blockLen:e,state:r}=this;t=Hn(t);const s=t.length;for(let i=0;i<s;){const a=Math.min(e-this.pos,s-i);for(let u=0;u<a;u++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,(e&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Nr(this,!1),rn(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return vn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ma(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return t||(t=new Ms(e,r,s,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}}const Xl=(n,t,e)=>As(()=>new Ms(t,n,e)),Po=Xl(1,136,256/8);class ja extends Ss{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Vc(t);const r=Hn(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return Nr(this),this.iHash.update(t),this}digestInto(t){Nr(this),rn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:u}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=a,t.outputLen=u,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ya=(n,t,e)=>new ja(n,t).update(e).digest();Ya.create=(n,t)=>new ja(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Uo(n){n.lowS!==void 0&&cr("lowS",n.lowS),n.prehash!==void 0&&cr("prehash",n.prehash)}function Jl(n){const t=xs(n);nn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:s}=t;if(e){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}class Ql extends Error{constructor(t=""){super(t)}}const Xe={Err:Ql,_tlv:{encode:(n,t)=>{const{Err:e}=Xe;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=pn(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?pn(s.length/2|128):"";return pn(n)+i+s+t},decode(n,t){const{Err:e}=Xe;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const d=s&127;if(!d)throw new e("tlv.decode(long): indefinite length not supported");if(d>4)throw new e("tlv.decode(long): byte length is too big");const _=t.subarray(r,r+d);if(_.length!==d)throw new e("tlv.decode: length bytes not complete");if(_[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const I of _)a=a<<8|I;if(r+=d,a<128)throw new e("tlv.decode(long): not minimal encoding")}const u=t.subarray(r,r+a);if(u.length!==a)throw new e("tlv.decode: wrong value length");return{v:u,l:t.subarray(r+a)}}},_int:{encode(n){const{Err:t}=Xe;if(n<Qe)throw new t("integer: negative integers are not allowed");let e=pn(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Xe;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return _r(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Xe,s=fe("signature",n),{v:i,l:a}=r.decode(48,s);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:d}=r.decode(2,i),{v:_,l:I}=r.decode(2,d);if(I.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(u),s:e.decode(_)}},hexFromSig(n){const{_tlv:t,_int:e}=Xe,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},Qe=BigInt(0),ye=BigInt(1);BigInt(2);const Do=BigInt(3);BigInt(4);function th(n){const t=Jl(n),{Fp:e}=t,r=Kn(t.n,t.nBitLength),s=t.toBytes||((N,v,U)=>{const H=v.toAffine();return Lr(Uint8Array.from([4]),e.toBytes(H.x),e.toBytes(H.y))}),i=t.fromBytes||(N=>{const v=N.subarray(1),U=e.fromBytes(v.subarray(0,e.BYTES)),H=e.fromBytes(v.subarray(e.BYTES,2*e.BYTES));return{x:U,y:H}});function a(N){const{a:v,b:U}=t,H=e.sqr(N),L=e.mul(H,N);return e.add(e.add(L,e.mul(N,v)),U)}if(!e.eql(e.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function u(N){return ks(N,ye,t.n)}function d(N){const{allowedPrivateKeyLengths:v,nByteLength:U,wrapPrivateKey:H,n:L}=t;if(v&&typeof N!="bigint"){if(Cr(N)&&(N=Mr(N)),typeof N!="string"||!v.includes(N.length))throw new Error("invalid private key");N=N.padStart(U*2,"0")}let X;try{X=typeof N=="bigint"?N:_r(fe("private key",N,U))}catch{throw new Error("invalid private key, expected hex or "+U+" bytes, got "+typeof N)}return H&&(X=Ht(X,L)),Pe("private key",X,ye,L),X}function _(N){if(!(N instanceof B))throw new Error("ProjectivePoint expected")}const I=Tn((N,v)=>{const{px:U,py:H,pz:L}=N;if(e.eql(L,e.ONE))return{x:U,y:H};const X=N.is0();v==null&&(v=X?e.ONE:e.inv(L));const Z=e.mul(U,v),Q=e.mul(H,v),st=e.mul(L,v);if(X)return{x:e.ZERO,y:e.ZERO};if(!e.eql(st,e.ONE))throw new Error("invZ was invalid");return{x:Z,y:Q}}),x=Tn(N=>{if(N.is0()){if(t.allowInfinityPoint&&!e.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:v,y:U}=N.toAffine();if(!e.isValid(v)||!e.isValid(U))throw new Error("bad point: x or y not FE");const H=e.sqr(U),L=a(v);if(!e.eql(H,L))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class B{constructor(v,U,H){if(v==null||!e.isValid(v))throw new Error("x required");if(U==null||!e.isValid(U))throw new Error("y required");if(H==null||!e.isValid(H))throw new Error("z required");this.px=v,this.py=U,this.pz=H,Object.freeze(this)}static fromAffine(v){const{x:U,y:H}=v||{};if(!v||!e.isValid(U)||!e.isValid(H))throw new Error("invalid affine point");if(v instanceof B)throw new Error("projective point not allowed");const L=X=>e.eql(X,e.ZERO);return L(U)&&L(H)?B.ZERO:new B(U,H,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const U=e.invertBatch(v.map(H=>H.pz));return v.map((H,L)=>H.toAffine(U[L])).map(B.fromAffine)}static fromHex(v){const U=B.fromAffine(i(fe("pointHex",v)));return U.assertValidity(),U}static fromPrivateKey(v){return B.BASE.multiply(d(v))}static msm(v,U){return Ma(B,r,v,U)}_setWindowSize(v){C.setWindowSize(this,v)}assertValidity(){x(this)}hasEvenY(){const{y:v}=this.toAffine();if(e.isOdd)return!e.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){_(v);const{px:U,py:H,pz:L}=this,{px:X,py:Z,pz:Q}=v,st=e.eql(e.mul(U,Q),e.mul(X,L)),nt=e.eql(e.mul(H,Q),e.mul(Z,L));return st&&nt}negate(){return new B(this.px,e.neg(this.py),this.pz)}double(){const{a:v,b:U}=t,H=e.mul(U,Do),{px:L,py:X,pz:Z}=this;let Q=e.ZERO,st=e.ZERO,nt=e.ZERO,V=e.mul(L,L),K=e.mul(X,X),q=e.mul(Z,Z),F=e.mul(L,X);return F=e.add(F,F),nt=e.mul(L,Z),nt=e.add(nt,nt),Q=e.mul(v,nt),st=e.mul(H,q),st=e.add(Q,st),Q=e.sub(K,st),st=e.add(K,st),st=e.mul(Q,st),Q=e.mul(F,Q),nt=e.mul(H,nt),q=e.mul(v,q),F=e.sub(V,q),F=e.mul(v,F),F=e.add(F,nt),nt=e.add(V,V),V=e.add(nt,V),V=e.add(V,q),V=e.mul(V,F),st=e.add(st,V),q=e.mul(X,Z),q=e.add(q,q),V=e.mul(q,F),Q=e.sub(Q,V),nt=e.mul(q,K),nt=e.add(nt,nt),nt=e.add(nt,nt),new B(Q,st,nt)}add(v){_(v);const{px:U,py:H,pz:L}=this,{px:X,py:Z,pz:Q}=v;let st=e.ZERO,nt=e.ZERO,V=e.ZERO;const K=t.a,q=e.mul(t.b,Do);let F=e.mul(U,X),E=e.mul(H,Z),o=e.mul(L,Q),f=e.add(U,H),m=e.add(X,Z);f=e.mul(f,m),m=e.add(F,E),f=e.sub(f,m),m=e.add(U,L);let R=e.add(X,Q);return m=e.mul(m,R),R=e.add(F,o),m=e.sub(m,R),R=e.add(H,L),st=e.add(Z,Q),R=e.mul(R,st),st=e.add(E,o),R=e.sub(R,st),V=e.mul(K,m),st=e.mul(q,o),V=e.add(st,V),st=e.sub(E,V),V=e.add(E,V),nt=e.mul(st,V),E=e.add(F,F),E=e.add(E,F),o=e.mul(K,o),m=e.mul(q,m),E=e.add(E,o),o=e.sub(F,o),o=e.mul(K,o),m=e.add(m,o),F=e.mul(E,m),nt=e.add(nt,F),F=e.mul(R,m),st=e.mul(f,st),st=e.sub(st,F),F=e.mul(f,E),V=e.mul(R,V),V=e.add(V,F),new B(st,nt,V)}subtract(v){return this.add(v.negate())}is0(){return this.equals(B.ZERO)}wNAF(v){return C.wNAFCached(this,v,B.normalizeZ)}multiplyUnsafe(v){const{endo:U,n:H}=t;Pe("scalar",v,Qe,H);const L=B.ZERO;if(v===Qe)return L;if(this.is0()||v===ye)return this;if(!U||C.hasPrecomputes(this))return C.wNAFCachedUnsafe(this,v,B.normalizeZ);let{k1neg:X,k1:Z,k2neg:Q,k2:st}=U.splitScalar(v),nt=L,V=L,K=this;for(;Z>Qe||st>Qe;)Z&ye&&(nt=nt.add(K)),st&ye&&(V=V.add(K)),K=K.double(),Z>>=ye,st>>=ye;return X&&(nt=nt.negate()),Q&&(V=V.negate()),V=new B(e.mul(V.px,U.beta),V.py,V.pz),nt.add(V)}multiply(v){const{endo:U,n:H}=t;Pe("scalar",v,ye,H);let L,X;if(U){const{k1neg:Z,k1:Q,k2neg:st,k2:nt}=U.splitScalar(v);let{p:V,f:K}=this.wNAF(Q),{p:q,f:F}=this.wNAF(nt);V=C.constTimeNegate(Z,V),q=C.constTimeNegate(st,q),q=new B(e.mul(q.px,U.beta),q.py,q.pz),L=V.add(q),X=K.add(F)}else{const{p:Z,f:Q}=this.wNAF(v);L=Z,X=Q}return B.normalizeZ([L,X])[0]}multiplyAndAddUnsafe(v,U,H){const L=B.BASE,X=(Q,st)=>st===Qe||st===ye||!Q.equals(L)?Q.multiplyUnsafe(st):Q.multiply(st),Z=X(this,U).add(X(v,H));return Z.is0()?void 0:Z}toAffine(v){return I(this,v)}isTorsionFree(){const{h:v,isTorsionFree:U}=t;if(v===ye)return!0;if(U)return U(B,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:U}=t;return v===ye?this:U?U(B,this):this.multiplyUnsafe(t.h)}toRawBytes(v=!0){return cr("isCompressed",v),this.assertValidity(),s(B,this,v)}toHex(v=!0){return cr("isCompressed",v),Mr(this.toRawBytes(v))}}B.BASE=new B(t.Gx,t.Gy,e.ONE),B.ZERO=new B(e.ZERO,e.ONE,e.ZERO);const k=t.nBitLength,C=Ca(B,t.endo?Math.ceil(k/2):k);return{CURVE:t,ProjectivePoint:B,normPrivateKeyToScalar:d,weierstrassEquation:a,isWithinCurveOrder:u}}function eh(n){const t=xs(n);return nn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function rh(n){const t=eh(n),{Fp:e,n:r}=t,s=e.BYTES+1,i=2*e.BYTES+1;function a(o){return Ht(o,r)}function u(o){return as(o,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:_,weierstrassEquation:I,isWithinCurveOrder:x}=th({...t,toBytes(o,f,m){const R=f.toAffine(),S=e.toBytes(R.x),w=Lr;return cr("isCompressed",m),m?w(Uint8Array.from([f.hasEvenY()?2:3]),S):w(Uint8Array.from([4]),S,e.toBytes(R.y))},fromBytes(o){const f=o.length,m=o[0],R=o.subarray(1);if(f===s&&(m===2||m===3)){const S=_r(R);if(!ks(S,ye,e.ORDER))throw new Error("Point is not on curve");const w=I(S);let y;try{y=e.sqrt(w)}catch(l){const b=l instanceof Error?": "+l.message:"";throw new Error("Point is not on curve"+b)}const h=(y&ye)===ye;return(m&1)===1!==h&&(y=e.neg(y)),{x:S,y}}else if(f===i&&m===4){const S=e.fromBytes(R.subarray(0,e.BYTES)),w=e.fromBytes(R.subarray(e.BYTES,2*e.BYTES));return{x:S,y:w}}else{const S=s,w=i;throw new Error("invalid Point, expected length of "+S+", or uncompressed "+w+", got "+f)}}}),B=o=>Mr(Xr(o,t.nByteLength));function k(o){const f=r>>ye;return o>f}function C(o){return k(o)?a(-o):o}const N=(o,f,m)=>_r(o.slice(f,m));class v{constructor(f,m,R){Pe("r",f,ye,r),Pe("s",m,ye,r),this.r=f,this.s=m,R!=null&&(this.recovery=R),Object.freeze(this)}static fromCompact(f){const m=t.nByteLength;return f=fe("compactSignature",f,m*2),new v(N(f,0,m),N(f,m,2*m))}static fromDER(f){const{r:m,s:R}=Xe.toSig(fe("DER",f));return new v(m,R)}assertValidity(){}addRecoveryBit(f){return new v(this.r,this.s,f)}recoverPublicKey(f){const{r:m,s:R,recovery:S}=this,w=Q(fe("msgHash",f));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");const y=S===2||S===3?m+t.n:m;if(y>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=(S&1)===0?"02":"03",c=d.fromHex(h+B(y)),l=u(y),b=a(-w*l),T=a(R*l),P=d.BASE.multiplyAndAddUnsafe(c,b,T);if(!P)throw new Error("point at infinify");return P.assertValidity(),P}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return kn(this.toDERHex())}toDERHex(){return Xe.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return kn(this.toCompactHex())}toCompactHex(){return B(this.r)+B(this.s)}}const U={isValidPrivateKey(o){try{return _(o),!0}catch{return!1}},normPrivateKeyToScalar:_,randomPrivateKey:()=>{const o=Oa(t.n);return Lu(t.randomBytes(o),t.n)},precompute(o=8,f=d.BASE){return f._setWindowSize(o),f.multiply(BigInt(3)),f}};function H(o,f=!0){return d.fromPrivateKey(o).toRawBytes(f)}function L(o){const f=Cr(o),m=typeof o=="string",R=(f||m)&&o.length;return f?R===s||R===i:m?R===2*s||R===2*i:o instanceof d}function X(o,f,m=!0){if(L(o))throw new Error("first arg must be private key");if(!L(f))throw new Error("second arg must be public key");return d.fromHex(f).multiply(_(o)).toRawBytes(m)}const Z=t.bits2int||function(o){if(o.length>8192)throw new Error("input is too large");const f=_r(o),m=o.length*8-t.nBitLength;return m>0?f>>BigInt(m):f},Q=t.bits2int_modN||function(o){return a(Z(o))},st=zn(t.nBitLength);function nt(o){return Pe("num < 2^"+t.nBitLength,o,Qe,st),Xr(o,t.nByteLength)}function V(o,f,m=K){if(["recovered","canonical"].some(et=>et in m))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:S}=t;let{lowS:w,prehash:y,extraEntropy:h}=m;w==null&&(w=!0),o=fe("msgHash",o),Uo(m),y&&(o=fe("prehashed msgHash",R(o)));const c=Q(o),l=_(f),b=[nt(l),nt(c)];if(h!=null&&h!==!1){const et=h===!0?S(e.BYTES):h;b.push(fe("extraEntropy",et))}const T=Lr(...b),P=c;function j(et){const ut=Z(et);if(!x(ut))return;const Tt=u(ut),yt=d.BASE.multiply(ut).toAffine(),mt=a(yt.x);if(mt===Qe)return;const zt=a(Tt*a(P+mt*l));if(zt===Qe)return;let Rt=(yt.x===mt?0:2)|Number(yt.y&ye),It=zt;return w&&k(zt)&&(It=C(zt),Rt^=1),new v(mt,It,Rt)}return{seed:T,k2sig:j}}const K={lowS:t.lowS,prehash:!1},q={lowS:t.lowS,prehash:!1};function F(o,f,m=K){const{seed:R,k2sig:S}=V(o,f,m),w=t;return Au(w.hash.outputLen,w.nByteLength,w.hmac)(R,S)}d.BASE._setWindowSize(8);function E(o,f,m,R=q){var Rt;const S=o;f=fe("msgHash",f),m=fe("publicKey",m);const{lowS:w,prehash:y,format:h}=R;if(Uo(R),"strict"in R)throw new Error("options.strict was renamed to lowS");if(h!==void 0&&h!=="compact"&&h!=="der")throw new Error("format must be compact or der");const c=typeof S=="string"||Cr(S),l=!c&&!h&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!c&&!l)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b,T;try{if(l&&(b=new v(S.r,S.s)),c){try{h!=="compact"&&(b=v.fromDER(S))}catch(It){if(!(It instanceof Xe.Err))throw It}!b&&h!=="der"&&(b=v.fromCompact(S))}T=d.fromHex(m)}catch{return!1}if(!b||w&&b.hasHighS())return!1;y&&(f=t.hash(f));const{r:P,s:j}=b,et=Q(f),ut=u(j),Tt=a(et*ut),yt=a(P*ut),mt=(Rt=d.BASE.multiplyAndAddUnsafe(T,Tt,yt))==null?void 0:Rt.toAffine();return mt?a(mt.x)===P:!1}return{CURVE:t,getPublicKey:H,getSharedSecret:X,sign:F,verify:E,ProjectivePoint:d,Signature:v,utils:U}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nh(n){return{hash:n,hmac:(t,...e)=>Ya(n,t,Zc(...e)),randomBytes:wa}}function ih(n,t){const e=r=>rh({...n,...nh(r)});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Za=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Fo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sh=BigInt(1),ls=BigInt(2),Ho=(n,t)=>(n+t/ls)/t;function oh(n){const t=Za,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),u=BigInt(44),d=BigInt(88),_=n*n*n%t,I=_*_*n%t,x=Gt(I,e,t)*I%t,B=Gt(x,e,t)*I%t,k=Gt(B,ls,t)*_%t,C=Gt(k,s,t)*k%t,N=Gt(C,i,t)*C%t,v=Gt(N,u,t)*N%t,U=Gt(v,d,t)*v%t,H=Gt(U,u,t)*N%t,L=Gt(H,e,t)*I%t,X=Gt(L,a,t)*C%t,Z=Gt(X,r,t)*_%t,Q=Gt(Z,ls,t);if(!hs.eql(hs.sqr(Q),n))throw new Error("Cannot find square root");return Q}const hs=Kn(Za,void 0,void 0,{sqrt:oh}),Gn=ih({a:BigInt(0),b:BigInt(7),Fp:hs,n:Fo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=Fo,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-sh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,a=BigInt("0x100000000000000000000000000000000"),u=Ho(i*n,t),d=Ho(-r*n,t);let _=Ht(n-u*e-d*s,t),I=Ht(-u*r-d*i,t);const x=_>a,B=I>a;if(x&&(_=t-_),B&&(I=t-I),_>a||I>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:x,k1:_,k2neg:B,k2:I}}}},ns);BigInt(0);Gn.ProjectivePoint;const ah=Fr.utils.randomPrivateKey,zo=()=>{const n=Fr.utils.randomPrivateKey(),t=Ln(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},Ln=Fr.getPublicKey;function Ko(n){try{return Fr.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Ls=(n,t)=>Fr.sign(n,t.slice(0,32)),ch=Fr.verify,Et=n=>ht.Buffer.isBuffer(n)?n:n instanceof Uint8Array?ht.Buffer.from(n.buffer,n.byteOffset,n.byteLength):ht.Buffer.from(n);let Ps=class{constructor(t){Object.assign(this,t)}encode(){return ht.Buffer.from(Mi.serialize(Yr,this))}static decode(t){return Mi.deserialize(Yr,this,t)}static decodeUnchecked(t){return Mi.deserializeUnchecked(Yr,this,t)}};class uh extends Ps{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const Yr=new Map;var Xa;const Ja=32,$e=32;function lh(n){return n._bn!==void 0}let qo=1;class tt extends Ps{constructor(t){if(super({}),this._bn=void 0,lh(t))this._bn=t._bn;else{if(typeof t=="string"){const e=_e.decode(t);if(e.length!=$e)throw new Error("Invalid public key input");this._bn=new Zr(e)}else this._bn=new Zr(t);if(this._bn.byteLength()>$e)throw new Error("Invalid public key input")}}static unique(){const t=new tt(qo);return qo+=1,new tt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return _e.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(ht.Buffer);if(t.length===$e)return t;const e=ht.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=ht.Buffer.concat([t.toBuffer(),ht.Buffer.from(e),r.toBuffer()]),i=ns(s);return new tt(i)}static createProgramAddressSync(t,e){let r=ht.Buffer.alloc(0);t.forEach(function(i){if(i.length>Ja)throw new TypeError("Max seed length exceeded");r=ht.Buffer.concat([r,Et(i)])}),r=ht.Buffer.concat([r,e.toBuffer(),ht.Buffer.from("ProgramDerivedAddress")]);const s=ns(r);if(Ko(s))throw new Error("Invalid seeds, address must fall off the curve");return new tt(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(ht.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new tt(t);return Ko(e.toBytes())}}Xa=tt;tt.default=new Xa("11111111111111111111111111111111");Yr.set(tt,{kind:"struct",fields:[["_bn","u256"]]});class hh{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=Et(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=Et(ah()),this._publicKey=Et(Ln(this._secretKey))}get publicKey(){return new tt(this._publicKey)}get secretKey(){return ht.Buffer.concat([this._secretKey,this._publicKey],64)}}const fh=new tt("BPFLoader1111111111111111111111111111111111"),ur=1232,jn=127,Jr=64;class Us extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Us.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ds extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ds.prototype,"name",{value:"TransactionExpiredTimeoutError"});class xr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(xr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Qr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,a)=>{r.set(i.toBase58(),a)});const s=i=>{const a=r.get(i.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(a=>s(a.pubkey)),data:i.data}))}}const St=(n="publicKey")=>M.blob(32,n),dh=(n="signature")=>M.blob(64,n),mr=(n="string")=>{const t=M.struct([M.u32("length"),M.u32("lengthPadding"),M.blob(M.offset(M.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,a)=>e(i,a).chars.toString(),s.encode=(i,a,u)=>{const d={chars:ht.Buffer.from(i,"utf8")};return r(d,a,u)},s.alloc=i=>M.u32().span+M.u32().span+ht.Buffer.from(i,"utf8").length,s},ph=(n="authorized")=>M.struct([St("staker"),St("withdrawer")],n),yh=(n="lockup")=>M.struct([M.ns64("unixTimestamp"),M.ns64("epoch"),St("custodian")],n),gh=(n="voteInit")=>M.struct([St("nodePubkey"),St("authorizedVoter"),St("authorizedWithdrawer"),M.u8("commission")],n),mh=(n="voteAuthorizeWithSeedArgs")=>M.struct([M.u32("voteAuthorizationType"),St("currentAuthorityDerivedKeyOwnerPubkey"),mr("currentAuthorityDerivedKeySeed"),St("newAuthorized")],n);function Qa(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Qa({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function xe(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Ne(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function vt(n,t){if(!n)throw new Error(t||"Assertion failed")}class Yn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=a=>{const u=a.toBase58();let d=r.get(u);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(u,d)),d},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const a of t){s(a.programId).isInvoked=!0;for(const u of a.keys){const d=s(u.pubkey);d.isSigner||(d.isSigner=u.isSigner),d.isWritable||(d.isWritable=u.isWritable)}}return new Yn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];vt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),s=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{vt(e.length>0,"Expected at least one writable signer key");const[d]=e[0];vt(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...e.map(([d])=>new tt(d)),...r.map(([d])=>new tt(d)),...s.map(([d])=>new tt(d)),...i.map(([d])=>new tt(d))];return[a,u]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,a]of this.keyMetaMap.entries())if(e(a)){const u=new tt(i),d=t.findIndex(_=>_.equals(u));d>=0&&(vt(d<256,"Max lookup table index exceeded"),r.push(d),s.push(u),this.keyMetaMap.delete(i))}return[r,s]}}const tc="Reached end of buffer unexpectedly";function Ke(n){if(n.length===0)throw new Error(tc);return n.shift()}function Te(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(tc);return n.splice(...t)}class De{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new tt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:_e.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Qr(this.staticAccountKeys)}static compile(t){const e=Yn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),a=new Qr(s).compileInstructions(t.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:_e.encode(u.data)}));return new De({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ne(e,t);const r=this.instructions.map(x=>{const{accounts:B,programIdIndex:k}=x,C=Array.from(_e.decode(x.data));let N=[];Ne(N,B.length);let v=[];return Ne(v,C.length),{programIdIndex:k,keyIndicesCount:ht.Buffer.from(N),keyIndices:B,dataLength:ht.Buffer.from(v),data:C}});let s=[];Ne(s,r.length);let i=ht.Buffer.alloc(ur);ht.Buffer.from(s).copy(i);let a=s.length;r.forEach(x=>{const k=M.struct([M.u8("programIdIndex"),M.blob(x.keyIndicesCount.length,"keyIndicesCount"),M.seq(M.u8("keyIndex"),x.keyIndices.length,"keyIndices"),M.blob(x.dataLength.length,"dataLength"),M.seq(M.u8("userdatum"),x.data.length,"data")]).encode(x,i,a);a+=k}),i=i.slice(0,a);const u=M.struct([M.blob(1,"numRequiredSignatures"),M.blob(1,"numReadonlySignedAccounts"),M.blob(1,"numReadonlyUnsignedAccounts"),M.blob(e.length,"keyCount"),M.seq(St("key"),t,"keys"),St("recentBlockhash")]),d={numRequiredSignatures:ht.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ht.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ht.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ht.Buffer.from(e),keys:this.accountKeys.map(x=>Et(x.toBytes())),recentBlockhash:_e.decode(this.recentBlockhash)};let _=ht.Buffer.alloc(2048);const I=u.encode(d,_);return i.copy(_,I),_.slice(0,I+i.length)}static from(t){let e=[...t];const r=Ke(e);if(r!==(r&jn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Ke(e),i=Ke(e),a=xe(e);let u=[];for(let B=0;B<a;B++){const k=Te(e,0,$e);u.push(new tt(ht.Buffer.from(k)))}const d=Te(e,0,$e),_=xe(e);let I=[];for(let B=0;B<_;B++){const k=Ke(e),C=xe(e),N=Te(e,0,C),v=xe(e),U=Te(e,0,v),H=_e.encode(ht.Buffer.from(U));I.push({programIdIndex:k,accounts:N,data:H})}const x={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:_e.encode(ht.Buffer.from(d)),accountKeys:u,instructions:I};return new De(x)}}class Er{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Qr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((a,u)=>a+u.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,a=r-e-this.header.numReadonlyUnsignedAccounts;return s<a}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Yn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const I of i){const x=e.extractTableLookup(I);if(x!==void 0){const[B,{writable:k,readonly:C}]=x;r.push(B),s.writable.push(...k),s.readonly.push(...C)}}const[a,u]=e.getMessageComponents(),_=new Qr(u,s).compileInstructions(t.instructions);return new Er({header:a,staticAccountKeys:u,recentBlockhash:t.recentBlockhash,compiledInstructions:_,addressTableLookups:r})}serialize(){const t=Array();Ne(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Ne(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ne(i,this.addressTableLookups.length);const a=M.struct([M.u8("prefix"),M.struct([M.u8("numRequiredSignatures"),M.u8("numReadonlySignedAccounts"),M.u8("numReadonlyUnsignedAccounts")],"header"),M.blob(t.length,"staticAccountKeysLength"),M.seq(St(),this.staticAccountKeys.length,"staticAccountKeys"),St("recentBlockhash"),M.blob(r.length,"instructionsLength"),M.blob(e.length,"serializedInstructions"),M.blob(i.length,"addressTableLookupsLength"),M.blob(s.length,"serializedAddressTableLookups")]),u=new Uint8Array(ur),_=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(I=>I.toBytes()),recentBlockhash:_e.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},u);return u.slice(0,_)}serializeInstructions(){let t=0;const e=new Uint8Array(ur);for(const r of this.compiledInstructions){const s=Array();Ne(s,r.accountKeyIndexes.length);const i=Array();Ne(i,r.data.length);const a=M.struct([M.u8("programIdIndex"),M.blob(s.length,"encodedAccountKeyIndexesLength"),M.seq(M.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),M.blob(i.length,"encodedDataLength"),M.blob(r.data.length,"data")]);t+=a.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(ur);for(const r of this.addressTableLookups){const s=Array();Ne(s,r.writableIndexes.length);const i=Array();Ne(i,r.readonlyIndexes.length);const a=M.struct([St("accountKey"),M.blob(s.length,"encodedWritableIndexesLength"),M.seq(M.u8(),r.writableIndexes.length,"writableIndexes"),M.blob(i.length,"encodedReadonlyIndexesLength"),M.seq(M.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Ke(e),s=r&jn;vt(r!==s,"Expected versioned message but received legacy message");const i=s;vt(i===0,`Expected versioned message with version 0 but found version ${i}`);const a={numRequiredSignatures:Ke(e),numReadonlySignedAccounts:Ke(e),numReadonlyUnsignedAccounts:Ke(e)},u=[],d=xe(e);for(let C=0;C<d;C++)u.push(new tt(Te(e,0,$e)));const _=_e.encode(Te(e,0,$e)),I=xe(e),x=[];for(let C=0;C<I;C++){const N=Ke(e),v=xe(e),U=Te(e,0,v),H=xe(e),L=new Uint8Array(Te(e,0,H));x.push({programIdIndex:N,accountKeyIndexes:U,data:L})}const B=xe(e),k=[];for(let C=0;C<B;C++){const N=new tt(Te(e,0,$e)),v=xe(e),U=Te(e,0,v),H=xe(e),L=Te(e,0,H);k.push({accountKey:N,writableIndexes:U,readonlyIndexes:L})}return new Er({header:a,staticAccountKeys:u,recentBlockhash:_,compiledInstructions:x,addressTableLookups:k})}}const Fs={deserializeMessageVersion(n){const t=n[0],e=t&jn;return e===t?"legacy":e},deserialize:n=>{const t=Fs.deserializeMessageVersion(n);if(t==="legacy")return De.from(n);if(t===0)return Er.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Ze=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const wh=ht.Buffer.alloc(Jr).fill(0);class Bt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=ht.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class kt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Bt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let N=0;N<e.length;N++)if(e[N].programId===void 0)throw new Error(`Transaction instruction index ${N} has undefined program id`);const s=[],i=[];e.forEach(N=>{N.keys.forEach(U=>{i.push({...U})});const v=N.programId.toString();s.includes(v)||s.push(v)}),s.forEach(N=>{i.push({pubkey:new tt(N),isSigner:!1,isWritable:!1})});const a=[];i.forEach(N=>{const v=N.pubkey.toString(),U=a.findIndex(H=>H.pubkey.toString()===v);U>-1?(a[U].isWritable=a[U].isWritable||N.isWritable,a[U].isSigner=a[U].isSigner||N.isSigner):a.push(N)}),a.sort(function(N,v){if(N.isSigner!==v.isSigner)return N.isSigner?-1:1;if(N.isWritable!==v.isWritable)return N.isWritable?-1:1;const U={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return N.pubkey.toBase58().localeCompare(v.pubkey.toBase58(),"en",U)});const u=a.findIndex(N=>N.pubkey.equals(r));if(u>-1){const[N]=a.splice(u,1);N.isSigner=!0,N.isWritable=!0,a.unshift(N)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const N of this.signatures){const v=a.findIndex(U=>U.pubkey.equals(N.publicKey));if(v>-1)a[v].isSigner||(a[v].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${N.publicKey.toString()}`)}let d=0,_=0,I=0;const x=[],B=[];a.forEach(({pubkey:N,isSigner:v,isWritable:U})=>{v?(x.push(N.toString()),d+=1,U||(_+=1)):(B.push(N.toString()),U||(I+=1))});const k=x.concat(B),C=e.map(N=>{const{data:v,programId:U}=N;return{programIdIndex:k.indexOf(U.toString()),accounts:N.keys.map(H=>k.indexOf(H.pubkey.toString())),data:_e.encode(v)}});return C.forEach(N=>{vt(N.programIdIndex>=0),N.accounts.forEach(v=>vt(v>=0))}),new De({header:{numRequiredSignatures:d,numReadonlySignedAccounts:_,numReadonlyUnsignedAccounts:I},accountKeys:k,recentBlockhash:t,instructions:C})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=Ls(r,s.secretKey);this._addSignature(s.publicKey,Et(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){vt(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=ht.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||(r.missing=[])).push(i):ch(s,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let a="Signature verification failed.";throw i.invalid&&(a+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),i.missing&&(a+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Ne(r,e.length);const s=r.length+e.length*64+t.length,i=ht.Buffer.alloc(s);return vt(e.length<256),ht.Buffer.from(r).copy(i,0),e.forEach(({signature:a},u)=>{a!==null&&(vt(a.length===64,"signature has invalid length"),ht.Buffer.from(a).copy(i,r.length+u*64))}),t.copy(i,r.length+e.length*64),vt(i.length<=ur,`Transaction too large: ${i.length} > ${ur}`),i}get keys(){return vt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return vt(this.instructions.length===1),this.instructions[0].programId}get data(){return vt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=xe(e);let s=[];for(let i=0;i<r;i++){const a=Te(e,0,Jr);s.push(_e.encode(ht.Buffer.from(a)))}return kt.populate(De.from(e),s)}static populate(t,e=[]){const r=new kt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const a={signature:s==_e.encode(wh)?null:_e.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(a)}),t.instructions.forEach(s=>{const i=s.accounts.map(a=>{const u=t.accountKeys[a];return{pubkey:u,isSigner:r.signatures.some(d=>d.publicKey.toString()===u.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});r.instructions.push(new Bt({keys:i,programId:t.accountKeys[s.programIdIndex],data:_e.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class Hs{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:d}=r,_=a-u;vt(_>0,"Message header is invalid");const I=t.staticAccountKeys.length-a-d;vt(I>=0,"Message header is invalid");const x=t.getAccountKeys(e),B=x.get(0);if(B===void 0)throw new Error("Failed to decompile message because no account keys were found");const k=[];for(const C of s){const N=[];for(const U of C.accountKeyIndexes){const H=x.get(U);if(H===void 0)throw new Error(`Failed to find key for account key index ${U}`);const L=U<a;let X;L?X=U<_:U<x.staticAccountKeys.length?X=U-a<I:X=U-x.staticAccountKeys.length<x.accountKeysFromLookups.writable.length,N.push({pubkey:H,isSigner:U<r.numRequiredSignatures,isWritable:X})}const v=x.get(C.programIdIndex);if(v===void 0)throw new Error(`Failed to find program id for program id index ${C.programIdIndex}`);k.push(new Bt({programId:v,data:Et(C.data),keys:N}))}return new Hs({payerKey:B,instructions:k,recentBlockhash:i})}compileToLegacyMessage(){return De.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Er.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class zs{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)vt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array(Jr));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Ne(e,this.signatures.length);const r=M.struct([M.blob(e.length,"encodedSignaturesLength"),M.seq(dh(),this.signatures.length,"signatures"),M.blob(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=xe(e);for(let a=0;a<s;a++)r.push(new Uint8Array(Te(e,0,Jr)));const i=Fs.deserialize(new Uint8Array(e));return new zs(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(a=>a.equals(s.publicKey));vt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Ls(e,s.secretKey)}}addSignature(t,e){vt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));vt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const bh=160,_h=64,Eh=bh/_h,ec=1e3/Eh,ze=new tt("SysvarC1ock11111111111111111111111111111111"),Rh=new tt("SysvarEpochSchedu1e111111111111111111111111"),Sh=new tt("Sysvar1nstructions1111111111111111111111111"),Rn=new tt("SysvarRecentB1ockHashes11111111111111111111"),Ur=new tt("SysvarRent111111111111111111111111111111111"),Ah=new tt("SysvarRewards111111111111111111111111111111"),Ih=new tt("SysvarS1otHashes111111111111111111111111111"),vh=new tt("SysvarS1otHistory11111111111111111111111111"),Sn=new tt("SysvarStakeHistory1111111111111111111111111");class tn extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(t){case"send":u=`Transaction ${e} resulted in an error. 
${r}. `+i+a;break;case"simulate":u=`Simulation failed. 
Message: ${r}. 
`+i+a;break;default:u=`Unknown action '${(d=>d)(t)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const kh={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class lt extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function fs(n,t,e,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(t,e,s);let a;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)a=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:u}=t.nonceInfo,d=u.keys[0].pubkey;a=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await n.confirmTransaction(i,r&&r.commitment)).value;if(a.err)throw i!=null?new tn({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(a)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(a)})`);return i}function gr(n){return new Promise(t=>setTimeout(t,n))}function At(n,t){const e=n.layout.span>=0?n.layout.span:Qa(n,t),r=ht.Buffer.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}function xt(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const rc=M.nu64("lamportsPerSignature"),nc=M.struct([M.u32("version"),M.u32("state"),St("authorizedPubkey"),St("nonce"),M.struct([rc],"feeCalculator")]),ds=nc.span;class Zn{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=nc.decode(Et(t),0);return new Zn({authorizedPubkey:new tt(e.authorizedPubkey),nonce:new tt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const xh=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},Th=n=>t=>{const e=M.blob(n,t),{encode:r,decode:s}=xh(e),i=e;return i.decode=(a,u)=>{const d=s(a,u);return us.toBigIntLE(ht.Buffer.from(d))},i.encode=(a,u,d)=>{const _=us.toBufferLE(a,n);return r(_,u,d)},i},Dr=Th(8);class Oh{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=M.u32("instruction").decode(t.data);let s;for(const[i,a]of Object.entries(Mt))if(a.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:s}=xt(Mt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new tt(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=xt(Mt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:s}=xt(Mt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new tt(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=xt(Mt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:s,programId:i}=xt(Mt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new tt(e),seed:r,space:s,programId:new tt(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=xt(Mt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new tt(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:s}=xt(Mt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new tt(e),seed:r,programId:new tt(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:s,space:i,programId:a}=xt(Mt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new tt(e),seed:r,lamports:s,space:i,programId:new tt(a)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=xt(Mt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new tt(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),xt(Mt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=xt(Mt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=xt(Mt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new tt(e)}}static checkProgramId(t){if(!t.equals(me.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Mt=Object.freeze({Create:{index:0,layout:M.struct([M.u32("instruction"),M.ns64("lamports"),M.ns64("space"),St("programId")])},Assign:{index:1,layout:M.struct([M.u32("instruction"),St("programId")])},Transfer:{index:2,layout:M.struct([M.u32("instruction"),Dr("lamports")])},CreateWithSeed:{index:3,layout:M.struct([M.u32("instruction"),St("base"),mr("seed"),M.ns64("lamports"),M.ns64("space"),St("programId")])},AdvanceNonceAccount:{index:4,layout:M.struct([M.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:M.struct([M.u32("instruction"),St("authorized")])},AuthorizeNonceAccount:{index:7,layout:M.struct([M.u32("instruction"),St("authorized")])},Allocate:{index:8,layout:M.struct([M.u32("instruction"),M.ns64("space")])},AllocateWithSeed:{index:9,layout:M.struct([M.u32("instruction"),St("base"),mr("seed"),M.ns64("space"),St("programId")])},AssignWithSeed:{index:10,layout:M.struct([M.u32("instruction"),St("base"),mr("seed"),St("programId")])},TransferWithSeed:{index:11,layout:M.struct([M.u32("instruction"),Dr("lamports"),mr("seed"),St("programId")])},UpgradeNonceAccount:{index:12,layout:M.struct([M.u32("instruction")])}});class me{constructor(){}static createAccount(t){const e=Mt.Create,r=At(e,{lamports:t.lamports,space:t.space,programId:Et(t.programId.toBuffer())});return new Bt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=Mt.TransferWithSeed;e=At(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:Et(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Mt.Transfer;e=At(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Bt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=Mt.AssignWithSeed;e=At(s,{base:Et(t.basePubkey.toBuffer()),seed:t.seed,programId:Et(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Mt.Assign;e=At(s,{programId:Et(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Bt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Mt.CreateWithSeed,r=At(e,{base:Et(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Et(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Bt({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new kt;"basePubkey"in t&&"seed"in t?e.add(me.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:ds,programId:this.programId})):e.add(me.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:ds,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Mt.InitializeNonceAccount,r=At(e,{authorized:Et(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:Ur,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Bt(s)}static nonceAdvance(t){const e=Mt.AdvanceNonceAccount,r=At(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Bt(s)}static nonceWithdraw(t){const e=Mt.WithdrawNonceAccount,r=At(e,{lamports:t.lamports});return new Bt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Rn,isSigner:!1,isWritable:!1},{pubkey:Ur,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Mt.AuthorizeNonceAccount,r=At(e,{authorized:Et(t.newAuthorizedPubkey.toBuffer())});return new Bt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=Mt.AllocateWithSeed;e=At(s,{base:Et(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Et(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Mt.Allocate;e=At(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Bt({keys:r,programId:this.programId,data:e})}}me.programId=new tt("11111111111111111111111111111111");const Bh=ur-300;class Rr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Rr.chunkSize)+1+1)}static async load(t,e,r,s,i){{const x=await t.getMinimumBalanceForRentExemption(i.length),B=await t.getAccountInfo(r.publicKey,"confirmed");let k=null;if(B!==null){if(B.executable)return console.error("Program load failed, account is already executable"),!1;B.data.length!==i.length&&(k=k||new kt,k.add(me.allocate({accountPubkey:r.publicKey,space:i.length}))),B.owner.equals(s)||(k=k||new kt,k.add(me.assign({accountPubkey:r.publicKey,programId:s}))),B.lamports<x&&(k=k||new kt,k.add(me.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:x-B.lamports})))}else k=new kt().add(me.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:x>0?x:1,space:i.length,programId:s}));k!==null&&await fs(t,k,[e,r],{commitment:"confirmed"})}const a=M.struct([M.u32("instruction"),M.u32("offset"),M.u32("bytesLength"),M.u32("bytesLengthPadding"),M.seq(M.u8("byte"),M.offset(M.u32(),-8),"bytes")]),u=Rr.chunkSize;let d=0,_=i,I=[];for(;_.length>0;){const x=_.slice(0,u),B=ht.Buffer.alloc(u+16);a.encode({instruction:0,offset:d,bytes:x,bytesLength:0,bytesLengthPadding:0},B);const k=new kt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:B});I.push(fs(t,k,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await gr(1e3/4),d+=u,_=_.slice(u)}await Promise.all(I);{const x=M.struct([M.u32("instruction")]),B=ht.Buffer.alloc(x.span);x.encode({instruction:1},B);const k=new kt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ur,isSigner:!1,isWritable:!1}],programId:s,data:B}),C="processed",N=await t.sendTransaction(k,[e,r],{preflightCommitment:C}),{context:v,value:U}=await t.confirmTransaction({signature:N,lastValidBlockHeight:k.lastValidBlockHeight,blockhash:k.recentBlockhash},C);if(U.err)throw new Error(`Transaction ${N} failed (${JSON.stringify(U)})`);for(;;){try{if(await t.getSlot({commitment:C})>v.slot)break}catch{}await new Promise(H=>setTimeout(H,Math.round(ec/2)))}}return!0}}Rr.chunkSize=Bh;const Nh=new tt("BPFLoader2111111111111111111111111111111111");class Ch{static getMinNumSignatures(t){return Rr.getMinNumSignatures(t)}static load(t,e,r,s,i){return Rr.load(t,e,r,i,s)}}function Mh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qi,Wo;function Lh(){if(Wo)return qi;Wo=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,a,u,d,_,I,x;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(x=n.call(r),x==="[object Array]"){for(u="[",a=r.length-1,i=0;i<a;i++)u+=e(r[i],!0)+",";return a>-1&&(u+=e(r[i],!0)),u+"]"}else if(x==="[object Object]"){for(d=t(r).sort(),a=d.length,u="",i=0;i<a;)_=d[i],I=e(r[_],!1),I!==void 0&&(u&&(u+=","),u+=JSON.stringify(_)+":"+I),i++;return"{"+u+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return qi=function(r){var s=e(r,!1);if(s!==void 0)return""+s},qi}var Ph=Lh(),$o=Mh(Ph);const Vr=32;function Wi(n){let t=0;for(;n>1;)n/=2,t++;return t}function Uh(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class ic{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Wi(Uh(t+Vr+1))-Wi(Vr)-1,r=this.getSlotsInEpoch(e),s=t-(r-Vr);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Vr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Wi(Vr)):this.slotsPerEpoch}}var Dh=globalThis.fetch;class Fh extends Kl{constructor(t,e,r){const s=i=>{const a=Hl(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Hh(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const Vo=56;class ps{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Hh(zh,t),r=t.length-Vo;vt(r>=0,"lookup table is invalid"),vt(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=M.struct([M.seq(St(),s,"addresses")]).decode(t.slice(Vo));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new tt(e.authority[0]):void 0,addresses:i.map(a=>new tt(a))}}}const zh={index:1,layout:M.struct([M.u32("typeIndex"),Dr("deactivationSlot"),M.nu64("lastExtendedSlot"),M.u8("lastExtendedStartIndex"),M.u8(),M.seq(St(),M.offset(M.u8(),-1),"authority")])},Kh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function qh(n){const t=n.match(Kh);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,a=n.startsWith("https:")?"wss:":"ws:",u=s==null?null:parseInt(s.slice(1),10),d=u==null?"":`:${u+1}`;return`${a}//${r}${d}${i}`}const Wt=an(Ns(tt),rt(),n=>new tt(n)),sc=Cs([rt(),Kt("base64")]),Ks=an(Ns(ht.Buffer),sc,n=>ht.Buffer.from(n[0],"base64")),oc=30*1e3;function Wh(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Ct(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function Go(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function ac(n){return ke([J({jsonrpc:Kt("2.0"),id:rt(),result:n}),J({jsonrpc:Kt("2.0"),id:rt(),error:J({code:Hr(),message:rt(),data:ft(fl())})})])}const $h=ac(Hr());function _t(n){return an(ac(n),$h,t=>"error"in t?t:{...t,result:it(t.result,n)})}function jt(n){return _t(J({context:J({slot:W()}),value:n}))}function Xn(n){return J({context:J({slot:W()}),value:n})}function $i(n,t){return n===0?new Er({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new tt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:_e.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new De(t)}const Vh=J({foundation:W(),foundationTerm:W(),initial:W(),taper:W(),terminal:W()}),Gh=_t(ot(at(J({epoch:W(),effectiveSlot:W(),amount:W(),postBalance:W(),commission:ft(at(W()))})))),jh=ot(J({slot:W(),prioritizationFee:W()})),Yh=J({total:W(),validator:W(),foundation:W(),epoch:W()}),Zh=J({epoch:W(),slotIndex:W(),slotsInEpoch:W(),absoluteSlot:W(),blockHeight:ft(W()),transactionCount:ft(W())}),Xh=J({slotsPerEpoch:W(),leaderScheduleSlotOffset:W(),warmup:Ve(),firstNormalEpoch:W(),firstNormalSlot:W()}),Jh=Da(rt(),ot(W())),Ar=at(ke([J({}),rt()])),Qh=J({err:Ar}),tf=Kt("receivedSignature"),ef=J({"solana-core":rt(),"feature-set":ft(W())}),rf=J({program:rt(),programId:Wt,parsed:Hr()}),nf=J({programId:Wt,accounts:ot(Wt),data:rt()}),jo=jt(J({err:at(ke([J({}),rt()])),logs:at(ot(rt())),accounts:ft(at(ot(at(J({executable:Ve(),owner:rt(),lamports:W(),data:ot(rt()),rentEpoch:ft(W())}))))),unitsConsumed:ft(W()),returnData:ft(at(J({programId:rt(),data:Cs([rt(),Kt("base64")])}))),innerInstructions:ft(at(ot(J({index:W(),instructions:ot(ke([rf,nf]))}))))})),sf=jt(J({byIdentity:Da(rt(),ot(W())),range:J({firstSlot:W(),lastSlot:W()})}));function of(n,t,e,r,s,i){const a=e||Dh;let u;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return r&&(d=async(I,x)=>{const B=await new Promise((k,C)=>{try{r(I,x,(N,v)=>k([N,v]))}catch(N){C(N)}});return await a(...B)}),new Pl(async(I,x)=>{const B={method:"POST",body:I,agent:u,headers:Object.assign({"Content-Type":"application/json"},t||{},od)};try{let k=5,C,N=500;for(;d?C=await d(n,B):C=await a(n,B),!(C.status!==429||s===!0||(k-=1,k===0));)console.error(`Server responded with ${C.status} ${C.statusText}.  Retrying after ${N}ms delay...`),await gr(N),N*=2;const v=await C.text();C.ok?x(null,v):x(new Error(`${C.status} ${C.statusText}: ${v}`))}catch(k){k instanceof Error&&x(k)}},{})}function af(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,a)=>{if(i){s(i);return}r(a)})})}function cf(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,a)=>{if(i){r(i);return}e(a)})})}const uf=_t(Vh),lf=_t(Yh),hf=_t(jh),ff=_t(Zh),df=_t(Xh),pf=_t(Jh),yf=_t(W()),gf=jt(J({total:W(),circulating:W(),nonCirculating:W(),nonCirculatingAccounts:ot(Wt)})),ys=J({amount:rt(),uiAmount:at(W()),decimals:W(),uiAmountString:ft(rt())}),mf=jt(ot(J({address:Wt,amount:rt(),uiAmount:at(W()),decimals:W(),uiAmountString:ft(rt())}))),wf=jt(ot(J({pubkey:Wt,account:J({executable:Ve(),owner:Wt,lamports:W(),data:Ks,rentEpoch:W()})}))),gs=J({program:rt(),parsed:Hr(),space:W()}),bf=jt(ot(J({pubkey:Wt,account:J({executable:Ve(),owner:Wt,lamports:W(),data:gs,rentEpoch:W()})}))),_f=jt(ot(J({lamports:W(),address:Wt}))),en=J({executable:Ve(),owner:Wt,lamports:W(),data:Ks,rentEpoch:W()}),Ef=J({pubkey:Wt,account:en}),Rf=an(ke([Ns(ht.Buffer),gs]),ke([sc,gs]),n=>Array.isArray(n)?it(n,Ks):n),ms=J({executable:Ve(),owner:Wt,lamports:W(),data:Rf,rentEpoch:W()}),Sf=J({pubkey:Wt,account:ms}),Af=J({state:ke([Kt("active"),Kt("inactive"),Kt("activating"),Kt("deactivating")]),active:W(),inactive:W()}),If=_t(ot(J({signature:rt(),slot:W(),err:Ar,memo:at(rt()),blockTime:ft(at(W()))}))),vf=_t(ot(J({signature:rt(),slot:W(),err:Ar,memo:at(rt()),blockTime:ft(at(W()))}))),kf=J({subscription:W(),result:Xn(en)}),xf=J({pubkey:Wt,account:en}),Tf=J({subscription:W(),result:Xn(xf)}),Of=J({parent:W(),slot:W(),root:W()}),Bf=J({subscription:W(),result:Of}),Nf=ke([J({type:ke([Kt("firstShredReceived"),Kt("completed"),Kt("optimisticConfirmation"),Kt("root")]),slot:W(),timestamp:W()}),J({type:Kt("createdBank"),parent:W(),slot:W(),timestamp:W()}),J({type:Kt("frozen"),slot:W(),timestamp:W(),stats:J({numTransactionEntries:W(),numSuccessfulTransactions:W(),numFailedTransactions:W(),maxTransactionsPerEntry:W()})}),J({type:Kt("dead"),slot:W(),timestamp:W(),err:rt()})]),Cf=J({subscription:W(),result:Nf}),Mf=J({subscription:W(),result:Xn(ke([Qh,tf]))}),Lf=J({subscription:W(),result:W()}),Pf=J({pubkey:rt(),gossip:at(rt()),tpu:at(rt()),rpc:at(rt()),version:at(rt())}),Yo=J({votePubkey:rt(),nodePubkey:rt(),activatedStake:W(),epochVoteAccount:Ve(),epochCredits:ot(Cs([W(),W(),W()])),commission:W(),lastVote:W(),rootSlot:at(W())}),Uf=_t(J({current:ot(Yo),delinquent:ot(Yo)})),Df=ke([Kt("processed"),Kt("confirmed"),Kt("finalized")]),Ff=J({slot:W(),confirmations:at(W()),err:Ar,confirmationStatus:ft(Df)}),Hf=jt(ot(at(Ff))),zf=_t(W()),cc=J({accountKey:Wt,writableIndexes:ot(W()),readonlyIndexes:ot(W())}),qs=J({signatures:ot(rt()),message:J({accountKeys:ot(rt()),header:J({numRequiredSignatures:W(),numReadonlySignedAccounts:W(),numReadonlyUnsignedAccounts:W()}),instructions:ot(J({accounts:ot(W()),data:rt(),programIdIndex:W()})),recentBlockhash:rt(),addressTableLookups:ft(ot(cc))})}),uc=J({pubkey:Wt,signer:Ve(),writable:Ve(),source:ft(ke([Kt("transaction"),Kt("lookupTable")]))}),lc=J({accountKeys:ot(uc),signatures:ot(rt())}),hc=J({parsed:Hr(),program:rt(),programId:Wt}),fc=J({accounts:ot(Wt),data:rt(),programId:Wt}),Kf=ke([fc,hc]),qf=ke([J({parsed:Hr(),program:rt(),programId:rt()}),J({accounts:ot(rt()),data:rt(),programId:rt()})]),dc=an(Kf,qf,n=>"accounts"in n?it(n,fc):it(n,hc)),pc=J({signatures:ot(rt()),message:J({accountKeys:ot(uc),instructions:ot(dc),recentBlockhash:rt(),addressTableLookups:ft(at(ot(cc)))})}),Pn=J({accountIndex:W(),mint:rt(),owner:ft(rt()),programId:ft(rt()),uiTokenAmount:ys}),yc=J({writable:ot(Wt),readonly:ot(Wt)}),Jn=J({err:Ar,fee:W(),innerInstructions:ft(at(ot(J({index:W(),instructions:ot(J({accounts:ot(W()),data:rt(),programIdIndex:W()}))})))),preBalances:ot(W()),postBalances:ot(W()),logMessages:ft(at(ot(rt()))),preTokenBalances:ft(at(ot(Pn))),postTokenBalances:ft(at(ot(Pn))),loadedAddresses:ft(yc),computeUnitsConsumed:ft(W())}),Ws=J({err:Ar,fee:W(),innerInstructions:ft(at(ot(J({index:W(),instructions:ot(dc)})))),preBalances:ot(W()),postBalances:ot(W()),logMessages:ft(at(ot(rt()))),preTokenBalances:ft(at(ot(Pn))),postTokenBalances:ft(at(ot(Pn))),loadedAddresses:ft(yc),computeUnitsConsumed:ft(W())}),zr=ke([Kt(0),Kt("legacy")]),Ir=J({pubkey:rt(),lamports:W(),postBalance:at(W()),rewardType:at(rt()),commission:ft(at(W()))}),Wf=_t(at(J({blockhash:rt(),previousBlockhash:rt(),parentSlot:W(),transactions:ot(J({transaction:qs,meta:at(Jn),version:ft(zr)})),rewards:ft(ot(Ir)),blockTime:at(W()),blockHeight:at(W())}))),$f=_t(at(J({blockhash:rt(),previousBlockhash:rt(),parentSlot:W(),rewards:ft(ot(Ir)),blockTime:at(W()),blockHeight:at(W())}))),Vf=_t(at(J({blockhash:rt(),previousBlockhash:rt(),parentSlot:W(),transactions:ot(J({transaction:lc,meta:at(Jn),version:ft(zr)})),rewards:ft(ot(Ir)),blockTime:at(W()),blockHeight:at(W())}))),Gf=_t(at(J({blockhash:rt(),previousBlockhash:rt(),parentSlot:W(),transactions:ot(J({transaction:pc,meta:at(Ws),version:ft(zr)})),rewards:ft(ot(Ir)),blockTime:at(W()),blockHeight:at(W())}))),jf=_t(at(J({blockhash:rt(),previousBlockhash:rt(),parentSlot:W(),transactions:ot(J({transaction:lc,meta:at(Ws),version:ft(zr)})),rewards:ft(ot(Ir)),blockTime:at(W()),blockHeight:at(W())}))),Yf=_t(at(J({blockhash:rt(),previousBlockhash:rt(),parentSlot:W(),rewards:ft(ot(Ir)),blockTime:at(W()),blockHeight:at(W())}))),Zf=_t(at(J({blockhash:rt(),previousBlockhash:rt(),parentSlot:W(),transactions:ot(J({transaction:qs,meta:at(Jn)})),rewards:ft(ot(Ir)),blockTime:at(W())}))),Zo=_t(at(J({blockhash:rt(),previousBlockhash:rt(),parentSlot:W(),signatures:ot(rt()),blockTime:at(W())}))),Vi=_t(at(J({slot:W(),meta:at(Jn),blockTime:ft(at(W())),transaction:qs,version:ft(zr)}))),mn=_t(at(J({slot:W(),transaction:pc,meta:at(Ws),blockTime:ft(at(W())),version:ft(zr)}))),Xf=jt(J({blockhash:rt(),lastValidBlockHeight:W()})),Jf=jt(Ve()),Qf=J({slot:W(),numTransactions:W(),numSlots:W(),samplePeriodSecs:W()}),td=_t(ot(Qf)),ed=jt(at(J({feeCalculator:J({lamportsPerSignature:W()})}))),rd=_t(rt()),nd=_t(rt()),id=J({err:Ar,logs:ot(rt()),signature:rt()}),sd=J({result:Xn(id),subscription:W()}),od={"solana-client":"js/1.0.0-maintenance"};class gc{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const _={};return async I=>{const{commitment:x,config:B}=Ct(I),k=this._buildArgs([],x,void 0,B),C=$o(k);return _[C]=_[C]??(async()=>{try{const N=await this._rpcRequest("getBlockHeight",k),v=it(N,_t(W()));if("error"in v)throw new lt(v.error,"failed to get block height information");return v.result}finally{delete _[C]}})(),await _[C]}})();let r,s,i,a,u,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,a=e.fetchMiddleware,u=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=Wh(t),this._rpcWsEndpoint=r||qh(t),this._rpcClient=of(t,s,i,a,u,d),this._rpcRequest=af(this._rpcClient),this._rpcBatchRequest=cf(this._rpcClient),this._rpcWebSocket=new Fh(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Ct(e),i=this._buildArgs([t.toBase58()],r,void 0,s),a=await this._rpcRequest("getBalance",i),u=it(a,jt(W()));if("error"in u)throw new lt(u.error,`failed to get balance for ${t.toBase58()}`);return u.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=it(e,_t(at(W())));if("error"in r)throw new lt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=it(t,_t(W()));if("error"in e)throw new lt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=it(t,yf);if("error"in e)throw new lt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=it(r,gf);if("error"in s)throw new lt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=it(s,jt(ys));if("error"in i)throw new lt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=it(s,jt(ys));if("error"in i)throw new lt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Ct(r);let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const u=this._buildArgs(a,s,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",u),_=it(d,wf);if("error"in _)throw new lt(_.error,`failed to get token accounts owned by account ${t.toBase58()}`);return _.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",i),u=it(a,bf);if("error"in u)throw new lt(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=it(s,_f);if("error"in i)throw new lt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=it(s,mf);if("error"in i)throw new lt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Ct(e),i=this._buildArgs([t.toBase58()],r,"base64",s),a=await this._rpcRequest("getAccountInfo",i),u=it(a,jt(at(en)));if("error"in u)throw new lt(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Ct(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getAccountInfo",i),u=it(a,jt(at(ms)));if("error"in u)throw new lt(u.error,`failed to get info about account ${t.toBase58()}`);return u.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=Ct(e),i=t.map(_=>_.toBase58()),a=this._buildArgs([i],r,"jsonParsed",s),u=await this._rpcRequest("getMultipleAccounts",a),d=it(u,jt(ot(at(ms))));if("error"in d)throw new lt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Ct(e),i=t.map(_=>_.toBase58()),a=this._buildArgs([i],r,"base64",s),u=await this._rpcRequest("getMultipleAccounts",a),d=it(u,jt(ot(at(en))));if("error"in d)throw new lt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Ct(e),a=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),u=await this._rpcRequest("getStakeActivation",a),d=it(u,_t(Af));if("error"in d)throw new lt(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Ct(e),{encoding:i,...a}=s||{},u=this._buildArgs([t.toBase58()],r,i||"base64",{...a,...a.filters?{filters:Go(a.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",u),_=ot(Ef),I=a.withContext===!0?it(d,jt(_)):it(d,_t(_));if("error"in I)throw new lt(I.error,`failed to get accounts owned by program ${t.toBase58()}`);return I.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Ct(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getProgramAccounts",i),u=it(a,_t(ot(Sf)));if("error"in u)throw new lt(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const a=t;if((i=a.abortSignal)!=null&&i.aborted)return Promise.reject(a.abortSignal.reason);r=a.signature}let s;try{s=_e.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return vt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const a=new Promise((d,_)=>{try{r=this.onSignature(e,(x,B)=>{r=void 0;const k={context:B,value:x};d({__type:Ze.PROCESSED,response:k})},t);const I=new Promise(x=>{r==null?x():s=this._onSubscriptionStateChange(r,B=>{B==="subscribed"&&x()})});(async()=>{if(await I,i)return;const x=await this.getSignatureStatus(e);if(i||x==null)return;const{context:B,value:k}=x;if(k!=null)if(k!=null&&k.err)_(k.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(k.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(k.confirmationStatus==="processed"||k.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:Ze.PROCESSED,response:{context:B,value:k}})}})()}catch(I){_(I)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const a=new Promise(x=>{const B=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let k=await B();if(!i){for(;k<=r;)if(await gr(1e3),i||(k=await B(),i))return;x({__type:Ze.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),_=this.getCancellationPromise(e);let I;try{const x=await Promise.race([_,d,a]);if(x.__type===Ze.PROCESSED)I=x.response;else throw new Us(s)}finally{i=!0,u()}return I}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:a}}){let u=!1;const d=new Promise(k=>{let C=i,N=null;const v=async()=>{try{const{context:U,value:H}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return N=U.slot,H==null?void 0:H.nonce}catch{return C}};(async()=>{if(C=await v(),!u)for(;;){if(i!==C){k({__type:Ze.NONCE_INVALID,slotInWhichNonceDidAdvance:N});return}if(await gr(2e3),u||(C=await v(),u))return}})()}),{abortConfirmation:_,confirmationPromise:I}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),x=this.getCancellationPromise(e);let B;try{const k=await Promise.race([x,I,d]);if(k.__type===Ze.PROCESSED)B=k.response;else{let C;for(;;){const N=await this.getSignatureStatus(a);if(N==null)break;if(N.context.slot<(k.slotInWhichNonceDidAdvance??r)){await gr(400);continue}C=N;break}if(C!=null&&C.value){const N=t||"finalized",{confirmationStatus:v}=C.value;switch(N){case"processed":case"recent":if(v!=="processed"&&v!=="confirmed"&&v!=="finalized")throw new xr(a);break;case"confirmed":case"single":case"singleGossip":if(v!=="confirmed"&&v!=="finalized")throw new xr(a);break;case"finalized":case"max":case"root":if(v!=="finalized")throw new xr(a);break;default:}B={context:C.context,value:{err:C.value.err}}}else throw new xr(a)}}finally{u=!0,_()}return B}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(d=>{let _=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{_=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>d({__type:Ze.TIMED_OUT,timeoutMs:_}),_)}),{abortConfirmation:i,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let u;try{const d=await Promise.race([a,s]);if(d.__type===Ze.PROCESSED)u=d.response;else throw new Ds(e,d.timeoutMs/1e3)}finally{clearTimeout(r),i()}return u}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=it(t,_t(ot(Pf)));if("error"in e)throw new lt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=it(r,Uf);if("error"in s)throw new lt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Ct(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),a=it(i,_t(W()));if("error"in a)throw new lt(a.error,"failed to get slot");return a.result}async getSlotLeader(t){const{commitment:e,config:r}=Ct(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),a=it(i,_t(rt()));if("error"in a)throw new lt(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=it(s,_t(ot(Wt)));if("error"in i)throw new lt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);vt(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=it(s,Hf);if("error"in i)throw new lt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Ct(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),a=it(i,_t(W()));if("error"in a)throw new lt(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=it(r,uf);if("error"in s)throw new lt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Ct(r),a=this._buildArgs([t.map(_=>_.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),u=await this._rpcRequest("getInflationReward",a),d=it(u,Gh);if("error"in d)throw new lt(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=it(t,lf);if("error"in e)throw new lt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Ct(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),a=it(i,ff);if("error"in a)throw new lt(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=it(t,df);if("error"in e)throw new lt(e.error,"failed to get epoch schedule");const r=e.result;return new ic(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=it(t,pf);if("error"in e)throw new lt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=it(s,zf);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=it(e,td);if("error"in r)throw new lt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=it(s,ed);if("error"in i)throw new lt(i.error,"failed to get fee calculator");const{context:a,value:u}=i.result;return{context:a,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(t,e){const r=Et(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),a=it(i,jt(at(W())));if("error"in a)throw new lt(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(t){var a;const e=(a=t==null?void 0:t.lockedWritableAccounts)==null?void 0:a.map(u=>u.toBase58()),r=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=it(s,hf);if("error"in i)throw new lt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Ct(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),a=it(i,Xf);if("error"in a)throw new lt(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=Ct(e),i=this._buildArgs([t],r,void 0,s),a=await this._rpcRequest("isBlockhashValid",i),u=it(a,Jf);if("error"in u)throw new lt(u.error,"failed to determine if the blockhash `"+t+"`is valid");return u.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=it(t,_t(ef));if("error"in e)throw new lt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=it(t,_t(rt()));if("error"in e)throw new lt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Ct(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),a=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const u=it(a,Vf);if("error"in u)throw u.error;return u.result}case"none":{const u=it(a,$f);if("error"in u)throw u.error;return u.result}default:{const u=it(a,Wf);if("error"in u)throw u.error;const{result:d}=u;return d?{...d,transactions:d.transactions.map(({transaction:_,meta:I,version:x})=>({meta:I,transaction:{..._,message:$i(x,_.message)},version:x}))}:null}}}catch(u){throw new lt(u,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=Ct(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),a=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const u=it(a,jf);if("error"in u)throw u.error;return u.result}case"none":{const u=it(a,Yf);if("error"in u)throw u.error;return u.result}default:{const u=it(a,Gf);if("error"in u)throw u.error;return u.result}}}catch(u){throw new lt(u,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:u,...d}=t;r=u,e=d}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),a=it(i,sf);if("error"in a)throw new lt(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){const{commitment:r,config:s}=Ct(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),a=await this._rpcRequest("getTransaction",i),u=it(a,Vi);if("error"in u)throw new lt(u.error,"failed to get transaction");const d=u.result;return d&&{...d,transaction:{...d.transaction,message:$i(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Ct(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),a=await this._rpcRequest("getTransaction",i),u=it(a,mn);if("error"in u)throw new lt(u.error,"failed to get transaction");return u.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Ct(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(d=>{const _=it(d,mn);if("error"in _)throw new lt(_.error,"failed to get transactions");return _.result})}async getTransactions(t,e){const{commitment:r,config:s}=Ct(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(d=>{const _=it(d,Vi);if("error"in _)throw new lt(_.error,"failed to get transactions");const I=_.result;return I&&{...I,transaction:{...I.transaction,message:$i(I.version,I.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=it(s,Zf);if("error"in i)throw new lt(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");const u={...a,transactions:a.transactions.map(({transaction:d,meta:_})=>{const I=new De(d.message);return{meta:_,transaction:{...d,message:I}}})};return{...u,transactions:u.transactions.map(({transaction:d,meta:_})=>({meta:_,transaction:kt.populate(d.message,d.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),a=it(i,_t(ot(W())));if("error"in a)throw new lt(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=it(s,Zo);if("error"in i)throw new lt(i.error,"failed to get block");const a=i.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=it(s,Zo);if("error"in i)throw new lt(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=it(s,Vi);if("error"in i)throw new lt(i.error,"failed to get transaction");const a=i.result;if(!a)return a;const u=new De(a.transaction.message),d=a.transaction.signatures;return{...a,transaction:kt.populate(u,d)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=it(s,mn);if("error"in i)throw new lt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(a=>{const u=it(a,mn);if("error"in u)throw new lt(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let a=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>a));)try{const d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),a=it(i,If);if("error"in a)throw new lt(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),a=it(i,vf);if("error"in a)throw new lt(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new ps({key:t,state:ps.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Zn.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=it(r,rd);if("error"in s)throw new lt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await gr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=oc;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await gr(ec/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Ct(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),a=it(i,jt(W()));if("error"in a)throw new lt(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,r){if("message"in t){const N=t.serialize(),v=ht.Buffer.from(N).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const U=e||{};U.encoding="base64","commitment"in U||(U.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(U.innerInstructions=e.innerInstructions);const H=[v,U],L=await this._rpcRequest("simulateTransaction",H),X=it(L,jo);if("error"in X)throw new Error("failed to simulate transaction: "+X.error.message);return X.result}let s;if(t instanceof kt){let C=t;s=new kt,s.feePayer=C.feePayer,s.instructions=t.instructions,s.nonceInfo=C.nonceInfo,s.signatures=C.signatures}else s=kt.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let C=this._disableBlockhashCaching;for(;;){const N=await this._blockhashWithExpiryBlockHeight(C);if(s.lastValidBlockHeight=N.lastValidBlockHeight,s.recentBlockhash=N.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const v=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(v)&&!this._blockhashInfo.transactionSignatures.includes(v)){this._blockhashInfo.simulatedSignatures.push(v);break}else C=!0}}const a=s._compile(),u=a.serialize(),_=s._serialize(u).toString("base64"),I={encoding:"base64",commitment:this.commitment};if(r){const C=(Array.isArray(r)?r:a.nonProgramIds()).map(N=>N.toBase58());I.accounts={encoding:"base64",addresses:C}}i&&(I.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(I.innerInstructions=e.innerInstructions);const x=[_,I],B=await this._rpcRequest("simulateTransaction",x),k=it(B,jo);if("error"in k){let C;if("data"in k.error&&(C=k.error.data.logs,C&&Array.isArray(C))){const N=`
    `,v=N+C.join(N);console.error(k.error.message,v)}throw new tn({action:"simulate",signature:"",transactionMessage:k.error.message,logs:C})}return k.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const a=t.serialize();return await this.sendRawTransaction(a,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let a=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=u.lastValidBlockHeight,t.recentBlockhash=u.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))a=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Et(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const a=[t,r],u=await this._rpcRequest("sendTransaction",a),d=it(u,nd);if("error"in d){let _;throw"data"in d.error&&(_=d.error.data.logs),new tn({action:s?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:_})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var s;const r=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(a=>{try{a(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:a}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const u=await this._rpcWebSocket.call(a,i);this._setSubscription(r,{...s,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=s.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:i,error:u}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:a}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[i])}catch(u){if(u instanceof Error&&console.error(`${a} error:`,u.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=it(t,kf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=$o([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const a=this._subscriptionsByHash[s];vt(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=Ct(r),a=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=it(t,Tf);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:a}=Ct(r),u=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",a||(s?{filters:Go(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=it(t,sd);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=it(t,Bf);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=it(t,Cf);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let a={};r&&(a.encoding=r),i&&(a.commitment=i),s&&(a=Object.assign(a,s)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=it(t,Mf);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(a,u)=>{if(a.type==="status"){e(a.result,u);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([t],s,void 0,i),u=this._makeSubscription({callback:(d,_)=>{e(d,_);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=it(t,Lf);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Tr{constructor(t){this._keypair=void 0,this._keypair=t??zo()}static generate(){return new Tr(zo())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=Ln(s);for(let a=0;a<32;a++)if(r[a]!==i[a])throw new Error("provided secretKey is invalid")}return new Tr({publicKey:r,secretKey:t})}static fromSeed(t){const e=Ln(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Tr({publicKey:e,secretKey:r})}get publicKey(){return new tt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const tr=Object.freeze({CreateLookupTable:{index:0,layout:M.struct([M.u32("instruction"),Dr("recentSlot"),M.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:M.struct([M.u32("instruction")])},ExtendLookupTable:{index:2,layout:M.struct([M.u32("instruction"),Dr(),M.seq(St(),M.offset(M.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:M.struct([M.u32("instruction")])},CloseLookupTable:{index:4,layout:M.struct([M.u32("instruction")])}});class ad{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=M.u32("instruction").decode(t.data);let s;for(const[i,a]of Object.entries(tr))if(a.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=xt(tr.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=xt(tr.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new tt(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals($s.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class $s{constructor(){}static createLookupTable(t){const[e,r]=tt.findProgramAddressSync([t.authority.toBuffer(),us.toBufferLE(BigInt(t.recentSlot),8)],this.programId),s=tr.CreateLookupTable,i=At(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:me.programId,isSigner:!1,isWritable:!1}];return[new Bt({programId:this.programId,keys:a,data:i}),e]}static freezeLookupTable(t){const e=tr.FreezeLookupTable,r=At(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Bt({programId:this.programId,keys:s,data:r})}static extendLookupTable(t){const e=tr.ExtendLookupTable,r=At(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:me.programId,isSigner:!1,isWritable:!1}),new Bt({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(t){const e=tr.DeactivateLookupTable,r=At(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Bt({programId:this.programId,keys:s,data:r})}static closeLookupTable(t){const e=tr.CloseLookupTable,r=At(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Bt({programId:this.programId,keys:s,data:r})}}$s.programId=new tt("AddressLookupTab1e1111111111111111111111111");class cd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=M.u8("instruction").decode(t.data);let s;for(const[i,a]of Object.entries(qe))if(a.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=xt(qe.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=xt(qe.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=xt(qe.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=xt(qe.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Vs.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const qe=Object.freeze({RequestUnits:{index:0,layout:M.struct([M.u8("instruction"),M.u32("units"),M.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:M.struct([M.u8("instruction"),M.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:M.struct([M.u8("instruction"),M.u32("units")])},SetComputeUnitPrice:{index:3,layout:M.struct([M.u8("instruction"),Dr("microLamports")])}});class Vs{constructor(){}static requestUnits(t){const e=qe.RequestUnits,r=At(e,t);return new Bt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=qe.RequestHeapFrame,r=At(e,t);return new Bt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=qe.SetComputeUnitLimit,r=At(e,t);return new Bt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=qe.SetComputeUnitPrice,r=At(e,{microLamports:BigInt(t.microLamports)});return new Bt({keys:[],programId:this.programId,data:r})}}Vs.programId=new tt("ComputeBudget111111111111111111111111111111");const Xo=64,Jo=32,Qo=64,ta=M.struct([M.u8("numSignatures"),M.u8("padding"),M.u16("signatureOffset"),M.u16("signatureInstructionIndex"),M.u16("publicKeyOffset"),M.u16("publicKeyInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u16("messageInstructionIndex")]);class Qn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,instructionIndex:i}=t;vt(e.length===Jo,`Public Key must be ${Jo} bytes but received ${e.length} bytes`),vt(s.length===Qo,`Signature must be ${Qo} bytes but received ${s.length} bytes`);const a=ta.span,u=a+e.length,d=u+s.length,_=1,I=ht.Buffer.alloc(d+r.length),x=i??65535;return ta.encode({numSignatures:_,padding:0,signatureOffset:u,signatureInstructionIndex:x,publicKeyOffset:a,publicKeyInstructionIndex:x,messageDataOffset:d,messageDataSize:r.length,messageInstructionIndex:x},I),I.fill(e,a),I.fill(s,u),I.fill(r,d),new Bt({keys:[],programId:Qn.programId,data:I})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;vt(e.length===Xo,`Private key must be ${Xo} bytes but received ${e.length} bytes`);try{const i=Tr.fromSecretKey(e),a=i.publicKey.toBytes(),u=Ls(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:u,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Qn.programId=new tt("Ed25519SigVerify111111111111111111111111111");const ud=(n,t)=>{const e=Gn.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};Gn.utils.isValidPrivateKey;const ld=Gn.getPublicKey,ea=32,Gi=20,ra=64,hd=11,ji=M.struct([M.u8("numSignatures"),M.u16("signatureOffset"),M.u8("signatureInstructionIndex"),M.u16("ethAddressOffset"),M.u8("ethAddressInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u8("messageInstructionIndex"),M.blob(20,"ethAddress"),M.blob(64,"signature"),M.u8("recoveryId")]);class Or{constructor(){}static publicKeyToEthAddress(t){vt(t.length===ra,`Public key must be ${ra} bytes but received ${t.length} bytes`);try{return ht.Buffer.from(Po(Et(t))).slice(-Gi)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,recoveryId:i,instructionIndex:a}=t;return Or.createInstructionWithEthAddress({ethAddress:Or.publicKeyToEthAddress(e),message:r,signature:s,recoveryId:i,instructionIndex:a})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:s,recoveryId:i,instructionIndex:a=0}=t;let u;typeof e=="string"?e.startsWith("0x")?u=ht.Buffer.from(e.substr(2),"hex"):u=ht.Buffer.from(e,"hex"):u=e,vt(u.length===Gi,`Address must be ${Gi} bytes but received ${u.length} bytes`);const d=1+hd,_=d,I=d+u.length,x=I+s.length+1,B=1,k=ht.Buffer.alloc(ji.span+r.length);return ji.encode({numSignatures:B,signatureOffset:I,signatureInstructionIndex:a,ethAddressOffset:_,ethAddressInstructionIndex:a,messageDataOffset:x,messageDataSize:r.length,messageInstructionIndex:a,signature:Et(s),ethAddress:Et(u),recoveryId:i},k),k.fill(Et(r),ji.span),new Bt({keys:[],programId:Or.programId,data:k})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;vt(e.length===ea,`Private key must be ${ea} bytes but received ${e.length} bytes`);try{const i=Et(e),a=ld(i,!1).slice(1),u=ht.Buffer.from(Po(Et(r))),[d,_]=ud(u,i);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:d,recoveryId:_,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Or.programId=new tt("KeccakSecp256k11111111111111111111111111111");var mc;const wc=new tt("StakeConfig11111111111111111111111111111111");class bc{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class cn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}mc=cn;cn.default=new mc(0,0,tt.default);class fd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=M.u32("instruction").decode(t.data);let s;for(const[i,a]of Object.entries(ge))if(a.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=xt(ge.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new bc(new tt(e.staker),new tt(e.withdrawer)),lockup:new cn(r.unixTimestamp,r.epoch,new tt(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),xt(ge.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=xt(ge.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new tt(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=xt(ge.AuthorizeWithSeed,t.data),a={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new tt(i),newAuthorizedPubkey:new tt(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(a.custodianPubkey=t.keys[3].pubkey),a}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=xt(ge.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),xt(ge.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=xt(ge.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),xt(ge.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(ti.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const ge=Object.freeze({Initialize:{index:0,layout:M.struct([M.u32("instruction"),ph(),yh()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),St("newAuthorized"),M.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:M.struct([M.u32("instruction")])},Split:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Withdraw:{index:4,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Deactivate:{index:5,layout:M.struct([M.u32("instruction")])},Merge:{index:7,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:M.struct([M.u32("instruction"),St("newAuthorized"),M.u32("stakeAuthorizationType"),mr("authoritySeed"),St("authorityOwner")])}}),dd=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ti{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:s}=t,i=s||cn.default,a=ge.Initialize,u=At(a,{authorized:{staker:Et(r.staker.toBuffer()),withdrawer:Et(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Et(i.custodian.toBuffer())}}),d={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ur,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new Bt(d)}static createAccountWithSeed(t){const e=new kt;e.add(me.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(t){const e=new kt;e.add(me.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:s}=t,i=ge.Delegate,a=At(i);return new kt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:Sn,isSigner:!1,isWritable:!1},{pubkey:wc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:a}=t,u=ge.Authorize,d=At(u,{newAuthorized:Et(s.toBuffer()),stakeAuthorizationType:i.index}),_=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&_.push({pubkey:a,isSigner:!0,isWritable:!1}),new kt().add({keys:_,programId:this.programId,data:d})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:a,stakeAuthorizationType:u,custodianPubkey:d}=t,_=ge.AuthorizeWithSeed,I=At(_,{newAuthorized:Et(a.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:s,authorityOwner:Et(i.toBuffer())}),x=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!1}];return d&&x.push({pubkey:d,isSigner:!0,isWritable:!1}),new kt().add({keys:x,programId:this.programId,data:I})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=t,a=ge.Split,u=At(a,{lamports:i});return new Bt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(t,e){const r=new kt;return r.add(me.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:a,seed:u,lamports:d}=t,_=new kt;return _.add(me.allocate({accountPubkey:i,basePubkey:a,seed:u,space:this.space,programId:this.programId})),e&&e>0&&_.add(me.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),_.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:d}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:s}=t,i=ge.Merge,a=At(i);return new kt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:Sn,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:a}=t,u=ge.Withdraw,d=At(u,{lamports:i}),_=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:Sn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&_.push({pubkey:a,isSigner:!0,isWritable:!1}),new kt().add({keys:_,programId:this.programId,data:d})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,s=ge.Deactivate,i=At(s);return new kt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}ti.programId=new tt("Stake11111111111111111111111111111111111111");ti.space=200;class _c{constructor(t,e,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=s}}class pd{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=M.u32("instruction").decode(t.data);let s;for(const[i,a]of Object.entries(We))if(a.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=xt(We.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new _c(new tt(e.nodePubkey),new tt(e.authorizedVoter),new tt(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=xt(We.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new tt(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=xt(We.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new tt(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new tt(s),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=xt(We.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Kr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const We=Object.freeze({InitializeAccount:{index:0,layout:M.struct([M.u32("instruction"),gh()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),St("newAuthorized"),M.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:M.struct([M.u32("instruction"),mh()])}}),yd=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Kr{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:s}=t,i=We.InitializeAccount,a=At(i,{voteInit:{nodePubkey:Et(s.nodePubkey.toBuffer()),authorizedVoter:Et(s.authorizedVoter.toBuffer()),authorizedWithdrawer:Et(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),u={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ur,isSigner:!1,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new Bt(u)}static createAccount(t){const e=new kt;return e.add(me.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,a=We.Authorize,u=At(a,{newAuthorized:Et(s.toBuffer()),voteAuthorizationType:i.index}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new kt().add({keys:d,programId:this.programId,data:u})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:a,votePubkey:u}=t,d=We.AuthorizeWithSeed,_=At(d,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Et(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:Et(i.toBuffer()),voteAuthorizationType:a.index}}),I=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new kt().add({keys:I,programId:this.programId,data:_})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=t,a=We.Withdraw,u=At(a,{lamports:s}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new kt().add({keys:d,programId:this.programId,data:u})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Kr.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:s}=t,i=We.UpdateValidatorIdentity,a=At(i),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new kt().add({keys:u,programId:this.programId,data:a})}}Kr.programId=new tt("Vote111111111111111111111111111111111111111");Kr.space=3762;const Ec=new tt("Va1idator1nfo111111111111111111111111111111"),gd=J({name:rt(),website:ft(rt()),details:ft(rt()),iconUrl:ft(rt()),keybaseUsername:ft(rt())});class Gs{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(xe(e)!==2)return null;const s=[];for(let i=0;i<2;i++){const a=new tt(Te(e,0,$e)),u=Ke(e)===1;s.push({publicKey:a,isSigner:u})}if(s[0].publicKey.equals(Ec)&&s[1].isSigner){const i=mr().decode(ht.Buffer.from(e)),a=JSON.parse(i);return Pa(a,gd),new Gs(s[1].publicKey,a)}return null}}const md=new tt("Vote111111111111111111111111111111111111111"),wd=M.struct([St("nodePubkey"),St("authorizedWithdrawer"),M.u8("commission"),M.nu64(),M.seq(M.struct([M.nu64("slot"),M.u32("confirmationCount")]),M.offset(M.u32(),-8),"votes"),M.u8("rootSlotValid"),M.nu64("rootSlot"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),St("authorizedVoter")]),M.offset(M.u32(),-8),"authorizedVoters"),M.struct([M.seq(M.struct([St("authorizedPubkey"),M.nu64("epochOfLastAuthorizedSwitch"),M.nu64("targetEpoch")]),32,"buf"),M.nu64("idx"),M.u8("isEmpty")],"priorVoters"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),M.nu64("credits"),M.nu64("prevCredits")]),M.offset(M.u32(),-8),"epochCredits"),M.struct([M.nu64("slot"),M.nu64("timestamp")],"lastTimestamp")]);class js{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=wd.decode(Et(t),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new js({nodePubkey:new tt(r.nodePubkey),authorizedWithdrawer:new tt(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(bd),priorVoters:_d(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function bd({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new tt(n)}}function na({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new tt(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function _d({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(na),...n.slice(0,t).map(na)]}const ia={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Ed(n,t){const e=t===!1?"http":"https";if(!n)return ia[e].devnet;const r=ia[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function Rd(n,t,e,r){let s,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(s=e,i=r):i=e;const a=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},u=await n.sendRawTransaction(t,a),d=i&&i.commitment,I=(await(s?n.confirmTransaction(s,d):n.confirmTransaction(u,d))).value;if(I.err)throw u!=null?new tn({action:a!=null&&a.skipPreflight?"send":"simulate",signature:u,transactionMessage:`Status: (${JSON.stringify(I)})`}):new Error(`Raw transaction ${u} failed (${JSON.stringify(I)})`);return u}const Sd=1e9,Ad=Object.freeze(Object.defineProperty({__proto__:null,Account:hh,AddressLookupTableAccount:ps,AddressLookupTableInstruction:ad,AddressLookupTableProgram:$s,Authorized:bc,BLOCKHASH_CACHE_TIMEOUT_MS:oc,BPF_LOADER_DEPRECATED_PROGRAM_ID:fh,BPF_LOADER_PROGRAM_ID:Nh,BpfLoader:Ch,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:qe,ComputeBudgetInstruction:cd,ComputeBudgetProgram:Vs,Connection:gc,Ed25519Program:Qn,Enum:uh,EpochSchedule:ic,FeeCalculatorLayout:rc,Keypair:Tr,LAMPORTS_PER_SOL:Sd,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:tr,Loader:Rr,Lockup:cn,MAX_SEED_LENGTH:Ja,Message:De,MessageAccountKeys:Qr,MessageV0:Er,NONCE_ACCOUNT_LENGTH:ds,NonceAccount:Zn,PACKET_DATA_SIZE:ur,PUBLIC_KEY_LENGTH:$e,PublicKey:tt,SIGNATURE_LENGTH_IN_BYTES:Jr,SOLANA_SCHEMA:Yr,STAKE_CONFIG_ID:wc,STAKE_INSTRUCTION_LAYOUTS:ge,SYSTEM_INSTRUCTION_LAYOUTS:Mt,SYSVAR_CLOCK_PUBKEY:ze,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Rh,SYSVAR_INSTRUCTIONS_PUBKEY:Sh,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Rn,SYSVAR_RENT_PUBKEY:Ur,SYSVAR_REWARDS_PUBKEY:Ah,SYSVAR_SLOT_HASHES_PUBKEY:Ih,SYSVAR_SLOT_HISTORY_PUBKEY:vh,SYSVAR_STAKE_HISTORY_PUBKEY:Sn,Secp256k1Program:Or,SendTransactionError:tn,SolanaJSONRPCError:lt,SolanaJSONRPCErrorCode:kh,StakeAuthorizationLayout:dd,StakeInstruction:fd,StakeProgram:ti,Struct:Ps,SystemInstruction:Oh,SystemProgram:me,Transaction:kt,TransactionExpiredBlockheightExceededError:Us,TransactionExpiredNonceInvalidError:xr,TransactionExpiredTimeoutError:Ds,TransactionInstruction:Bt,TransactionMessage:Hs,TransactionStatus:Ze,VALIDATOR_INFO_KEY:Ec,VERSION_PREFIX_MASK:jn,VOTE_PROGRAM_ID:md,ValidatorInfo:Gs,VersionedMessage:Fs,VersionedTransaction:zs,VoteAccount:js,VoteAuthorizationLayout:yd,VoteInit:_c,VoteInstruction:pd,VoteProgram:Kr,clusterApiUrl:Ed,sendAndConfirmRawTransaction:Rd,sendAndConfirmTransaction:fs},Symbol.toStringTag,{value:"Module"}));var wn={exports:{}},sa;function Id(){if(sa)return wn.exports;sa=1;const n=/[\p{Lu}]/u,t=/[\p{Ll}]/u,e=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,i=new RegExp("^"+s.source),a=new RegExp(s.source+r.source,"gu"),u=new RegExp("\\d+"+r.source,"gu"),d=(B,k,C)=>{let N=!1,v=!1,U=!1;for(let H=0;H<B.length;H++){const L=B[H];N&&n.test(L)?(B=B.slice(0,H)+"-"+B.slice(H),N=!1,U=v,v=!0,H++):v&&U&&t.test(L)?(B=B.slice(0,H-1)+"-"+B.slice(H-1),U=v,v=!1,N=!0):(N=k(L)===L&&C(L)!==L,U=v,v=C(L)===L&&k(L)!==L)}return B},_=(B,k)=>(e.lastIndex=0,B.replace(e,C=>k(C))),I=(B,k)=>(a.lastIndex=0,u.lastIndex=0,B.replace(a,(C,N)=>k(N)).replace(u,C=>k(C))),x=(B,k)=>{if(!(typeof B=="string"||Array.isArray(B)))throw new TypeError("Expected the input to be `string | string[]`");if(k={pascalCase:!1,preserveConsecutiveUppercase:!1,...k},Array.isArray(B)?B=B.map(U=>U.trim()).filter(U=>U.length).join("-"):B=B.trim(),B.length===0)return"";const C=k.locale===!1?U=>U.toLowerCase():U=>U.toLocaleLowerCase(k.locale),N=k.locale===!1?U=>U.toUpperCase():U=>U.toLocaleUpperCase(k.locale);return B.length===1?k.pascalCase?N(B):C(B):(B!==C(B)&&(B=d(B,C,N)),B=B.replace(i,""),k.preserveConsecutiveUppercase?B=_(B,C):B=C(B),k.pascalCase&&(B=N(B.charAt(0))+B.slice(1)),I(B,N))};return wn.exports=x,wn.exports.default=x,wn.exports}Id();var Gr={},ct={},oa;function aa(){if(oa)return ct;oa=1;class n{constructor(y,h){if(!Number.isInteger(y))throw new TypeError("span must be an integer");this.span=y,this.property=h}makeDestinationObject(){return{}}decode(y,h){throw new Error("Layout is abstract")}encode(y,h,c){throw new Error("Layout is abstract")}getSpan(y,h){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(y){const h=Object.create(this.constructor.prototype);return Object.assign(h,this),h.property=y,h}fromArray(y){}}ct.Layout=n;function t(w,y){return y.property?w+"["+y.property+"]":w}ct.nameWithProperty=t;function e(w,y){if(typeof w!="function")throw new TypeError("Class must be constructor");if(w.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(y&&y instanceof n))throw new TypeError("layout must be a Layout");if(y.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");w.layout_=y,y.boundConstructor_=w,y.makeDestinationObject=()=>new w,Object.defineProperty(w.prototype,"encode",{value:function(h,c){return y.encode(this,h,c)},writable:!0}),Object.defineProperty(w,"decode",{value:function(h,c){return y.decode(h,c)},writable:!0})}ct.bindConstructorLayout=e;class r extends n{isCount(){throw new Error("ExternalLayout is abstract")}}class s extends r{constructor(y,h){if(y===void 0&&(y=1),!Number.isInteger(y)||0>=y)throw new TypeError("elementSpan must be a (positive) integer");super(-1,h),this.elementSpan=y}isCount(){return!0}decode(y,h){h===void 0&&(h=0);const c=y.length-h;return Math.floor(c/this.elementSpan)}encode(y,h,c){return 0}}class i extends r{constructor(y,h,c){if(!(y instanceof n))throw new TypeError("layout must be a Layout");if(h===void 0)h=0;else if(!Number.isInteger(h))throw new TypeError("offset must be integer or undefined");super(y.span,c||y.property),this.layout=y,this.offset=h}isCount(){return this.layout instanceof a||this.layout instanceof u}decode(y,h){return h===void 0&&(h=0),this.layout.decode(y,h+this.offset)}encode(y,h,c){return c===void 0&&(c=0),this.layout.encode(y,h,c+this.offset)}}class a extends n{constructor(y,h){if(super(y,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(y,h){return h===void 0&&(h=0),y.readUIntLE(h,this.span)}encode(y,h,c){return c===void 0&&(c=0),h.writeUIntLE(y,c,this.span),this.span}}class u extends n{constructor(y,h){if(super(y,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(y,h){return h===void 0&&(h=0),y.readUIntBE(h,this.span)}encode(y,h,c){return c===void 0&&(c=0),h.writeUIntBE(y,c,this.span),this.span}}class d extends n{constructor(y,h){if(super(y,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(y,h){return h===void 0&&(h=0),y.readIntLE(h,this.span)}encode(y,h,c){return c===void 0&&(c=0),h.writeIntLE(y,c,this.span),this.span}}class _ extends n{constructor(y,h){if(super(y,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(y,h){return h===void 0&&(h=0),y.readIntBE(h,this.span)}encode(y,h,c){return c===void 0&&(c=0),h.writeIntBE(y,c,this.span),this.span}}const I=Math.pow(2,32);function x(w){const y=Math.floor(w/I),h=w-y*I;return{hi32:y,lo32:h}}function B(w,y){return w*I+y}class k extends n{constructor(y){super(8,y)}decode(y,h){h===void 0&&(h=0);const c=y.readUInt32LE(h),l=y.readUInt32LE(h+4);return B(l,c)}encode(y,h,c){c===void 0&&(c=0);const l=x(y);return h.writeUInt32LE(l.lo32,c),h.writeUInt32LE(l.hi32,c+4),8}}class C extends n{constructor(y){super(8,y)}decode(y,h){h===void 0&&(h=0);const c=y.readUInt32BE(h),l=y.readUInt32BE(h+4);return B(c,l)}encode(y,h,c){c===void 0&&(c=0);const l=x(y);return h.writeUInt32BE(l.hi32,c),h.writeUInt32BE(l.lo32,c+4),8}}class N extends n{constructor(y){super(8,y)}decode(y,h){h===void 0&&(h=0);const c=y.readUInt32LE(h),l=y.readInt32LE(h+4);return B(l,c)}encode(y,h,c){c===void 0&&(c=0);const l=x(y);return h.writeUInt32LE(l.lo32,c),h.writeInt32LE(l.hi32,c+4),8}}class v extends n{constructor(y){super(8,y)}decode(y,h){h===void 0&&(h=0);const c=y.readInt32BE(h),l=y.readUInt32BE(h+4);return B(c,l)}encode(y,h,c){c===void 0&&(c=0);const l=x(y);return h.writeInt32BE(l.hi32,c),h.writeUInt32BE(l.lo32,c+4),8}}class U extends n{constructor(y){super(4,y)}decode(y,h){return h===void 0&&(h=0),y.readFloatLE(h)}encode(y,h,c){return c===void 0&&(c=0),h.writeFloatLE(y,c),4}}class H extends n{constructor(y){super(4,y)}decode(y,h){return h===void 0&&(h=0),y.readFloatBE(h)}encode(y,h,c){return c===void 0&&(c=0),h.writeFloatBE(y,c),4}}class L extends n{constructor(y){super(8,y)}decode(y,h){return h===void 0&&(h=0),y.readDoubleLE(h)}encode(y,h,c){return c===void 0&&(c=0),h.writeDoubleLE(y,c),8}}class X extends n{constructor(y){super(8,y)}decode(y,h){return h===void 0&&(h=0),y.readDoubleBE(h)}encode(y,h,c){return c===void 0&&(c=0),h.writeDoubleBE(y,c),8}}class Z extends n{constructor(y,h,c){if(!(y instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(h instanceof r&&h.isCount()||Number.isInteger(h)&&0<=h))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let l=-1;!(h instanceof r)&&0<y.span&&(l=h*y.span),super(l,c),this.elementLayout=y,this.count=h}getSpan(y,h){if(0<=this.span)return this.span;h===void 0&&(h=0);let c=0,l=this.count;if(l instanceof r&&(l=l.decode(y,h)),0<this.elementLayout.span)c=l*this.elementLayout.span;else{let b=0;for(;b<l;)c+=this.elementLayout.getSpan(y,h+c),++b}return c}decode(y,h){h===void 0&&(h=0);const c=[];let l=0,b=this.count;for(b instanceof r&&(b=b.decode(y,h));l<b;)c.push(this.elementLayout.decode(y,h)),h+=this.elementLayout.getSpan(y,h),l+=1;return c}encode(y,h,c){c===void 0&&(c=0);const l=this.elementLayout,b=y.reduce((T,P)=>T+l.encode(P,h,c+T),0);return this.count instanceof r&&this.count.encode(y.length,h,c),b}}class Q extends n{constructor(y,h,c){if(!(Array.isArray(y)&&y.reduce((b,T)=>b&&T instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof h=="boolean"&&c===void 0&&(c=h,h=void 0);for(const b of y)if(0>b.span&&b.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let l=-1;try{l=y.reduce((b,T)=>b+T.getSpan(),0)}catch{}super(l,h),this.fields=y,this.decodePrefixes=!!c}getSpan(y,h){if(0<=this.span)return this.span;h===void 0&&(h=0);let c=0;try{c=this.fields.reduce((l,b)=>{const T=b.getSpan(y,h);return h+=T,l+T},0)}catch{throw new RangeError("indeterminate span")}return c}decode(y,h){h===void 0&&(h=0);const c=this.makeDestinationObject();for(const l of this.fields)if(l.property!==void 0&&(c[l.property]=l.decode(y,h)),h+=l.getSpan(y,h),this.decodePrefixes&&y.length===h)break;return c}encode(y,h,c){c===void 0&&(c=0);const l=c;let b=0,T=0;for(const P of this.fields){let j=P.span;if(T=0<j?j:0,P.property!==void 0){const et=y[P.property];et!==void 0&&(T=P.encode(et,h,c),0>j&&(j=P.getSpan(h,c)))}b=c,c+=j}return b+T-l}fromArray(y){const h=this.makeDestinationObject();for(const c of this.fields)c.property!==void 0&&0<y.length&&(h[c.property]=y.shift());return h}layoutFor(y){if(typeof y!="string")throw new TypeError("property must be string");for(const h of this.fields)if(h.property===y)return h}offsetOf(y){if(typeof y!="string")throw new TypeError("property must be string");let h=0;for(const c of this.fields){if(c.property===y)return h;0>c.span?h=-1:0<=h&&(h+=c.span)}}}class st{constructor(y){this.property=y}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class nt extends st{constructor(y,h){if(!(y instanceof r&&y.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(h||y.property||"variant"),this.layout=y}decode(y,h){return this.layout.decode(y,h)}encode(y,h,c){return this.layout.encode(y,h,c)}}class V extends n{constructor(y,h,c){const l=y instanceof a||y instanceof u;if(l)y=new nt(new i(y));else if(y instanceof r&&y.isCount())y=new nt(y);else if(!(y instanceof st))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(h===void 0&&(h=null),!(h===null||h instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(h!==null){if(0>h.span)throw new Error("defaultLayout must have constant span");h.property===void 0&&(h=h.replicate("content"))}let b=-1;h&&(b=h.span,0<=b&&l&&(b+=y.layout.span)),super(b,c),this.discriminator=y,this.usesPrefixDiscriminator=l,this.defaultLayout=h,this.registry={};let T=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(P){return T(P)},this.configGetSourceVariant=function(P){T=P.bind(this)}}getSpan(y,h){if(0<=this.span)return this.span;h===void 0&&(h=0);const c=this.getVariant(y,h);if(!c)throw new Error("unable to determine span for unrecognized variant");return c.getSpan(y,h)}defaultGetSourceVariant(y){if(y.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&y.hasOwnProperty(this.defaultLayout.property))return;const h=this.registry[y[this.discriminator.property]];if(h&&(!h.layout||y.hasOwnProperty(h.property)))return h}else for(const h in this.registry){const c=this.registry[h];if(y.hasOwnProperty(c.property))return c}throw new Error("unable to infer src variant")}decode(y,h){h===void 0&&(h=0);let c;const l=this.discriminator,b=l.decode(y,h);let T=this.registry[b];if(T===void 0){let P=0;T=this.defaultLayout,this.usesPrefixDiscriminator&&(P=l.layout.span),c=this.makeDestinationObject(),c[l.property]=b,c[T.property]=this.defaultLayout.decode(y,h+P)}else c=T.decode(y,h);return c}encode(y,h,c){c===void 0&&(c=0);const l=this.getSourceVariant(y);if(l===void 0){const b=this.discriminator,T=this.defaultLayout;let P=0;return this.usesPrefixDiscriminator&&(P=b.layout.span),b.encode(y[b.property],h,c),P+T.encode(y[T.property],h,c+P)}return l.encode(y,h,c)}addVariant(y,h,c){const l=new K(this,y,h,c);return this.registry[y]=l,l}getVariant(y,h){let c=y;return Buffer.isBuffer(y)&&(h===void 0&&(h=0),c=this.discriminator.decode(y,h)),this.registry[c]}}class K extends n{constructor(y,h,c,l){if(!(y instanceof V))throw new TypeError("union must be a Union");if(!Number.isInteger(h)||0>h)throw new TypeError("variant must be a (non-negative) integer");if(typeof c=="string"&&l===void 0&&(l=c,c=null),c){if(!(c instanceof n))throw new TypeError("layout must be a Layout");if(y.defaultLayout!==null&&0<=c.span&&c.span>y.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof l!="string")throw new TypeError("variant must have a String property")}let b=y.span;0>y.span&&(b=c?c.span:0,0<=b&&y.usesPrefixDiscriminator&&(b+=y.discriminator.layout.span)),super(b,l),this.union=y,this.variant=h,this.layout=c||null}getSpan(y,h){if(0<=this.span)return this.span;h===void 0&&(h=0);let c=0;return this.union.usesPrefixDiscriminator&&(c=this.union.discriminator.layout.span),c+this.layout.getSpan(y,h+c)}decode(y,h){const c=this.makeDestinationObject();if(h===void 0&&(h=0),this!==this.union.getVariant(y,h))throw new Error("variant mismatch");let l=0;return this.union.usesPrefixDiscriminator&&(l=this.union.discriminator.layout.span),this.layout?c[this.property]=this.layout.decode(y,h+l):this.property?c[this.property]=!0:this.union.usesPrefixDiscriminator&&(c[this.union.discriminator.property]=this.variant),c}encode(y,h,c){c===void 0&&(c=0);let l=0;if(this.union.usesPrefixDiscriminator&&(l=this.union.discriminator.layout.span),this.layout&&!y.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,h,c);let b=l;if(this.layout&&(this.layout.encode(y[this.property],h,c+l),b+=this.layout.getSpan(h,c+l),0<=this.union.span&&b>this.union.span))throw new Error("encoded variant overruns containing union");return b}fromArray(y){if(this.layout)return this.layout.fromArray(y)}}function q(w){return 0>w&&(w+=4294967296),w}class F extends n{constructor(y,h,c){if(!(y instanceof a||y instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof h=="string"&&c===void 0&&(c=h,h=void 0),4<y.span)throw new RangeError("word cannot exceed 32 bits");super(y.span,c),this.word=y,this.msb=!!h,this.fields=[];let l=0;this._packedSetValue=function(b){return l=q(b),this},this._packedGetValue=function(){return l}}decode(y,h){const c=this.makeDestinationObject();h===void 0&&(h=0);const l=this.word.decode(y,h);this._packedSetValue(l);for(const b of this.fields)b.property!==void 0&&(c[b.property]=b.decode(l));return c}encode(y,h,c){c===void 0&&(c=0);const l=this.word.decode(h,c);this._packedSetValue(l);for(const b of this.fields)if(b.property!==void 0){const T=y[b.property];T!==void 0&&b.encode(T)}return this.word.encode(this._packedGetValue(),h,c)}addField(y,h){const c=new E(this,y,h);return this.fields.push(c),c}addBoolean(y){const h=new o(this,y);return this.fields.push(h),h}fieldFor(y){if(typeof y!="string")throw new TypeError("property must be string");for(const h of this.fields)if(h.property===y)return h}}class E{constructor(y,h,c){if(!(y instanceof F))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(h)||0>=h)throw new TypeError("bits must be positive integer");const l=8*y.span,b=y.fields.reduce((T,P)=>T+P.bits,0);if(h+b>l)throw new Error("bits too long for span remainder ("+(l-b)+" of "+l+" remain)");this.container=y,this.bits=h,this.valueMask=(1<<h)-1,h===32&&(this.valueMask=4294967295),this.start=b,this.container.msb&&(this.start=l-b-h),this.wordMask=q(this.valueMask<<this.start),this.property=c}decode(){const y=this.container._packedGetValue();return q(y&this.wordMask)>>>this.start}encode(y){if(!Number.isInteger(y)||y!==q(y&this.valueMask))throw new TypeError(t("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const h=this.container._packedGetValue(),c=q(y<<this.start);this.container._packedSetValue(q(h&~this.wordMask)|c)}}class o extends E{constructor(y,h){super(y,1,h)}decode(y,h){return!!E.prototype.decode.call(this,y,h)}encode(y){return typeof y=="boolean"&&(y=+y),E.prototype.encode.call(this,y)}}class f extends n{constructor(y,h){if(!(y instanceof r&&y.isCount()||Number.isInteger(y)&&0<=y))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let c=-1;y instanceof r||(c=y),super(c,h),this.length=y}getSpan(y,h){let c=this.span;return 0>c&&(c=this.length.decode(y,h)),c}decode(y,h){h===void 0&&(h=0);let c=this.span;return 0>c&&(c=this.length.decode(y,h)),y.slice(h,h+c)}encode(y,h,c){let l=this.length;if(this.length instanceof r&&(l=y.length),!(Buffer.isBuffer(y)&&l===y.length))throw new TypeError(t("Blob.encode",this)+" requires (length "+l+") Buffer as src");if(c+l>h.length)throw new RangeError("encoding overruns Buffer");return h.write(y.toString("hex"),c,l,"hex"),this.length instanceof r&&this.length.encode(l,h,c),l}}class m extends n{constructor(y){super(-1,y)}getSpan(y,h){if(!Buffer.isBuffer(y))throw new TypeError("b must be a Buffer");h===void 0&&(h=0);let c=h;for(;c<y.length&&y[c]!==0;)c+=1;return 1+c-h}decode(y,h,c){h===void 0&&(h=0);let l=this.getSpan(y,h);return y.slice(h,h+l-1).toString("utf-8")}encode(y,h,c){c===void 0&&(c=0),typeof y!="string"&&(y=y.toString());const l=new Buffer(y,"utf8"),b=l.length;if(c+b>h.length)throw new RangeError("encoding overruns Buffer");return l.copy(h,c),h[c+b]=0,b+1}}class R extends n{constructor(y,h){if(typeof y=="string"&&h===void 0&&(h=y,y=void 0),y===void 0)y=-1;else if(!Number.isInteger(y))throw new TypeError("maxSpan must be an integer");super(-1,h),this.maxSpan=y}getSpan(y,h){if(!Buffer.isBuffer(y))throw new TypeError("b must be a Buffer");return h===void 0&&(h=0),y.length-h}decode(y,h,c){h===void 0&&(h=0);let l=this.getSpan(y,h);if(0<=this.maxSpan&&this.maxSpan<l)throw new RangeError("text length exceeds maxSpan");return y.slice(h,h+l).toString("utf-8")}encode(y,h,c){c===void 0&&(c=0),typeof y!="string"&&(y=y.toString());const l=new Buffer(y,"utf8"),b=l.length;if(0<=this.maxSpan&&this.maxSpan<b)throw new RangeError("text length exceeds maxSpan");if(c+b>h.length)throw new RangeError("encoding overruns Buffer");return l.copy(h,c),b}}class S extends n{constructor(y,h){super(0,h),this.value=y}decode(y,h,c){return this.value}encode(y,h,c){return 0}}return ct.ExternalLayout=r,ct.GreedyCount=s,ct.OffsetLayout=i,ct.UInt=a,ct.UIntBE=u,ct.Int=d,ct.IntBE=_,ct.Float=U,ct.FloatBE=H,ct.Double=L,ct.DoubleBE=X,ct.Sequence=Z,ct.Structure=Q,ct.UnionDiscriminator=st,ct.UnionLayoutDiscriminator=nt,ct.Union=V,ct.VariantLayout=K,ct.BitStructure=F,ct.BitField=E,ct.Boolean=o,ct.Blob=f,ct.CString=m,ct.UTF8=R,ct.Constant=S,ct.greedy=(w,y)=>new s(w,y),ct.offset=(w,y,h)=>new i(w,y,h),ct.u8=w=>new a(1,w),ct.u16=w=>new a(2,w),ct.u24=w=>new a(3,w),ct.u32=w=>new a(4,w),ct.u40=w=>new a(5,w),ct.u48=w=>new a(6,w),ct.nu64=w=>new k(w),ct.u16be=w=>new u(2,w),ct.u24be=w=>new u(3,w),ct.u32be=w=>new u(4,w),ct.u40be=w=>new u(5,w),ct.u48be=w=>new u(6,w),ct.nu64be=w=>new C(w),ct.s8=w=>new d(1,w),ct.s16=w=>new d(2,w),ct.s24=w=>new d(3,w),ct.s32=w=>new d(4,w),ct.s40=w=>new d(5,w),ct.s48=w=>new d(6,w),ct.ns64=w=>new N(w),ct.s16be=w=>new _(2,w),ct.s24be=w=>new _(3,w),ct.s32be=w=>new _(4,w),ct.s40be=w=>new _(5,w),ct.s48be=w=>new _(6,w),ct.ns64be=w=>new v(w),ct.f32=w=>new U(w),ct.f32be=w=>new H(w),ct.f64=w=>new L(w),ct.f64be=w=>new X(w),ct.struct=(w,y,h)=>new Q(w,y,h),ct.bits=(w,y,h)=>new F(w,y,h),ct.seq=(w,y,h)=>new Z(w,y,h),ct.union=(w,y,h)=>new V(w,y,h),ct.unionLayoutDiscriminator=(w,y)=>new nt(w,y),ct.blob=(w,y)=>new f(w,y),ct.cstr=w=>new m(w),ct.utf8=(w,y)=>new R(w,y),ct.const=(w,y)=>new S(w,y),ct}const vd=Fn(Ad);var ca;function kd(){return ca||(ca=1,function(n){var t=Gr&&Gr.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(n,"__esModule",{value:!0}),n.struct=n.f64=n.f32=n.i32=n.u32=n.i16=n.u16=n.i8=n.u8=void 0,n.u64=u,n.i64=d,n.u128=_,n.i128=I,n.u256=x,n.i256=B,n.publicKey=C,n.option=v,n.bool=U,n.vec=X,n.tagged=Z,n.vecU8=Q,n.str=st,n.rustEnum=nt,n.array=V,n.map=q;const e=aa(),r=vd,s=t(Es());var i=aa();Object.defineProperty(n,"u8",{enumerable:!0,get:function(){return i.u8}}),Object.defineProperty(n,"i8",{enumerable:!0,get:function(){return i.s8}}),Object.defineProperty(n,"u16",{enumerable:!0,get:function(){return i.u16}}),Object.defineProperty(n,"i16",{enumerable:!0,get:function(){return i.s16}}),Object.defineProperty(n,"u32",{enumerable:!0,get:function(){return i.u32}}),Object.defineProperty(n,"i32",{enumerable:!0,get:function(){return i.s32}}),Object.defineProperty(n,"f32",{enumerable:!0,get:function(){return i.f32}}),Object.defineProperty(n,"f64",{enumerable:!0,get:function(){return i.f64}}),Object.defineProperty(n,"struct",{enumerable:!0,get:function(){return i.struct}});class a extends e.Layout{constructor(E,o,f){super(E,f),this.blob=(0,e.blob)(E),this.signed=o}decode(E,o=0){const f=new s.default(this.blob.decode(E,o),10,"le");return this.signed?f.fromTwos(this.span*8).clone():f}encode(E,o,f=0){return this.signed&&(E=E.toTwos(this.span*8)),this.blob.encode(E.toArrayLike(Buffer,"le",this.span),o,f)}}function u(F){return new a(8,!1,F)}function d(F){return new a(8,!0,F)}function _(F){return new a(16,!1,F)}function I(F){return new a(16,!0,F)}function x(F){return new a(32,!1,F)}function B(F){return new a(32,!0,F)}class k extends e.Layout{constructor(E,o,f,m){super(E.span,m),this.layout=E,this.decoder=o,this.encoder=f}decode(E,o){return this.decoder(this.layout.decode(E,o))}encode(E,o,f){return this.layout.encode(this.encoder(E),o,f)}getSpan(E,o){return this.layout.getSpan(E,o)}}function C(F){return new k((0,e.blob)(32),E=>new r.PublicKey(E),E=>E.toBuffer(),F)}class N extends e.Layout{constructor(E,o){super(-1,o),this.layout=E,this.discriminator=(0,e.u8)()}encode(E,o,f=0){return E==null?this.discriminator.encode(0,o,f):(this.discriminator.encode(1,o,f),this.layout.encode(E,o,f+1)+1)}decode(E,o=0){const f=this.discriminator.decode(E,o);if(f===0)return null;if(f===1)return this.layout.decode(E,o+1);throw new Error("Invalid option "+this.property)}getSpan(E,o=0){const f=this.discriminator.decode(E,o);if(f===0)return 1;if(f===1)return this.layout.getSpan(E,o+1)+1;throw new Error("Invalid option "+this.property)}}function v(F,E){return new N(F,E)}function U(F){return new k((0,e.u8)(),H,L,F)}function H(F){if(F===0)return!1;if(F===1)return!0;throw new Error("Invalid bool: "+F)}function L(F){return F?1:0}function X(F,E){const o=(0,e.u32)("length"),f=(0,e.struct)([o,(0,e.seq)(F,(0,e.offset)(o,-o.span),"values")]);return new k(f,({values:m})=>m,m=>({values:m}),E)}function Z(F,E,o){const f=(0,e.struct)([u("tag"),E.replicate("data")]);function m({tag:R,data:S}){if(!R.eq(F))throw new Error("Invalid tag, expected: "+F.toString("hex")+", got: "+R.toString("hex"));return S}return new k(f,m,R=>({tag:F,data:R}),o)}function Q(F){const E=(0,e.u32)("length"),o=(0,e.struct)([E,(0,e.blob)((0,e.offset)(E,-E.span),"data")]);return new k(o,({data:f})=>f,f=>({data:f}),F)}function st(F){return new k(Q(),E=>E.toString("utf-8"),E=>Buffer.from(E,"utf-8"),F)}function nt(F,E,o){const f=(0,e.union)(o??(0,e.u8)(),E);return F.forEach((m,R)=>f.addVariant(R,m,m.property)),f}function V(F,E,o){const f=(0,e.struct)([(0,e.seq)(F,E,"values")]);return new k(f,({values:m})=>m,m=>({values:m}),o)}class K extends e.Layout{constructor(E,o,f){super(E.span+o.span,f),this.keyLayout=E,this.valueLayout=o}decode(E,o){o=o||0;const f=this.keyLayout.decode(E,o),m=this.valueLayout.decode(E,o+this.keyLayout.getSpan(E,o));return[f,m]}encode(E,o,f){f=f||0;const m=this.keyLayout.encode(E[0],o,f),R=this.valueLayout.encode(E[1],o,f+m);return m+R}getSpan(E,o){return this.keyLayout.getSpan(E,o)+this.valueLayout.getSpan(E,o)}}function q(F,E,o){const f=(0,e.u32)("length"),m=(0,e.struct)([f,(0,e.seq)(new K(F,E),(0,e.offset)(f,-f.span),"values")]);return new k(m,({values:R})=>new Map(R),R=>({values:Array.from(R.entries())}),o)}}(Gr)),Gr}var ve=kd();function qr(n){let t=n.length;for(;--t>=0;)n[t]=0}const xd=3,Td=258,Rc=29,Od=256,Bd=Od+1+Rc,Sc=30,Nd=512,Cd=new Array((Bd+2)*2);qr(Cd);const Md=new Array(Sc*2);qr(Md);const Ld=new Array(Nd);qr(Ld);const Pd=new Array(Td-xd+1);qr(Pd);const Ud=new Array(Rc);qr(Ud);const Dd=new Array(Sc);qr(Dd);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const ws=new Uint8Array(256);for(let n=0;n<256;n++)ws[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;ws[254]=ws[254]=1;var Yi={exports:{}},ua;function Fd(){return ua||(ua=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(d,_,I){this.fn=d,this.context=_,this.once=I||!1}function i(d,_,I,x,B){if(typeof I!="function")throw new TypeError("The listener must be a function");var k=new s(I,x||d,B),C=e?e+_:_;return d._events[C]?d._events[C].fn?d._events[C]=[d._events[C],k]:d._events[C].push(k):(d._events[C]=k,d._eventsCount++),d}function a(d,_){--d._eventsCount===0?d._events=new r:delete d._events[_]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var _=[],I,x;if(this._eventsCount===0)return _;for(x in I=this._events)t.call(I,x)&&_.push(e?x.slice(1):x);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(I)):_},u.prototype.listeners=function(_){var I=e?e+_:_,x=this._events[I];if(!x)return[];if(x.fn)return[x.fn];for(var B=0,k=x.length,C=new Array(k);B<k;B++)C[B]=x[B].fn;return C},u.prototype.listenerCount=function(_){var I=e?e+_:_,x=this._events[I];return x?x.fn?1:x.length:0},u.prototype.emit=function(_,I,x,B,k,C){var N=e?e+_:_;if(!this._events[N])return!1;var v=this._events[N],U=arguments.length,H,L;if(v.fn){switch(v.once&&this.removeListener(_,v.fn,void 0,!0),U){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,I),!0;case 3:return v.fn.call(v.context,I,x),!0;case 4:return v.fn.call(v.context,I,x,B),!0;case 5:return v.fn.call(v.context,I,x,B,k),!0;case 6:return v.fn.call(v.context,I,x,B,k,C),!0}for(L=1,H=new Array(U-1);L<U;L++)H[L-1]=arguments[L];v.fn.apply(v.context,H)}else{var X=v.length,Z;for(L=0;L<X;L++)switch(v[L].once&&this.removeListener(_,v[L].fn,void 0,!0),U){case 1:v[L].fn.call(v[L].context);break;case 2:v[L].fn.call(v[L].context,I);break;case 3:v[L].fn.call(v[L].context,I,x);break;case 4:v[L].fn.call(v[L].context,I,x,B);break;default:if(!H)for(Z=1,H=new Array(U-1);Z<U;Z++)H[Z-1]=arguments[Z];v[L].fn.apply(v[L].context,H)}}return!0},u.prototype.on=function(_,I,x){return i(this,_,I,x,!1)},u.prototype.once=function(_,I,x){return i(this,_,I,x,!0)},u.prototype.removeListener=function(_,I,x,B){var k=e?e+_:_;if(!this._events[k])return this;if(!I)return a(this,k),this;var C=this._events[k];if(C.fn)C.fn===I&&(!B||C.once)&&(!x||C.context===x)&&a(this,k);else{for(var N=0,v=[],U=C.length;N<U;N++)(C[N].fn!==I||B&&!C[N].once||x&&C[N].context!==x)&&v.push(C[N]);v.length?this._events[k]=v.length===1?v[0]:v:a(this,k)}return this},u.prototype.removeAllListeners=function(_){var I;return _?(I=e?e+_:_,this._events[I]&&a(this,I)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,n.exports=u}(Yi)),Yi.exports}Fd();ve.struct([ve.publicKey("authority"),ve.vecU8("data")]);class Hd extends TypeError{constructor(t,e){let r;const{message:s,...i}=t,{path:a}=t,u=a.length===0?s:"At path: "+a.join(".")+" -- "+s;super(u),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var d;return(d=r)!=null?d:r=[t,...e()]}}}function zd(n){return Br(n)&&typeof n[Symbol.iterator]=="function"}function Br(n){return typeof n=="object"&&n!=null}function hr(n){return typeof n=="string"?JSON.stringify(n):""+n}function Kd(n){const{done:t,value:e}=n.next();return t?void 0:e}function qd(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:a}=e,{refinement:u,message:d="Expected a value of type `"+a+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+hr(r)+"`"}=n;return{value:r,type:a,refinement:u,key:s[s.length-1],path:s,branch:i,...n,message:d}}function*la(n,t,e,r){zd(n)||(n=[n]);for(const s of n){const i=qd(s,t,e,r);i&&(yield i)}}function*Ys(n,t,e){e===void 0&&(e={});const{path:r=[],branch:s=[n],coerce:i=!1,mask:a=!1}=e,u={path:r,branch:s};if(i&&(n=t.coercer(n,u),a&&t.type!=="type"&&Br(t.schema)&&Br(n)&&!Array.isArray(n)))for(const _ in n)t.schema[_]===void 0&&delete n[_];let d=!0;for(const _ of t.validator(n,u))d=!1,yield[_,void 0];for(let[_,I,x]of t.entries(n,u)){const B=Ys(I,x,{path:_===void 0?r:[...r,_],branch:_===void 0?s:[...s,I],coerce:i,mask:a});for(const k of B)k[0]?(d=!1,yield[k[0],void 0]):i&&(I=k[1],_===void 0?n=I:n instanceof Map?n.set(_,I):n instanceof Set?n.add(I):Br(n)&&(n[_]=I))}if(d)for(const _ of t.refiner(n,u))d=!1,yield[_,void 0];d&&(yield[void 0,n])}class fr{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:s,refiner:i,coercer:a=d=>d,entries:u=function*(){}}=t;this.type=e,this.schema=r,this.entries=u,this.coercer=a,s?this.validator=(d,_)=>{const I=s(d,_);return la(I,_,this,d)}:this.validator=()=>[],i?this.refiner=(d,_)=>{const I=i(d,_);return la(I,_,this,d)}:this.refiner=()=>[]}assert(t){return Wd(t,this)}create(t){return Ac(t,this)}is(t){return Ic(t,this)}mask(t){return $d(t,this)}validate(t,e){return e===void 0&&(e={}),un(t,this,e)}}function Wd(n,t){const e=un(n,t);if(e[0])throw e[0]}function Ac(n,t){const e=un(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function $d(n,t){const e=un(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Ic(n,t){return!un(n,t)[0]}function un(n,t,e){e===void 0&&(e={});const r=Ys(n,t,e),s=Kd(r);return s[0]?[new Hd(s[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function ln(n,t){return new fr({type:n,schema:null,validator:t})}function Vd(){return ln("any",()=>!0)}function Zi(n){return new fr({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+hr(t)}})}function Gd(){return ln("boolean",n=>typeof n=="boolean")}function ha(n){const t=hr(n);return new fr({type:"literal",schema:n,validator(e){return e===n||"Expected the literal `"+t+"`, but received: "+hr(e)}})}function bn(n){return new fr({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function An(){return ln("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+hr(n))}function In(n){return new fr({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function wr(){return ln("string",n=>typeof n=="string"||"Expected a string, but received: "+hr(n))}function lr(n){const t=Object.keys(n);return new fr({type:"type",schema:n,*entries(e){if(Br(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Br(e)||"Expected an object, but received: "+hr(e)}})}function vc(n){const t=n.map(e=>e.type).join(" | ");return new fr({type:"union",schema:null,coercer(e,r){return(n.find(i=>{const[a]=i.validate(e,{coerce:!0});return!a})||Zs()).coercer(e,r)},validator(e,r){const s=[];for(const i of n){const[...a]=Ys(e,i,r),[u]=a;if(u[0])for(const[d]of a)d&&s.push(d);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+hr(e),...s]}})}function Zs(){return ln("unknown",()=>!0)}function jd(n,t,e){return new fr({...n,coercer:(r,s)=>Ic(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}function Yd(n){return jd(kc(n),Zd,t=>"error"in t?t:{...t,result:Ac(t.result,n)})}const Zd=kc(Zs());function kc(n){return vc([lr({jsonrpc:ha("2.0"),id:wr(),result:n}),lr({jsonrpc:ha("2.0"),id:wr(),error:lr({code:Zs(),message:wr(),data:In(Vd())})})])}function Xd(n){return Yd(lr({context:lr({slot:An()}),value:n}))}Xd(lr({err:bn(vc([lr({}),wr()])),logs:bn(Zi(wr())),accounts:In(bn(Zi(bn(lr({executable:Gd(),owner:wr(),lamports:An(),data:Zi(wr()),rentEpoch:In(An())}))))),unitsConsumed:In(An())}));var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$={};Object.defineProperty($,"__esModule",{value:!0});$.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=$.ANCHOR_ERROR__REQUIRE_VIOLATED=$.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=$.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=$.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=$.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=$.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=$.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=$.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=$.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=$.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=$.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=$.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=$.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=$.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=$.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=$.ANCHOR_ERROR__CONSTRAINT_SPACE=$.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=$.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=$.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=$.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=$.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=$.ANCHOR_ERROR__CONSTRAINT_ZERO=$.ANCHOR_ERROR__CONSTRAINT_ADDRESS=$.ANCHOR_ERROR__CONSTRAINT_CLOSE=$.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=$.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=$.ANCHOR_ERROR__CONSTRAINT_STATE=$.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=$.ANCHOR_ERROR__CONSTRAINT_SEEDS=$.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=$.ANCHOR_ERROR__CONSTRAINT_OWNER=$.ANCHOR_ERROR__CONSTRAINT_RAW=$.ANCHOR_ERROR__CONSTRAINT_SIGNER=$.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=$.ANCHOR_ERROR__CONSTRAINT_MUT=$.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=$.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=$.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=$.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=$.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=$.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=$.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=$.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0;$.ANCHOR_ERROR__DEPRECATED=$.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=$.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=$.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=$.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=$.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=$.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=$.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=$.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=$.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=$.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=$.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=$.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=$.ANCHOR_ERROR__INVALID_PROGRAM_ID=$.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=$.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=$.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=$.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=$.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=$.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=$.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=$.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=$.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=$.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=$.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=$.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=$.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0;$.ANCHOR_ERROR__INSTRUCTION_MISSING=100;$.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101;$.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102;$.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103;$.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3;$.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001;$.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002;$.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500;$.ANCHOR_ERROR__CONSTRAINT_MUT=2e3;$.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001;$.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002;$.ANCHOR_ERROR__CONSTRAINT_RAW=2003;$.ANCHOR_ERROR__CONSTRAINT_OWNER=2004;$.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005;$.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006;$.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007;$.ANCHOR_ERROR__CONSTRAINT_STATE=2008;$.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009;$.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010;$.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011;$.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012;$.ANCHOR_ERROR__CONSTRAINT_ZERO=2013;$.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014;$.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015;$.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016;$.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017;$.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018;$.ANCHOR_ERROR__CONSTRAINT_SPACE=2019;$.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020;$.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021;$.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022;$.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023;$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024;$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025;$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026;$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027;$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028;$.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029;$.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030;$.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031;$.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032;$.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033;$.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034;$.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035;$.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036;$.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037;$.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038;$.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039;$.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;$.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;$.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502;$.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503;$.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504;$.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505;$.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506;$.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3;$.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001;$.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002;$.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003;$.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004;$.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005;$.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006;$.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007;$.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008;$.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009;$.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010;$.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011;$.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012;$.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013;$.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014;$.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015;$.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016;$.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017;$.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100;$.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101;$.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;$.ANCHOR_ERROR__DEPRECATED=5e3;class Oe{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var ei=Oe;function Qd(n,t){return t.property?n+"["+t.property+"]":n}class br extends Oe{isCount(){throw new Error("ExternalLayout is abstract")}}class xc extends br{constructor(t,e,r){if(!(t instanceof Oe))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof ri||this.layout instanceof Tc}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return r===void 0&&(r=0),this.layout.encode(t,e,r+this.offset)}}class ri extends Oe{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntLE(t,r,this.span),this.span}}class Tc extends Oe{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntBE(t,r,this.span),this.span}}const bs=Math.pow(2,32);function Oc(n){const t=Math.floor(n/bs),e=n-t*bs;return{hi32:t,lo32:e}}function Bc(n,t){return n*bs+t}class t0 extends Oe{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),s=t.readUInt32LE(e+4);return Bc(s,r)}encode(t,e,r){r===void 0&&(r=0);const s=Oc(t);return e.writeUInt32LE(s.lo32,r),e.writeUInt32LE(s.hi32,r+4),8}}class e0 extends Oe{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),s=t.readInt32LE(e+4);return Bc(s,r)}encode(t,e,r){r===void 0&&(r=0);const s=Oc(t);return e.writeUInt32LE(s.lo32,r),e.writeInt32LE(s.hi32,r+4),8}}class r0 extends Oe{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,a)=>i&&a instanceof Oe,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,a)=>i+a.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((s,i)=>{const a=i.getSpan(t,e);return e+=a,s+a},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){r===void 0&&(r=0);const s=r;let i=0,a=0;for(const u of this.fields){let d=u.span;if(a=0<d?d:0,u.property!==void 0){const _=t[u.property];_!==void 0&&(a=u.encode(_,e,r),0>d&&(d=u.getSpan(e,r)))}i=r,r+=d}return i+a-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class Nc{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class fa extends Nc{constructor(t,e){if(!(t instanceof br&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class Cc extends Oe{constructor(t,e,r){const s=t instanceof ri||t instanceof Tc;if(s)t=new fa(new xc(t));else if(t instanceof br&&t.isCount())t=new fa(t);else if(!(t instanceof Nc))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Oe))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&s&&(i+=t.layout.span)),super(i,r),this.discriminator=t,this.usesPrefixDiscriminator=s,this.defaultLayout=e,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return a(u)},this.configGetSourceVariant=function(u){a=u.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let r;const s=this.discriminator,i=s.decode(t,e);let a=this.registry[i];if(a===void 0){let u=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(u=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[a.property]=this.defaultLayout.decode(t,e+u)}else r=a.decode(t,e);return r}encode(t,e,r){r===void 0&&(r=0);const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,a=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=i.layout.span),i.encode(t[i.property],e,r),u+a.encode(t[a.property],e,r+u)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new n0(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e){let r=t;return Buffer.isBuffer(t)&&(e===void 0&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}}class n0 extends Oe{constructor(t,e,r,s){if(!(t instanceof Cc))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof Oe))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){r===void 0&&(r=0);let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class i0 extends Oe{constructor(t,e){if(!(t instanceof br&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof br||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof br&&(s=t.length),!(Buffer.isBuffer(t)&&s===t.length))throw new TypeError(Qd("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,s,"hex"),this.length instanceof br&&this.length.encode(s,e,r),s}}var s0=(n,t,e)=>new xc(n,t,e),o0=n=>new ri(1,n),er=n=>new ri(4,n),a0=n=>new t0(n),rr=n=>new e0(n),de=(n,t,e)=>new r0(n,t,e),Mc=(n,t,e)=>new Cc(n,t,e),hn=(n,t)=>new i0(n,t);class c0 extends ei{constructor(t){super(-1,t),this.property=t,this.layout=de([er("length"),er("lengthPadding"),hn(s0(er(),-8),"chars")],this.property)}encode(t,e,r=0){if(t==null)return this.layout.span;const s={chars:Buffer.from(t,"utf8")};return this.layout.encode(s,e,r)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return er().span+er().span+new Zr(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function ni(n){return new c0(n)}function Me(n){return hn(32,n)}const Ce=Mc(er("instruction"));Ce.addVariant(0,de([rr("lamports"),rr("space"),Me("owner")]),"createAccount");Ce.addVariant(1,de([Me("owner")]),"assign");Ce.addVariant(2,de([rr("lamports")]),"transfer");Ce.addVariant(3,de([Me("base"),ni("seed"),rr("lamports"),rr("space"),Me("owner")]),"createAccountWithSeed");Ce.addVariant(4,de([Me("authorized")]),"advanceNonceAccount");Ce.addVariant(5,de([rr("lamports")]),"withdrawNonceAccount");Ce.addVariant(6,de([Me("authorized")]),"initializeNonceAccount");Ce.addVariant(7,de([Me("authorized")]),"authorizeNonceAccount");Ce.addVariant(8,de([rr("space")]),"allocate");Ce.addVariant(9,de([Me("base"),ni("seed"),rr("space"),Me("owner")]),"allocateWithSeed");Ce.addVariant(10,de([Me("base"),ni("seed"),Me("owner")]),"assignWithSeed");Ce.addVariant(11,de([rr("lamports"),ni("seed"),Me("owner")]),"transferWithSeed");Math.max(...Object.values(Ce.registry).map(n=>n.span));class u0 extends ei{constructor(t,e,r,s){super(t.span,s),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}function da(n){return new u0(hn(32),t=>new tt(t),t=>t.toBuffer(),n)}de([er("version"),er("state"),da("authorizedPubkey"),da("nonce"),de([a0("lamportsPerSignature")],"feeCalculator")]);new tt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new tt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var pa={exports:{}};(function(n,t){var e=typeof self<"u"?self:Jd,r=function(){function i(){this.fetch=!1,this.DOMException=e.DOMException}return i.prototype=e,new i}();(function(i){(function(a){var u={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function d(o){return o&&DataView.prototype.isPrototypeOf(o)}if(u.arrayBuffer)var _=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],I=ArrayBuffer.isView||function(o){return o&&_.indexOf(Object.prototype.toString.call(o))>-1};function x(o){if(typeof o!="string"&&(o=String(o)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(o))throw new TypeError("Invalid character in header field name");return o.toLowerCase()}function B(o){return typeof o!="string"&&(o=String(o)),o}function k(o){var f={next:function(){var m=o.shift();return{done:m===void 0,value:m}}};return u.iterable&&(f[Symbol.iterator]=function(){return f}),f}function C(o){this.map={},o instanceof C?o.forEach(function(f,m){this.append(m,f)},this):Array.isArray(o)?o.forEach(function(f){this.append(f[0],f[1])},this):o&&Object.getOwnPropertyNames(o).forEach(function(f){this.append(f,o[f])},this)}C.prototype.append=function(o,f){o=x(o),f=B(f);var m=this.map[o];this.map[o]=m?m+", "+f:f},C.prototype.delete=function(o){delete this.map[x(o)]},C.prototype.get=function(o){return o=x(o),this.has(o)?this.map[o]:null},C.prototype.has=function(o){return this.map.hasOwnProperty(x(o))},C.prototype.set=function(o,f){this.map[x(o)]=B(f)},C.prototype.forEach=function(o,f){for(var m in this.map)this.map.hasOwnProperty(m)&&o.call(f,this.map[m],m,this)},C.prototype.keys=function(){var o=[];return this.forEach(function(f,m){o.push(m)}),k(o)},C.prototype.values=function(){var o=[];return this.forEach(function(f){o.push(f)}),k(o)},C.prototype.entries=function(){var o=[];return this.forEach(function(f,m){o.push([m,f])}),k(o)},u.iterable&&(C.prototype[Symbol.iterator]=C.prototype.entries);function N(o){if(o.bodyUsed)return Promise.reject(new TypeError("Already read"));o.bodyUsed=!0}function v(o){return new Promise(function(f,m){o.onload=function(){f(o.result)},o.onerror=function(){m(o.error)}})}function U(o){var f=new FileReader,m=v(f);return f.readAsArrayBuffer(o),m}function H(o){var f=new FileReader,m=v(f);return f.readAsText(o),m}function L(o){for(var f=new Uint8Array(o),m=new Array(f.length),R=0;R<f.length;R++)m[R]=String.fromCharCode(f[R]);return m.join("")}function X(o){if(o.slice)return o.slice(0);var f=new Uint8Array(o.byteLength);return f.set(new Uint8Array(o)),f.buffer}function Z(){return this.bodyUsed=!1,this._initBody=function(o){this._bodyInit=o,o?typeof o=="string"?this._bodyText=o:u.blob&&Blob.prototype.isPrototypeOf(o)?this._bodyBlob=o:u.formData&&FormData.prototype.isPrototypeOf(o)?this._bodyFormData=o:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(o)?this._bodyText=o.toString():u.arrayBuffer&&u.blob&&d(o)?(this._bodyArrayBuffer=X(o.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(o)||I(o))?this._bodyArrayBuffer=X(o):this._bodyText=o=Object.prototype.toString.call(o):this._bodyText="",this.headers.get("content-type")||(typeof o=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(o)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var o=N(this);if(o)return o;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?N(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(U)}),this.text=function(){var o=N(this);if(o)return o;if(this._bodyBlob)return H(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(L(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}var Q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function st(o){var f=o.toUpperCase();return Q.indexOf(f)>-1?f:o}function nt(o,f){f=f||{};var m=f.body;if(o instanceof nt){if(o.bodyUsed)throw new TypeError("Already read");this.url=o.url,this.credentials=o.credentials,f.headers||(this.headers=new C(o.headers)),this.method=o.method,this.mode=o.mode,this.signal=o.signal,!m&&o._bodyInit!=null&&(m=o._bodyInit,o.bodyUsed=!0)}else this.url=String(o);if(this.credentials=f.credentials||this.credentials||"same-origin",(f.headers||!this.headers)&&(this.headers=new C(f.headers)),this.method=st(f.method||this.method||"GET"),this.mode=f.mode||this.mode||null,this.signal=f.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&m)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(m)}nt.prototype.clone=function(){return new nt(this,{body:this._bodyInit})};function V(o){var f=new FormData;return o.trim().split("&").forEach(function(m){if(m){var R=m.split("="),S=R.shift().replace(/\+/g," "),w=R.join("=").replace(/\+/g," ");f.append(decodeURIComponent(S),decodeURIComponent(w))}}),f}function K(o){var f=new C,m=o.replace(/\r?\n[\t ]+/g," ");return m.split(/\r?\n/).forEach(function(R){var S=R.split(":"),w=S.shift().trim();if(w){var y=S.join(":").trim();f.append(w,y)}}),f}Z.call(nt.prototype);function q(o,f){f||(f={}),this.type="default",this.status=f.status===void 0?200:f.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in f?f.statusText:"OK",this.headers=new C(f.headers),this.url=f.url||"",this._initBody(o)}Z.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},q.error=function(){var o=new q(null,{status:0,statusText:""});return o.type="error",o};var F=[301,302,303,307,308];q.redirect=function(o,f){if(F.indexOf(f)===-1)throw new RangeError("Invalid status code");return new q(null,{status:f,headers:{location:o}})},a.DOMException=i.DOMException;try{new a.DOMException}catch{a.DOMException=function(f,m){this.message=f,this.name=m;var R=Error(f);this.stack=R.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function E(o,f){return new Promise(function(m,R){var S=new nt(o,f);if(S.signal&&S.signal.aborted)return R(new a.DOMException("Aborted","AbortError"));var w=new XMLHttpRequest;function y(){w.abort()}w.onload=function(){var h={status:w.status,statusText:w.statusText,headers:K(w.getAllResponseHeaders()||"")};h.url="responseURL"in w?w.responseURL:h.headers.get("X-Request-URL");var c="response"in w?w.response:w.responseText;m(new q(c,h))},w.onerror=function(){R(new TypeError("Network request failed"))},w.ontimeout=function(){R(new TypeError("Network request failed"))},w.onabort=function(){R(new a.DOMException("Aborted","AbortError"))},w.open(S.method,S.url,!0),S.credentials==="include"?w.withCredentials=!0:S.credentials==="omit"&&(w.withCredentials=!1),"responseType"in w&&u.blob&&(w.responseType="blob"),S.headers.forEach(function(h,c){w.setRequestHeader(c,h)}),S.signal&&(S.signal.addEventListener("abort",y),w.onreadystatechange=function(){w.readyState===4&&S.signal.removeEventListener("abort",y)}),w.send(typeof S._bodyInit>"u"?null:S._bodyInit)})}return E.polyfill=!0,i.fetch||(i.fetch=E,i.Headers=C,i.Request=nt,i.Response=q),a.Headers=C,a.Request=nt,a.Response=q,a.fetch=E,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,n.exports=t})(pa,pa.exports);ve.rustEnum([ve.struct([],"uninitialized"),ve.struct([ve.option(ve.publicKey(),"authorityAddress")],"buffer"),ve.struct([ve.publicKey("programdataAddress")],"program"),ve.struct([ve.u64("slot"),ve.option(ve.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,ve.u32());function Xi(n){return new Lc(hn(8),t=>Xs.fromBuffer(t),t=>t.toBuffer(),n)}function _n(n){return new Lc(hn(32),t=>new tt(t),t=>t.toBuffer(),n)}function Ji(n,t){return new l0(n,t)}class Lc extends ei{constructor(t,e,r,s){super(t.span,s),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}class l0 extends ei{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=er()}encode(t,e,r=0){return t==null?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(t,e,r+4)+4)}decode(t,e=0){const r=this.discriminator.decode(t,e);if(r===0)return null;if(r===1)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}class Xs extends Zr{toBuffer(){const t=super.toArray().reverse(),e=Buffer.from(t);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const r=Buffer.alloc(8);return e.copy(r),r}static fromBuffer(t){if(t.length!==8)throw new Error(`Invalid buffer length: ${t.length}`);return new Xs([...t].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}}de([_n("mint"),_n("owner"),Xi("amount"),Ji(_n(),"delegate"),(n=>{const t=Mc(o0("discriminator"),null,n);return t.addVariant(0,de([]),"uninitialized"),t.addVariant(1,de([]),"initialized"),t.addVariant(2,de([]),"frozen"),t})("state"),Ji(Xi(),"isNative"),Xi("delegatedAmount"),Ji(_n(),"closeAuthority")]);new tt("11111111111111111111111111111111");window.Buffer=ht.Buffer;const h0="https://api.devnet.solana.com",f0="ECQscJgjuLRXbPaYivPLjTJvqaF1LGWPNJp8LPGP5bKH",d0="aggregator_v2";let Qi=new tt(f0);const ts=document.getElementById("program-id"),p0=document.getElementById("aggregator-pda"),_s=document.getElementById("refresh-button"),ya=document.getElementById("loading-indicator"),Un=document.getElementById("error-message"),Ye=document.getElementById("token-table-body"),y0=document.getElementById("last-updated");function g0(n){Un.textContent=`Error: ${n}`,Un.style.display="block",console.error(n)}function m0(){Un.textContent="",Un.style.display="none"}function ga(n,t,e="devnet"){n.innerHTML="";const r=document.createElement("a");r.href=`https://solscan.io/account/${t}?cluster=${e}`,r.textContent=t,r.target="_blank",r.rel="noopener noreferrer",n.appendChild(r)}function es(n){const t=ht.Buffer.from(n),e=t.indexOf(0),r=e===-1?t:t.subarray(0,e);return new TextDecoder("utf-8").decode(r)}async function rs(){console.log("Attempting to fetch data..."),m0(),ya.style.display="inline",_s.disabled=!0;try{const n=new gc(h0,"confirmed");(!ts.hasChildNodes()||ts.textContent==="Loading...")&&ga(ts,Qi.toBase58(),"devnet");const[t]=await tt.findProgramAddressSync([ht.Buffer.from(d0)],Qi);ga(p0,t.toBase58(),"devnet"),console.log(`Aggregator PDA: ${t.toBase58()}`);const e=await n.getAccountInfo(t);if(!e)throw Ye.innerHTML='<tr><td colspan="5">Aggregator account not found.</td></tr>',new Error(`Aggregator account (${t.toBase58()}) not found. Has it been initialized?`);if(e.owner.toBase58()!==Qi.toBase58())throw Ye.innerHTML='<tr><td colspan="5">Account owner mismatch.</td></tr>',new Error(`Account owner (${e.owner.toBase58()}) does not match program ID.`);console.log("Account data fetched, attempting to decode..."),Ye.innerHTML='<tr><td colspan="5">Decoding data...</td></tr>';const r=e.data.subarray(0,8);console.log(`Discriminator (hex): ${r.toString("hex")}`);const s=8,i=new tt(e.data.subarray(s,s+32)),a=s+32,u=e.data.readUInt32LE(a),d=a+4,_=e.data.readUInt32LE(d);console.log(`Decoded Header: Authority=${i.toBase58()}, TotalTokens=${u}, VecLen=${_}`),_!==u&&console.warn(`Warning: Decoded vector length (${_}) does not match totalTokens field (${u}). Using vecLen.`);let x=d+4;const B=[],k=146;for(let C=0;C<_;C++){if(x+k>e.data.length)throw new Error(`Buffer overflow detected while reading token ${C+1}. Expected size ${k}, remaining buffer ${e.data.length-x}`);const N=e.data.subarray(x,x+k),v=N.subarray(0,10),U=new Zr(N.subarray(10,18),"le"),H=N.subarray(18,82),L=N.subarray(82,146);B.push({symbol:es(v),dominance:U.toString(),address:es(H),priceFeedId:es(L),authority:i.toBase58()}),x+=k}console.log(`Successfully decoded ${B.length} tokens.`),Ye.innerHTML="",B.length===0?Ye.innerHTML='<tr><td colspan="5">No token data found in the aggregator account.</td></tr>':B.forEach((C,N)=>{const v=Ye.insertRow();v.insertCell(0).textContent=N+1,v.insertCell(1).textContent=C.symbol;try{const Z=parseFloat(C.dominance)/1e10*100;v.insertCell(2).textContent=Z.toFixed(2)+"%"}catch(X){console.error(`Error calculating dominance for token ${C.symbol}:`,X),v.insertCell(2).textContent="Error"}const U=v.insertCell(3),H=document.createElement("a");H.href=`https://solscan.io/token/${C.address}?cluster=mainnet`,H.textContent=C.address,H.target="_blank",H.rel="noopener noreferrer",U.appendChild(H);const L=v.insertCell(4);L.textContent=C.priceFeedId}),y0.textContent=new Date().toLocaleString()}catch(n){console.error("Failed to fetch or display data:",n),g0(n.message||"An unknown error occurred."),(Ye.innerHTML.includes("Decoding data...")||Ye.innerHTML==="")&&(Ye.innerHTML=`<tr><td colspan="5">Error loading data: ${n.message}</td></tr>`)}finally{ya.style.display="none",_s.disabled=!1}}document.addEventListener("DOMContentLoaded",()=>{console.log("DOM Loaded."),_s.addEventListener("click",rs),rs();const n=5*60*1e3;setInterval(rs,n),console.log(`Auto-refresh enabled every ${n/1e3/60} minutes.`)});
